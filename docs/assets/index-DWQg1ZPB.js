const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browserAll-CjTFmBRU.js","./webworkerAll-DjkEIM6n.js","./colorToUniform-CmvTaFT4.js","./WebGPURenderer-KE_1Aokb.js","./SharedSystems-DzqyQ1kQ.js","./WebGLRenderer-BQ75DLOU.js"])))=>i.map(i=>d[i]);
function V1(r,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function ja(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rh={exports:{}},ua={};var Dg;function X1(){if(Dg)return ua;Dg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var h in o)h!=="key"&&(l[h]=o[h])}else l=o;return o=l.ref,{$$typeof:r,type:s,key:u,ref:o!==void 0?o:null,props:l}}return ua.Fragment=t,ua.jsx=n,ua.jsxs=n,ua}var Og;function q1(){return Og||(Og=1,rh.exports=X1()),rh.exports}var $=q1(),ah={},ha={},zg;function $1(){if(zg)return ha;zg=1,ha.byteLength=h,ha.toByteArray=m,ha.fromByteArray=S;for(var r=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],t[s.charCodeAt(o)]=o;t[45]=62,t[95]=63;function u(_){var T=_.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=_.indexOf("=");E===-1&&(E=T);var M=E===T?0:4-E%4;return[E,M]}function h(_){var T=u(_),E=T[0],M=T[1];return(E+M)*3/4-M}function d(_,T,E){return(T+E)*3/4-E}function m(_){var T,E=u(_),M=E[0],R=E[1],B=new n(d(_,M,R)),O=0,P=R>0?M-4:M,Z;for(Z=0;Z<P;Z+=4)T=t[_.charCodeAt(Z)]<<18|t[_.charCodeAt(Z+1)]<<12|t[_.charCodeAt(Z+2)]<<6|t[_.charCodeAt(Z+3)],B[O++]=T>>16&255,B[O++]=T>>8&255,B[O++]=T&255;return R===2&&(T=t[_.charCodeAt(Z)]<<2|t[_.charCodeAt(Z+1)]>>4,B[O++]=T&255),R===1&&(T=t[_.charCodeAt(Z)]<<10|t[_.charCodeAt(Z+1)]<<4|t[_.charCodeAt(Z+2)]>>2,B[O++]=T>>8&255,B[O++]=T&255),B}function g(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function y(_,T,E){for(var M,R=[],B=T;B<E;B+=3)M=(_[B]<<16&16711680)+(_[B+1]<<8&65280)+(_[B+2]&255),R.push(g(M));return R.join("")}function S(_){for(var T,E=_.length,M=E%3,R=[],B=16383,O=0,P=E-M;O<P;O+=B)R.push(y(_,O,O+B>P?P:O+B));return M===1?(T=_[E-1],R.push(r[T>>2]+r[T<<4&63]+"==")):M===2&&(T=(_[E-2]<<8)+_[E-1],R.push(r[T>>10]+r[T>>4&63]+r[T<<2&63]+"=")),R.join("")}return ha}var rl={};var Ug;function Q1(){return Ug||(Ug=1,rl.read=function(r,t,n,s,o){var l,u,h=o*8-s-1,d=(1<<h)-1,m=d>>1,g=-7,y=n?o-1:0,S=n?-1:1,_=r[t+y];for(y+=S,l=_&(1<<-g)-1,_>>=-g,g+=h;g>0;l=l*256+r[t+y],y+=S,g-=8);for(u=l&(1<<-g)-1,l>>=-g,g+=s;g>0;u=u*256+r[t+y],y+=S,g-=8);if(l===0)l=1-m;else{if(l===d)return u?NaN:(_?-1:1)*(1/0);u=u+Math.pow(2,s),l=l-m}return(_?-1:1)*u*Math.pow(2,l-s)},rl.write=function(r,t,n,s,o,l){var u,h,d,m=l*8-o-1,g=(1<<m)-1,y=g>>1,S=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=s?0:l-1,T=s?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,u=g):(u=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+y>=1?t+=S/d:t+=S*Math.pow(2,1-y),t*d>=2&&(u++,d/=2),u+y>=g?(h=0,u=g):u+y>=1?(h=(t*d-1)*Math.pow(2,o),u=u+y):(h=t*Math.pow(2,y-1)*Math.pow(2,o),u=0));o>=8;r[n+_]=h&255,_+=T,h/=256,o-=8);for(u=u<<o|h,m+=o;m>0;r[n+_]=u&255,_+=T,u/=256,m-=8);r[n+_-T]|=E*128}),rl}var Ng;function Z1(){return Ng||(Ng=1,(function(r){const t=$1(),n=Q1(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=B,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const A=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(A,x),A.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function u(A){if(A>o)throw new RangeError('The value "'+A+'" is invalid for option "size"');const x=new Uint8Array(A);return Object.setPrototypeOf(x,h.prototype),x}function h(A,x,b){if(typeof A=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(A)}return d(A,x,b)}h.poolSize=8192;function d(A,x,b){if(typeof A=="string")return S(A,x);if(ArrayBuffer.isView(A))return T(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(hn(A,ArrayBuffer)||A&&hn(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(hn(A,SharedArrayBuffer)||A&&hn(A.buffer,SharedArrayBuffer)))return E(A,x,b);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const w=A.valueOf&&A.valueOf();if(w!=null&&w!==A)return h.from(w,x,b);const U=M(A);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return h.from(A[Symbol.toPrimitive]("string"),x,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}h.from=function(A,x,b){return d(A,x,b)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function m(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function g(A,x,b){return m(A),A<=0?u(A):x!==void 0?typeof b=="string"?u(A).fill(x,b):u(A).fill(x):u(A)}h.alloc=function(A,x,b){return g(A,x,b)};function y(A){return m(A),u(A<0?0:R(A)|0)}h.allocUnsafe=function(A){return y(A)},h.allocUnsafeSlow=function(A){return y(A)};function S(A,x){if((typeof x!="string"||x==="")&&(x="utf8"),!h.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const b=O(A,x)|0;let w=u(b);const U=w.write(A,x);return U!==b&&(w=w.slice(0,U)),w}function _(A){const x=A.length<0?0:R(A.length)|0,b=u(x);for(let w=0;w<x;w+=1)b[w]=A[w]&255;return b}function T(A){if(hn(A,Uint8Array)){const x=new Uint8Array(A);return E(x.buffer,x.byteOffset,x.byteLength)}return _(A)}function E(A,x,b){if(x<0||A.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<x+(b||0))throw new RangeError('"length" is outside of buffer bounds');let w;return x===void 0&&b===void 0?w=new Uint8Array(A):b===void 0?w=new Uint8Array(A,x):w=new Uint8Array(A,x,b),Object.setPrototypeOf(w,h.prototype),w}function M(A){if(h.isBuffer(A)){const x=R(A.length)|0,b=u(x);return b.length===0||A.copy(b,0,0,x),b}if(A.length!==void 0)return typeof A.length!="number"||xr(A.length)?u(0):_(A);if(A.type==="Buffer"&&Array.isArray(A.data))return _(A.data)}function R(A){if(A>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return A|0}function B(A){return+A!=A&&(A=0),h.alloc(+A)}h.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==h.prototype},h.compare=function(x,b){if(hn(x,Uint8Array)&&(x=h.from(x,x.offset,x.byteLength)),hn(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(x)||!h.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===b)return 0;let w=x.length,U=b.length;for(let F=0,K=Math.min(w,U);F<K;++F)if(x[F]!==b[F]){w=x[F],U=b[F];break}return w<U?-1:U<w?1:0},h.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(x,b){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return h.alloc(0);let w;if(b===void 0)for(b=0,w=0;w<x.length;++w)b+=x[w].length;const U=h.allocUnsafe(b);let F=0;for(w=0;w<x.length;++w){let K=x[w];if(hn(K,Uint8Array))F+K.length>U.length?(h.isBuffer(K)||(K=h.from(K)),K.copy(U,F)):Uint8Array.prototype.set.call(U,K,F);else if(h.isBuffer(K))K.copy(U,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=K.length}return U};function O(A,x){if(h.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||hn(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const b=A.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&b===0)return 0;let U=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return fi(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return bs(A).length;default:if(U)return w?-1:fi(A).length;x=(""+x).toLowerCase(),U=!0}}h.byteLength=O;function P(A,x,b){let w=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,x>>>=0,b<=x))return"";for(A||(A="utf8");;)switch(A){case"hex":return lt(this,x,b);case"utf8":case"utf-8":return wt(this,x,b);case"ascii":return Q(this,x,b);case"latin1":case"binary":return ht(this,x,b);case"base64":return Nt(this,x,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ct(this,x,b);default:if(w)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),w=!0}}h.prototype._isBuffer=!0;function Z(A,x,b){const w=A[x];A[x]=A[b],A[b]=w}h.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<x;b+=2)Z(this,b,b+1);return this},h.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<x;b+=4)Z(this,b,b+3),Z(this,b+1,b+2);return this},h.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<x;b+=8)Z(this,b,b+7),Z(this,b+1,b+6),Z(this,b+2,b+5),Z(this,b+3,b+4);return this},h.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?wt(this,0,x):P.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(x){if(!h.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:h.compare(this,x)===0},h.prototype.inspect=function(){let x="";const b=r.INSPECT_MAX_BYTES;return x=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(x+=" ... "),"<Buffer "+x+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(x,b,w,U,F){if(hn(x,Uint8Array)&&(x=h.from(x,x.offset,x.byteLength)),!h.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(b===void 0&&(b=0),w===void 0&&(w=x?x.length:0),U===void 0&&(U=0),F===void 0&&(F=this.length),b<0||w>x.length||U<0||F>this.length)throw new RangeError("out of range index");if(U>=F&&b>=w)return 0;if(U>=F)return-1;if(b>=w)return 1;if(b>>>=0,w>>>=0,U>>>=0,F>>>=0,this===x)return 0;let K=F-U,pt=w-b;const jt=Math.min(K,pt),At=this.slice(U,F),ie=x.slice(b,w);for(let Ht=0;Ht<jt;++Ht)if(At[Ht]!==ie[Ht]){K=At[Ht],pt=ie[Ht];break}return K<pt?-1:pt<K?1:0};function X(A,x,b,w,U){if(A.length===0)return-1;if(typeof b=="string"?(w=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,xr(b)&&(b=U?0:A.length-1),b<0&&(b=A.length+b),b>=A.length){if(U)return-1;b=A.length-1}else if(b<0)if(U)b=0;else return-1;if(typeof x=="string"&&(x=h.from(x,w)),h.isBuffer(x))return x.length===0?-1:H(A,x,b,w,U);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(A,x,b):Uint8Array.prototype.lastIndexOf.call(A,x,b):H(A,[x],b,w,U);throw new TypeError("val must be string, number or Buffer")}function H(A,x,b,w,U){let F=1,K=A.length,pt=x.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(A.length<2||x.length<2)return-1;F=2,K/=2,pt/=2,b/=2}function jt(ie,Ht){return F===1?ie[Ht]:ie.readUInt16BE(Ht*F)}let At;if(U){let ie=-1;for(At=b;At<K;At++)if(jt(A,At)===jt(x,ie===-1?0:At-ie)){if(ie===-1&&(ie=At),At-ie+1===pt)return ie*F}else ie!==-1&&(At-=At-ie),ie=-1}else for(b+pt>K&&(b=K-pt),At=b;At>=0;At--){let ie=!0;for(let Ht=0;Ht<pt;Ht++)if(jt(A,At+Ht)!==jt(x,Ht)){ie=!1;break}if(ie)return At}return-1}h.prototype.includes=function(x,b,w){return this.indexOf(x,b,w)!==-1},h.prototype.indexOf=function(x,b,w){return X(this,x,b,w,!0)},h.prototype.lastIndexOf=function(x,b,w){return X(this,x,b,w,!1)};function st(A,x,b,w){b=Number(b)||0;const U=A.length-b;w?(w=Number(w),w>U&&(w=U)):w=U;const F=x.length;w>F/2&&(w=F/2);let K;for(K=0;K<w;++K){const pt=parseInt(x.substr(K*2,2),16);if(xr(pt))return K;A[b+K]=pt}return K}function it(A,x,b,w){return di(fi(x,A.length-b),A,b,w)}function tt(A,x,b,w){return di(xs(x),A,b,w)}function nt(A,x,b,w){return di(bs(x),A,b,w)}function bt(A,x,b,w){return di(_s(x,A.length-b),A,b,w)}h.prototype.write=function(x,b,w,U){if(b===void 0)U="utf8",w=this.length,b=0;else if(w===void 0&&typeof b=="string")U=b,w=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(w)?(w=w>>>0,U===void 0&&(U="utf8")):(U=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const F=this.length-b;if((w===void 0||w>F)&&(w=F),x.length>0&&(w<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let K=!1;for(;;)switch(U){case"hex":return st(this,x,b,w);case"utf8":case"utf-8":return it(this,x,b,w);case"ascii":case"latin1":case"binary":return tt(this,x,b,w);case"base64":return nt(this,x,b,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bt(this,x,b,w);default:if(K)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),K=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Nt(A,x,b){return x===0&&b===A.length?t.fromByteArray(A):t.fromByteArray(A.slice(x,b))}function wt(A,x,b){b=Math.min(A.length,b);const w=[];let U=x;for(;U<b;){const F=A[U];let K=null,pt=F>239?4:F>223?3:F>191?2:1;if(U+pt<=b){let jt,At,ie,Ht;switch(pt){case 1:F<128&&(K=F);break;case 2:jt=A[U+1],(jt&192)===128&&(Ht=(F&31)<<6|jt&63,Ht>127&&(K=Ht));break;case 3:jt=A[U+1],At=A[U+2],(jt&192)===128&&(At&192)===128&&(Ht=(F&15)<<12|(jt&63)<<6|At&63,Ht>2047&&(Ht<55296||Ht>57343)&&(K=Ht));break;case 4:jt=A[U+1],At=A[U+2],ie=A[U+3],(jt&192)===128&&(At&192)===128&&(ie&192)===128&&(Ht=(F&15)<<18|(jt&63)<<12|(At&63)<<6|ie&63,Ht>65535&&Ht<1114112&&(K=Ht))}}K===null?(K=65533,pt=1):K>65535&&(K-=65536,w.push(K>>>10&1023|55296),K=56320|K&1023),w.push(K),U+=pt}return N(w)}const ue=4096;function N(A){const x=A.length;if(x<=ue)return String.fromCharCode.apply(String,A);let b="",w=0;for(;w<x;)b+=String.fromCharCode.apply(String,A.slice(w,w+=ue));return b}function Q(A,x,b){let w="";b=Math.min(A.length,b);for(let U=x;U<b;++U)w+=String.fromCharCode(A[U]&127);return w}function ht(A,x,b){let w="";b=Math.min(A.length,b);for(let U=x;U<b;++U)w+=String.fromCharCode(A[U]);return w}function lt(A,x,b){const w=A.length;(!x||x<0)&&(x=0),(!b||b<0||b>w)&&(b=w);let U="";for(let F=x;F<b;++F)U+=je[A[F]];return U}function Ct(A,x,b){const w=A.slice(x,b);let U="";for(let F=0;F<w.length-1;F+=2)U+=String.fromCharCode(w[F]+w[F+1]*256);return U}h.prototype.slice=function(x,b){const w=this.length;x=~~x,b=b===void 0?w:~~b,x<0?(x+=w,x<0&&(x=0)):x>w&&(x=w),b<0?(b+=w,b<0&&(b=0)):b>w&&(b=w),b<x&&(b=x);const U=this.subarray(x,b);return Object.setPrototypeOf(U,h.prototype),U};function D(A,x,b){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+x>b)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(x,b,w){x=x>>>0,b=b>>>0,w||D(x,b,this.length);let U=this[x],F=1,K=0;for(;++K<b&&(F*=256);)U+=this[x+K]*F;return U},h.prototype.readUintBE=h.prototype.readUIntBE=function(x,b,w){x=x>>>0,b=b>>>0,w||D(x,b,this.length);let U=this[x+--b],F=1;for(;b>0&&(F*=256);)U+=this[x+--b]*F;return U},h.prototype.readUint8=h.prototype.readUInt8=function(x,b){return x=x>>>0,b||D(x,1,this.length),this[x]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(x,b){return x=x>>>0,b||D(x,2,this.length),this[x]|this[x+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(x,b){return x=x>>>0,b||D(x,2,this.length),this[x]<<8|this[x+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(x,b){return x=x>>>0,b||D(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(x,b){return x=x>>>0,b||D(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},h.prototype.readBigUInt64LE=Nn(function(x){x=x>>>0,Ee(x,"offset");const b=this[x],w=this[x+7];(b===void 0||w===void 0)&&he(x,this.length-8);const U=b+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,F=this[++x]+this[++x]*2**8+this[++x]*2**16+w*2**24;return BigInt(U)+(BigInt(F)<<BigInt(32))}),h.prototype.readBigUInt64BE=Nn(function(x){x=x>>>0,Ee(x,"offset");const b=this[x],w=this[x+7];(b===void 0||w===void 0)&&he(x,this.length-8);const U=b*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],F=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+w;return(BigInt(U)<<BigInt(32))+BigInt(F)}),h.prototype.readIntLE=function(x,b,w){x=x>>>0,b=b>>>0,w||D(x,b,this.length);let U=this[x],F=1,K=0;for(;++K<b&&(F*=256);)U+=this[x+K]*F;return F*=128,U>=F&&(U-=Math.pow(2,8*b)),U},h.prototype.readIntBE=function(x,b,w){x=x>>>0,b=b>>>0,w||D(x,b,this.length);let U=b,F=1,K=this[x+--U];for(;U>0&&(F*=256);)K+=this[x+--U]*F;return F*=128,K>=F&&(K-=Math.pow(2,8*b)),K},h.prototype.readInt8=function(x,b){return x=x>>>0,b||D(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},h.prototype.readInt16LE=function(x,b){x=x>>>0,b||D(x,2,this.length);const w=this[x]|this[x+1]<<8;return w&32768?w|4294901760:w},h.prototype.readInt16BE=function(x,b){x=x>>>0,b||D(x,2,this.length);const w=this[x+1]|this[x]<<8;return w&32768?w|4294901760:w},h.prototype.readInt32LE=function(x,b){return x=x>>>0,b||D(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},h.prototype.readInt32BE=function(x,b){return x=x>>>0,b||D(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},h.prototype.readBigInt64LE=Nn(function(x){x=x>>>0,Ee(x,"offset");const b=this[x],w=this[x+7];(b===void 0||w===void 0)&&he(x,this.length-8);const U=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(w<<24);return(BigInt(U)<<BigInt(32))+BigInt(b+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),h.prototype.readBigInt64BE=Nn(function(x){x=x>>>0,Ee(x,"offset");const b=this[x],w=this[x+7];(b===void 0||w===void 0)&&he(x,this.length-8);const U=(b<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(U)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+w)}),h.prototype.readFloatLE=function(x,b){return x=x>>>0,b||D(x,4,this.length),n.read(this,x,!0,23,4)},h.prototype.readFloatBE=function(x,b){return x=x>>>0,b||D(x,4,this.length),n.read(this,x,!1,23,4)},h.prototype.readDoubleLE=function(x,b){return x=x>>>0,b||D(x,8,this.length),n.read(this,x,!0,52,8)},h.prototype.readDoubleBE=function(x,b){return x=x>>>0,b||D(x,8,this.length),n.read(this,x,!1,52,8)};function V(A,x,b,w,U,F){if(!h.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>U||x<F)throw new RangeError('"value" argument is out of bounds');if(b+w>A.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(x,b,w,U){if(x=+x,b=b>>>0,w=w>>>0,!U){const pt=Math.pow(2,8*w)-1;V(this,x,b,w,pt,0)}let F=1,K=0;for(this[b]=x&255;++K<w&&(F*=256);)this[b+K]=x/F&255;return b+w},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(x,b,w,U){if(x=+x,b=b>>>0,w=w>>>0,!U){const pt=Math.pow(2,8*w)-1;V(this,x,b,w,pt,0)}let F=w-1,K=1;for(this[b+F]=x&255;--F>=0&&(K*=256);)this[b+F]=x/K&255;return b+w},h.prototype.writeUint8=h.prototype.writeUInt8=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,1,255,0),this[b]=x&255,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,2,65535,0),this[b]=x&255,this[b+1]=x>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,2,65535,0),this[b]=x>>>8,this[b+1]=x&255,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,4,4294967295,0),this[b+3]=x>>>24,this[b+2]=x>>>16,this[b+1]=x>>>8,this[b]=x&255,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,4,4294967295,0),this[b]=x>>>24,this[b+1]=x>>>16,this[b+2]=x>>>8,this[b+3]=x&255,b+4};function et(A,x,b,w,U){Fe(x,w,U,A,b,7);let F=Number(x&BigInt(4294967295));A[b++]=F,F=F>>8,A[b++]=F,F=F>>8,A[b++]=F,F=F>>8,A[b++]=F;let K=Number(x>>BigInt(32)&BigInt(4294967295));return A[b++]=K,K=K>>8,A[b++]=K,K=K>>8,A[b++]=K,K=K>>8,A[b++]=K,b}function rt(A,x,b,w,U){Fe(x,w,U,A,b,7);let F=Number(x&BigInt(4294967295));A[b+7]=F,F=F>>8,A[b+6]=F,F=F>>8,A[b+5]=F,F=F>>8,A[b+4]=F;let K=Number(x>>BigInt(32)&BigInt(4294967295));return A[b+3]=K,K=K>>8,A[b+2]=K,K=K>>8,A[b+1]=K,K=K>>8,A[b]=K,b+8}h.prototype.writeBigUInt64LE=Nn(function(x,b=0){return et(this,x,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Nn(function(x,b=0){return rt(this,x,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(x,b,w,U){if(x=+x,b=b>>>0,!U){const jt=Math.pow(2,8*w-1);V(this,x,b,w,jt-1,-jt)}let F=0,K=1,pt=0;for(this[b]=x&255;++F<w&&(K*=256);)x<0&&pt===0&&this[b+F-1]!==0&&(pt=1),this[b+F]=(x/K>>0)-pt&255;return b+w},h.prototype.writeIntBE=function(x,b,w,U){if(x=+x,b=b>>>0,!U){const jt=Math.pow(2,8*w-1);V(this,x,b,w,jt-1,-jt)}let F=w-1,K=1,pt=0;for(this[b+F]=x&255;--F>=0&&(K*=256);)x<0&&pt===0&&this[b+F+1]!==0&&(pt=1),this[b+F]=(x/K>>0)-pt&255;return b+w},h.prototype.writeInt8=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,1,127,-128),x<0&&(x=255+x+1),this[b]=x&255,b+1},h.prototype.writeInt16LE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,2,32767,-32768),this[b]=x&255,this[b+1]=x>>>8,b+2},h.prototype.writeInt16BE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,2,32767,-32768),this[b]=x>>>8,this[b+1]=x&255,b+2},h.prototype.writeInt32LE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,4,2147483647,-2147483648),this[b]=x&255,this[b+1]=x>>>8,this[b+2]=x>>>16,this[b+3]=x>>>24,b+4},h.prototype.writeInt32BE=function(x,b,w){return x=+x,b=b>>>0,w||V(this,x,b,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[b]=x>>>24,this[b+1]=x>>>16,this[b+2]=x>>>8,this[b+3]=x&255,b+4},h.prototype.writeBigInt64LE=Nn(function(x,b=0){return et(this,x,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Nn(function(x,b=0){return rt(this,x,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(A,x,b,w,U,F){if(b+w>A.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function yt(A,x,b,w,U){return x=+x,b=b>>>0,U||gt(A,x,b,4),n.write(A,x,b,w,23,4),b+4}h.prototype.writeFloatLE=function(x,b,w){return yt(this,x,b,!0,w)},h.prototype.writeFloatBE=function(x,b,w){return yt(this,x,b,!1,w)};function Rt(A,x,b,w,U){return x=+x,b=b>>>0,U||gt(A,x,b,8),n.write(A,x,b,w,52,8),b+8}h.prototype.writeDoubleLE=function(x,b,w){return Rt(this,x,b,!0,w)},h.prototype.writeDoubleBE=function(x,b,w){return Rt(this,x,b,!1,w)},h.prototype.copy=function(x,b,w,U){if(!h.isBuffer(x))throw new TypeError("argument should be a Buffer");if(w||(w=0),!U&&U!==0&&(U=this.length),b>=x.length&&(b=x.length),b||(b=0),U>0&&U<w&&(U=w),U===w||x.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),x.length-b<U-w&&(U=x.length-b+w);const F=U-w;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,w,U):Uint8Array.prototype.set.call(x,this.subarray(w,U),b),F},h.prototype.fill=function(x,b,w,U){if(typeof x=="string"){if(typeof b=="string"?(U=b,b=0,w=this.length):typeof w=="string"&&(U=w,w=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!h.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(x.length===1){const K=x.charCodeAt(0);(U==="utf8"&&K<128||U==="latin1")&&(x=K)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(b<0||this.length<b||this.length<w)throw new RangeError("Out of range index");if(w<=b)return this;b=b>>>0,w=w===void 0?this.length:w>>>0,x||(x=0);let F;if(typeof x=="number")for(F=b;F<w;++F)this[F]=x;else{const K=h.isBuffer(x)?x:h.from(x,U),pt=K.length;if(pt===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(F=0;F<w-b;++F)this[F+b]=K[F%pt]}return this};const Kt={};function It(A,x,b){Kt[A]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}It("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),It("ERR_INVALID_ARG_TYPE",function(A,x){return`The "${A}" argument must be of type number. Received type ${typeof x}`},TypeError),It("ERR_OUT_OF_RANGE",function(A,x,b){let w=`The value of "${A}" is out of range.`,U=b;return Number.isInteger(b)&&Math.abs(b)>2**32?U=Je(String(b)):typeof b=="bigint"&&(U=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(U=Je(U)),U+="n"),w+=` It must be ${x}. Received ${U}`,w},RangeError);function Je(A){let x="",b=A.length;const w=A[0]==="-"?1:0;for(;b>=w+4;b-=3)x=`_${A.slice(b-3,b)}${x}`;return`${A.slice(0,b)}${x}`}function Un(A,x,b){Ee(x,"offset"),(A[x]===void 0||A[x+b]===void 0)&&he(x,A.length-(b+1))}function Fe(A,x,b,w,U,F){if(A>b||A<x){const K=typeof x=="bigint"?"n":"";let pt;throw x===0||x===BigInt(0)?pt=`>= 0${K} and < 2${K} ** ${(F+1)*8}${K}`:pt=`>= -(2${K} ** ${(F+1)*8-1}${K}) and < 2 ** ${(F+1)*8-1}${K}`,new Kt.ERR_OUT_OF_RANGE("value",pt,A)}Un(w,U,F)}function Ee(A,x){if(typeof A!="number")throw new Kt.ERR_INVALID_ARG_TYPE(x,"number",A)}function he(A,x,b){throw Math.floor(A)!==A?(Ee(A,b),new Kt.ERR_OUT_OF_RANGE("offset","an integer",A)):x<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,A)}const tn=/[^+/0-9A-Za-z-_]/g;function Hi(A){if(A=A.split("=")[0],A=A.trim().replace(tn,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function fi(A,x){x=x||1/0;let b;const w=A.length;let U=null;const F=[];for(let K=0;K<w;++K){if(b=A.charCodeAt(K),b>55295&&b<57344){if(!U){if(b>56319){(x-=3)>-1&&F.push(239,191,189);continue}else if(K+1===w){(x-=3)>-1&&F.push(239,191,189);continue}U=b;continue}if(b<56320){(x-=3)>-1&&F.push(239,191,189),U=b;continue}b=(U-55296<<10|b-56320)+65536}else U&&(x-=3)>-1&&F.push(239,191,189);if(U=null,b<128){if((x-=1)<0)break;F.push(b)}else if(b<2048){if((x-=2)<0)break;F.push(b>>6|192,b&63|128)}else if(b<65536){if((x-=3)<0)break;F.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((x-=4)<0)break;F.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return F}function xs(A){const x=[];for(let b=0;b<A.length;++b)x.push(A.charCodeAt(b)&255);return x}function _s(A,x){let b,w,U;const F=[];for(let K=0;K<A.length&&!((x-=2)<0);++K)b=A.charCodeAt(K),w=b>>8,U=b%256,F.push(U),F.push(w);return F}function bs(A){return t.toByteArray(Hi(A))}function di(A,x,b,w){let U;for(U=0;U<w&&!(U+b>=x.length||U>=A.length);++U)x[U+b]=A[U];return U}function hn(A,x){return A instanceof x||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===x.name}function xr(A){return A!==A}const je=(function(){const A="0123456789abcdef",x=new Array(256);for(let b=0;b<16;++b){const w=b*16;for(let U=0;U<16;++U)x[w+U]=A[b]+A[U]}return x})();function Nn(A){return typeof BigInt>"u"?Ia:A}function Ia(){throw new Error("BigInt not supported")}})(ah)),ah}var K1=Z1();window.global=window;window.Buffer=K1.Buffer;window.process={env:{}};var oh={exports:{}},xt={};var Pg;function W1(){if(Pg)return xt;Pg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function _(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,M={};function R(D,V,et){this.props=D,this.context=V,this.refs=M,this.updater=et||T}R.prototype.isReactComponent={},R.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},R.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function B(){}B.prototype=R.prototype;function O(D,V,et){this.props=D,this.context=V,this.refs=M,this.updater=et||T}var P=O.prototype=new B;P.constructor=O,E(P,R.prototype),P.isPureReactComponent=!0;var Z=Array.isArray;function X(){}var H={H:null,A:null,T:null,S:null},st=Object.prototype.hasOwnProperty;function it(D,V,et){var rt=et.ref;return{$$typeof:r,type:D,key:V,ref:rt!==void 0?rt:null,props:et}}function tt(D,V){return it(D.type,V,D.props)}function nt(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function bt(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(et){return V[et]})}var Nt=/\/+/g;function wt(D,V){return typeof D=="object"&&D!==null&&D.key!=null?bt(""+D.key):V.toString(36)}function ue(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(X,X):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function N(D,V,et,rt,gt){var yt=typeof D;(yt==="undefined"||yt==="boolean")&&(D=null);var Rt=!1;if(D===null)Rt=!0;else switch(yt){case"bigint":case"string":case"number":Rt=!0;break;case"object":switch(D.$$typeof){case r:case t:Rt=!0;break;case g:return Rt=D._init,N(Rt(D._payload),V,et,rt,gt)}}if(Rt)return gt=gt(D),Rt=rt===""?"."+wt(D,0):rt,Z(gt)?(et="",Rt!=null&&(et=Rt.replace(Nt,"$&/")+"/"),N(gt,V,et,"",function(Je){return Je})):gt!=null&&(nt(gt)&&(gt=tt(gt,et+(gt.key==null||D&&D.key===gt.key?"":(""+gt.key).replace(Nt,"$&/")+"/")+Rt)),V.push(gt)),1;Rt=0;var Kt=rt===""?".":rt+":";if(Z(D))for(var It=0;It<D.length;It++)rt=D[It],yt=Kt+wt(rt,It),Rt+=N(rt,V,et,yt,gt);else if(It=_(D),typeof It=="function")for(D=It.call(D),It=0;!(rt=D.next()).done;)rt=rt.value,yt=Kt+wt(rt,It++),Rt+=N(rt,V,et,yt,gt);else if(yt==="object"){if(typeof D.then=="function")return N(ue(D),V,et,rt,gt);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Rt}function Q(D,V,et){if(D==null)return D;var rt=[],gt=0;return N(D,rt,"","",function(yt){return V.call(et,yt,gt++)}),rt}function ht(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(et){(D._status===0||D._status===-1)&&(D._status=1,D._result=et)},function(et){(D._status===0||D._status===-1)&&(D._status=2,D._result=et)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var lt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ct={map:Q,forEach:function(D,V,et){Q(D,function(){V.apply(this,arguments)},et)},count:function(D){var V=0;return Q(D,function(){V++}),V},toArray:function(D){return Q(D,function(V){return V})||[]},only:function(D){if(!nt(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return xt.Activity=y,xt.Children=Ct,xt.Component=R,xt.Fragment=n,xt.Profiler=o,xt.PureComponent=O,xt.StrictMode=s,xt.Suspense=d,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,xt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return H.H.useMemoCache(D)}},xt.cache=function(D){return function(){return D.apply(null,arguments)}},xt.cacheSignal=function(){return null},xt.cloneElement=function(D,V,et){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var rt=E({},D.props),gt=D.key;if(V!=null)for(yt in V.key!==void 0&&(gt=""+V.key),V)!st.call(V,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&V.ref===void 0||(rt[yt]=V[yt]);var yt=arguments.length-2;if(yt===1)rt.children=et;else if(1<yt){for(var Rt=Array(yt),Kt=0;Kt<yt;Kt++)Rt[Kt]=arguments[Kt+2];rt.children=Rt}return it(D.type,gt,rt)},xt.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},xt.createElement=function(D,V,et){var rt,gt={},yt=null;if(V!=null)for(rt in V.key!==void 0&&(yt=""+V.key),V)st.call(V,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(gt[rt]=V[rt]);var Rt=arguments.length-2;if(Rt===1)gt.children=et;else if(1<Rt){for(var Kt=Array(Rt),It=0;It<Rt;It++)Kt[It]=arguments[It+2];gt.children=Kt}if(D&&D.defaultProps)for(rt in Rt=D.defaultProps,Rt)gt[rt]===void 0&&(gt[rt]=Rt[rt]);return it(D,yt,gt)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(D){return{$$typeof:h,render:D}},xt.isValidElement=nt,xt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:ht}},xt.memo=function(D,V){return{$$typeof:m,type:D,compare:V===void 0?null:V}},xt.startTransition=function(D){var V=H.T,et={};H.T=et;try{var rt=D(),gt=H.S;gt!==null&&gt(et,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(X,lt)}catch(yt){lt(yt)}finally{V!==null&&et.types!==null&&(V.types=et.types),H.T=V}},xt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},xt.use=function(D){return H.H.use(D)},xt.useActionState=function(D,V,et){return H.H.useActionState(D,V,et)},xt.useCallback=function(D,V){return H.H.useCallback(D,V)},xt.useContext=function(D){return H.H.useContext(D)},xt.useDebugValue=function(){},xt.useDeferredValue=function(D,V){return H.H.useDeferredValue(D,V)},xt.useEffect=function(D,V){return H.H.useEffect(D,V)},xt.useEffectEvent=function(D){return H.H.useEffectEvent(D)},xt.useId=function(){return H.H.useId()},xt.useImperativeHandle=function(D,V,et){return H.H.useImperativeHandle(D,V,et)},xt.useInsertionEffect=function(D,V){return H.H.useInsertionEffect(D,V)},xt.useLayoutEffect=function(D,V){return H.H.useLayoutEffect(D,V)},xt.useMemo=function(D,V){return H.H.useMemo(D,V)},xt.useOptimistic=function(D,V){return H.H.useOptimistic(D,V)},xt.useReducer=function(D,V,et){return H.H.useReducer(D,V,et)},xt.useRef=function(D){return H.H.useRef(D)},xt.useState=function(D){return H.H.useState(D)},xt.useSyncExternalStore=function(D,V,et){return H.H.useSyncExternalStore(D,V,et)},xt.useTransition=function(){return H.H.useTransition()},xt.version="19.2.4",xt}var Lg;function yf(){return Lg||(Lg=1,oh.exports=W1()),oh.exports}var Dt=yf();const va=ja(Dt);var lh={exports:{}},fa={},ch={exports:{}},uh={};var jg;function J1(){return jg||(jg=1,(function(r){function t(N,Q){var ht=N.length;N.push(Q);t:for(;0<ht;){var lt=ht-1>>>1,Ct=N[lt];if(0<o(Ct,Q))N[lt]=Q,N[ht]=Ct,ht=lt;else break t}}function n(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var Q=N[0],ht=N.pop();if(ht!==Q){N[0]=ht;t:for(var lt=0,Ct=N.length,D=Ct>>>1;lt<D;){var V=2*(lt+1)-1,et=N[V],rt=V+1,gt=N[rt];if(0>o(et,ht))rt<Ct&&0>o(gt,et)?(N[lt]=gt,N[rt]=ht,lt=rt):(N[lt]=et,N[V]=ht,lt=V);else if(rt<Ct&&0>o(gt,ht))N[lt]=gt,N[rt]=ht,lt=rt;else break t}}return Q}function o(N,Q){var ht=N.sortIndex-Q.sortIndex;return ht!==0?ht:N.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],m=[],g=1,y=null,S=3,_=!1,T=!1,E=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function P(N){for(var Q=n(m);Q!==null;){if(Q.callback===null)s(m);else if(Q.startTime<=N)s(m),Q.sortIndex=Q.expirationTime,t(d,Q);else break;Q=n(m)}}function Z(N){if(E=!1,P(N),!T)if(n(d)!==null)T=!0,X||(X=!0,bt());else{var Q=n(m);Q!==null&&ue(Z,Q.startTime-N)}}var X=!1,H=-1,st=5,it=-1;function tt(){return M?!0:!(r.unstable_now()-it<st)}function nt(){if(M=!1,X){var N=r.unstable_now();it=N;var Q=!0;try{t:{T=!1,E&&(E=!1,B(H),H=-1),_=!0;var ht=S;try{e:{for(P(N),y=n(d);y!==null&&!(y.expirationTime>N&&tt());){var lt=y.callback;if(typeof lt=="function"){y.callback=null,S=y.priorityLevel;var Ct=lt(y.expirationTime<=N);if(N=r.unstable_now(),typeof Ct=="function"){y.callback=Ct,P(N),Q=!0;break e}y===n(d)&&s(d),P(N)}else s(d);y=n(d)}if(y!==null)Q=!0;else{var D=n(m);D!==null&&ue(Z,D.startTime-N),Q=!1}}break t}finally{y=null,S=ht,_=!1}Q=void 0}}finally{Q?bt():X=!1}}}var bt;if(typeof O=="function")bt=function(){O(nt)};else if(typeof MessageChannel<"u"){var Nt=new MessageChannel,wt=Nt.port2;Nt.port1.onmessage=nt,bt=function(){wt.postMessage(null)}}else bt=function(){R(nt,0)};function ue(N,Q){H=R(function(){N(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):st=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(N){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ht=S;S=Q;try{return N()}finally{S=ht}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(N,Q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ht=S;S=N;try{return Q()}finally{S=ht}},r.unstable_scheduleCallback=function(N,Q,ht){var lt=r.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?lt+ht:lt):ht=lt,N){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=ht+Ct,N={id:g++,callback:Q,priorityLevel:N,startTime:ht,expirationTime:Ct,sortIndex:-1},ht>lt?(N.sortIndex=ht,t(m,N),n(d)===null&&N===n(m)&&(E?(B(H),H=-1):E=!0,ue(Z,ht-lt))):(N.sortIndex=Ct,t(d,N),T||_||(T=!0,X||(X=!0,bt()))),N},r.unstable_shouldYield=tt,r.unstable_wrapCallback=function(N){var Q=S;return function(){var ht=S;S=Q;try{return N.apply(this,arguments)}finally{S=ht}}}})(uh)),uh}var Gg;function tv(){return Gg||(Gg=1,ch.exports=J1()),ch.exports}var hh={exports:{}},ze={};var Ig;function ev(){if(Ig)return ze;Ig=1;var r=yf();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:d,containerInfo:m,implementation:g}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ze.createPortal=function(d,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(d,m,null,g)},ze.flushSync=function(d){var m=u.T,g=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=m,s.p=g,s.d.f()}},ze.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(d,m))},ze.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},ze.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var g=m.as,y=h(g,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?s.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:_}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:S,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ze.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=h(m.as,m.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(d)},ze.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=h(g,m.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ze.preloadModule=function(d,m){if(typeof d=="string")if(m){var g=h(m.as,m.crossOrigin);s.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(d)},ze.requestFormReset=function(d){s.d.r(d)},ze.unstable_batchedUpdates=function(d,m){return d(m)},ze.useFormState=function(d,m,g){return u.H.useFormState(d,m,g)},ze.useFormStatus=function(){return u.H.useHostTransitionStatus()},ze.version="19.2.4",ze}var Hg;function nv(){if(Hg)return hh.exports;Hg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),hh.exports=ev(),hh.exports}var Fg;function iv(){if(Fg)return fa;Fg=1;var r=tv(),t=yf(),n=nv();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function u(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=l(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,c=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return d(f),e;if(p===c)return d(f),i;p=p.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=p;else{for(var v=!1,C=f.child;C;){if(C===a){v=!0,a=f,c=p;break}if(C===c){v=!0,c=f,a=p;break}C=C.sibling}if(!v){for(C=p.child;C;){if(C===a){v=!0,a=p,c=f;break}if(C===c){v=!0,c=p,a=f;break}C=C.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),it=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function bt(e){return e===null||typeof e!="object"?null:(e=nt&&e[nt]||e["@@iterator"],typeof e=="function"?e:null)}var Nt=Symbol.for("react.client.reference");function wt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Nt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case R:return"Profiler";case M:return"StrictMode";case Z:return"Suspense";case X:return"SuspenseList";case it:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case O:return e.displayName||"Context";case B:return(e._context.displayName||"Context")+".Consumer";case P:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return i=e.displayName||null,i!==null?i:wt(e.type)||"Memo";case st:i=e._payload,e=e._init;try{return wt(e(i))}catch{}}return null}var ue=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},lt=[],Ct=-1;function D(e){return{current:e}}function V(e){0>Ct||(e.current=lt[Ct],lt[Ct]=null,Ct--)}function et(e,i){Ct++,lt[Ct]=e.current,e.current=i}var rt=D(null),gt=D(null),yt=D(null),Rt=D(null);function Kt(e,i){switch(et(yt,i),et(gt,e),et(rt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?eg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=eg(i),e=ng(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(rt),et(rt,e)}function It(){V(rt),V(gt),V(yt)}function Je(e){e.memoizedState!==null&&et(Rt,e);var i=rt.current,a=ng(i,e.type);i!==a&&(et(gt,e),et(rt,a))}function Un(e){gt.current===e&&(V(rt),V(gt)),Rt.current===e&&(V(Rt),aa._currentValue=ht)}var Fe,Ee;function he(e){if(Fe===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Fe=i&&i[1]||"",Ee=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fe+e+Ee}var tn=!1;function Hi(e,i){if(!e||tn)return"";tn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(Y){var I=Y}Reflect.construct(e,[],J)}else{try{J.call()}catch(Y){I=Y}e.call(J.prototype)}}else{try{throw Error()}catch(Y){I=Y}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(Y){if(Y&&I&&typeof Y.stack=="string")return[Y.stack,I.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),v=p[0],C=p[1];if(v&&C){var k=v.split(`
`),G=C.split(`
`);for(f=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===k.length||f===G.length)for(c=k.length-1,f=G.length-1;1<=c&&0<=f&&k[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(k[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||k[c]!==G[f]){var q=`
`+k[c].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=c&&0<=f);break}}}finally{tn=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?he(a):""}function fi(e,i){switch(e.tag){case 26:case 27:case 5:return he(e.type);case 16:return he("Lazy");case 13:return e.child!==i&&i!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return Hi(e.type,!1);case 11:return Hi(e.type.render,!1);case 1:return Hi(e.type,!0);case 31:return he("Activity");default:return""}}function xs(e){try{var i="",a=null;do i+=fi(e,a),a=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var _s=Object.prototype.hasOwnProperty,bs=r.unstable_scheduleCallback,di=r.unstable_cancelCallback,hn=r.unstable_shouldYield,xr=r.unstable_requestPaint,je=r.unstable_now,Nn=r.unstable_getCurrentPriorityLevel,Ia=r.unstable_ImmediatePriority,A=r.unstable_UserBlockingPriority,x=r.unstable_NormalPriority,b=r.unstable_LowPriority,w=r.unstable_IdlePriority,U=r.log,F=r.unstable_setDisableYieldValue,K=null,pt=null;function jt(e){if(typeof U=="function"&&F(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(K,e)}catch{}}var At=Math.clz32?Math.clz32:k_,ie=Math.log,Ht=Math.LN2;function k_(e){return e>>>=0,e===0?32:31-(ie(e)/Ht|0)|0}var Ha=256,Fa=262144,Ya=4194304;function Fi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Va(e,i,a){var c=e.pendingLanes;if(c===0)return 0;var f=0,p=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var C=c&134217727;return C!==0?(c=C&~p,c!==0?f=Fi(c):(v&=C,v!==0?f=Fi(v):a||(a=C&~e,a!==0&&(f=Fi(a))))):(C=c&~p,C!==0?f=Fi(C):v!==0?f=Fi(v):a||(a=c&~e,a!==0&&(f=Fi(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function _r(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function D_(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nf(){var e=Ya;return Ya<<=1,(Ya&62914560)===0&&(Ya=4194304),e}function ql(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function br(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function O_(e,i,a,c,f,p){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var C=e.entanglements,k=e.expirationTimes,G=e.hiddenUpdates;for(a=v&~a;0<a;){var q=31-At(a),J=1<<q;C[q]=0,k[q]=-1;var I=G[q];if(I!==null)for(G[q]=null,q=0;q<I.length;q++){var Y=I[q];Y!==null&&(Y.lane&=-536870913)}a&=~J}c!==0&&Pf(e,c,0),p!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=p&~(v&~i))}function Pf(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-At(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function Lf(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var c=31-At(a),f=1<<c;f&i|e[c]&i&&(e[c]|=i),a&=~f}}function jf(e,i){var a=i&-i;return a=(a&42)!==0?1:$l(a),(a&(e.suspendedLanes|i))!==0?0:a}function $l(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ql(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gf(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:Tg(e.type))}function If(e,i){var a=Q.p;try{return Q.p=e,i()}finally{Q.p=a}}var pi=Math.random().toString(36).slice(2),Me="__reactFiber$"+pi,Ye="__reactProps$"+pi,vs="__reactContainer$"+pi,Zl="__reactEvents$"+pi,z_="__reactListeners$"+pi,U_="__reactHandles$"+pi,Hf="__reactResources$"+pi,vr="__reactMarker$"+pi;function Kl(e){delete e[Me],delete e[Ye],delete e[Zl],delete e[z_],delete e[U_]}function Ss(e){var i=e[Me];if(i)return i;for(var a=e.parentNode;a;){if(i=a[vs]||a[Me]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=cg(e);e!==null;){if(a=e[Me])return a;e=cg(e)}return i}e=a,a=e.parentNode}return null}function Cs(e){if(e=e[Me]||e[vs]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Sr(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function As(e){var i=e[Hf];return i||(i=e[Hf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ce(e){e[vr]=!0}var Ff=new Set,Yf={};function Yi(e,i){Ts(e,i),Ts(e+"Capture",i)}function Ts(e,i){for(Yf[e]=i,e=0;e<i.length;e++)Ff.add(i[e])}var N_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vf={},Xf={};function P_(e){return _s.call(Xf,e)?!0:_s.call(Vf,e)?!1:N_.test(e)?Xf[e]=!0:(Vf[e]=!0,!1)}function Xa(e,i,a){if(P_(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function qa(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Fn(e,i,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+c)}}function fn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qf(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function L_(e,i,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,p.call(this,v)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Wl(e){if(!e._valueTracker){var i=qf(e)?"checked":"value";e._valueTracker=L_(e,i,""+e[i])}}function $f(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return e&&(c=qf(e)?e.checked?"true":"false":e.value),e=c,e!==a?(i.setValue(e),!0):!1}function $a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var j_=/[\n"\\]/g;function dn(e){return e.replace(j_,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Jl(e,i,a,c,f,p,v,C){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+fn(i)):e.value!==""+fn(i)&&(e.value=""+fn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?tc(e,v,fn(i)):a!=null?tc(e,v,fn(a)):c!=null&&e.removeAttribute("value"),f==null&&p!=null&&(e.defaultChecked=!!p),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+fn(C):e.removeAttribute("name")}function Qf(e,i,a,c,f,p,v,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Wl(e);return}a=a!=null?""+fn(a):"",i=i!=null?""+fn(i):a,C||i===e.value||(e.value=i),e.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=C?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Wl(e)}function tc(e,i,a){i==="number"&&$a(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Es(e,i,a,c){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&c&&(e[a].defaultSelected=!0)}else{for(a=""+fn(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Zf(e,i,a){if(i!=null&&(i=""+fn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+fn(a):""}function Kf(e,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(s(92));if(ue(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=fn(i),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),Wl(e)}function Ms(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var G_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wf(e,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,a):typeof a!="number"||a===0||G_.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Jf(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&a[f]!==c&&Wf(e,f,c)}else for(var p in i)i.hasOwnProperty(p)&&Wf(e,p,i[p])}function ec(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),H_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(e){return H_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yn(){}var nc=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ws=null,Rs=null;function td(e){var i=Cs(e);if(i&&(e=i.stateNode)){var a=e[Ye]||null;t:switch(e=i.stateNode,i.type){case"input":if(Jl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==e&&c.form===e.form){var f=c[Ye]||null;if(!f)throw Error(s(90));Jl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===e.form&&$f(c)}break t;case"textarea":Zf(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Es(e,!!a.multiple,i,!1)}}}var sc=!1;function ed(e,i,a){if(sc)return e(i,a);sc=!0;try{var c=e(i);return c}finally{if(sc=!1,(ws!==null||Rs!==null)&&(Po(),ws&&(i=ws,e=Rs,Rs=ws=null,td(i),e)))for(i=0;i<e.length;i++)td(e[i])}}function Cr(e,i){var a=e.stateNode;if(a===null)return null;var c=a[Ye]||null;if(c===null)return null;a=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(Vn)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){rc=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{rc=!1}var mi=null,ac=null,Za=null;function nd(){if(Za)return Za;var e,i=ac,a=i.length,c,f="value"in mi?mi.value:mi.textContent,p=f.length;for(e=0;e<a&&i[e]===f[e];e++);var v=a-e;for(c=1;c<=v&&i[a-c]===f[p-c];c++);return Za=f.slice(e,1<c?1-c:void 0)}function Ka(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Wa(){return!0}function id(){return!1}function Ve(e){function i(a,c,f,p,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(a=e[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Wa:id,this.isPropagationStopped=id,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),i}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=Ve(Vi),Tr=y({},Vi,{view:0,detail:0}),F_=Ve(Tr),oc,lc,Er,to=y({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Er&&(Er&&e.type==="mousemove"?(oc=e.screenX-Er.screenX,lc=e.screenY-Er.screenY):lc=oc=0,Er=e),oc)},movementY:function(e){return"movementY"in e?e.movementY:lc}}),sd=Ve(to),Y_=y({},to,{dataTransfer:0}),V_=Ve(Y_),X_=y({},Tr,{relatedTarget:0}),cc=Ve(X_),q_=y({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),$_=Ve(q_),Q_=y({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Z_=Ve(Q_),K_=y({},Vi,{data:0}),rd=Ve(K_),W_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eb(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=tb[e])?!!i[e]:!1}function uc(){return eb}var nb=y({},Tr,{key:function(e){if(e.key){var i=W_[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ka(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?J_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(e){return e.type==="keypress"?Ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ib=Ve(nb),sb=y({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=Ve(sb),rb=y({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),ab=Ve(rb),ob=y({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),lb=Ve(ob),cb=y({},to,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ub=Ve(cb),hb=y({},Vi,{newState:0,oldState:0}),fb=Ve(hb),db=[9,13,27,32],hc=Vn&&"CompositionEvent"in window,Mr=null;Vn&&"documentMode"in document&&(Mr=document.documentMode);var pb=Vn&&"TextEvent"in window&&!Mr,od=Vn&&(!hc||Mr&&8<Mr&&11>=Mr),ld=" ",cd=!1;function ud(e,i){switch(e){case"keyup":return db.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bs=!1;function mb(e,i){switch(e){case"compositionend":return hd(i);case"keypress":return i.which!==32?null:(cd=!0,ld);case"textInput":return e=i.data,e===ld&&cd?null:e;default:return null}}function gb(e,i){if(Bs)return e==="compositionend"||!hc&&ud(e,i)?(e=nd(),Za=ac=mi=null,Bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return od&&i.locale!=="ko"?null:i.data;default:return null}}var yb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!yb[e.type]:i==="textarea"}function dd(e,i,a,c){ws?Rs?Rs.push(c):Rs=[c]:ws=c,i=Yo(i,"onChange"),0<i.length&&(a=new Ja("onChange","change",null,a,c),e.push({event:a,listeners:i}))}var wr=null,Rr=null;function xb(e){Qm(e,0)}function eo(e){var i=Sr(e);if($f(i))return e}function pd(e,i){if(e==="change")return i}var md=!1;if(Vn){var fc;if(Vn){var dc="oninput"in document;if(!dc){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),dc=typeof gd.oninput=="function"}fc=dc}else fc=!1;md=fc&&(!document.documentMode||9<document.documentMode)}function yd(){wr&&(wr.detachEvent("onpropertychange",xd),Rr=wr=null)}function xd(e){if(e.propertyName==="value"&&eo(Rr)){var i=[];dd(i,Rr,e,ic(e)),ed(xb,i)}}function _b(e,i,a){e==="focusin"?(yd(),wr=i,Rr=a,wr.attachEvent("onpropertychange",xd)):e==="focusout"&&yd()}function bb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eo(Rr)}function vb(e,i){if(e==="click")return eo(i)}function Sb(e,i){if(e==="input"||e==="change")return eo(i)}function Cb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var en=typeof Object.is=="function"?Object.is:Cb;function Br(e,i){if(en(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!_s.call(i,f)||!en(e[f],i[f]))return!1}return!0}function _d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bd(e,i){var a=_d(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=i&&c>=i)return{node:a,offset:i-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=_d(a)}}function vd(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?vd(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Sd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=$a(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=$a(e.document)}return i}function pc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Ab=Vn&&"documentMode"in document&&11>=document.documentMode,ks=null,mc=null,kr=null,gc=!1;function Cd(e,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gc||ks==null||ks!==$a(c)||(c=ks,"selectionStart"in c&&pc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),kr&&Br(kr,c)||(kr=c,c=Yo(mc,"onSelect"),0<c.length&&(i=new Ja("onSelect","select",null,i,a),e.push({event:i,listeners:c}),i.target=ks)))}function Xi(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Ds={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},yc={},Ad={};Vn&&(Ad=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function qi(e){if(yc[e])return yc[e];if(!Ds[e])return e;var i=Ds[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ad)return yc[e]=i[a];return e}var Td=qi("animationend"),Ed=qi("animationiteration"),Md=qi("animationstart"),Tb=qi("transitionrun"),Eb=qi("transitionstart"),Mb=qi("transitioncancel"),wd=qi("transitionend"),Rd=new Map,xc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xc.push("scrollEnd");function En(e,i){Rd.set(e,i),Yi(i,[e])}var no=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pn=[],Os=0,_c=0;function io(){for(var e=Os,i=_c=Os=0;i<e;){var a=pn[i];pn[i++]=null;var c=pn[i];pn[i++]=null;var f=pn[i];pn[i++]=null;var p=pn[i];if(pn[i++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}p!==0&&Bd(a,f,p)}}function so(e,i,a,c){pn[Os++]=e,pn[Os++]=i,pn[Os++]=a,pn[Os++]=c,_c|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function bc(e,i,a,c){return so(e,i,a,c),ro(e)}function $i(e,i){return so(e,null,null,i),ro(e)}function Bd(e,i,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var f=!1,p=e.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(f=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,f&&i!==null&&(f=31-At(a),e=p.hiddenUpdates,c=e[f],c===null?e[f]=[i]:c.push(i),i.lane=a|536870912),p):null}function ro(e){if(50<Jr)throw Jr=0,Ru=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var zs={};function wb(e,i,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(e,i,a,c){return new wb(e,i,a,c)}function vc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xn(e,i){var a=e.alternate;return a===null?(a=nn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function kd(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function ao(e,i,a,c,f,p){var v=0;if(c=e,typeof e=="function")vc(e)&&(v=1);else if(typeof e=="string")v=O1(e,a,rt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case it:return e=nn(31,a,i,f),e.elementType=it,e.lanes=p,e;case E:return Qi(a.children,f,p,i);case M:v=8,f|=24;break;case R:return e=nn(12,a,i,f|2),e.elementType=R,e.lanes=p,e;case Z:return e=nn(13,a,i,f),e.elementType=Z,e.lanes=p,e;case X:return e=nn(19,a,i,f),e.elementType=X,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:v=10;break t;case B:v=9;break t;case P:v=11;break t;case H:v=14;break t;case st:v=16,c=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=nn(v,a,i,f),i.elementType=e,i.type=c,i.lanes=p,i}function Qi(e,i,a,c){return e=nn(7,e,c,i),e.lanes=a,e}function Sc(e,i,a){return e=nn(6,e,null,i),e.lanes=a,e}function Dd(e){var i=nn(18,null,null,0);return i.stateNode=e,i}function Cc(e,i,a){return i=nn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Od=new WeakMap;function mn(e,i){if(typeof e=="object"&&e!==null){var a=Od.get(e);return a!==void 0?a:(i={value:e,source:i,stack:xs(i)},Od.set(e,i),i)}return{value:e,source:i,stack:xs(i)}}var Us=[],Ns=0,oo=null,Dr=0,gn=[],yn=0,gi=null,Pn=1,Ln="";function qn(e,i){Us[Ns++]=Dr,Us[Ns++]=oo,oo=e,Dr=i}function zd(e,i,a){gn[yn++]=Pn,gn[yn++]=Ln,gn[yn++]=gi,gi=e;var c=Pn;e=Ln;var f=32-At(c)-1;c&=~(1<<f),a+=1;var p=32-At(i)+f;if(30<p){var v=f-f%5;p=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Pn=1<<32-At(i)+f|a<<f|c,Ln=p+e}else Pn=1<<p|a<<f|c,Ln=e}function Ac(e){e.return!==null&&(qn(e,1),zd(e,1,0))}function Tc(e){for(;e===oo;)oo=Us[--Ns],Us[Ns]=null,Dr=Us[--Ns],Us[Ns]=null;for(;e===gi;)gi=gn[--yn],gn[yn]=null,Ln=gn[--yn],gn[yn]=null,Pn=gn[--yn],gn[yn]=null}function Ud(e,i){gn[yn++]=Pn,gn[yn++]=Ln,gn[yn++]=gi,Pn=i.id,Ln=i.overflow,gi=e}var we=null,Wt=null,zt=!1,yi=null,xn=!1,Ec=Error(s(519));function xi(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Or(mn(i,e)),Ec}function Nd(e){var i=e.stateNode,a=e.type,c=e.memoizedProps;switch(i[Me]=e,i[Ye]=c,a){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(a=0;a<ea.length;a++)Et(ea[a],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Et("invalid",i),Qf(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Et("invalid",i);break;case"textarea":Et("invalid",i),Kf(i,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||Jm(i.textContent,a)?(c.popover!=null&&(Et("beforetoggle",i),Et("toggle",i)),c.onScroll!=null&&Et("scroll",i),c.onScrollEnd!=null&&Et("scrollend",i),c.onClick!=null&&(i.onclick=Yn),i=!0):i=!1,i||xi(e,!0)}function Pd(e){for(we=e.return;we;)switch(we.tag){case 5:case 31:case 13:xn=!1;return;case 27:case 3:xn=!0;return;default:we=we.return}}function Ps(e){if(e!==we)return!1;if(!zt)return Pd(e),zt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Yu(e.type,e.memoizedProps)),a=!a),a&&Wt&&xi(e),Pd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Wt=lg(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Wt=lg(e)}else i===27?(i=Wt,Di(e.type)?(e=Qu,Qu=null,Wt=e):Wt=i):Wt=we?bn(e.stateNode.nextSibling):null;return!0}function Zi(){Wt=we=null,zt=!1}function Mc(){var e=yi;return e!==null&&(Qe===null?Qe=e:Qe.push.apply(Qe,e),yi=null),e}function Or(e){yi===null?yi=[e]:yi.push(e)}var wc=D(null),Ki=null,$n=null;function _i(e,i,a){et(wc,i._currentValue),i._currentValue=a}function Qn(e){e._currentValue=wc.current,V(wc)}function Rc(e,i,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===a)break;e=e.return}}function Bc(e,i,a,c){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var p=f.dependencies;if(p!==null){var v=f.child;p=p.firstContext;t:for(;p!==null;){var C=p;p=f;for(var k=0;k<i.length;k++)if(C.context===i[k]){p.lanes|=a,C=p.alternate,C!==null&&(C.lanes|=a),Rc(p.return,a,e),c||(v=null);break t}p=C.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,p=v.alternate,p!==null&&(p.lanes|=a),Rc(v,a,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Ls(e,i,a,c){e=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var C=f.type;en(f.pendingProps.value,v.value)||(e!==null?e.push(C):e=[C])}}else if(f===Rt.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(aa):e=[aa])}f=f.return}e!==null&&Bc(i,e,a,c),i.flags|=262144}function lo(e){for(e=e.firstContext;e!==null;){if(!en(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wi(e){Ki=e,$n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Re(e){return Ld(Ki,e)}function co(e,i){return Ki===null&&Wi(e),Ld(e,i)}function Ld(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$n===null){if(e===null)throw Error(s(308));$n=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else $n=$n.next=i;return a}var Rb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Bb=r.unstable_scheduleCallback,kb=r.unstable_NormalPriority,me={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kc(){return{controller:new Rb,data:new Map,refCount:0}}function zr(e){e.refCount--,e.refCount===0&&Bb(kb,function(){e.controller.abort()})}var Ur=null,Dc=0,js=0,Gs=null;function Db(e,i){if(Ur===null){var a=Ur=[];Dc=0,js=Uu(),Gs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Dc++,i.then(jd,jd),i}function jd(){if(--Dc===0&&Ur!==null){Gs!==null&&(Gs.status="fulfilled");var e=Ur;Ur=null,js=0,Gs=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Ob(e,i){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Gd=N.S;N.S=function(e,i){Cm=je(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Db(e,i),Gd!==null&&Gd(e,i)};var Ji=D(null);function Oc(){var e=Ji.current;return e!==null?e:Zt.pooledCache}function uo(e,i){i===null?et(Ji,Ji.current):et(Ji,i.pool)}function Id(){var e=Oc();return e===null?null:{parent:me._currentValue,pool:e}}var Is=Error(s(460)),zc=Error(s(474)),ho=Error(s(542)),fo={then:function(){}};function Hd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fd(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Yn,Yn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Vd(e),e;default:if(typeof i.status=="string")i.then(Yn,Yn);else{if(e=Zt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Vd(e),e}throw es=i,Is}}function ts(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(es=a,Is):a}}var es=null;function Yd(){if(es===null)throw Error(s(459));var e=es;return es=null,e}function Vd(e){if(e===Is||e===ho)throw Error(s(483))}var Hs=null,Nr=0;function po(e){var i=Nr;return Nr+=1,Hs===null&&(Hs=[]),Fd(Hs,e,i)}function Pr(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function mo(e,i){throw i.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Xd(e){function i(L,z){if(e){var j=L.deletions;j===null?(L.deletions=[z],L.flags|=16):j.push(z)}}function a(L,z){if(!e)return null;for(;z!==null;)i(L,z),z=z.sibling;return null}function c(L){for(var z=new Map;L!==null;)L.key!==null?z.set(L.key,L):z.set(L.index,L),L=L.sibling;return z}function f(L,z){return L=Xn(L,z),L.index=0,L.sibling=null,L}function p(L,z,j){return L.index=j,e?(j=L.alternate,j!==null?(j=j.index,j<z?(L.flags|=67108866,z):j):(L.flags|=67108866,z)):(L.flags|=1048576,z)}function v(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function C(L,z,j,W){return z===null||z.tag!==6?(z=Sc(j,L.mode,W),z.return=L,z):(z=f(z,j),z.return=L,z)}function k(L,z,j,W){var ft=j.type;return ft===E?q(L,z,j.props.children,W,j.key):z!==null&&(z.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===st&&ts(ft)===z.type)?(z=f(z,j.props),Pr(z,j),z.return=L,z):(z=ao(j.type,j.key,j.props,null,L.mode,W),Pr(z,j),z.return=L,z)}function G(L,z,j,W){return z===null||z.tag!==4||z.stateNode.containerInfo!==j.containerInfo||z.stateNode.implementation!==j.implementation?(z=Cc(j,L.mode,W),z.return=L,z):(z=f(z,j.children||[]),z.return=L,z)}function q(L,z,j,W,ft){return z===null||z.tag!==7?(z=Qi(j,L.mode,W,ft),z.return=L,z):(z=f(z,j),z.return=L,z)}function J(L,z,j){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Sc(""+z,L.mode,j),z.return=L,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _:return j=ao(z.type,z.key,z.props,null,L.mode,j),Pr(j,z),j.return=L,j;case T:return z=Cc(z,L.mode,j),z.return=L,z;case st:return z=ts(z),J(L,z,j)}if(ue(z)||bt(z))return z=Qi(z,L.mode,j,null),z.return=L,z;if(typeof z.then=="function")return J(L,po(z),j);if(z.$$typeof===O)return J(L,co(L,z),j);mo(L,z)}return null}function I(L,z,j,W){var ft=z!==null?z.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ft!==null?null:C(L,z,""+j,W);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _:return j.key===ft?k(L,z,j,W):null;case T:return j.key===ft?G(L,z,j,W):null;case st:return j=ts(j),I(L,z,j,W)}if(ue(j)||bt(j))return ft!==null?null:q(L,z,j,W,null);if(typeof j.then=="function")return I(L,z,po(j),W);if(j.$$typeof===O)return I(L,z,co(L,j),W);mo(L,j)}return null}function Y(L,z,j,W,ft){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return L=L.get(j)||null,C(z,L,""+W,ft);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return L=L.get(W.key===null?j:W.key)||null,k(z,L,W,ft);case T:return L=L.get(W.key===null?j:W.key)||null,G(z,L,W,ft);case st:return W=ts(W),Y(L,z,j,W,ft)}if(ue(W)||bt(W))return L=L.get(j)||null,q(z,L,W,ft,null);if(typeof W.then=="function")return Y(L,z,j,po(W),ft);if(W.$$typeof===O)return Y(L,z,j,co(z,W),ft);mo(z,W)}return null}function at(L,z,j,W){for(var ft=null,Pt=null,ct=z,vt=z=0,kt=null;ct!==null&&vt<j.length;vt++){ct.index>vt?(kt=ct,ct=null):kt=ct.sibling;var Lt=I(L,ct,j[vt],W);if(Lt===null){ct===null&&(ct=kt);break}e&&ct&&Lt.alternate===null&&i(L,ct),z=p(Lt,z,vt),Pt===null?ft=Lt:Pt.sibling=Lt,Pt=Lt,ct=kt}if(vt===j.length)return a(L,ct),zt&&qn(L,vt),ft;if(ct===null){for(;vt<j.length;vt++)ct=J(L,j[vt],W),ct!==null&&(z=p(ct,z,vt),Pt===null?ft=ct:Pt.sibling=ct,Pt=ct);return zt&&qn(L,vt),ft}for(ct=c(ct);vt<j.length;vt++)kt=Y(ct,L,vt,j[vt],W),kt!==null&&(e&&kt.alternate!==null&&ct.delete(kt.key===null?vt:kt.key),z=p(kt,z,vt),Pt===null?ft=kt:Pt.sibling=kt,Pt=kt);return e&&ct.forEach(function(Pi){return i(L,Pi)}),zt&&qn(L,vt),ft}function mt(L,z,j,W){if(j==null)throw Error(s(151));for(var ft=null,Pt=null,ct=z,vt=z=0,kt=null,Lt=j.next();ct!==null&&!Lt.done;vt++,Lt=j.next()){ct.index>vt?(kt=ct,ct=null):kt=ct.sibling;var Pi=I(L,ct,Lt.value,W);if(Pi===null){ct===null&&(ct=kt);break}e&&ct&&Pi.alternate===null&&i(L,ct),z=p(Pi,z,vt),Pt===null?ft=Pi:Pt.sibling=Pi,Pt=Pi,ct=kt}if(Lt.done)return a(L,ct),zt&&qn(L,vt),ft;if(ct===null){for(;!Lt.done;vt++,Lt=j.next())Lt=J(L,Lt.value,W),Lt!==null&&(z=p(Lt,z,vt),Pt===null?ft=Lt:Pt.sibling=Lt,Pt=Lt);return zt&&qn(L,vt),ft}for(ct=c(ct);!Lt.done;vt++,Lt=j.next())Lt=Y(ct,L,vt,Lt.value,W),Lt!==null&&(e&&Lt.alternate!==null&&ct.delete(Lt.key===null?vt:Lt.key),z=p(Lt,z,vt),Pt===null?ft=Lt:Pt.sibling=Lt,Pt=Lt);return e&&ct.forEach(function(Y1){return i(L,Y1)}),zt&&qn(L,vt),ft}function qt(L,z,j,W){if(typeof j=="object"&&j!==null&&j.type===E&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case _:t:{for(var ft=j.key;z!==null;){if(z.key===ft){if(ft=j.type,ft===E){if(z.tag===7){a(L,z.sibling),W=f(z,j.props.children),W.return=L,L=W;break t}}else if(z.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===st&&ts(ft)===z.type){a(L,z.sibling),W=f(z,j.props),Pr(W,j),W.return=L,L=W;break t}a(L,z);break}else i(L,z);z=z.sibling}j.type===E?(W=Qi(j.props.children,L.mode,W,j.key),W.return=L,L=W):(W=ao(j.type,j.key,j.props,null,L.mode,W),Pr(W,j),W.return=L,L=W)}return v(L);case T:t:{for(ft=j.key;z!==null;){if(z.key===ft)if(z.tag===4&&z.stateNode.containerInfo===j.containerInfo&&z.stateNode.implementation===j.implementation){a(L,z.sibling),W=f(z,j.children||[]),W.return=L,L=W;break t}else{a(L,z);break}else i(L,z);z=z.sibling}W=Cc(j,L.mode,W),W.return=L,L=W}return v(L);case st:return j=ts(j),qt(L,z,j,W)}if(ue(j))return at(L,z,j,W);if(bt(j)){if(ft=bt(j),typeof ft!="function")throw Error(s(150));return j=ft.call(j),mt(L,z,j,W)}if(typeof j.then=="function")return qt(L,z,po(j),W);if(j.$$typeof===O)return qt(L,z,co(L,j),W);mo(L,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,z!==null&&z.tag===6?(a(L,z.sibling),W=f(z,j),W.return=L,L=W):(a(L,z),W=Sc(j,L.mode,W),W.return=L,L=W),v(L)):a(L,z)}return function(L,z,j,W){try{Nr=0;var ft=qt(L,z,j,W);return Hs=null,ft}catch(ct){if(ct===Is||ct===ho)throw ct;var Pt=nn(29,ct,null,L.mode);return Pt.lanes=W,Pt.return=L,Pt}}}var ns=Xd(!0),qd=Xd(!1),bi=!1;function Uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Si(e,i,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Gt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=ro(e),Bd(e,null,a),i}return so(e,c,i,a),ro(e)}function Lr(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Lf(e,a)}}function Pc(e,i){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Lc=!1;function jr(){if(Lc){var e=Gs;if(e!==null)throw e}}function Gr(e,i,a,c){Lc=!1;var f=e.updateQueue;bi=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var k=C,G=k.next;k.next=null,v===null?p=G:v.next=G,v=k;var q=e.alternate;q!==null&&(q=q.updateQueue,C=q.lastBaseUpdate,C!==v&&(C===null?q.firstBaseUpdate=G:C.next=G,q.lastBaseUpdate=k))}if(p!==null){var J=f.baseState;v=0,q=G=k=null,C=p;do{var I=C.lane&-536870913,Y=I!==C.lane;if(Y?(Bt&I)===I:(c&I)===I){I!==0&&I===js&&(Lc=!0),q!==null&&(q=q.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var at=e,mt=C;I=i;var qt=a;switch(mt.tag){case 1:if(at=mt.payload,typeof at=="function"){J=at.call(qt,J,I);break t}J=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=mt.payload,I=typeof at=="function"?at.call(qt,J,I):at,I==null)break t;J=y({},J,I);break t;case 2:bi=!0}}I=C.callback,I!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[I]:Y.push(I))}else Y={lane:I,tag:C.tag,payload:C.payload,callback:C.callback,next:null},q===null?(G=q=Y,k=J):q=q.next=Y,v|=I;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);q===null&&(k=J),f.baseState=k,f.firstBaseUpdate=G,f.lastBaseUpdate=q,p===null&&(f.shared.lanes=0),Mi|=v,e.lanes=v,e.memoizedState=J}}function $d(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Qd(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)$d(a[e],i)}var Fs=D(null),go=D(0);function Zd(e,i){e=si,et(go,e),et(Fs,i),si=e|i.baseLanes}function jc(){et(go,si),et(Fs,Fs.current)}function Gc(){si=go.current,V(Fs),V(go)}var sn=D(null),_n=null;function Ci(e){var i=e.alternate;et(fe,fe.current&1),et(sn,e),_n===null&&(i===null||Fs.current!==null||i.memoizedState!==null)&&(_n=e)}function Ic(e){et(fe,fe.current),et(sn,e),_n===null&&(_n=e)}function Kd(e){e.tag===22?(et(fe,fe.current),et(sn,e),_n===null&&(_n=e)):Ai()}function Ai(){et(fe,fe.current),et(sn,sn.current)}function rn(e){V(sn),_n===e&&(_n=null),V(fe)}var fe=D(0);function yo(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||qu(a)||$u(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zn=0,_t=null,Vt=null,ge=null,xo=!1,Ys=!1,is=!1,_o=0,Ir=0,Vs=null,zb=0;function ae(){throw Error(s(321))}function Hc(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!en(e[a],i[a]))return!1;return!0}function Fc(e,i,a,c,f,p){return Zn=p,_t=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,N.H=e===null||e.memoizedState===null?zp:su,is=!1,p=a(c,f),is=!1,Ys&&(p=Jd(i,a,c,f)),Wd(e),p}function Wd(e){N.H=Yr;var i=Vt!==null&&Vt.next!==null;if(Zn=0,ge=Vt=_t=null,xo=!1,Ir=0,Vs=null,i)throw Error(s(300));e===null||ye||(e=e.dependencies,e!==null&&lo(e)&&(ye=!0))}function Jd(e,i,a,c){_t=e;var f=0;do{if(Ys&&(Vs=null),Ir=0,Ys=!1,25<=f)throw Error(s(301));if(f+=1,ge=Vt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}N.H=Up,p=i(a,c)}while(Ys);return p}function Ub(){var e=N.H,i=e.useState()[0];return i=typeof i.then=="function"?Hr(i):i,e=e.useState()[0],(Vt!==null?Vt.memoizedState:null)!==e&&(_t.flags|=1024),i}function Yc(){var e=_o!==0;return _o=0,e}function Vc(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Xc(e){if(xo){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}xo=!1}Zn=0,ge=Vt=_t=null,Ys=!1,Ir=_o=0,Vs=null}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?_t.memoizedState=ge=e:ge=ge.next=e,ge}function de(){if(Vt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var i=ge===null?_t.memoizedState:ge.next;if(i!==null)ge=i,Vt=e;else{if(e===null)throw _t.alternate===null?Error(s(467)):Error(s(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},ge===null?_t.memoizedState=ge=e:ge=ge.next=e}return ge}function bo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hr(e){var i=Ir;return Ir+=1,Vs===null&&(Vs=[]),e=Fd(Vs,e,i),i=_t,(ge===null?i.memoizedState:ge.next)===null&&(i=i.alternate,N.H=i===null||i.memoizedState===null?zp:su),e}function vo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Hr(e);if(e.$$typeof===O)return Re(e)}throw Error(s(438,String(e)))}function qc(e){var i=null,a=_t.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=_t.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=bo(),_t.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),c=0;c<e;c++)a[c]=tt;return i.index++,a}function Kn(e,i){return typeof i=="function"?i(e):i}function So(e){var i=de();return $c(i,Vt,e)}function $c(e,i,a){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=e.baseQueue,p=c.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}i.baseQueue=f=p,c.pending=null}if(p=e.baseState,f===null)e.memoizedState=p;else{i=f.next;var C=v=null,k=null,G=i,q=!1;do{var J=G.lane&-536870913;if(J!==G.lane?(Bt&J)===J:(Zn&J)===J){var I=G.revertLane;if(I===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),J===js&&(q=!0);else if((Zn&I)===I){G=G.next,I===js&&(q=!0);continue}else J={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(C=k=J,v=p):k=k.next=J,_t.lanes|=I,Mi|=I;J=G.action,is&&a(p,J),p=G.hasEagerState?G.eagerState:a(p,J)}else I={lane:J,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(C=k=I,v=p):k=k.next=I,_t.lanes|=J,Mi|=J;G=G.next}while(G!==null&&G!==i);if(k===null?v=p:k.next=C,!en(p,e.memoizedState)&&(ye=!0,q&&(a=Gs,a!==null)))throw a;e.memoizedState=p,e.baseState=v,e.baseQueue=k,c.lastRenderedState=p}return f===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Qc(e){var i=de(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var c=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do p=e(p,v.action),v=v.next;while(v!==f);en(p,i.memoizedState)||(ye=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function tp(e,i,a){var c=_t,f=de(),p=zt;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!en((Vt||f).memoizedState,a);if(v&&(f.memoizedState=a,ye=!0),f=f.queue,Wc(ip.bind(null,c,f,e),[e]),f.getSnapshot!==i||v||ge!==null&&ge.memoizedState.tag&1){if(c.flags|=2048,Xs(9,{destroy:void 0},np.bind(null,c,f,a,i),null),Zt===null)throw Error(s(349));p||(Zn&127)!==0||ep(c,i,a)}return a}function ep(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=_t.updateQueue,i===null?(i=bo(),_t.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function np(e,i,a,c){i.value=a,i.getSnapshot=c,sp(i)&&rp(e)}function ip(e,i,a){return a(function(){sp(i)&&rp(e)})}function sp(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!en(e,a)}catch{return!0}}function rp(e){var i=$i(e,2);i!==null&&Ze(i,e,2)}function Zc(e){var i=Ge();if(typeof e=="function"){var a=e;if(e=a(),is){jt(!0);try{a()}finally{jt(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:e},i}function ap(e,i,a,c){return e.baseState=a,$c(e,Vt,typeof c=="function"?c:Kn)}function Nb(e,i,a,c,f){if(To(e))throw Error(s(485));if(e=i.action,e!==null){var p={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};N.T!==null?a(!0):p.isTransition=!1,c(p),a=i.pending,a===null?(p.next=i.pending=p,op(i,p)):(p.next=a.next,i.pending=a.next=p)}}function op(e,i){var a=i.action,c=i.payload,f=e.state;if(i.isTransition){var p=N.T,v={};N.T=v;try{var C=a(f,c),k=N.S;k!==null&&k(v,C),lp(e,i,C)}catch(G){Kc(e,i,G)}finally{p!==null&&v.types!==null&&(p.types=v.types),N.T=p}}else try{p=a(f,c),lp(e,i,p)}catch(G){Kc(e,i,G)}}function lp(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){cp(e,i,c)},function(c){return Kc(e,i,c)}):cp(e,i,a)}function cp(e,i,a){i.status="fulfilled",i.value=a,up(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,op(e,a)))}function Kc(e,i,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,up(i),i=i.next;while(i!==c)}e.action=null}function up(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function hp(e,i){return i}function fp(e,i){if(zt){var a=Zt.formState;if(a!==null){t:{var c=_t;if(zt){if(Wt){e:{for(var f=Wt,p=xn;f.nodeType!==8;){if(!p){f=null;break e}if(f=bn(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Wt=bn(f.nextSibling),c=f.data==="F!";break t}}xi(c)}c=!1}c&&(i=a[0])}}return a=Ge(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:i},a.queue=c,a=kp.bind(null,_t,c),c.dispatch=a,c=Zc(!1),p=iu.bind(null,_t,!1,c.queue),c=Ge(),f={state:i,dispatch:null,action:e,pending:null},c.queue=f,a=Nb.bind(null,_t,f,p,a),f.dispatch=a,c.memoizedState=e,[i,a,!1]}function dp(e){var i=de();return pp(i,Vt,e)}function pp(e,i,a){if(i=$c(e,i,hp)[0],e=So(Kn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Hr(i)}catch(v){throw v===Is?ho:v}else c=i;i=de();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(_t.flags|=2048,Xs(9,{destroy:void 0},Pb.bind(null,f,a),null)),[c,p,e]}function Pb(e,i){e.action=i}function mp(e){var i=de(),a=Vt;if(a!==null)return pp(i,a,e);de(),i=i.memoizedState,a=de();var c=a.queue.dispatch;return a.memoizedState=e,[i,c,!1]}function Xs(e,i,a,c){return e={tag:e,create:a,deps:c,inst:i,next:null},i=_t.updateQueue,i===null&&(i=bo(),_t.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,i.lastEffect=e),e}function gp(){return de().memoizedState}function Co(e,i,a,c){var f=Ge();_t.flags|=e,f.memoizedState=Xs(1|i,{destroy:void 0},a,c===void 0?null:c)}function Ao(e,i,a,c){var f=de();c=c===void 0?null:c;var p=f.memoizedState.inst;Vt!==null&&c!==null&&Hc(c,Vt.memoizedState.deps)?f.memoizedState=Xs(i,p,a,c):(_t.flags|=e,f.memoizedState=Xs(1|i,p,a,c))}function yp(e,i){Co(8390656,8,e,i)}function Wc(e,i){Ao(2048,8,e,i)}function Lb(e){_t.flags|=4;var i=_t.updateQueue;if(i===null)i=bo(),_t.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function xp(e){var i=de().memoizedState;return Lb({ref:i,nextImpl:e}),function(){if((Gt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function _p(e,i){return Ao(4,2,e,i)}function bp(e,i){return Ao(4,4,e,i)}function vp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Sp(e,i,a){a=a!=null?a.concat([e]):null,Ao(4,4,vp.bind(null,i,e),a)}function Jc(){}function Cp(e,i){var a=de();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&Hc(i,c[1])?c[0]:(a.memoizedState=[e,i],e)}function Ap(e,i){var a=de();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&Hc(i,c[1]))return c[0];if(c=e(),is){jt(!0);try{e()}finally{jt(!1)}}return a.memoizedState=[c,i],c}function tu(e,i,a){return a===void 0||(Zn&1073741824)!==0&&(Bt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Tm(),_t.lanes|=e,Mi|=e,a)}function Tp(e,i,a,c){return en(a,i)?a:Fs.current!==null?(e=tu(e,a,c),en(e,i)||(ye=!0),e):(Zn&42)===0||(Zn&1073741824)!==0&&(Bt&261930)===0?(ye=!0,e.memoizedState=a):(e=Tm(),_t.lanes|=e,Mi|=e,i)}function Ep(e,i,a,c,f){var p=Q.p;Q.p=p!==0&&8>p?p:8;var v=N.T,C={};N.T=C,iu(e,!1,i,a);try{var k=f(),G=N.S;if(G!==null&&G(C,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var q=Ob(k,c);Fr(e,i,q,ln(e))}else Fr(e,i,c,ln(e))}catch(J){Fr(e,i,{then:function(){},status:"rejected",reason:J},ln())}finally{Q.p=p,v!==null&&C.types!==null&&(v.types=C.types),N.T=v}}function jb(){}function eu(e,i,a,c){if(e.tag!==5)throw Error(s(476));var f=Mp(e).queue;Ep(e,f,i,ht,a===null?jb:function(){return wp(e),a(c)})}function Mp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:ht},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function wp(e){var i=Mp(e);i.next===null&&(i=e.alternate.memoizedState),Fr(e,i.next.queue,{},ln())}function nu(){return Re(aa)}function Rp(){return de().memoizedState}function Bp(){return de().memoizedState}function Gb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=ln();e=vi(a);var c=Si(i,e,a);c!==null&&(Ze(c,i,a),Lr(c,i,a)),i={cache:kc()},e.payload=i;return}i=i.return}}function Ib(e,i,a){var c=ln();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},To(e)?Dp(i,a):(a=bc(e,i,a,c),a!==null&&(Ze(a,e,c),Op(a,i,c)))}function kp(e,i,a){var c=ln();Fr(e,i,a,c)}function Fr(e,i,a,c){var f={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(To(e))Dp(i,f);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,C=p(v,a);if(f.hasEagerState=!0,f.eagerState=C,en(C,v))return so(e,i,f,0),Zt===null&&io(),!1}catch{}if(a=bc(e,i,f,c),a!==null)return Ze(a,e,c),Op(a,i,c),!0}return!1}function iu(e,i,a,c){if(c={lane:2,revertLane:Uu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},To(e)){if(i)throw Error(s(479))}else i=bc(e,a,c,2),i!==null&&Ze(i,e,2)}function To(e){var i=e.alternate;return e===_t||i!==null&&i===_t}function Dp(e,i){Ys=xo=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Op(e,i,a){if((a&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Lf(e,a)}}var Yr={readContext:Re,use:vo,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useLayoutEffect:ae,useInsertionEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useSyncExternalStore:ae,useId:ae,useHostTransitionStatus:ae,useFormState:ae,useActionState:ae,useOptimistic:ae,useMemoCache:ae,useCacheRefresh:ae};Yr.useEffectEvent=ae;var zp={readContext:Re,use:vo,useCallback:function(e,i){return Ge().memoizedState=[e,i===void 0?null:i],e},useContext:Re,useEffect:yp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Co(4194308,4,vp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Co(4194308,4,e,i)},useInsertionEffect:function(e,i){Co(4,2,e,i)},useMemo:function(e,i){var a=Ge();i=i===void 0?null:i;var c=e();if(is){jt(!0);try{e()}finally{jt(!1)}}return a.memoizedState=[c,i],c},useReducer:function(e,i,a){var c=Ge();if(a!==void 0){var f=a(i);if(is){jt(!0);try{a(i)}finally{jt(!1)}}}else f=i;return c.memoizedState=c.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},c.queue=e,e=e.dispatch=Ib.bind(null,_t,e),[c.memoizedState,e]},useRef:function(e){var i=Ge();return e={current:e},i.memoizedState=e},useState:function(e){e=Zc(e);var i=e.queue,a=kp.bind(null,_t,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Jc,useDeferredValue:function(e,i){var a=Ge();return tu(a,e,i)},useTransition:function(){var e=Zc(!1);return e=Ep.bind(null,_t,e.queue,!0,!1),Ge().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var c=_t,f=Ge();if(zt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Zt===null)throw Error(s(349));(Bt&127)!==0||ep(c,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,yp(ip.bind(null,c,p,e),[e]),c.flags|=2048,Xs(9,{destroy:void 0},np.bind(null,c,p,a,i),null),a},useId:function(){var e=Ge(),i=Zt.identifierPrefix;if(zt){var a=Ln,c=Pn;a=(c&~(1<<32-At(c)-1)).toString(32)+a,i="_"+i+"R_"+a,a=_o++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=zb++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:nu,useFormState:fp,useActionState:fp,useOptimistic:function(e){var i=Ge();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=iu.bind(null,_t,!0,a),a.dispatch=i,[e,i]},useMemoCache:qc,useCacheRefresh:function(){return Ge().memoizedState=Gb.bind(null,_t)},useEffectEvent:function(e){var i=Ge(),a={impl:e};return i.memoizedState=a,function(){if((Gt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},su={readContext:Re,use:vo,useCallback:Cp,useContext:Re,useEffect:Wc,useImperativeHandle:Sp,useInsertionEffect:_p,useLayoutEffect:bp,useMemo:Ap,useReducer:So,useRef:gp,useState:function(){return So(Kn)},useDebugValue:Jc,useDeferredValue:function(e,i){var a=de();return Tp(a,Vt.memoizedState,e,i)},useTransition:function(){var e=So(Kn)[0],i=de().memoizedState;return[typeof e=="boolean"?e:Hr(e),i]},useSyncExternalStore:tp,useId:Rp,useHostTransitionStatus:nu,useFormState:dp,useActionState:dp,useOptimistic:function(e,i){var a=de();return ap(a,Vt,e,i)},useMemoCache:qc,useCacheRefresh:Bp};su.useEffectEvent=xp;var Up={readContext:Re,use:vo,useCallback:Cp,useContext:Re,useEffect:Wc,useImperativeHandle:Sp,useInsertionEffect:_p,useLayoutEffect:bp,useMemo:Ap,useReducer:Qc,useRef:gp,useState:function(){return Qc(Kn)},useDebugValue:Jc,useDeferredValue:function(e,i){var a=de();return Vt===null?tu(a,e,i):Tp(a,Vt.memoizedState,e,i)},useTransition:function(){var e=Qc(Kn)[0],i=de().memoizedState;return[typeof e=="boolean"?e:Hr(e),i]},useSyncExternalStore:tp,useId:Rp,useHostTransitionStatus:nu,useFormState:mp,useActionState:mp,useOptimistic:function(e,i){var a=de();return Vt!==null?ap(a,Vt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:qc,useCacheRefresh:Bp};Up.useEffectEvent=xp;function ru(e,i,a,c){i=e.memoizedState,a=a(c,i),a=a==null?i:y({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var au={enqueueSetState:function(e,i,a){e=e._reactInternals;var c=ln(),f=vi(c);f.payload=i,a!=null&&(f.callback=a),i=Si(e,f,c),i!==null&&(Ze(i,e,c),Lr(i,e,c))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var c=ln(),f=vi(c);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Si(e,f,c),i!==null&&(Ze(i,e,c),Lr(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=ln(),c=vi(a);c.tag=2,i!=null&&(c.callback=i),i=Si(e,c,a),i!==null&&(Ze(i,e,a),Lr(i,e,a))}};function Np(e,i,a,c,f,p,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,p,v):i.prototype&&i.prototype.isPureReactComponent?!Br(a,c)||!Br(f,p):!0}function Pp(e,i,a,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==e&&au.enqueueReplaceState(i,i.state,null)}function ss(e,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(e=e.defaultProps){a===i&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Lp(e){no(e)}function jp(e){console.error(e)}function Gp(e){no(e)}function Eo(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Ip(e,i,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ou(e,i,a){return a=vi(a),a.tag=3,a.payload={element:null},a.callback=function(){Eo(e,i)},a}function Hp(e){return e=vi(e),e.tag=3,e}function Fp(e,i,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;e.payload=function(){return f(p)},e.callback=function(){Ip(i,a,c)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Ip(i,a,c),typeof f!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function Hb(e,i,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&Ls(i,a,f,!0),a=sn.current,a!==null){switch(a.tag){case 31:case 13:return _n===null?Lo():a.alternate===null&&oe===0&&(oe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===fo?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),Du(e,c,f)),!1;case 22:return a.flags|=65536,c===fo?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),Du(e,c,f)),!1}throw Error(s(435,a.tag))}return Du(e,c,f),Lo(),!1}if(zt)return i=sn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Ec&&(e=Error(s(422),{cause:c}),Or(mn(e,a)))):(c!==Ec&&(i=Error(s(423),{cause:c}),Or(mn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,c=mn(c,a),f=ou(e.stateNode,c,f),Pc(e,f),oe!==4&&(oe=2)),!1;var p=Error(s(520),{cause:c});if(p=mn(p,a),Wr===null?Wr=[p]:Wr.push(p),oe!==4&&(oe=2),i===null)return!0;c=mn(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=ou(a.stateNode,c,e),Pc(a,e),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(wi===null||!wi.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Hp(f),Fp(f,e,a,c),Pc(a,f),!1}a=a.return}while(a!==null);return!1}var lu=Error(s(461)),ye=!1;function Be(e,i,a,c){i.child=e===null?qd(i,null,a,c):ns(i,e.child,a,c)}function Yp(e,i,a,c,f){a=a.render;var p=i.ref;if("ref"in c){var v={};for(var C in c)C!=="ref"&&(v[C]=c[C])}else v=c;return Wi(i),c=Fc(e,i,a,v,p,f),C=Yc(),e!==null&&!ye?(Vc(e,i,f),Wn(e,i,f)):(zt&&C&&Ac(i),i.flags|=1,Be(e,i,c,f),i.child)}function Vp(e,i,a,c,f){if(e===null){var p=a.type;return typeof p=="function"&&!vc(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,Xp(e,i,p,c,f)):(e=ao(a.type,null,c,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(p=e.child,!gu(e,f)){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Br,a(v,c)&&e.ref===i.ref)return Wn(e,i,f)}return i.flags|=1,e=Xn(p,c),e.ref=i.ref,e.return=i,i.child=e}function Xp(e,i,a,c,f){if(e!==null){var p=e.memoizedProps;if(Br(p,c)&&e.ref===i.ref)if(ye=!1,i.pendingProps=c=p,gu(e,f))(e.flags&131072)!==0&&(ye=!0);else return i.lanes=e.lanes,Wn(e,i,f)}return cu(e,i,a,c,f)}function qp(e,i,a,c){var f=c.children,p=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(c=i.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,i.child=null;return $p(e,i,p,a,c)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&uo(i,p!==null?p.cachePool:null),p!==null?Zd(i,p):jc(),Kd(i);else return c=i.lanes=536870912,$p(e,i,p!==null?p.baseLanes|a:a,a,c)}else p!==null?(uo(i,p.cachePool),Zd(i,p),Ai(),i.memoizedState=null):(e!==null&&uo(i,null),jc(),Ai());return Be(e,i,f,a),i.child}function Vr(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function $p(e,i,a,c,f){var p=Oc();return p=p===null?null:{parent:me._currentValue,pool:p},i.memoizedState={baseLanes:a,cachePool:p},e!==null&&uo(i,null),jc(),Kd(i),e!==null&&Ls(e,i,c,!0),i.childLanes=f,null}function Mo(e,i){return i=Ro({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Qp(e,i,a){return ns(i,e.child,null,a),e=Mo(i,i.pendingProps),e.flags|=2,rn(i),i.memoizedState=null,e}function Fb(e,i,a){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(zt){if(c.mode==="hidden")return e=Mo(i,c),i.lanes=536870912,Vr(null,e);if(Ic(i),(e=Wt)?(e=og(e,xn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:gi!==null?{id:Pn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=i,i.child=a,we=i,Wt=null)):e=null,e===null)throw xi(i);return i.lanes=536870912,null}return Mo(i,c)}var p=e.memoizedState;if(p!==null){var v=p.dehydrated;if(Ic(i),f)if(i.flags&256)i.flags&=-257,i=Qp(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(ye||Ls(e,i,a,!1),f=(a&e.childLanes)!==0,ye||f){if(c=Zt,c!==null&&(v=jf(c,a),v!==0&&v!==p.retryLane))throw p.retryLane=v,$i(e,v),Ze(c,e,v),lu;Lo(),i=Qp(e,i,a)}else e=p.treeContext,Wt=bn(v.nextSibling),we=i,zt=!0,yi=null,xn=!1,e!==null&&Ud(i,e),i=Mo(i,c),i.flags|=4096;return i}return e=Xn(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function wo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function cu(e,i,a,c,f){return Wi(i),a=Fc(e,i,a,c,void 0,f),c=Yc(),e!==null&&!ye?(Vc(e,i,f),Wn(e,i,f)):(zt&&c&&Ac(i),i.flags|=1,Be(e,i,a,f),i.child)}function Zp(e,i,a,c,f,p){return Wi(i),i.updateQueue=null,a=Jd(i,c,a,f),Wd(e),c=Yc(),e!==null&&!ye?(Vc(e,i,p),Wn(e,i,p)):(zt&&c&&Ac(i),i.flags|=1,Be(e,i,a,p),i.child)}function Kp(e,i,a,c,f){if(Wi(i),i.stateNode===null){var p=zs,v=a.contextType;typeof v=="object"&&v!==null&&(p=Re(v)),p=new a(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=au,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Uc(i),v=a.contextType,p.context=typeof v=="object"&&v!==null?Re(v):zs,p.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(ru(i,a,v,c),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&au.enqueueReplaceState(p,p.state,null),Gr(i,c,p,f),jr(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){p=i.stateNode;var C=i.memoizedProps,k=ss(a,C);p.props=k;var G=p.context,q=a.contextType;v=zs,typeof q=="object"&&q!==null&&(v=Re(q));var J=a.getDerivedStateFromProps;q=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,q||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||G!==v)&&Pp(i,p,c,v),bi=!1;var I=i.memoizedState;p.state=I,Gr(i,c,p,f),jr(),G=i.memoizedState,C||I!==G||bi?(typeof J=="function"&&(ru(i,a,J,c),G=i.memoizedState),(k=bi||Np(i,a,k,c,I,G,v))?(q||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=G),p.props=c,p.state=G,p.context=v,c=k):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Nc(e,i),v=i.memoizedProps,q=ss(a,v),p.props=q,J=i.pendingProps,I=p.context,G=a.contextType,k=zs,typeof G=="object"&&G!==null&&(k=Re(G)),C=a.getDerivedStateFromProps,(G=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==J||I!==k)&&Pp(i,p,c,k),bi=!1,I=i.memoizedState,p.state=I,Gr(i,c,p,f),jr();var Y=i.memoizedState;v!==J||I!==Y||bi||e!==null&&e.dependencies!==null&&lo(e.dependencies)?(typeof C=="function"&&(ru(i,a,C,c),Y=i.memoizedState),(q=bi||Np(i,a,q,c,I,Y,k)||e!==null&&e.dependencies!==null&&lo(e.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,Y,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,Y,k)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Y),p.props=c,p.state=Y,p.context=k,c=q):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(i.flags|=1024),c=!1)}return p=c,wo(e,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,e!==null&&c?(i.child=ns(i,e.child,null,f),i.child=ns(i,null,a,f)):Be(e,i,a,f),i.memoizedState=p.state,e=i.child):e=Wn(e,i,f),e}function Wp(e,i,a,c){return Zi(),i.flags|=256,Be(e,i,a,c),i.child}var uu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hu(e){return{baseLanes:e,cachePool:Id()}}function fu(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=on),e}function Jp(e,i,a){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,v;if((v=p)||(v=e!==null&&e.memoizedState===null?!1:(fe.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(zt){if(f?Ci(i):Ai(),(e=Wt)?(e=og(e,xn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:gi!==null?{id:Pn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=i,i.child=a,we=i,Wt=null)):e=null,e===null)throw xi(i);return $u(e)?i.lanes=32:i.lanes=536870912,null}var C=c.children;return c=c.fallback,f?(Ai(),f=i.mode,C=Ro({mode:"hidden",children:C},f),c=Qi(c,f,a,null),C.return=i,c.return=i,C.sibling=c,i.child=C,c=i.child,c.memoizedState=hu(a),c.childLanes=fu(e,v,a),i.memoizedState=uu,Vr(null,c)):(Ci(i),du(i,C))}var k=e.memoizedState;if(k!==null&&(C=k.dehydrated,C!==null)){if(p)i.flags&256?(Ci(i),i.flags&=-257,i=pu(e,i,a)):i.memoizedState!==null?(Ai(),i.child=e.child,i.flags|=128,i=null):(Ai(),C=c.fallback,f=i.mode,c=Ro({mode:"visible",children:c.children},f),C=Qi(C,f,a,null),C.flags|=2,c.return=i,C.return=i,c.sibling=C,i.child=c,ns(i,e.child,null,a),c=i.child,c.memoizedState=hu(a),c.childLanes=fu(e,v,a),i.memoizedState=uu,i=Vr(null,c));else if(Ci(i),$u(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var G=v.dgst;v=G,c=Error(s(419)),c.stack="",c.digest=v,Or({value:c,source:null,stack:null}),i=pu(e,i,a)}else if(ye||Ls(e,i,a,!1),v=(a&e.childLanes)!==0,ye||v){if(v=Zt,v!==null&&(c=jf(v,a),c!==0&&c!==k.retryLane))throw k.retryLane=c,$i(e,c),Ze(v,e,c),lu;qu(C)||Lo(),i=pu(e,i,a)}else qu(C)?(i.flags|=192,i.child=e.child,i=null):(e=k.treeContext,Wt=bn(C.nextSibling),we=i,zt=!0,yi=null,xn=!1,e!==null&&Ud(i,e),i=du(i,c.children),i.flags|=4096);return i}return f?(Ai(),C=c.fallback,f=i.mode,k=e.child,G=k.sibling,c=Xn(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,G!==null?C=Xn(G,C):(C=Qi(C,f,a,null),C.flags|=2),C.return=i,c.return=i,c.sibling=C,i.child=c,Vr(null,c),c=i.child,C=e.child.memoizedState,C===null?C=hu(a):(f=C.cachePool,f!==null?(k=me._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=Id(),C={baseLanes:C.baseLanes|a,cachePool:f}),c.memoizedState=C,c.childLanes=fu(e,v,a),i.memoizedState=uu,Vr(e.child,c)):(Ci(i),a=e.child,e=a.sibling,a=Xn(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function du(e,i){return i=Ro({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Ro(e,i){return e=nn(22,e,null,i),e.lanes=0,e}function pu(e,i,a){return ns(i,e.child,null,a),e=du(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function tm(e,i,a){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Rc(e.return,i,a)}function mu(e,i,a,c,f,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f,treeForkCount:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=a,v.tailMode=f,v.treeForkCount=p)}function em(e,i,a){var c=i.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var v=fe.current,C=(v&2)!==0;if(C?(v=v&1|2,i.flags|=128):v&=1,et(fe,v),Be(e,i,c,a),c=zt?Dr:0,!C&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tm(e,a,i);else if(e.tag===19)tm(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&yo(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),mu(i,!1,f,a,p,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&yo(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}mu(i,!0,a,null,p,c);break;case"together":mu(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Wn(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Mi|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ls(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Xn(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Xn(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function gu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&lo(e)))}function Yb(e,i,a){switch(i.tag){case 3:Kt(i,i.stateNode.containerInfo),_i(i,me,e.memoizedState.cache),Zi();break;case 27:case 5:Je(i);break;case 4:Kt(i,i.stateNode.containerInfo);break;case 10:_i(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ic(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ci(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Jp(e,i,a):(Ci(i),e=Wn(e,i,a),e!==null?e.sibling:null);Ci(i);break;case 19:var f=(e.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(Ls(e,i,a,!1),c=(a&i.childLanes)!==0),f){if(c)return em(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(fe,fe.current),c)break;return null;case 22:return i.lanes=0,qp(e,i,a,i.pendingProps);case 24:_i(i,me,e.memoizedState.cache)}return Wn(e,i,a)}function nm(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ye=!0;else{if(!gu(e,a)&&(i.flags&128)===0)return ye=!1,Yb(e,i,a);ye=(e.flags&131072)!==0}else ye=!1,zt&&(i.flags&1048576)!==0&&zd(i,Dr,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=ts(i.elementType),i.type=e,typeof e=="function")vc(e)?(c=ss(e,c),i.tag=1,i=Kp(null,i,e,c,a)):(i.tag=0,i=cu(null,i,e,c,a));else{if(e!=null){var f=e.$$typeof;if(f===P){i.tag=11,i=Yp(null,i,e,c,a);break t}else if(f===H){i.tag=14,i=Vp(null,i,e,c,a);break t}}throw i=wt(e)||e,Error(s(306,i,""))}}return i;case 0:return cu(e,i,i.type,i.pendingProps,a);case 1:return c=i.type,f=ss(c,i.pendingProps),Kp(e,i,c,f,a);case 3:t:{if(Kt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Nc(e,i),Gr(i,c,null,a);var v=i.memoizedState;if(c=v.cache,_i(i,me,c),c!==p.cache&&Bc(i,[me],a,!0),jr(),c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Wp(e,i,c,a);break t}else if(c!==f){f=mn(Error(s(424)),i),Or(f),i=Wp(e,i,c,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Wt=bn(e.firstChild),we=i,zt=!0,yi=null,xn=!0,a=qd(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zi(),c===f){i=Wn(e,i,a);break t}Be(e,i,c,a)}i=i.child}return i;case 26:return wo(e,i),e===null?(a=dg(i.type,null,i.pendingProps,null))?i.memoizedState=a:zt||(a=i.type,e=i.pendingProps,c=Vo(yt.current).createElement(a),c[Me]=i,c[Ye]=e,ke(c,a,e),Ce(c),i.stateNode=c):i.memoizedState=dg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Je(i),e===null&&zt&&(c=i.stateNode=ug(i.type,i.pendingProps,yt.current),we=i,xn=!0,f=Wt,Di(i.type)?(Qu=f,Wt=bn(c.firstChild)):Wt=f),Be(e,i,i.pendingProps.children,a),wo(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&zt&&((f=c=Wt)&&(c=b1(c,i.type,i.pendingProps,xn),c!==null?(i.stateNode=c,we=i,Wt=bn(c.firstChild),xn=!1,f=!0):f=!1),f||xi(i)),Je(i),f=i.type,p=i.pendingProps,v=e!==null?e.memoizedProps:null,c=p.children,Yu(f,p)?c=null:v!==null&&Yu(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Fc(e,i,Ub,null,null,a),aa._currentValue=f),wo(e,i),Be(e,i,c,a),i.child;case 6:return e===null&&zt&&((e=a=Wt)&&(a=v1(a,i.pendingProps,xn),a!==null?(i.stateNode=a,we=i,Wt=null,e=!0):e=!1),e||xi(i)),null;case 13:return Jp(e,i,a);case 4:return Kt(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=ns(i,null,c,a):Be(e,i,c,a),i.child;case 11:return Yp(e,i,i.type,i.pendingProps,a);case 7:return Be(e,i,i.pendingProps,a),i.child;case 8:return Be(e,i,i.pendingProps.children,a),i.child;case 12:return Be(e,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,_i(i,i.type,c.value),Be(e,i,c.children,a),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Wi(i),f=Re(f),c=c(f),i.flags|=1,Be(e,i,c,a),i.child;case 14:return Vp(e,i,i.type,i.pendingProps,a);case 15:return Xp(e,i,i.type,i.pendingProps,a);case 19:return em(e,i,a);case 31:return Fb(e,i,a);case 22:return qp(e,i,a,i.pendingProps);case 24:return Wi(i),c=Re(me),e===null?(f=Oc(),f===null&&(f=Zt,p=kc(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:c,cache:f},Uc(i),_i(i,me,f)):((e.lanes&a)!==0&&(Nc(e,i),Gr(i,null,null,a),jr()),f=e.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),_i(i,me,c)):(c=p.cache,_i(i,me,c),c!==f.cache&&Bc(i,[me],a,!0))),Be(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Jn(e){e.flags|=4}function yu(e,i,a,c,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Rm())e.flags|=8192;else throw es=fo,zc}else e.flags&=-16777217}function im(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!xg(i))if(Rm())e.flags|=8192;else throw es=fo,zc}function Bo(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Nf():536870912,e.lanes|=i,Zs|=i)}function Xr(e,i){if(!zt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Jt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=a,i}function Vb(e,i,a){var c=i.pendingProps;switch(Tc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(i),null;case 1:return Jt(i),null;case 3:return a=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Qn(me),It(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ps(i)?Jn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mc())),Jt(i),null;case 26:var f=i.type,p=i.memoizedState;return e===null?(Jn(i),p!==null?(Jt(i),im(i,p)):(Jt(i),yu(i,f,null,c,a))):p?p!==e.memoizedState?(Jn(i),Jt(i),im(i,p)):(Jt(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&Jn(i),Jt(i),yu(i,f,e,c,a)),null;case 27:if(Un(i),a=yt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Jt(i),null}e=rt.current,Ps(i)?Nd(i):(e=ug(f,c,a),i.stateNode=e,Jn(i))}return Jt(i),null;case 5:if(Un(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Jt(i),null}if(p=rt.current,Ps(i))Nd(i);else{var v=Vo(yt.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}p[Me]=i,p[Ye]=c;t:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break t;for(;v.sibling===null;){if(v.return===null||v.return===i)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=p;t:switch(ke(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Jn(i)}}return Jt(i),yu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=yt.current,Ps(i)){if(e=i.stateNode,a=i.memoizedProps,c=null,f=we,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}e[Me]=i,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Jm(e.nodeValue,a)),e||xi(i,!0)}else e=Vo(e).createTextNode(c),e[Me]=i,i.stateNode=e}return Jt(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(c=Ps(i),a!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Me]=i}else Zi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Jt(i),e=!1}else a=Mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(rn(i),i):(rn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Jt(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ps(i),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Me]=i}else Zi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Jt(i),f=!1}else f=Mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(rn(i),i):(rn(i),null)}return rn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Bo(i,i.updateQueue),Jt(i),null);case 4:return It(),e===null&&ju(i.stateNode.containerInfo),Jt(i),null;case 10:return Qn(i.type),Jt(i),null;case 19:if(V(fe),c=i.memoizedState,c===null)return Jt(i),null;if(f=(i.flags&128)!==0,p=c.rendering,p===null)if(f)Xr(c,!1);else{if(oe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(p=yo(e),p!==null){for(i.flags|=128,Xr(c,!1),e=p.updateQueue,i.updateQueue=e,Bo(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)kd(a,e),a=a.sibling;return et(fe,fe.current&1|2),zt&&qn(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&je()>Uo&&(i.flags|=128,f=!0,Xr(c,!1),i.lanes=4194304)}else{if(!f)if(e=yo(p),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Bo(i,e),Xr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!zt)return Jt(i),null}else 2*je()-c.renderingStartTime>Uo&&a!==536870912&&(i.flags|=128,f=!0,Xr(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(e=c.last,e!==null?e.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=je(),e.sibling=null,a=fe.current,et(fe,f?a&1|2:a&1),zt&&qn(i,c.treeForkCount),e):(Jt(i),null);case 22:case 23:return rn(i),Gc(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(Jt(i),i.subtreeFlags&6&&(i.flags|=8192)):Jt(i),a=i.updateQueue,a!==null&&Bo(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),e!==null&&V(Ji),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Qn(me),Jt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Xb(e,i){switch(Tc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Qn(me),It(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Un(i),null;case 31:if(i.memoizedState!==null){if(rn(i),i.alternate===null)throw Error(s(340));Zi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(rn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Zi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return V(fe),null;case 4:return It(),null;case 10:return Qn(i.type),null;case 22:case 23:return rn(i),Gc(),e!==null&&V(Ji),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Qn(me),null;case 25:return null;default:return null}}function sm(e,i){switch(Tc(i),i.tag){case 3:Qn(me),It();break;case 26:case 27:case 5:Un(i);break;case 4:It();break;case 31:i.memoizedState!==null&&rn(i);break;case 13:rn(i);break;case 19:V(fe);break;case 10:Qn(i.type);break;case 22:case 23:rn(i),Gc(),e!==null&&V(Ji);break;case 24:Qn(me)}}function qr(e,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){c=void 0;var p=a.create,v=a.inst;c=p(),v.destroy=c}a=a.next}while(a!==f)}}catch(C){Yt(i,i.return,C)}}function Ti(e,i,a){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&e)===e){var v=c.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,f=i;var k=a,G=C;try{G()}catch(q){Yt(f,k,q)}}}c=c.next}while(c!==p)}}catch(q){Yt(i,i.return,q)}}function rm(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Qd(i,a)}catch(c){Yt(e,e.return,c)}}}function am(e,i,a){a.props=ss(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){Yt(e,i,c)}}function $r(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(f){Yt(e,i,f)}}function jn(e,i){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){Yt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Yt(e,i,f)}else a.current=null}function om(e){var i=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){Yt(e,e.return,f)}}function xu(e,i,a){try{var c=e.stateNode;p1(c,e.type,a,i),c[Ye]=i}catch(f){Yt(e,e.return,f)}}function lm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Di(e.type)||e.tag===4}function _u(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||lm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Di(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bu(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Yn));else if(c!==4&&(c===27&&Di(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(bu(e,i,a),e=e.sibling;e!==null;)bu(e,i,a),e=e.sibling}function ko(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(c!==4&&(c===27&&Di(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ko(e,i,a),e=e.sibling;e!==null;)ko(e,i,a),e=e.sibling}function cm(e){var i=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);ke(i,c,a),i[Me]=e,i[Ye]=a}catch(p){Yt(e,e.return,p)}}var ti=!1,xe=!1,vu=!1,um=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function qb(e,i){if(e=e.containerInfo,Hu=Wo,e=Sd(e),pc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var v=0,C=-1,k=-1,G=0,q=0,J=e,I=null;e:for(;;){for(var Y;J!==a||f!==0&&J.nodeType!==3||(C=v+f),J!==p||c!==0&&J.nodeType!==3||(k=v+c),J.nodeType===3&&(v+=J.nodeValue.length),(Y=J.firstChild)!==null;)I=J,J=Y;for(;;){if(J===e)break e;if(I===a&&++G===f&&(C=v),I===p&&++q===c&&(k=v),(Y=J.nextSibling)!==null)break;J=I,I=J.parentNode}J=Y}a=C===-1||k===-1?null:{start:C,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fu={focusedElem:e,selectionRange:a},Wo=!1,Ae=i;Ae!==null;)if(i=Ae,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Ae=e;else for(;Ae!==null;){switch(i=Ae,p=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var at=ss(a.type,f);e=c.getSnapshotBeforeUpdate(at,p),c.__reactInternalSnapshotBeforeUpdate=e}catch(mt){Yt(a,a.return,mt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Xu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Xu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ae=e;break}Ae=i.return}}function hm(e,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ni(e,a),c&4&&qr(5,a);break;case 1:if(ni(e,a),c&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Yt(a,a.return,v)}else{var f=ss(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Yt(a,a.return,v)}}c&64&&rm(a),c&512&&$r(a,a.return);break;case 3:if(ni(e,a),c&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Qd(e,i)}catch(v){Yt(a,a.return,v)}}break;case 27:i===null&&c&4&&cm(a);case 26:case 5:ni(e,a),i===null&&c&4&&om(a),c&512&&$r(a,a.return);break;case 12:ni(e,a);break;case 31:ni(e,a),c&4&&pm(e,a);break;case 13:ni(e,a),c&4&&mm(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=n1.bind(null,a),S1(e,a))));break;case 22:if(c=a.memoizedState!==null||ti,!c){i=i!==null&&i.memoizedState!==null||xe,f=ti;var p=xe;ti=c,(xe=i)&&!p?ii(e,a,(a.subtreeFlags&8772)!==0):ni(e,a),ti=f,xe=p}break;case 30:break;default:ni(e,a)}}function fm(e){var i=e.alternate;i!==null&&(e.alternate=null,fm(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Kl(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var se=null,Xe=!1;function ei(e,i,a){for(a=a.child;a!==null;)dm(e,i,a),a=a.sibling}function dm(e,i,a){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(K,a)}catch{}switch(a.tag){case 26:xe||jn(a,i),ei(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xe||jn(a,i);var c=se,f=Xe;Di(a.type)&&(se=a.stateNode,Xe=!1),ei(e,i,a),ia(a.stateNode),se=c,Xe=f;break;case 5:xe||jn(a,i);case 6:if(c=se,f=Xe,se=null,ei(e,i,a),se=c,Xe=f,se!==null)if(Xe)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(a.stateNode)}catch(p){Yt(a,i,p)}else try{se.removeChild(a.stateNode)}catch(p){Yt(a,i,p)}break;case 18:se!==null&&(Xe?(e=se,rg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),sr(e)):rg(se,a.stateNode));break;case 4:c=se,f=Xe,se=a.stateNode.containerInfo,Xe=!0,ei(e,i,a),se=c,Xe=f;break;case 0:case 11:case 14:case 15:Ti(2,a,i),xe||Ti(4,a,i),ei(e,i,a);break;case 1:xe||(jn(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&am(a,i,c)),ei(e,i,a);break;case 21:ei(e,i,a);break;case 22:xe=(c=xe)||a.memoizedState!==null,ei(e,i,a),xe=c;break;default:ei(e,i,a)}}function pm(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sr(e)}catch(a){Yt(i,i.return,a)}}}function mm(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sr(e)}catch(a){Yt(i,i.return,a)}}function $b(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new um),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new um),i;default:throw Error(s(435,e.tag))}}function Do(e,i){var a=$b(e);i.forEach(function(c){if(!a.has(c)){a.add(c);var f=i1.bind(null,e,c);c.then(f,f)}})}function qe(e,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],p=e,v=i,C=v;t:for(;C!==null;){switch(C.tag){case 27:if(Di(C.type)){se=C.stateNode,Xe=!1;break t}break;case 5:se=C.stateNode,Xe=!1;break t;case 3:case 4:se=C.stateNode.containerInfo,Xe=!0;break t}C=C.return}if(se===null)throw Error(s(160));dm(p,v,f),se=null,Xe=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)gm(i,e),i=i.sibling}var Mn=null;function gm(e,i){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qe(i,e),$e(e),c&4&&(Ti(3,e,e.return),qr(3,e),Ti(5,e,e.return));break;case 1:qe(i,e),$e(e),c&512&&(xe||a===null||jn(a,a.return)),c&64&&ti&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=Mn;if(qe(i,e),$e(e),c&512&&(xe||a===null||jn(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[vr]||p[Me]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),ke(p,c,a),p[Me]=e,Ce(p),c=p;break t;case"link":var v=gg("link","href",f).get(c+(a.href||""));if(v){for(var C=0;C<v.length;C++)if(p=v[C],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(C,1);break e}}p=f.createElement(c),ke(p,c,a),f.head.appendChild(p);break;case"meta":if(v=gg("meta","content",f).get(c+(a.content||""))){for(C=0;C<v.length;C++)if(p=v[C],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(C,1);break e}}p=f.createElement(c),ke(p,c,a),f.head.appendChild(p);break;default:throw Error(s(468,c))}p[Me]=e,Ce(p),c=p}e.stateNode=c}else yg(f,e.type,e.stateNode);else e.stateNode=mg(f,c,e.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?yg(f,e.type,e.stateNode):mg(f,c,e.memoizedProps)):c===null&&e.stateNode!==null&&xu(e,e.memoizedProps,a.memoizedProps)}break;case 27:qe(i,e),$e(e),c&512&&(xe||a===null||jn(a,a.return)),a!==null&&c&4&&xu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(qe(i,e),$e(e),c&512&&(xe||a===null||jn(a,a.return)),e.flags&32){f=e.stateNode;try{Ms(f,"")}catch(at){Yt(e,e.return,at)}}c&4&&e.stateNode!=null&&(f=e.memoizedProps,xu(e,f,a!==null?a.memoizedProps:f)),c&1024&&(vu=!0);break;case 6:if(qe(i,e),$e(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(at){Yt(e,e.return,at)}}break;case 3:if($o=null,f=Mn,Mn=Xo(i.containerInfo),qe(i,e),Mn=f,$e(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{sr(i.containerInfo)}catch(at){Yt(e,e.return,at)}vu&&(vu=!1,ym(e));break;case 4:c=Mn,Mn=Xo(e.stateNode.containerInfo),qe(i,e),$e(e),Mn=c;break;case 12:qe(i,e),$e(e);break;case 31:qe(i,e),$e(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Do(e,c)));break;case 13:qe(i,e),$e(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zo=je()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Do(e,c)));break;case 22:f=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,G=ti,q=xe;if(ti=G||f,xe=q||k,qe(i,e),xe=q,ti=G,$e(e),c&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||k||ti||xe||rs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){k=a=i;try{if(p=k.stateNode,f)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=k.stateNode;var J=k.memoizedProps.style,I=J!=null&&J.hasOwnProperty("display")?J.display:null;C.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(at){Yt(k,k.return,at)}}}else if(i.tag===6){if(a===null){k=i;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(at){Yt(k,k.return,at)}}}else if(i.tag===18){if(a===null){k=i;try{var Y=k.stateNode;f?ag(Y,!0):ag(k.stateNode,!1)}catch(at){Yt(k,k.return,at)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Do(e,a))));break;case 19:qe(i,e),$e(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Do(e,c)));break;case 30:break;case 21:break;default:qe(i,e),$e(e)}}function $e(e){var i=e.flags;if(i&2){try{for(var a,c=e.return;c!==null;){if(lm(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=_u(e);ko(e,p,f);break;case 5:var v=a.stateNode;a.flags&32&&(Ms(v,""),a.flags&=-33);var C=_u(e);ko(e,C,v);break;case 3:case 4:var k=a.stateNode.containerInfo,G=_u(e);bu(e,G,k);break;default:throw Error(s(161))}}catch(q){Yt(e,e.return,q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function ym(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;ym(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function ni(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hm(e,i.alternate,i),i=i.sibling}function rs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ti(4,i,i.return),rs(i);break;case 1:jn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&am(i,i.return,a),rs(i);break;case 27:ia(i.stateNode);case 26:case 5:jn(i,i.return),rs(i);break;case 22:i.memoizedState===null&&rs(i);break;case 30:rs(i);break;default:rs(i)}e=e.sibling}}function ii(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=e,p=i,v=p.flags;switch(p.tag){case 0:case 11:case 15:ii(f,p,a),qr(4,p);break;case 1:if(ii(f,p,a),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){Yt(c,c.return,G)}if(c=p,f=c.updateQueue,f!==null){var C=c.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)$d(k[f],C)}catch(G){Yt(c,c.return,G)}}a&&v&64&&rm(p),$r(p,p.return);break;case 27:cm(p);case 26:case 5:ii(f,p,a),a&&c===null&&v&4&&om(p),$r(p,p.return);break;case 12:ii(f,p,a);break;case 31:ii(f,p,a),a&&v&4&&pm(f,p);break;case 13:ii(f,p,a),a&&v&4&&mm(f,p);break;case 22:p.memoizedState===null&&ii(f,p,a),$r(p,p.return);break;case 30:break;default:ii(f,p,a)}i=i.sibling}}function Su(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zr(a))}function Cu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zr(e))}function wn(e,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)xm(e,i,a,c),i=i.sibling}function xm(e,i,a,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:wn(e,i,a,c),f&2048&&qr(9,i);break;case 1:wn(e,i,a,c);break;case 3:wn(e,i,a,c),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zr(e)));break;case 12:if(f&2048){wn(e,i,a,c),e=i.stateNode;try{var p=i.memoizedProps,v=p.id,C=p.onPostCommit;typeof C=="function"&&C(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Yt(i,i.return,k)}}else wn(e,i,a,c);break;case 31:wn(e,i,a,c);break;case 13:wn(e,i,a,c);break;case 23:break;case 22:p=i.stateNode,v=i.alternate,i.memoizedState!==null?p._visibility&2?wn(e,i,a,c):Qr(e,i):p._visibility&2?wn(e,i,a,c):(p._visibility|=2,qs(e,i,a,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Su(v,i);break;case 24:wn(e,i,a,c),f&2048&&Cu(i.alternate,i);break;default:wn(e,i,a,c)}}function qs(e,i,a,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=e,v=i,C=a,k=c,G=v.flags;switch(v.tag){case 0:case 11:case 15:qs(p,v,C,k,f),qr(8,v);break;case 23:break;case 22:var q=v.stateNode;v.memoizedState!==null?q._visibility&2?qs(p,v,C,k,f):Qr(p,v):(q._visibility|=2,qs(p,v,C,k,f)),f&&G&2048&&Su(v.alternate,v);break;case 24:qs(p,v,C,k,f),f&&G&2048&&Cu(v.alternate,v);break;default:qs(p,v,C,k,f)}i=i.sibling}}function Qr(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,c=i,f=c.flags;switch(c.tag){case 22:Qr(a,c),f&2048&&Su(c.alternate,c);break;case 24:Qr(a,c),f&2048&&Cu(c.alternate,c);break;default:Qr(a,c)}i=i.sibling}}var Zr=8192;function $s(e,i,a){if(e.subtreeFlags&Zr)for(e=e.child;e!==null;)_m(e,i,a),e=e.sibling}function _m(e,i,a){switch(e.tag){case 26:$s(e,i,a),e.flags&Zr&&e.memoizedState!==null&&z1(a,Mn,e.memoizedState,e.memoizedProps);break;case 5:$s(e,i,a);break;case 3:case 4:var c=Mn;Mn=Xo(e.stateNode.containerInfo),$s(e,i,a),Mn=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Zr,Zr=16777216,$s(e,i,a),Zr=c):$s(e,i,a));break;default:$s(e,i,a)}}function bm(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Kr(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Ae=c,Sm(c,e)}bm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vm(e),e=e.sibling}function vm(e){switch(e.tag){case 0:case 11:case 15:Kr(e),e.flags&2048&&Ti(9,e,e.return);break;case 3:Kr(e);break;case 12:Kr(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Oo(e)):Kr(e);break;default:Kr(e)}}function Oo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Ae=c,Sm(c,e)}bm(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ti(8,i,i.return),Oo(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Oo(i));break;default:Oo(i)}e=e.sibling}}function Sm(e,i){for(;Ae!==null;){var a=Ae;switch(a.tag){case 0:case 11:case 15:Ti(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:zr(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Ae=c;else t:for(a=e;Ae!==null;){c=Ae;var f=c.sibling,p=c.return;if(fm(c),c===a){Ae=null;break t}if(f!==null){f.return=p,Ae=f;break t}Ae=p}}}var Qb={getCacheForType:function(e){var i=Re(me),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Re(me).controller.signal}},Zb=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Zt=null,Tt=null,Bt=0,Ft=0,an=null,Ei=!1,Qs=!1,Au=!1,si=0,oe=0,Mi=0,as=0,Tu=0,on=0,Zs=0,Wr=null,Qe=null,Eu=!1,zo=0,Cm=0,Uo=1/0,No=null,wi=null,ve=0,Ri=null,Ks=null,ri=0,Mu=0,wu=null,Am=null,Jr=0,Ru=null;function ln(){return(Gt&2)!==0&&Bt!==0?Bt&-Bt:N.T!==null?Uu():Gf()}function Tm(){if(on===0)if((Bt&536870912)===0||zt){var e=Fa;Fa<<=1,(Fa&3932160)===0&&(Fa=262144),on=e}else on=536870912;return e=sn.current,e!==null&&(e.flags|=32),on}function Ze(e,i,a){(e===Zt&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Ws(e,0),Bi(e,Bt,on,!1)),br(e,a),((Gt&2)===0||e!==Zt)&&(e===Zt&&((Gt&2)===0&&(as|=a),oe===4&&Bi(e,Bt,on,!1)),Gn(e))}function Em(e,i,a){if((Gt&6)!==0)throw Error(s(327));var c=!a&&(i&127)===0&&(i&e.expiredLanes)===0||_r(e,i),f=c?Jb(e,i):ku(e,i,!0),p=c;do{if(f===0){Qs&&!c&&Bi(e,i,0,!1);break}else{if(a=e.current.alternate,p&&!Kb(a)){f=ku(e,i,!1),p=!1;continue}if(f===2){if(p=i,e.errorRecoveryDisabledLanes&p)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var C=e;f=Wr;var k=C.current.memoizedState.isDehydrated;if(k&&(Ws(C,v).flags|=256),v=ku(C,v,!1),v!==2){if(Au&&!k){C.errorRecoveryDisabledLanes|=p,as|=p,f=4;break t}p=Qe,Qe=f,p!==null&&(Qe===null?Qe=p:Qe.push.apply(Qe,p))}f=v}if(p=!1,f!==2)continue}}if(f===1){Ws(e,0),Bi(e,i,0,!0);break}t:{switch(c=e,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Bi(c,i,on,!Ei);break t;case 2:Qe=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=zo+300-je(),10<f)){if(Bi(c,i,on,!Ei),Va(c,0,!0)!==0)break t;ri=i,c.timeoutHandle=ig(Mm.bind(null,c,a,Qe,No,Eu,i,on,as,Zs,Ei,p,"Throttled",-0,0),f);break t}Mm(c,a,Qe,No,Eu,i,on,as,Zs,Ei,p,null,-0,0)}}break}while(!0);Gn(e)}function Mm(e,i,a,c,f,p,v,C,k,G,q,J,I,Y){if(e.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},_m(i,p,J);var at=(p&62914560)===p?zo-je():(p&4194048)===p?Cm-je():0;if(at=U1(J,at),at!==null){ri=p,e.cancelPendingCommit=at(Um.bind(null,e,i,p,a,c,f,v,C,k,q,J,null,I,Y)),Bi(e,p,v,!G);return}}Um(e,i,p,a,c,f,v,C,k)}function Kb(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],p=f.getSnapshot;f=f.value;try{if(!en(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bi(e,i,a,c){i&=~Tu,i&=~as,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var f=i;0<f;){var p=31-At(f),v=1<<p;c[p]=-1,f&=~v}a!==0&&Pf(e,a,i)}function Po(){return(Gt&6)===0?(ta(0),!1):!0}function Bu(){if(Tt!==null){if(Ft===0)var e=Tt.return;else e=Tt,$n=Ki=null,Xc(e),Hs=null,Nr=0,e=Tt;for(;e!==null;)sm(e.alternate,e),e=e.return;Tt=null}}function Ws(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,y1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ri=0,Bu(),Zt=e,Tt=a=Xn(e.current,null),Bt=i,Ft=0,an=null,Ei=!1,Qs=_r(e,i),Au=!1,Zs=on=Tu=as=Mi=oe=0,Qe=Wr=null,Eu=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var f=31-At(c),p=1<<f;i|=e[f],c&=~p}return si=i,io(),a}function wm(e,i){_t=null,N.H=Yr,i===Is||i===ho?(i=Yd(),Ft=3):i===zc?(i=Yd(),Ft=4):Ft=i===lu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,an=i,Tt===null&&(oe=1,Eo(e,mn(i,e.current)))}function Rm(){var e=sn.current;return e===null?!0:(Bt&4194048)===Bt?_n===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?e===_n:!1}function Bm(){var e=N.H;return N.H=Yr,e===null?Yr:e}function km(){var e=N.A;return N.A=Qb,e}function Lo(){oe=4,Ei||(Bt&4194048)!==Bt&&sn.current!==null||(Qs=!0),(Mi&134217727)===0&&(as&134217727)===0||Zt===null||Bi(Zt,Bt,on,!1)}function ku(e,i,a){var c=Gt;Gt|=2;var f=Bm(),p=km();(Zt!==e||Bt!==i)&&(No=null,Ws(e,i)),i=!1;var v=oe;t:do try{if(Ft!==0&&Tt!==null){var C=Tt,k=an;switch(Ft){case 8:Bu(),v=6;break t;case 3:case 2:case 9:case 6:sn.current===null&&(i=!0);var G=Ft;if(Ft=0,an=null,Js(e,C,k,G),a&&Qs){v=0;break t}break;default:G=Ft,Ft=0,an=null,Js(e,C,k,G)}}Wb(),v=oe;break}catch(q){wm(e,q)}while(!0);return i&&e.shellSuspendCounter++,$n=Ki=null,Gt=c,N.H=f,N.A=p,Tt===null&&(Zt=null,Bt=0,io()),v}function Wb(){for(;Tt!==null;)Dm(Tt)}function Jb(e,i){var a=Gt;Gt|=2;var c=Bm(),f=km();Zt!==e||Bt!==i?(No=null,Uo=je()+500,Ws(e,i)):Qs=_r(e,i);t:do try{if(Ft!==0&&Tt!==null){i=Tt;var p=an;e:switch(Ft){case 1:Ft=0,an=null,Js(e,i,p,1);break;case 2:case 9:if(Hd(p)){Ft=0,an=null,Om(i);break}i=function(){Ft!==2&&Ft!==9||Zt!==e||(Ft=7),Gn(e)},p.then(i,i);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:Hd(p)?(Ft=0,an=null,Om(i)):(Ft=0,an=null,Js(e,i,p,7));break;case 5:var v=null;switch(Tt.tag){case 26:v=Tt.memoizedState;case 5:case 27:var C=Tt;if(v?xg(v):C.stateNode.complete){Ft=0,an=null;var k=C.sibling;if(k!==null)Tt=k;else{var G=C.return;G!==null?(Tt=G,jo(G)):Tt=null}break e}}Ft=0,an=null,Js(e,i,p,5);break;case 6:Ft=0,an=null,Js(e,i,p,6);break;case 8:Bu(),oe=6;break t;default:throw Error(s(462))}}t1();break}catch(q){wm(e,q)}while(!0);return $n=Ki=null,N.H=c,N.A=f,Gt=a,Tt!==null?0:(Zt=null,Bt=0,io(),oe)}function t1(){for(;Tt!==null&&!hn();)Dm(Tt)}function Dm(e){var i=nm(e.alternate,e,si);e.memoizedProps=e.pendingProps,i===null?jo(e):Tt=i}function Om(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Zp(a,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=Zp(a,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:Xc(i);default:sm(a,i),i=Tt=kd(i,si),i=nm(a,i,si)}e.memoizedProps=e.pendingProps,i===null?jo(e):Tt=i}function Js(e,i,a,c){$n=Ki=null,Xc(i),Hs=null,Nr=0;var f=i.return;try{if(Hb(e,f,i,a,Bt)){oe=1,Eo(e,mn(a,e.current)),Tt=null;return}}catch(p){if(f!==null)throw Tt=f,p;oe=1,Eo(e,mn(a,e.current)),Tt=null;return}i.flags&32768?(zt||c===1?e=!0:Qs||(Bt&536870912)!==0?e=!1:(Ei=e=!0,(c===2||c===9||c===3||c===6)&&(c=sn.current,c!==null&&c.tag===13&&(c.flags|=16384))),zm(i,e)):jo(i)}function jo(e){var i=e;do{if((i.flags&32768)!==0){zm(i,Ei);return}e=i.return;var a=Vb(i.alternate,i,si);if(a!==null){Tt=a;return}if(i=i.sibling,i!==null){Tt=i;return}Tt=i=e}while(i!==null);oe===0&&(oe=5)}function zm(e,i){do{var a=Xb(e.alternate,e);if(a!==null){a.flags&=32767,Tt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Tt=e;return}Tt=e=a}while(e!==null);oe=6,Tt=null}function Um(e,i,a,c,f,p,v,C,k){e.cancelPendingCommit=null;do Go();while(ve!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=_c,O_(e,a,p,v,C,k),e===Zt&&(Tt=Zt=null,Bt=0),Ks=i,Ri=e,ri=a,Mu=p,wu=f,Am=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s1(x,function(){return Gm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=N.T,N.T=null,f=Q.p,Q.p=2,v=Gt,Gt|=4;try{qb(e,i,a)}finally{Gt=v,Q.p=f,N.T=c}}ve=1,Nm(),Pm(),Lm()}}function Nm(){if(ve===1){ve=0;var e=Ri,i=Ks,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=N.T,N.T=null;var c=Q.p;Q.p=2;var f=Gt;Gt|=4;try{gm(i,e);var p=Fu,v=Sd(e.containerInfo),C=p.focusedElem,k=p.selectionRange;if(v!==C&&C&&C.ownerDocument&&vd(C.ownerDocument.documentElement,C)){if(k!==null&&pc(C)){var G=k.start,q=k.end;if(q===void 0&&(q=G),"selectionStart"in C)C.selectionStart=G,C.selectionEnd=Math.min(q,C.value.length);else{var J=C.ownerDocument||document,I=J&&J.defaultView||window;if(I.getSelection){var Y=I.getSelection(),at=C.textContent.length,mt=Math.min(k.start,at),qt=k.end===void 0?mt:Math.min(k.end,at);!Y.extend&&mt>qt&&(v=qt,qt=mt,mt=v);var L=bd(C,mt),z=bd(C,qt);if(L&&z&&(Y.rangeCount!==1||Y.anchorNode!==L.node||Y.anchorOffset!==L.offset||Y.focusNode!==z.node||Y.focusOffset!==z.offset)){var j=J.createRange();j.setStart(L.node,L.offset),Y.removeAllRanges(),mt>qt?(Y.addRange(j),Y.extend(z.node,z.offset)):(j.setEnd(z.node,z.offset),Y.addRange(j))}}}}for(J=[],Y=C;Y=Y.parentNode;)Y.nodeType===1&&J.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<J.length;C++){var W=J[C];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Wo=!!Hu,Fu=Hu=null}finally{Gt=f,Q.p=c,N.T=a}}e.current=i,ve=2}}function Pm(){if(ve===2){ve=0;var e=Ri,i=Ks,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=N.T,N.T=null;var c=Q.p;Q.p=2;var f=Gt;Gt|=4;try{hm(e,i.alternate,i)}finally{Gt=f,Q.p=c,N.T=a}}ve=3}}function Lm(){if(ve===4||ve===3){ve=0,xr();var e=Ri,i=Ks,a=ri,c=Am;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ve=5:(ve=0,Ks=Ri=null,jm(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(wi=null),Ql(a),i=i.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(K,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=N.T,f=Q.p,Q.p=2,N.T=null;try{for(var p=e.onRecoverableError,v=0;v<c.length;v++){var C=c[v];p(C.value,{componentStack:C.stack})}}finally{N.T=i,Q.p=f}}(ri&3)!==0&&Go(),Gn(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Ru?Jr++:(Jr=0,Ru=e):Jr=0,ta(0)}}function jm(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,zr(i)))}function Go(){return Nm(),Pm(),Lm(),Gm()}function Gm(){if(ve!==5)return!1;var e=Ri,i=Mu;Mu=0;var a=Ql(ri),c=N.T,f=Q.p;try{Q.p=32>a?32:a,N.T=null,a=wu,wu=null;var p=Ri,v=ri;if(ve=0,Ks=Ri=null,ri=0,(Gt&6)!==0)throw Error(s(331));var C=Gt;if(Gt|=4,vm(p.current),xm(p,p.current,v,a),Gt=C,ta(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(K,p)}catch{}return!0}finally{Q.p=f,N.T=c,jm(e,i)}}function Im(e,i,a){i=mn(a,i),i=ou(e.stateNode,i,2),e=Si(e,i,2),e!==null&&(br(e,2),Gn(e))}function Yt(e,i,a){if(e.tag===3)Im(e,e,a);else for(;i!==null;){if(i.tag===3){Im(i,e,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(wi===null||!wi.has(c))){e=mn(a,e),a=Hp(2),c=Si(i,a,2),c!==null&&(Fp(a,c,i,e),br(c,2),Gn(c));break}}i=i.return}}function Du(e,i,a){var c=e.pingCache;if(c===null){c=e.pingCache=new Zb;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(Au=!0,f.add(a),e=e1.bind(null,e,i,a),i.then(e,e))}function e1(e,i,a){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Zt===e&&(Bt&a)===a&&(oe===4||oe===3&&(Bt&62914560)===Bt&&300>je()-zo?(Gt&2)===0&&Ws(e,0):Tu|=a,Zs===Bt&&(Zs=0)),Gn(e)}function Hm(e,i){i===0&&(i=Nf()),e=$i(e,i),e!==null&&(br(e,i),Gn(e))}function n1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Hm(e,a)}function i1(e,i){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Hm(e,a)}function s1(e,i){return bs(e,i)}var Io=null,tr=null,Ou=!1,Ho=!1,zu=!1,ki=0;function Gn(e){e!==tr&&e.next===null&&(tr===null?Io=tr=e:tr=tr.next=e),Ho=!0,Ou||(Ou=!0,a1())}function ta(e,i){if(!zu&&Ho){zu=!0;do for(var a=!1,c=Io;c!==null;){if(e!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var v=c.suspendedLanes,C=c.pingedLanes;p=(1<<31-At(42|e)+1)-1,p&=f&~(v&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Xm(c,p))}else p=Bt,p=Va(c,c===Zt?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||_r(c,p)||(a=!0,Xm(c,p));c=c.next}while(a);zu=!1}}function r1(){Fm()}function Fm(){Ho=Ou=!1;var e=0;ki!==0&&g1()&&(e=ki);for(var i=je(),a=null,c=Io;c!==null;){var f=c.next,p=Ym(c,i);p===0?(c.next=null,a===null?Io=f:a.next=f,f===null&&(tr=a)):(a=c,(e!==0||(p&3)!==0)&&(Ho=!0)),c=f}ve!==0&&ve!==5||ta(e),ki!==0&&(ki=0)}function Ym(e,i){for(var a=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var v=31-At(p),C=1<<v,k=f[v];k===-1?((C&a)===0||(C&c)!==0)&&(f[v]=D_(C,i)):k<=i&&(e.expiredLanes|=C),p&=~C}if(i=Zt,a=Bt,a=Va(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===i&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&di(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||_r(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(c!==null&&di(c),Ql(a)){case 2:case 8:a=A;break;case 32:a=x;break;case 268435456:a=w;break;default:a=x}return c=Vm.bind(null,e),a=bs(a,c),e.callbackPriority=i,e.callbackNode=a,i}return c!==null&&c!==null&&di(c),e.callbackPriority=2,e.callbackNode=null,2}function Vm(e,i){if(ve!==0&&ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Go()&&e.callbackNode!==a)return null;var c=Bt;return c=Va(e,e===Zt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Em(e,c,i),Ym(e,je()),e.callbackNode!=null&&e.callbackNode===a?Vm.bind(null,e):null)}function Xm(e,i){if(Go())return null;Em(e,i,!0)}function a1(){x1(function(){(Gt&6)!==0?bs(Ia,r1):Fm()})}function Uu(){if(ki===0){var e=js;e===0&&(e=Ha,Ha<<=1,(Ha&261888)===0&&(Ha=256)),ki=e}return ki}function qm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qa(""+e)}function $m(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function o1(e,i,a,c,f){if(i==="submit"&&a&&a.stateNode===f){var p=qm((f[Ye]||null).action),v=c.submitter;v&&(i=(i=v[Ye]||null)?qm(i.formAction):v.getAttribute("formAction"),i!==null&&(p=i,v=null));var C=new Ja("action","action",null,c,f);e.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ki!==0){var k=v?$m(f,v):new FormData(f);eu(a,{pending:!0,data:k,method:f.method,action:p},null,k)}}else typeof p=="function"&&(C.preventDefault(),k=v?$m(f,v):new FormData(f),eu(a,{pending:!0,data:k,method:f.method,action:p},p,k))},currentTarget:f}]})}}for(var Nu=0;Nu<xc.length;Nu++){var Pu=xc[Nu],l1=Pu.toLowerCase(),c1=Pu[0].toUpperCase()+Pu.slice(1);En(l1,"on"+c1)}En(Td,"onAnimationEnd"),En(Ed,"onAnimationIteration"),En(Md,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(Tb,"onTransitionRun"),En(Eb,"onTransitionStart"),En(Mb,"onTransitionCancel"),En(wd,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ea));function Qm(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],f=c.event;c=c.listeners;t:{var p=void 0;if(i)for(var v=c.length-1;0<=v;v--){var C=c[v],k=C.instance,G=C.currentTarget;if(C=C.listener,k!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=G;try{p(f)}catch(q){no(q)}f.currentTarget=null,p=k}else for(v=0;v<c.length;v++){if(C=c[v],k=C.instance,G=C.currentTarget,C=C.listener,k!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=G;try{p(f)}catch(q){no(q)}f.currentTarget=null,p=k}}}}function Et(e,i){var a=i[Zl];a===void 0&&(a=i[Zl]=new Set);var c=e+"__bubble";a.has(c)||(Zm(i,e,2,!1),a.add(c))}function Lu(e,i,a){var c=0;i&&(c|=4),Zm(a,e,c,i)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function ju(e){if(!e[Fo]){e[Fo]=!0,Ff.forEach(function(a){a!=="selectionchange"&&(u1.has(a)||Lu(a,!1,e),Lu(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Fo]||(i[Fo]=!0,Lu("selectionchange",!1,i))}}function Zm(e,i,a,c){switch(Tg(i)){case 2:var f=L1;break;case 8:f=j1;break;default:f=th}a=f.bind(null,i,a,e),f=void 0,!rc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function Gu(e,i,a,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var C=c.stateNode.containerInfo;if(C===f)break;if(v===4)for(v=c.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;C!==null;){if(v=Ss(C),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){c=p=v;continue t}C=C.parentNode}}c=c.return}ed(function(){var G=p,q=ic(a),J=[];t:{var I=Rd.get(e);if(I!==void 0){var Y=Ja,at=e;switch(e){case"keypress":if(Ka(a)===0)break t;case"keydown":case"keyup":Y=ib;break;case"focusin":at="focus",Y=cc;break;case"focusout":at="blur",Y=cc;break;case"beforeblur":case"afterblur":Y=cc;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=V_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=ab;break;case Td:case Ed:case Md:Y=$_;break;case wd:Y=lb;break;case"scroll":case"scrollend":Y=F_;break;case"wheel":Y=ub;break;case"copy":case"cut":case"paste":Y=Z_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ad;break;case"toggle":case"beforetoggle":Y=fb}var mt=(i&4)!==0,qt=!mt&&(e==="scroll"||e==="scrollend"),L=mt?I!==null?I+"Capture":null:I;mt=[];for(var z=G,j;z!==null;){var W=z;if(j=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||j===null||L===null||(W=Cr(z,L),W!=null&&mt.push(na(z,W,j))),qt)break;z=z.return}0<mt.length&&(I=new Y(I,at,null,a,q),J.push({event:I,listeners:mt}))}}if((i&7)===0){t:{if(I=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",I&&a!==nc&&(at=a.relatedTarget||a.fromElement)&&(Ss(at)||at[vs]))break t;if((Y||I)&&(I=q.window===q?q:(I=q.ownerDocument)?I.defaultView||I.parentWindow:window,Y?(at=a.relatedTarget||a.toElement,Y=G,at=at?Ss(at):null,at!==null&&(qt=l(at),mt=at.tag,at!==qt||mt!==5&&mt!==27&&mt!==6)&&(at=null)):(Y=null,at=G),Y!==at)){if(mt=sd,W="onMouseLeave",L="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(mt=ad,W="onPointerLeave",L="onPointerEnter",z="pointer"),qt=Y==null?I:Sr(Y),j=at==null?I:Sr(at),I=new mt(W,z+"leave",Y,a,q),I.target=qt,I.relatedTarget=j,W=null,Ss(q)===G&&(mt=new mt(L,z+"enter",at,a,q),mt.target=j,mt.relatedTarget=qt,W=mt),qt=W,Y&&at)e:{for(mt=h1,L=Y,z=at,j=0,W=L;W;W=mt(W))j++;W=0;for(var ft=z;ft;ft=mt(ft))W++;for(;0<j-W;)L=mt(L),j--;for(;0<W-j;)z=mt(z),W--;for(;j--;){if(L===z||z!==null&&L===z.alternate){mt=L;break e}L=mt(L),z=mt(z)}mt=null}else mt=null;Y!==null&&Km(J,I,Y,mt,!1),at!==null&&qt!==null&&Km(J,qt,at,mt,!0)}}t:{if(I=G?Sr(G):window,Y=I.nodeName&&I.nodeName.toLowerCase(),Y==="select"||Y==="input"&&I.type==="file")var Pt=pd;else if(fd(I))if(md)Pt=Sb;else{Pt=bb;var ct=_b}else Y=I.nodeName,!Y||Y.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?G&&ec(G.elementType)&&(Pt=pd):Pt=vb;if(Pt&&(Pt=Pt(e,G))){dd(J,Pt,a,q);break t}ct&&ct(e,I,G),e==="focusout"&&G&&I.type==="number"&&G.memoizedProps.value!=null&&tc(I,"number",I.value)}switch(ct=G?Sr(G):window,e){case"focusin":(fd(ct)||ct.contentEditable==="true")&&(ks=ct,mc=G,kr=null);break;case"focusout":kr=mc=ks=null;break;case"mousedown":gc=!0;break;case"contextmenu":case"mouseup":case"dragend":gc=!1,Cd(J,a,q);break;case"selectionchange":if(Ab)break;case"keydown":case"keyup":Cd(J,a,q)}var vt;if(hc)t:{switch(e){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else Bs?ud(e,a)&&(kt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(kt="onCompositionStart");kt&&(od&&a.locale!=="ko"&&(Bs||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Bs&&(vt=nd()):(mi=q,ac="value"in mi?mi.value:mi.textContent,Bs=!0)),ct=Yo(G,kt),0<ct.length&&(kt=new rd(kt,e,null,a,q),J.push({event:kt,listeners:ct}),vt?kt.data=vt:(vt=hd(a),vt!==null&&(kt.data=vt)))),(vt=pb?mb(e,a):gb(e,a))&&(kt=Yo(G,"onBeforeInput"),0<kt.length&&(ct=new rd("onBeforeInput","beforeinput",null,a,q),J.push({event:ct,listeners:kt}),ct.data=vt)),o1(J,e,G,a,q)}Qm(J,i)})}function na(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Yo(e,i){for(var a=i+"Capture",c=[];e!==null;){var f=e,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Cr(e,a),f!=null&&c.unshift(na(e,f,p)),f=Cr(e,i),f!=null&&c.push(na(e,f,p))),e.tag===3)return c;e=e.return}return[]}function h1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Km(e,i,a,c,f){for(var p=i._reactName,v=[];a!==null&&a!==c;){var C=a,k=C.alternate,G=C.stateNode;if(C=C.tag,k!==null&&k===c)break;C!==5&&C!==26&&C!==27||G===null||(k=G,f?(G=Cr(a,p),G!=null&&v.unshift(na(a,G,k))):f||(G=Cr(a,p),G!=null&&v.push(na(a,G,k)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var f1=/\r\n?/g,d1=/\u0000|\uFFFD/g;function Wm(e){return(typeof e=="string"?e:""+e).replace(f1,`
`).replace(d1,"")}function Jm(e,i){return i=Wm(i),Wm(e)===i}function Xt(e,i,a,c,f,p){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Ms(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Ms(e,""+c);break;case"className":qa(e,"class",c);break;case"tabIndex":qa(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qa(e,a,c);break;case"style":Jf(e,c,p);break;case"data":if(i!=="object"){qa(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Qa(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",f.name,f,null),Xt(e,i,"formEncType",f.formEncType,f,null),Xt(e,i,"formMethod",f.formMethod,f,null),Xt(e,i,"formTarget",f.formTarget,f,null)):(Xt(e,i,"encType",f.encType,f,null),Xt(e,i,"method",f.method,f,null),Xt(e,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Qa(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Yn);break;case"onScroll":c!=null&&Et("scroll",e);break;case"onScrollEnd":c!=null&&Et("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=Qa(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":Et("beforetoggle",e),Et("toggle",e),Xa(e,"popover",c);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Xa(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=I_.get(a)||a,Xa(e,a,c))}}function Iu(e,i,a,c,f,p){switch(a){case"style":Jf(e,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof c=="string"?Ms(e,c):(typeof c=="number"||typeof c=="bigint")&&Ms(e,""+c);break;case"onScroll":c!=null&&Et("scroll",e);break;case"onScrollEnd":c!=null&&Et("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yf.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=e[Ye]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,c,f);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):Xa(e,a,c)}}}function ke(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",e),Et("load",e);var c=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var v=a[p];if(v!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,p,v,a,null)}}f&&Xt(e,i,"srcSet",a.srcSet,a,null),c&&Xt(e,i,"src",a.src,a,null);return;case"input":Et("invalid",e);var C=p=v=f=null,k=null,G=null;for(c in a)if(a.hasOwnProperty(c)){var q=a[c];if(q!=null)switch(c){case"name":f=q;break;case"type":v=q;break;case"checked":k=q;break;case"defaultChecked":G=q;break;case"value":p=q;break;case"defaultValue":C=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:Xt(e,i,c,q,a,null)}}Qf(e,p,C,k,G,v,f,!1);return;case"select":Et("invalid",e),c=v=p=null;for(f in a)if(a.hasOwnProperty(f)&&(C=a[f],C!=null))switch(f){case"value":p=C;break;case"defaultValue":v=C;break;case"multiple":c=C;default:Xt(e,i,f,C,a,null)}i=p,a=v,e.multiple=!!c,i!=null?Es(e,!!c,i,!1):a!=null&&Es(e,!!c,a,!0);return;case"textarea":Et("invalid",e),p=f=c=null;for(v in a)if(a.hasOwnProperty(v)&&(C=a[v],C!=null))switch(v){case"value":c=C;break;case"defaultValue":f=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Xt(e,i,v,C,a,null)}Kf(e,c,f,p);return;case"option":for(k in a)a.hasOwnProperty(k)&&(c=a[k],c!=null)&&(k==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":Xt(e,i,k,c,a,null));return;case"dialog":Et("beforetoggle",e),Et("toggle",e),Et("cancel",e),Et("close",e);break;case"iframe":case"object":Et("load",e);break;case"video":case"audio":for(c=0;c<ea.length;c++)Et(ea[c],e);break;case"image":Et("error",e),Et("load",e);break;case"details":Et("toggle",e);break;case"embed":case"source":case"link":Et("error",e),Et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(c=a[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,G,c,a,null)}return;default:if(ec(i)){for(q in a)a.hasOwnProperty(q)&&(c=a[q],c!==void 0&&Iu(e,i,q,c,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(c=a[C],c!=null&&Xt(e,i,C,c,a,null))}function p1(e,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,v=null,C=null,k=null,G=null,q=null;for(Y in a){var J=a[Y];if(a.hasOwnProperty(Y)&&J!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":k=J;default:c.hasOwnProperty(Y)||Xt(e,i,Y,null,c,J)}}for(var I in c){var Y=c[I];if(J=a[I],c.hasOwnProperty(I)&&(Y!=null||J!=null))switch(I){case"type":p=Y;break;case"name":f=Y;break;case"checked":G=Y;break;case"defaultChecked":q=Y;break;case"value":v=Y;break;case"defaultValue":C=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==J&&Xt(e,i,I,Y,c,J)}}Jl(e,v,C,k,G,q,p,f);return;case"select":Y=v=C=I=null;for(p in a)if(k=a[p],a.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":Y=k;default:c.hasOwnProperty(p)||Xt(e,i,p,null,c,k)}for(f in c)if(p=c[f],k=a[f],c.hasOwnProperty(f)&&(p!=null||k!=null))switch(f){case"value":I=p;break;case"defaultValue":C=p;break;case"multiple":v=p;default:p!==k&&Xt(e,i,f,p,c,k)}i=C,a=v,c=Y,I!=null?Es(e,!!a,I,!1):!!c!=!!a&&(i!=null?Es(e,!!a,i,!0):Es(e,!!a,a?[]:"",!1));return;case"textarea":Y=I=null;for(C in a)if(f=a[C],a.hasOwnProperty(C)&&f!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Xt(e,i,C,null,c,f)}for(v in c)if(f=c[v],p=a[v],c.hasOwnProperty(v)&&(f!=null||p!=null))switch(v){case"value":I=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&Xt(e,i,v,f,c,p)}Zf(e,I,Y);return;case"option":for(var at in a)I=a[at],a.hasOwnProperty(at)&&I!=null&&!c.hasOwnProperty(at)&&(at==="selected"?e.selected=!1:Xt(e,i,at,null,c,I));for(k in c)I=c[k],Y=a[k],c.hasOwnProperty(k)&&I!==Y&&(I!=null||Y!=null)&&(k==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":Xt(e,i,k,I,c,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)I=a[mt],a.hasOwnProperty(mt)&&I!=null&&!c.hasOwnProperty(mt)&&Xt(e,i,mt,null,c,I);for(G in c)if(I=c[G],Y=a[G],c.hasOwnProperty(G)&&I!==Y&&(I!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,i));break;default:Xt(e,i,G,I,c,Y)}return;default:if(ec(i)){for(var qt in a)I=a[qt],a.hasOwnProperty(qt)&&I!==void 0&&!c.hasOwnProperty(qt)&&Iu(e,i,qt,void 0,c,I);for(q in c)I=c[q],Y=a[q],!c.hasOwnProperty(q)||I===Y||I===void 0&&Y===void 0||Iu(e,i,q,I,c,Y);return}}for(var L in a)I=a[L],a.hasOwnProperty(L)&&I!=null&&!c.hasOwnProperty(L)&&Xt(e,i,L,null,c,I);for(J in c)I=c[J],Y=a[J],!c.hasOwnProperty(J)||I===Y||I==null&&Y==null||Xt(e,i,J,I,c,Y)}function tg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var f=a[c],p=f.transferSize,v=f.initiatorType,C=f.duration;if(p&&C&&tg(v)){for(v=0,C=f.responseEnd,c+=1;c<a.length;c++){var k=a[c],G=k.startTime;if(G>C)break;var q=k.transferSize,J=k.initiatorType;q&&tg(J)&&(k=k.responseEnd,v+=q*(k<C?1:(C-G)/(k-G)))}if(--c,i+=8*(p+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hu=null,Fu=null;function Vo(e){return e.nodeType===9?e:e.ownerDocument}function eg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ng(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Yu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vu=null;function g1(){var e=window.event;return e&&e.type==="popstate"?e===Vu?!1:(Vu=e,!0):(Vu=null,!1)}var ig=typeof setTimeout=="function"?setTimeout:void 0,y1=typeof clearTimeout=="function"?clearTimeout:void 0,sg=typeof Promise=="function"?Promise:void 0,x1=typeof queueMicrotask=="function"?queueMicrotask:typeof sg<"u"?function(e){return sg.resolve(null).then(e).catch(_1)}:ig;function _1(e){setTimeout(function(){throw e})}function Di(e){return e==="head"}function rg(e,i){var a=i,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(f),sr(i);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")ia(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ia(a);for(var p=a.firstChild;p;){var v=p.nextSibling,C=p.nodeName;p[vr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=v}}else a==="body"&&ia(e.ownerDocument.body);a=f}while(a);sr(i)}function ag(e,i){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function Xu(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Xu(a),Kl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function b1(e,i,a,c){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[vr])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=bn(e.nextSibling),e===null)break}return null}function v1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=bn(e.nextSibling),e===null))return null;return e}function og(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=bn(e.nextSibling),e===null))return null;return e}function qu(e){return e.data==="$?"||e.data==="$~"}function $u(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function S1(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function bn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Qu=null;function lg(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return bn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function cg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function ug(e,i,a){switch(i=Vo(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ia(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Kl(e)}var vn=new Map,hg=new Set;function Xo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ai=Q.d;Q.d={f:C1,r:A1,D:T1,C:E1,L:M1,m:w1,X:B1,S:R1,M:k1};function C1(){var e=ai.f(),i=Po();return e||i}function A1(e){var i=Cs(e);i!==null&&i.tag===5&&i.type==="form"?wp(i):ai.r(e)}var er=typeof document>"u"?null:document;function fg(e,i,a){var c=er;if(c&&typeof i=="string"&&i){var f=dn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),hg.has(f)||(hg.add(f),e={rel:e,crossOrigin:a,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),ke(i,"link",e),Ce(i),c.head.appendChild(i)))}}function T1(e){ai.D(e),fg("dns-prefetch",e,null)}function E1(e,i){ai.C(e,i),fg("preconnect",e,i)}function M1(e,i,a){ai.L(e,i,a);var c=er;if(c&&e&&i){var f='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+dn(a.imageSizes)+'"]')):f+='[href="'+dn(e)+'"]';var p=f;switch(i){case"style":p=nr(e);break;case"script":p=ir(e)}vn.has(p)||(e=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),vn.set(p,e),c.querySelector(f)!==null||i==="style"&&c.querySelector(sa(p))||i==="script"&&c.querySelector(ra(p))||(i=c.createElement("link"),ke(i,"link",e),Ce(i),c.head.appendChild(i)))}}function w1(e,i){ai.m(e,i);var a=er;if(a&&e){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(e)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ir(e)}if(!vn.has(p)&&(e=y({rel:"modulepreload",href:e},i),vn.set(p,e),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ra(p)))return}c=a.createElement("link"),ke(c,"link",e),Ce(c),a.head.appendChild(c)}}}function R1(e,i,a){ai.S(e,i,a);var c=er;if(c&&e){var f=As(c).hoistableStyles,p=nr(e);i=i||"default";var v=f.get(p);if(!v){var C={loading:0,preload:null};if(v=c.querySelector(sa(p)))C.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":i},a),(a=vn.get(p))&&Zu(e,a);var k=v=c.createElement("link");Ce(k),ke(k,"link",e),k._p=new Promise(function(G,q){k.onload=G,k.onerror=q}),k.addEventListener("load",function(){C.loading|=1}),k.addEventListener("error",function(){C.loading|=2}),C.loading|=4,qo(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:C},f.set(p,v)}}}function B1(e,i){ai.X(e,i);var a=er;if(a&&e){var c=As(a).hoistableScripts,f=ir(e),p=c.get(f);p||(p=a.querySelector(ra(f)),p||(e=y({src:e,async:!0},i),(i=vn.get(f))&&Ku(e,i),p=a.createElement("script"),Ce(p),ke(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function k1(e,i){ai.M(e,i);var a=er;if(a&&e){var c=As(a).hoistableScripts,f=ir(e),p=c.get(f);p||(p=a.querySelector(ra(f)),p||(e=y({src:e,async:!0,type:"module"},i),(i=vn.get(f))&&Ku(e,i),p=a.createElement("script"),Ce(p),ke(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function dg(e,i,a,c){var f=(f=yt.current)?Xo(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=nr(a.href),a=As(f).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=nr(a.href);var p=As(f).hoistableStyles,v=p.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,v),(p=f.querySelector(sa(e)))&&!p._p&&(v.instance=p,v.state.loading=5),vn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},vn.set(e,a),p||D1(f,e,a,v.state))),i&&c===null)throw Error(s(528,""));return v}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ir(a),a=As(f).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function nr(e){return'href="'+dn(e)+'"'}function sa(e){return'link[rel="stylesheet"]['+e+"]"}function pg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function D1(e,i,a,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),ke(i,"link",a),Ce(i),e.head.appendChild(i))}function ir(e){return'[src="'+dn(e)+'"]'}function ra(e){return"script[async]"+e}function mg(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+dn(a.href)+'"]');if(c)return i.instance=c,Ce(c),c;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Ce(c),ke(c,"style",f),qo(c,a.precedence,e),i.instance=c;case"stylesheet":f=nr(a.href);var p=e.querySelector(sa(f));if(p)return i.state.loading|=4,i.instance=p,Ce(p),p;c=pg(a),(f=vn.get(f))&&Zu(c,f),p=(e.ownerDocument||e).createElement("link"),Ce(p);var v=p;return v._p=new Promise(function(C,k){v.onload=C,v.onerror=k}),ke(p,"link",c),i.state.loading|=4,qo(p,a.precedence,e),i.instance=p;case"script":return p=ir(a.src),(f=e.querySelector(ra(p)))?(i.instance=f,Ce(f),f):(c=a,(f=vn.get(p))&&(c=y({},a),Ku(c,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ce(f),ke(f,"link",c),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,qo(c,a.precedence,e));return i.instance}function qo(e,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,v=0;v<c.length;v++){var C=c[v];if(C.dataset.precedence===i)p=C;else if(p!==f)break}p?p.parentNode.insertBefore(e,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Zu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Ku(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var $o=null;function gg(e,i,a){if($o===null){var c=new Map,f=$o=new Map;f.set(a,c)}else f=$o,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var p=a[f];if(!(p[vr]||p[Me]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(i)||"";v=e+v;var C=c.get(v);C?C.push(p):c.set(v,[p])}}return c}function yg(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function O1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function xg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function z1(e,i,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=nr(c.href),p=i.querySelector(sa(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Qo.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=p,Ce(p);return}p=i.ownerDocument||i,c=pg(c),(f=vn.get(f))&&Zu(c,f),p=p.createElement("link"),Ce(p);var v=p;v._p=new Promise(function(C,k){v.onload=C,v.onerror=k}),ke(p,"link",c),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Qo.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var Wu=0;function U1(e,i){return e.stylesheets&&e.count===0&&Ko(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&Ko(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+i);0<e.imgBytes&&Wu===0&&(Wu=62500*m1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ko(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>Wu?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Qo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ko(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zo=null;function Ko(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zo=new Map,i.forEach(N1,e),Zo=null,Qo.call(e))}function N1(e,i){if(!(i.state.loading&4)){var a=Zo.get(e);if(a)var c=a.get(null);else{a=new Map,Zo.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var v=f[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),c=v)}c&&a.set(null,c)}f=i.instance,v=f.getAttribute("data-precedence"),p=a.get(v)||c,p===c&&a.set(null,f),a.set(v,f),this.count++,c=Qo.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var aa={$$typeof:O,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function P1(e,i,a,c,f,p,v,C,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ql(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.hiddenUpdates=ql(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function _g(e,i,a,c,f,p,v,C,k,G,q,J){return e=new P1(e,i,a,v,k,G,q,J,C),i=1,p===!0&&(i|=24),p=nn(3,null,null,i),e.current=p,p.stateNode=e,i=kc(),i.refCount++,e.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:i},Uc(p),e}function bg(e){return e?(e=zs,e):zs}function vg(e,i,a,c,f,p){f=bg(f),c.context===null?c.context=f:c.pendingContext=f,c=vi(i),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=Si(e,c,i),a!==null&&(Ze(a,e,i),Lr(a,e,i))}function Sg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Ju(e,i){Sg(e,i),(e=e.alternate)&&Sg(e,i)}function Cg(e){if(e.tag===13||e.tag===31){var i=$i(e,67108864);i!==null&&Ze(i,e,67108864),Ju(e,67108864)}}function Ag(e){if(e.tag===13||e.tag===31){var i=ln();i=$l(i);var a=$i(e,i);a!==null&&Ze(a,e,i),Ju(e,i)}}var Wo=!0;function L1(e,i,a,c){var f=N.T;N.T=null;var p=Q.p;try{Q.p=2,th(e,i,a,c)}finally{Q.p=p,N.T=f}}function j1(e,i,a,c){var f=N.T;N.T=null;var p=Q.p;try{Q.p=8,th(e,i,a,c)}finally{Q.p=p,N.T=f}}function th(e,i,a,c){if(Wo){var f=eh(c);if(f===null)Gu(e,i,c,Jo,a),Eg(e,c);else if(I1(f,e,i,a,c))c.stopPropagation();else if(Eg(e,c),i&4&&-1<G1.indexOf(e)){for(;f!==null;){var p=Cs(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Fi(p.pendingLanes);if(v!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var k=1<<31-At(v);C.entanglements[1]|=k,v&=~k}Gn(p),(Gt&6)===0&&(Uo=je()+500,ta(0))}}break;case 31:case 13:C=$i(p,2),C!==null&&Ze(C,p,2),Po(),Ju(p,2)}if(p=eh(c),p===null&&Gu(e,i,c,Jo,a),p===f)break;f=p}f!==null&&c.stopPropagation()}else Gu(e,i,c,null,a)}}function eh(e){return e=ic(e),nh(e)}var Jo=null;function nh(e){if(Jo=null,e=Ss(e),e!==null){var i=l(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=u(i),e!==null)return e;e=null}else if(a===31){if(e=h(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Jo=e,null}function Tg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nn()){case Ia:return 2;case A:return 8;case x:case b:return 32;case w:return 268435456;default:return 32}default:return 32}}var ih=!1,Oi=null,zi=null,Ui=null,oa=new Map,la=new Map,Ni=[],G1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Eg(e,i){switch(e){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":oa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":la.delete(i.pointerId)}}function ca(e,i,a,c,f,p){return e===null||e.nativeEvent!==p?(e={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Cs(i),i!==null&&Cg(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function I1(e,i,a,c,f){switch(i){case"focusin":return Oi=ca(Oi,e,i,a,c,f),!0;case"dragenter":return zi=ca(zi,e,i,a,c,f),!0;case"mouseover":return Ui=ca(Ui,e,i,a,c,f),!0;case"pointerover":var p=f.pointerId;return oa.set(p,ca(oa.get(p)||null,e,i,a,c,f)),!0;case"gotpointercapture":return p=f.pointerId,la.set(p,ca(la.get(p)||null,e,i,a,c,f)),!0}return!1}function Mg(e){var i=Ss(e.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=u(a),i!==null){e.blockedOn=i,If(e.priority,function(){Ag(a)});return}}else if(i===31){if(i=h(a),i!==null){e.blockedOn=i,If(e.priority,function(){Ag(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tl(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=eh(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);nc=c,a.target.dispatchEvent(c),nc=null}else return i=Cs(a),i!==null&&Cg(i),e.blockedOn=a,!1;i.shift()}return!0}function wg(e,i,a){tl(e)&&a.delete(i)}function H1(){ih=!1,Oi!==null&&tl(Oi)&&(Oi=null),zi!==null&&tl(zi)&&(zi=null),Ui!==null&&tl(Ui)&&(Ui=null),oa.forEach(wg),la.forEach(wg)}function el(e,i){e.blockedOn===i&&(e.blockedOn=null,ih||(ih=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,H1)))}var nl=null;function Rg(e){nl!==e&&(nl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nl===e&&(nl=null);for(var i=0;i<e.length;i+=3){var a=e[i],c=e[i+1],f=e[i+2];if(typeof c!="function"){if(nh(c||a)===null)continue;break}var p=Cs(a);p!==null&&(e.splice(i,3),i-=3,eu(p,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function sr(e){function i(k){return el(k,e)}Oi!==null&&el(Oi,e),zi!==null&&el(zi,e),Ui!==null&&el(Ui,e),oa.forEach(i),la.forEach(i);for(var a=0;a<Ni.length;a++){var c=Ni[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Ni.length&&(a=Ni[0],a.blockedOn===null);)Mg(a),a.blockedOn===null&&Ni.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],p=a[c+1],v=f[Ye]||null;if(typeof p=="function")v||Rg(a);else if(v){var C=null;if(p&&p.hasAttribute("formAction")){if(f=p,v=p[Ye]||null)C=v.formAction;else if(nh(f)!==null)continue}else C=v.action;typeof C=="function"?a[c+1]=C:(a.splice(c,3),c-=3),Rg(a)}}}function Bg(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function sh(e){this._internalRoot=e}il.prototype.render=sh.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,c=ln();vg(a,c,e,i,null,null)},il.prototype.unmount=sh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;vg(e.current,2,null,e,null,null),Po(),i[vs]=null}};function il(e){this._internalRoot=e}il.prototype.unstable_scheduleHydration=function(e){if(e){var i=Gf();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Ni.length&&i!==0&&i<Ni[a].priority;a++);Ni.splice(a,0,e),a===0&&Mg(e)}};var kg=t.version;if(kg!=="19.2.4")throw Error(s(527,kg,"19.2.4"));Q.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var F1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{K=sl.inject(F1),pt=sl}catch{}}return fa.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,c="",f=Lp,p=jp,v=Gp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=_g(e,1,!1,null,null,a,c,null,f,p,v,Bg),e[vs]=i.current,ju(e),new sh(i)},fa.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var c=!1,f="",p=Lp,v=jp,C=Gp,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),i=_g(e,1,!0,i,a??null,c,f,k,p,v,C,Bg),i.context=bg(null),a=i.current,c=ln(),c=$l(c),f=vi(c),f.callback=null,Si(a,f,c),a=c,i.current.lanes=a,br(i,a),Gn(i),e[vs]=i.current,ju(e),new il(i)},fa.version="19.2.4",fa}var Yg;function sv(){if(Yg)return lh.exports;Yg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),lh.exports=iv(),lh.exports}var rv=sv();const av=ja(rv),ov="modulepreload",lv=function(r,t){return new URL(r,t).href},Vg={},Dl=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){let m=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const u=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");o=m(n.map(g=>{if(g=lv(g,s),g in Vg)return;Vg[g]=!0;const y=g.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(s)for(let T=u.length-1;T>=0;T--){const E=u[T];if(E.href===g&&(!y||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${S}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":ov,y||(_.as="script"),_.crossOrigin="",_.href=g,d&&_.setAttribute("nonce",d),document.head.appendChild(_),y)return new Promise((T,E)=>{_.addEventListener("load",T),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})};var dt=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(dt||{});const Hh=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},al=(r,t)=>Hh(r).priority??t,Oe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Hh).forEach(t=>{t.type.forEach(n=>this._removeHandlers[n]?.(t))}),this},add(...r){return r.map(Hh).forEach(t=>{t.type.forEach(n=>{const s=this._addHandlers,o=this._queue;s[n]?s[n]?.(t):(o[n]=o[n]||[],o[n]?.push(t))})}),this},handle(r,t,n){const s=this._addHandlers,o=this._removeHandlers;if(s[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);s[r]=t,o[r]=n;const l=this._queue;return l[r]&&(l[r]?.forEach(u=>t(u)),delete l[r]),this},handleByMap(r,t){return this.handle(r,n=>{n.name&&(t[n.name]=n.ref)},n=>{n.name&&delete t[n.name]})},handleByNamedList(r,t,n=-1){return this.handle(r,s=>{t.findIndex(l=>l.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((l,u)=>al(u.value,n)-al(l.value,n)))},s=>{const o=t.findIndex(l=>l.name===s.name);o!==-1&&t.splice(o,1)})},handleByList(r,t,n=-1){return this.handle(r,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((o,l)=>al(l,n)-al(o,n)))},s=>{const o=t.indexOf(s.ref);o!==-1&&t.splice(o,1)})},mixin(r,...t){for(const n of t)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(n))}},cv={extension:{type:dt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Dl(()=>import("./browserAll-CjTFmBRU.js"),__vite__mapDeps([0,1,2]),import.meta.url)}},uv={extension:{type:dt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Dl(()=>import("./webworkerAll-DjkEIM6n.js"),__vite__mapDeps([1,2]),import.meta.url)}};class Ue{constructor(t,n,s){this._x=n||0,this._y=s||0,this._observer=t}clone(t){return new Ue(t??this._observer,this._x,this._y)}set(t=0,n=t){return(this._x!==t||this._y!==n)&&(this._x=t,this._y=n,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var fh={exports:{}},Xg;function hv(){return Xg||(Xg=1,(function(r){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function o(d,m,g){this.fn=d,this.context=m,this.once=g||!1}function l(d,m,g,y,S){if(typeof g!="function")throw new TypeError("The listener must be a function");var _=new o(g,y||d,S),T=n?n+m:m;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],_]:d._events[T].push(_):(d._events[T]=_,d._eventsCount++),d}function u(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},h.prototype.listeners=function(m){var g=n?n+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var S=0,_=y.length,T=new Array(_);S<_;S++)T[S]=y[S].fn;return T},h.prototype.listenerCount=function(m){var g=n?n+m:m,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(m,g,y,S,_,T){var E=n?n+m:m;if(!this._events[E])return!1;var M=this._events[E],R=arguments.length,B,O;if(M.fn){switch(M.once&&this.removeListener(m,M.fn,void 0,!0),R){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,g),!0;case 3:return M.fn.call(M.context,g,y),!0;case 4:return M.fn.call(M.context,g,y,S),!0;case 5:return M.fn.call(M.context,g,y,S,_),!0;case 6:return M.fn.call(M.context,g,y,S,_,T),!0}for(O=1,B=new Array(R-1);O<R;O++)B[O-1]=arguments[O];M.fn.apply(M.context,B)}else{var P=M.length,Z;for(O=0;O<P;O++)switch(M[O].once&&this.removeListener(m,M[O].fn,void 0,!0),R){case 1:M[O].fn.call(M[O].context);break;case 2:M[O].fn.call(M[O].context,g);break;case 3:M[O].fn.call(M[O].context,g,y);break;case 4:M[O].fn.call(M[O].context,g,y,S);break;default:if(!B)for(Z=1,B=new Array(R-1);Z<R;Z++)B[Z-1]=arguments[Z];M[O].fn.apply(M[O].context,B)}}return!0},h.prototype.on=function(m,g,y){return l(this,m,g,y,!1)},h.prototype.once=function(m,g,y){return l(this,m,g,y,!0)},h.prototype.removeListener=function(m,g,y,S){var _=n?n+m:m;if(!this._events[_])return this;if(!g)return u(this,_),this;var T=this._events[_];if(T.fn)T.fn===g&&(!S||T.once)&&(!y||T.context===y)&&u(this,_);else{for(var E=0,M=[],R=T.length;E<R;E++)(T[E].fn!==g||S&&!T[E].once||y&&T[E].context!==y)&&M.push(T[E]);M.length?this._events[_]=M.length===1?M[0]:M:u(this,_)}return this},h.prototype.removeAllListeners=function(m){var g;return m?(g=n?n+m:m,this._events[g]&&u(this,g)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,r.exports=h})(fh)),fh.exports}var fv=hv();const Dn=ja(fv),dv=Math.PI*2,pv=180/Math.PI,mv=Math.PI/180;class Pe{constructor(t=0,n=0){this.x=0,this.y=0,this.x=t,this.y=n}clone(){return new Pe(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,n=t){return this.x=t,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return dh.x=0,dh.y=0,dh}}const dh=new Pe;class Ot{constructor(t=1,n=0,s=0,o=1,l=0,u=0){this.array=null,this.a=t,this.b=n,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,n,s,o,l,u){return this.a=t,this.b=n,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(t,n){this.array||(this.array=new Float32Array(9));const s=n||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,n){n=n||new Pe;const s=t.x,o=t.y;return n.x=this.a*s+this.c*o+this.tx,n.y=this.b*s+this.d*o+this.ty,n}applyInverse(t,n){n=n||new Pe;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,d=this.ty,m=1/(s*u+l*-o),g=t.x,y=t.y;return n.x=u*m*g+-l*m*y+(d*l-h*u)*m,n.y=s*m*y+-o*m*g+(-d*s+h*o)*m,n}translate(t,n){return this.tx+=t,this.ty+=n,this}scale(t,n){return this.a*=t,this.d*=n,this.c*=t,this.b*=n,this.tx*=t,this.ty*=n,this}rotate(t){const n=Math.cos(t),s=Math.sin(t),o=this.a,l=this.c,u=this.tx;return this.a=o*n-this.b*s,this.b=o*s+this.b*n,this.c=l*n-this.d*s,this.d=l*s+this.d*n,this.tx=u*n-this.ty*s,this.ty=u*s+this.ty*n,this}append(t){const n=this.a,s=this.b,o=this.c,l=this.d;return this.a=t.a*n+t.b*o,this.b=t.a*s+t.b*l,this.c=t.c*n+t.d*o,this.d=t.c*s+t.d*l,this.tx=t.tx*n+t.ty*o+this.tx,this.ty=t.tx*s+t.ty*l+this.ty,this}appendFrom(t,n){const s=t.a,o=t.b,l=t.c,u=t.d,h=t.tx,d=t.ty,m=n.a,g=n.b,y=n.c,S=n.d;return this.a=s*m+o*y,this.b=s*g+o*S,this.c=l*m+u*y,this.d=l*g+u*S,this.tx=h*m+d*y+n.tx,this.ty=h*g+d*S+n.ty,this}setTransform(t,n,s,o,l,u,h,d,m){return this.a=Math.cos(h+m)*l,this.b=Math.sin(h+m)*l,this.c=-Math.sin(h-d)*u,this.d=Math.cos(h-d)*u,this.tx=t-(s*this.a+o*this.c),this.ty=n-(s*this.b+o*this.d),this}prepend(t){const n=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,o=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this}decompose(t){const n=this.a,s=this.b,o=this.c,l=this.d,u=t.pivot,h=-Math.atan2(-o,l),d=Math.atan2(s,n),m=Math.abs(h+d);return m<1e-5||Math.abs(dv-m)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=d),t.scale.x=Math.sqrt(n*n+s*s),t.scale.y=Math.sqrt(o*o+l*l),t.position.x=this.tx+(u.x*n+u.y*o),t.position.y=this.ty+(u.x*s+u.y*l),t}invert(){const t=this.a,n=this.b,s=this.c,o=this.d,l=this.tx,u=t*o-n*s;return this.a=o/u,this.b=-n/u,this.c=-s/u,this.d=t/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(t*this.ty-n*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Ot;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return yv.identity()}static get shared(){return gv.identity()}}const gv=new Ot,yv=new Ot,ls=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],cs=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],us=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],hs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Fh=[],yy=[],ol=Math.sign;function xv(){for(let r=0;r<16;r++){const t=[];Fh.push(t);for(let n=0;n<16;n++){const s=ol(ls[r]*ls[n]+us[r]*cs[n]),o=ol(cs[r]*ls[n]+hs[r]*cs[n]),l=ol(ls[r]*us[n]+us[r]*hs[n]),u=ol(cs[r]*us[n]+hs[r]*hs[n]);for(let h=0;h<16;h++)if(ls[h]===s&&cs[h]===o&&us[h]===l&&hs[h]===u){t.push(h);break}}}for(let r=0;r<16;r++){const t=new Ot;t.set(ls[r],cs[r],us[r],hs[r],0,0),yy.push(t)}}xv();const $t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>ls[r],uY:r=>cs[r],vX:r=>us[r],vY:r=>hs[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>Fh[r][t],sub:(r,t)=>Fh[r][$t.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?$t.S:$t.N:Math.abs(t)*2<=Math.abs(r)?r>0?$t.E:$t.W:t>0?r>0?$t.SE:$t.SW:r>0?$t.NE:$t.NW,matrixAppendRotationInv:(r,t,n=0,s=0)=>{const o=yy[$t.inv(t)];o.tx=n,o.ty=s,r.append(o)},transformRectCoords:(r,t,n,s)=>{const{x:o,y:l,width:u,height:h}=r,{x:d,y:m,width:g,height:y}=t;return n===$t.E?(s.set(o+d,l+m,u,h),s):n===$t.S?s.set(g-l-h+d,o+m,h,u):n===$t.W?s.set(g-o-u+d,y-l-h+m,u,h):n===$t.N?s.set(l+d,y-o-u+m,h,u):s.set(o+d,l+m,u,h)}},ll=[new Pe,new Pe,new Pe,new Pe];class pe{constructor(t=0,n=0,s=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(n),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new pe(0,0,0,0)}clone(){return new pe(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(t,n,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,d=this.y,m=s*(1-o),g=s-m,y=h-m,S=h+l+m,_=d-m,T=d+u+m,E=h+g,M=h+l-g,R=d+g,B=d+u-g;return t>=y&&t<=S&&n>=_&&n<=T&&!(t>E&&t<M&&n>R&&n<B)}intersects(t,n){if(!n){const st=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=st)return!1;const tt=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>tt}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=ll[0].set(t.left,t.top),d=ll[1].set(t.left,t.bottom),m=ll[2].set(t.right,t.top),g=ll[3].set(t.right,t.bottom);if(m.x<=h.x||d.y<=h.y)return!1;const y=Math.sign(n.a*n.d-n.b*n.c);if(y===0||(n.apply(h,h),n.apply(d,d),n.apply(m,m),n.apply(g,g),Math.max(h.x,d.x,m.x,g.x)<=s||Math.min(h.x,d.x,m.x,g.x)>=o||Math.max(h.y,d.y,m.y,g.y)<=l||Math.min(h.y,d.y,m.y,g.y)>=u))return!1;const S=y*(d.y-h.y),_=y*(h.x-d.x),T=S*s+_*l,E=S*o+_*l,M=S*s+_*u,R=S*o+_*u;if(Math.max(T,E,M,R)<=S*h.x+_*h.y||Math.min(T,E,M,R)>=S*g.x+_*g.y)return!1;const B=y*(h.y-m.y),O=y*(m.x-h.x),P=B*s+O*l,Z=B*o+O*l,X=B*s+O*u,H=B*o+O*u;return!(Math.max(P,Z,X,H)<=B*h.x+O*h.y||Math.min(P,Z,X,H)>=B*g.x+O*g.y)}pad(t=0,n=t){return this.x-=t,this.y-=n,this.width+=t*2,this.height+=n*2,this}fit(t){const n=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),l=Math.min(this.y+this.height,t.y+t.height);return this.x=n,this.width=Math.max(s-n,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(t=1,n=.001){const s=Math.ceil((this.x+this.width-n)*t)/t,o=Math.ceil((this.y+this.height-n)*t)/t;return this.x=Math.floor((this.x+n)*t)/t,this.y=Math.floor((this.y+n)*t)/t,this.width=s-this.x,this.height=o-this.y,this}scale(t,n=t){return this.x*=t,this.y*=n,this.width*=t,this.height*=n,this}enlarge(t){const n=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),l=Math.max(this.y+this.height,t.y+t.height);return this.x=n,this.width=s-n,this.y=o,this.height=l-o,this}getBounds(t){return t||(t=new pe),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const n=t.x,s=t.y,o=t.x+t.width,l=t.y+t.height;return n>=this.x&&n<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(t,n,s,o){return this.x=t,this.y=n,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ph={default:-1};function ce(r="default"){return ph[r]===void 0&&(ph[r]=-1),++ph[r]}const qg=new Set,Qt="8.0.0",_v="8.3.4",or={quiet:!1,noColor:!1},Mt=(r,t,n=3)=>{if(or.quiet||qg.has(t))return;let s=new Error().stack;const o=`${t}
Deprecated since v${r}`,l=typeof console.groupCollapsed=="function"&&!or.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(n).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),qg.add(t)};Object.defineProperties(Mt,{quiet:{get:()=>or.quiet,set:r=>{or.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>or.noColor,set:r=>{or.noColor=r},enumerable:!0,configurable:!1}});const xy=()=>{};function Ol(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function $g(r){return!(r&r-1)&&!!r}function _y(r){const t={};for(const n in r)r[n]!==void 0&&(t[n]=r[n]);return t}const Qg=Object.create(null);function bv(r){const t=Qg[r];return t===void 0&&(Qg[r]=ce("resource")),t}const by=class vy extends Dn{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...vy.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Mt(Qt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=bv(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};by.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let zl=by;const Sy=class Cy extends Dn{constructor(t={}){super(),this.options=t,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=ce("textureSource"),this._resourceType="textureSource",this._resourceId=ce("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Cy.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new zl(_y(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ce("resource"),this.emit("change",this),this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,n,s){s||(s=this._resolution),t||(t=this.width),n||(n=this.height);const o=Math.round(t*s),l=Math.round(n*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=ce("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=$g(this.pixelWidth)&&$g(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Sy.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let On=Sy;class xf extends On{constructor(t){const n=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(n instanceof Float32Array?s="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?s="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?s="rgba16uint":(n instanceof Int8Array,s="bgra8unorm")),super({...t,resource:n,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}xf.extension=dt.TextureSource;const Zg=new Ot;class vv{constructor(t,n){this.mapCoord=new Ot,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,n){n===void 0&&(n=t);const s=this.mapCoord;for(let o=0;o<t.length;o+=2){const l=t[o],u=t[o+1];n[o]=l*s.a+u*s.c+s.tx,n[o+1]=l*s.b+u*s.d+s.ty}return n}update(){const t=this._texture;this._updateID++;const n=t.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=t.orig,o=t.trim;o&&(Zg.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Zg));const l=t.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(t.frame.x+h+d)/l.width,u[1]=(t.frame.y+h+d)/l.height,u[2]=(t.frame.x+t.frame.width-h+d)/l.width,u[3]=(t.frame.y+t.frame.height-h+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=t.frame.width===l.width&&t.frame.height===l.height&&t.rotate===0,!0}}class Ut extends Dn{constructor({source:t,label:n,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:d,dynamic:m}={}){if(super(),this.uid=ce("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new pe,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=t?.source??new On,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=m||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new vv(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:n}=this,{width:s,height:o}=this._source,l=n.x/s,u=n.y/o,h=n.width/s,d=n.height/o;let m=this.rotate;if(m){const g=h/2,y=d/2,S=l+g,_=u+y;m=$t.add(m,$t.NW),t.x0=S+g*$t.uX(m),t.y0=_+y*$t.uY(m),m=$t.add(m,2),t.x1=S+g*$t.uX(m),t.y1=_+y*$t.uY(m),m=$t.add(m,2),t.x2=S+g*$t.uX(m),t.y2=_+y*$t.uY(m),m=$t.add(m,2),t.x3=S+g*$t.uX(m),t.y3=_+y*$t.uY(m)}else t.x0=l,t.y0=u,t.x1=l+h,t.y1=u,t.x2=l+h,t.y2=u+d,t.x3=l,t.y3=u+d}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Mt(Qt,"Texture.baseTexture is now Texture.source"),this._source}}Ut.EMPTY=new Ut({label:"EMPTY",source:new On({label:"EMPTY"})});Ut.EMPTY.destroy=xy;Ut.WHITE=new Ut({source:new xf({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ut.WHITE.destroy=xy;function Sv(r,t,n){const{width:s,height:o}=n.orig,l=n.trim;if(l){const u=l.width,h=l.height;r.minX=l.x-t._x*s,r.maxX=r.minX+u,r.minY=l.y-t._y*o,r.maxY=r.minY+h}else r.minX=-t._x*s,r.maxX=r.minX+s,r.minY=-t._y*o,r.maxY=r.minY+o}const Kg=new Ot;class kn{constructor(t=1/0,n=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Kg,this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new pe);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Kg,this}set(t,n,s,o){this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}addFrame(t,n,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,d=l.c,m=l.d,g=l.tx,y=l.ty;let S=this.minX,_=this.minY,T=this.maxX,E=this.maxY,M=u*t+d*n+g,R=h*t+m*n+y;M<S&&(S=M),R<_&&(_=R),M>T&&(T=M),R>E&&(E=R),M=u*s+d*n+g,R=h*s+m*n+y,M<S&&(S=M),R<_&&(_=R),M>T&&(T=M),R>E&&(E=R),M=u*t+d*o+g,R=h*t+m*o+y,M<S&&(S=M),R<_&&(_=R),M>T&&(T=M),R>E&&(E=R),M=u*s+d*o+g,R=h*s+m*o+y,M<S&&(S=M),R<_&&(_=R),M>T&&(T=M),R>E&&(E=R),this.minX=S,this.minY=_,this.maxX=T,this.maxY=E}addRect(t,n){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,n)}addBounds(t,n){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,n)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const n=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:d,d:m,tx:g,ty:y}=t;let S=u*n+d*s+g,_=h*n+m*s+y;this.minX=S,this.minY=_,this.maxX=S,this.maxY=_,S=u*o+d*s+g,_=h*o+m*s+y,this.minX=S<this.minX?S:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=S>this.maxX?S:this.maxX,this.maxY=_>this.maxY?_:this.maxY,S=u*n+d*l+g,_=h*n+m*l+y,this.minX=S<this.minX?S:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=S>this.maxX?S:this.maxX,this.maxY=_>this.maxY?_:this.maxY,S=u*o+d*l+g,_=h*o+m*l+y,this.minX=S<this.minX?S:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=S>this.maxX?S:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,n,s,o){return this.minX<t&&(this.minX=t),this.maxX>n&&(this.maxX=n),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(t,n=t){return this.minX-=t,this.maxX+=t,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new kn(this.minX,this.minY,this.maxX,this.maxY)}scale(t,n=t){return this.minX*=t,this.minY*=n,this.maxX*=t,this.maxY*=n,this}get x(){return this.minX}set x(t){const n=this.maxX-this.minX;this.minX=t,this.maxX=t+n}get y(){return this.minY}set y(t){const n=this.maxY-this.minY;this.minY=t,this.maxY=t+n}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,n,s,o){let l=this.minX,u=this.minY,h=this.maxX,d=this.maxY;o||(o=this.matrix);const m=o.a,g=o.b,y=o.c,S=o.d,_=o.tx,T=o.ty;for(let E=n;E<s;E+=2){const M=t[E],R=t[E+1],B=m*M+y*R+_,O=g*M+S*R+T;l=B<l?B:l,u=O<u?O:u,h=B>h?B:h,d=O>d?O:d}this.minX=l,this.minY=u,this.maxX=h,this.maxY=d}containsPoint(t,n){return this.minX<=t&&this.minY<=n&&this.maxX>=t&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var Cv={grad:.9,turn:360,rad:360/(2*Math.PI)},oi=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Te=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},Cn=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),r>n?n:r>t?r:t},Ay=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Wg=function(r){return{r:Cn(r.r,0,255),g:Cn(r.g,0,255),b:Cn(r.b,0,255),a:Cn(r.a)}},mh=function(r){return{r:Te(r.r),g:Te(r.g),b:Te(r.b),a:Te(r.a,3)}},Av=/^#([0-9a-f]{3,8})$/i,cl=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},Ty=function(r){var t=r.r,n=r.g,s=r.b,o=r.a,l=Math.max(t,n,s),u=l-Math.min(t,n,s),h=u?l===t?(n-s)/u:l===n?2+(s-t)/u:4+(t-n)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},Ey=function(r){var t=r.h,n=r.s,s=r.v,o=r.a;t=t/360*6,n/=100,s/=100;var l=Math.floor(t),u=s*(1-n),h=s*(1-(t-l)*n),d=s*(1-(1-t+l)*n),m=l%6;return{r:255*[s,h,u,u,d,s][m],g:255*[d,s,s,h,u,u][m],b:255*[u,u,d,s,s,h][m],a:o}},Jg=function(r){return{h:Ay(r.h),s:Cn(r.s,0,100),l:Cn(r.l,0,100),a:Cn(r.a)}},t0=function(r){return{h:Te(r.h),s:Te(r.s),l:Te(r.l),a:Te(r.a,3)}},e0=function(r){return Ey((n=(t=r).s,{h:t.h,s:(n*=((s=t.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:t.a}));var t,n,s},wa=function(r){return{h:(t=Ty(r)).h,s:(o=(200-(n=t.s))*(s=t.v)/100)>0&&o<200?n*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,s,o},Tv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ev=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yh={string:[[function(r){var t=Av.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Te(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Te(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=Mv.exec(r)||wv.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:Wg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=Tv.exec(r)||Ev.exec(r);if(!t)return null;var n,s,o=Jg({h:(n=t[1],s=t[2],s===void 0&&(s="deg"),Number(n)*(Cv[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return e0(o)},"hsl"]],object:[[function(r){var t=r.r,n=r.g,s=r.b,o=r.a,l=o===void 0?1:o;return oi(t)&&oi(n)&&oi(s)?Wg({r:Number(t),g:Number(n),b:Number(s),a:Number(l)}):null},"rgb"],[function(r){var t=r.h,n=r.s,s=r.l,o=r.a,l=o===void 0?1:o;if(!oi(t)||!oi(n)||!oi(s))return null;var u=Jg({h:Number(t),s:Number(n),l:Number(s),a:Number(l)});return e0(u)},"hsl"],[function(r){var t=r.h,n=r.s,s=r.v,o=r.a,l=o===void 0?1:o;if(!oi(t)||!oi(n)||!oi(s))return null;var u=(function(h){return{h:Ay(h.h),s:Cn(h.s,0,100),v:Cn(h.v,0,100),a:Cn(h.a)}})({h:Number(t),s:Number(n),v:Number(s),a:Number(l)});return Ey(u)},"hsv"]]},n0=function(r,t){for(var n=0;n<t.length;n++){var s=t[n][0](r);if(s)return[s,t[n][1]]}return[null,void 0]},Rv=function(r){return typeof r=="string"?n0(r.trim(),Yh.string):typeof r=="object"&&r!==null?n0(r,Yh.object):[null,void 0]},gh=function(r,t){var n=wa(r);return{h:n.h,s:Cn(n.s+100*t,0,100),l:n.l,a:n.a}},yh=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},i0=function(r,t){var n=wa(r);return{h:n.h,s:n.s,l:Cn(n.l+100*t,0,100),a:n.a}},Vh=(function(){function r(t){this.parsed=Rv(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Te(yh(this.rgba),2)},r.prototype.isDark=function(){return yh(this.rgba)<.5},r.prototype.isLight=function(){return yh(this.rgba)>=.5},r.prototype.toHex=function(){return t=mh(this.rgba),n=t.r,s=t.g,o=t.b,u=(l=t.a)<1?cl(Te(255*l)):"","#"+cl(n)+cl(s)+cl(o)+u;var t,n,s,o,l,u},r.prototype.toRgb=function(){return mh(this.rgba)},r.prototype.toRgbString=function(){return t=mh(this.rgba),n=t.r,s=t.g,o=t.b,(l=t.a)<1?"rgba("+n+", "+s+", "+o+", "+l+")":"rgb("+n+", "+s+", "+o+")";var t,n,s,o,l},r.prototype.toHsl=function(){return t0(wa(this.rgba))},r.prototype.toHslString=function(){return t=t0(wa(this.rgba)),n=t.h,s=t.s,o=t.l,(l=t.a)<1?"hsla("+n+", "+s+"%, "+o+"%, "+l+")":"hsl("+n+", "+s+"%, "+o+"%)";var t,n,s,o,l},r.prototype.toHsv=function(){return t=Ty(this.rgba),{h:Te(t.h),s:Te(t.s),v:Te(t.v),a:Te(t.a,3)};var t},r.prototype.invert=function(){return In({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),In(gh(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),In(gh(this.rgba,-t))},r.prototype.grayscale=function(){return In(gh(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),In(i0(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),In(i0(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?In({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):Te(this.rgba.a,3);var n},r.prototype.hue=function(t){var n=wa(this.rgba);return typeof t=="number"?In({h:t,s:n.s,l:n.l,a:n.a}):Te(n.h)},r.prototype.isEqual=function(t){return this.toHex()===In(t).toHex()},r})(),In=function(r){return r instanceof Vh?r:new Vh(r)},s0=[],Bv=function(r){r.forEach(function(t){s0.indexOf(t)<0&&(t(Vh,Yh),s0.push(t))})};function kv(r,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in n)s[n[o]]=o;var l={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,m=s[this.toHex()];if(m)return m;if(u?.closest){var g=this.toRgb(),y=1/0,S="black";if(!l.length)for(var _ in n)l[_]=new r(n[_]).toRgb();for(var T in n){var E=(h=g,d=l[T],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));E<y&&(y=E,S=T)}return S}},t.string.push([function(u){var h=u.toLowerCase(),d=h==="transparent"?"#0000":n[h];return d?new r(d).toRgb():null},"name"])}Bv([kv]);const fr=class Sa{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Sa)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,n){const s=typeof t;if(s!==typeof n)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===n;if(Array.isArray(t)&&Array.isArray(n)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))return t.length!==n.length?!1:t.every((l,u)=>l===n[u]);if(t!==null&&n!==null){const l=Object.keys(t),u=Object.keys(n);return l.length!==u.length?!1:l.every(h=>t[h]===n[h])}return t===n}toRgba(){const[t,n,s,o]=this._components;return{r:t,g:n,b:s,a:o}}toRgb(){const[t,n,s]=this._components;return{r:t,g:n,b:s}}toRgbaString(){const[t,n,s]=this.toUint8RgbArray();return`rgba(${t},${n},${s},${this.alpha})`}toUint8RgbArray(t){const[n,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(n*255),t[1]=Math.round(s*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[n,s,o,l]=this._components;return t[0]=n,t[1]=s,t[2]=o,t[3]=l,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[n,s,o]=this._components;return t[0]=n,t[1]=s,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,n,s]=this.toUint8RgbArray();return(s<<16)+(n<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[n,s,o,l]=Sa._temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(t,n=!0){return n&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,n=!0){if(t===1)return(255<<24)+this._int;if(t===0)return n?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return n&&(s=s*t+.5|0,o=o*t+.5|0,l=l*t+.5|0),(t*255<<24)+(s<<16)+(o<<8)+l}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let n,s,o,l;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const u=t;n=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,s,o,l=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,s,o,l=255]=t,n/=255,s/=255,o/=255,l/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=Sa.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const u=In(t);u.isValid()&&({r:n,g:s,b:o,a:l}=u.rgba,n/=255,s/=255,o/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,n,s]=this._components;this._int=(t*255<<16)+(n*255<<8)+(s*255|0)}_clamp(t,n=0,s=1){return typeof t=="number"?Math.min(Math.max(t,n),s):(t.forEach((o,l)=>{t[l]=Math.min(Math.max(o,n),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Sa||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};fr.shared=new fr;fr._temp=new fr;fr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Se=fr;const Dv={cullArea:null,cullable:!1,cullableChildren:!0};let xh=0;const r0=500;function ee(...r){xh!==r0&&(xh++,xh===r0?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const Ga={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class Ov{constructor(t,n){this._pool=[],this._count=0,this._index=0,this._classType=t,n&&this.prepopulate(n)}prepopulate(t){for(let n=0;n<t;n++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let n;return this._index>0?n=this._pool[--this._index]:(n=new this._classType,this._count++),n.init?.(t),n}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class zv{constructor(){this._poolsByClass=new Map}prepopulate(t,n){this.getPool(t).prepopulate(n)}get(t,n){return this.getPool(t).get(n)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Ov(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(n=>{const s=t[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;t[s]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const Tn=new zv;Ga.register(Tn);const Uv={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){Mt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function Nv(r,t,n){const s=r.length;let o;if(t>=s||n===0)return;n=t+n>s?s-t:n;const l=s-n;for(o=t;o<l;++o)r[o]=r[o+n];r.length=l}const Pv={allowChildren:!0,removeChildren(r=0,t){const n=t??this.children.length,s=n-r,o=[];if(s>0&&s<=n){for(let u=n-1;u>=r;u--){const h=this.children[u];h&&(o.push(h),h.parent=null)}Nv(this.children,r,n);const l=this.renderGroup||this.parentRenderGroup;l&&l.removeChildren(o);for(let u=0;u<o.length;++u){const h=o[u];h.parentRenderLayer?.detach(h),this.emit("childRemoved",h,this,u),o[u].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const t=this.getChildAt(r);return this.removeChild(t)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,t)},getChildIndex(r){const t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(r,t){this.allowChildren||Mt(Qt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(t<0||t>n.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${n.length}`);if(r.parent){const o=r.parent.children.indexOf(r);if(r.parent===this&&o===t)return r;o!==-1&&r.parent.children.splice(o,1)}t===n.length?n.push(r):n.splice(t,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,t),r.emit("added",this),r},swapChildren(r,t){if(r===t)return;const n=this.getChildIndex(r),s=this.getChildIndex(t);this.children[n]=t,this.children[s]=r;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(t=>this.reparentChildAt(t,this.children.length)),r[0])},reparentChildAt(r,t){if(r.parent===this)return this.setChildIndex(r,t),r;const n=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,t);const s=this.worldTransform.clone();return s.invert(),n.prepend(s),r.setFromMatrix(n),r},replaceChild(r,t){r.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(r)),t.setFromMatrix(r.localTransform),t.updateLocalTransform(),this.removeChild(r)}},Lv={collectRenderables(r,t,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,t,n):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,t,n))},collectRenderablesSimple(r,t,n){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(r,t,n)},collectRenderablesWithEffects(r,t,n){const{renderPipes:s}=t;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,r)}this.collectRenderablesSimple(r,t,n);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,r)}}};class a0{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class jv{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const s=this._tests[n];if(s.test(t))return Tn.get(s.maskClass,t)}return t}returnMaskEffect(t){Tn.return(t)}}const Xh=new jv;Oe.handleByList(dt.MaskEffect,Xh._effectClasses);const Gv={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((n,s)=>n.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const t=this.effects.indexOf(r);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const t=this._maskEffect;t?.mask!==r&&(t&&(this.removeEffect(t),Xh.returnMaskEffect(t),this._maskEffect=null),r!=null&&(this._maskEffect=Xh.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){!Array.isArray(r)&&r&&(r=[r]);const t=this._filterEffect||(this._filterEffect=new a0);r=r;const n=r?.length>0,s=t.filters?.length>0,o=n!==s;r=Array.isArray(r)?r.slice(0):r,t.filters=Object.freeze(r),o&&(n?this.addEffect(t):(this.removeEffect(t),t.filters=r??null))},get filters(){return this._filterEffect?.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new a0),this._filterEffect.filterArea=r},get filterArea(){return this._filterEffect?.filterArea}},Iv={label:null,get name(){return Mt(Qt,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Mt(Qt,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,t=!1){return this.getChildByLabel(r,t)},getChildByLabel(r,t=!1){const n=this.children;for(let s=0;s<n.length;s++){const o=n[s];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(t)for(let s=0;s<n.length;s++){const l=n[s].getChildByLabel(r,!0);if(l)return l}return null},getChildrenByLabel(r,t=!1,n=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===r||r instanceof RegExp&&r.test(l.label))&&n.push(l)}if(t)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(r,!0,n);return n}},Ie=Tn.getPool(Ot),ci=Tn.getPool(kn),Hv=new Ot,Fv={getFastGlobalBounds(r,t){t||(t=new kn),t.clear(),this._getGlobalBoundsRecursive(!!r,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(n.worldTransform),t},_getGlobalBoundsRecursive(r,t,n){let s=t;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=ci.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(r,s,n)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(Hv).invert()),t.addBounds(s),ci.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),ci.return(s))}};function My(r,t,n){n.clear();let s,o;return r.parent?t?s=r.parent.worldTransform:(o=Ie.get().identity(),s=_f(r,o)):s=Ot.IDENTITY,wy(r,n,s,t),o&&Ie.return(o),n.isValid||n.set(0,0,0,0),n}function wy(r,t,n,s){if(!r.visible||!r.measurable)return;let o;s?o=r.worldTransform:(r.updateLocalTransform(),o=Ie.get(),o.appendFrom(r.localTransform,n));const l=t,u=!!r.effects.length;if(u&&(t=ci.get().clear()),r.boundsArea)t.addRect(r.boundsArea,o);else{const h=r.bounds;h&&!h.isEmpty()&&(t.matrix=o,t.addBounds(h));for(let d=0;d<r.children.length;d++)wy(r.children[d],t,o,s)}if(u){for(let h=0;h<r.effects.length;h++)r.effects[h].addBounds?.(t);l.addBounds(t,Ot.IDENTITY),ci.return(t)}s||Ie.return(o)}function _f(r,t){const n=r.parent;return n&&(_f(n,t),n.updateLocalTransform(),t.append(n.localTransform)),t}function Ry(r,t){if(r===16777215||!t)return t;if(t===16777215||!r)return r;const n=r>>16&255,s=r>>8&255,o=r&255,l=t>>16&255,u=t>>8&255,h=t&255,d=n*l/255|0,m=s*u/255|0,g=o*h/255|0;return(d<<16)+(m<<8)+g}const o0=16777215;function l0(r,t){return r===o0?t:t===o0?r:Ry(r,t)}function Sl(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const Yv={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,n=this.parent;for(;n;)t*=n.alpha,n=n.parent;return t},getGlobalTransform(r=new Ot,t){if(t)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const n=_f(this,Ie.get().identity());return r.appendFrom(this.localTransform,n),Ie.return(n),r},getGlobalTint(r){if(r)return this.renderGroup?Sl(this.renderGroup.worldColor):this.parentRenderGroup?Sl(l0(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,n=this.parent;for(;n;)t=l0(t,n.localColor),n=n.parent;return Sl(t)}};function By(r,t,n){return t.clear(),n||(n=Ot.IDENTITY),ky(r,t,n,r,!0),t.isValid||t.set(0,0,0,0),t}function ky(r,t,n,s,o){let l;if(o)l=Ie.get(),l=n.copyTo(l);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const d=r.localTransform;l=Ie.get(),l.appendFrom(d,n)}const u=t,h=!!r.effects.length;if(h&&(t=ci.get().clear()),r.boundsArea)t.addRect(r.boundsArea,l);else{r.renderPipeId&&(t.matrix=l,t.addBounds(r.bounds));const d=r.children;for(let m=0;m<d.length;m++)ky(d[m],t,l,s,!1)}if(h){for(let d=0;d<r.effects.length;d++)r.effects[d].addLocalBounds?.(t,s);u.addBounds(t,Ot.IDENTITY),ci.return(t)}Ie.return(l)}function Dy(r,t){const n=r.children;for(let s=0;s<n.length;s++){const o=n[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=t.index;(t.data[h]!==l||t.data[h+1]!==u)&&(t.data[t.index]=l,t.data[t.index+1]=u,t.didChange=!0),t.index=h+2,o.children.length&&Dy(o,t)}return t.didChange}const Vv=new Ot,Xv={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,t){const n=Math.sign(this.scale.x)||1;t!==0?this.scale.x=r/t*n:this.scale.x=n},_setHeight(r,t){const n=Math.sign(this.scale.y)||1;t!==0?this.scale.y=r/t*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new kn});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),Dy(this,r),r.didChange&&By(this,r.localBounds,Vv),r.localBounds},getBounds(r,t){return My(this,r,t||new kn)}},qv={_onRender:null,set onRender(r){const t=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},$v={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Qv))}};function Qv(r,t){return r._zIndex-t._zIndex}const Zv={getGlobalPosition(r=new Pe,t=!1){return this.parent?this.parent.toGlobal(this._position,r,t):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,t,n=!1){const s=this.getGlobalTransform(Ie.get(),n);return t=s.apply(r,t),Ie.return(s),t},toLocal(r,t,n,s){t&&(r=t.toGlobal(r,n,s));const o=this.getGlobalTransform(Ie.get(),s);return n=o.applyInverse(r,n),Ie.return(o),n}};class Oy{constructor(){this.uid=ce("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Kv=0;class Wv{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new zl(this.textureOptions)}createTexture(t,n,s){const o=new On({...this.textureOptions,width:t,height:n,resolution:1,antialias:s,autoGarbageCollect:!1});return new Ut({source:o,label:`texturePool_${Kv++}`})}getOptimalTexture(t,n,s=1,o){let l=Math.ceil(t*s-1e-6),u=Math.ceil(n*s-1e-6);l=Ol(l),u=Ol(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(l,u,o)),d.source._resolution=s,d.source.width=l/s,d.source.height=u/s,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=n,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(t,n=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,n)}returnTexture(t,n=!1){const s=this._poolKeyHash[t.uid];n&&(t.source.style=this.textureStyle),this._texturePool[s].push(t)}clear(t){if(t=t!==!1,t)for(const n in this._texturePool){const s=this._texturePool[n];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const zy=new Wv;Ga.register(zy);class Jv{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Ot,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Oy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const n=t.children;for(let s=0;s<n.length;s++){const o=n[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(zy.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const n=this.childrenToUpdate[t];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const n=this.renderGroupChildren.indexOf(t);n>-1&&this.renderGroupChildren.splice(n,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const n=t.children;for(let s=0;s<n.length;s++)this.addChild(n[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const n=t.children;for(let s=0;s<n.length;s++)this.removeChild(n[s])}removeChildren(t){for(let n=0;n<t.length;n++)this.removeChild(t[n])}onChildUpdate(t){let n=this.childrenToUpdate[t.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const n=this.root.children;for(let s=0;s<n.length;s++)this._getChildren(n[s],t);return t}_getChildren(t,n=[]){if(n.push(t),t.renderGroup)return n;const s=t.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Ot),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Ot),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Ot),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function tS(r,t,n={}){for(const s in t)!n[s]&&t[s]!==void 0&&(r[s]=t[s])}const _h=new Ue(null),ul=new Ue(null),bh=new Ue(null,1,1),hl=new Ue(null),c0=1,eS=2,vh=4;class An extends Dn{constructor(t={}){super(),this.uid=ce("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Ot,this.relativeGroupTransform=new Ot,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ue(this,0,0),this._scale=bh,this._pivot=ul,this._origin=hl,this._skew=_h,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],tS(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(n=>this.addChild(n)),t.parent?.addChild(this)}static mixin(t){Mt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Oe.mixin(An,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Mt(Qt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const n=t[0],s=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),s&&(s.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,s&&s.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const n=t[0],s=this.children.indexOf(n);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,s),n.emit("removed",this)),n}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=Tn.get(Jv,this),this.groupTransform=Ot.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),Tn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Ot),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*pv}set angle(t){this.rotation=t*mv}get pivot(){return this._pivot===ul&&(this._pivot=new Ue(this,0,0)),this._pivot}set pivot(t){this._pivot===ul&&(this._pivot=new Ue(this,0,0),this._origin!==hl&&ee("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===_h&&(this._skew=new Ue(this,0,0)),this._skew}set skew(t){this._skew===_h&&(this._skew=new Ue(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===bh&&(this._scale=new Ue(this,1,1)),this._scale}set scale(t){this._scale===bh&&(this._scale=new Ue(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===hl&&(this._origin=new Ue(this,0,0)),this._origin}set origin(t){this._origin===hl&&(this._origin=new Ue(this,0,0),this._pivot!==ul&&ee("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const n=this.getLocalBounds().width;this._setWidth(t,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const n=this.getLocalBounds().height;this._setHeight(t,n)}getSize(t){t||(t={});const n=this.getLocalBounds();return t.width=Math.abs(this.scale.x*n.width),t.height=Math.abs(this.scale.y*n.height),t}setSize(t,n){const s=this.getLocalBounds();typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,s.width),n!==void 0&&this._setHeight(n,s.height)}_updateSkew(){const t=this._rotation,n=this._skew;this._cx=Math.cos(t+n._y),this._sx=Math.sin(t+n._y),this._cy=-Math.sin(t-n._x),this._sy=Math.cos(t-n._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const n=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,d=s._y,m=o._x,g=o._y,y=-l._x,S=-l._y;n.a=this._cx*h,n.b=this._sx*h,n.c=this._cy*d,n.d=this._sy*d,n.tx=u._x-(m*n.a+g*n.c)+(y*n.a+S*n.c)-y,n.ty=u._y-(m*n.b+g*n.d)+(y*n.b+S*n.d)-S}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=c0,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=Se.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=c0,this._onUpdate())}get tint(){return Sl(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=eS,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const n=t?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=vh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const n=t?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=vh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const n=t?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=vh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&n)for(let o=0;o<n.length;++o)n[o].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}Oe.mixin(An,Pv,Fv,Zv,qv,Xv,Gv,Iv,$v,Dv,Uv,Yv,Lv);class Uy extends An{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new kn(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=t.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const n=this.bounds,{x:s,y:o}=t;return s>=n.minX&&s<=n.maxX&&o>=n.minY&&o<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(t){this.unload(),super.destroy(t),this._bounds=null}collectRenderablesSimple(t,n,s){const{renderPipes:o}=n;o.blendMode.pushBlendMode(this,this.groupBlendMode,t),o[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let d=0;d<h;d++)u[d].collectRenderables(t,n,s);o.blendMode.popBlendMode(t)}}class dr extends Uy{constructor(t=Ut.EMPTY){t instanceof Ut&&(t={texture:t});const{texture:n=Ut.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ue({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(t,n=!1){return t instanceof Ut?new dr(t):new dr(Ut.from(t,n))}set texture(t){t||(t=Ut.EMPTY);const n=this._texture;n!==t&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Sv(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Mt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,n=this._texture,s=this._bounds,{width:o,height:l}=n.orig;s.minX=-t._x*o,s.maxX=s.minX+o,s.minY=-t._y*l,s.maxY=s.minY+l}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const nS=new kn;function Ny(r,t,n){const s=nS;r.measurable=!0,My(r,n,s),t.addBoundsMask(s),r.measurable=!1}function Py(r,t,n){const s=ci.get();r.measurable=!0;const o=Ie.get().identity(),l=Ly(r,n,o);By(r,s,l),r.measurable=!1,t.addBoundsMask(s),Ie.return(o),ci.return(s)}function Ly(r,t,n){return r?(r!==t&&(Ly(r.parent,t,n),r.updateLocalTransform(),n.append(r.localTransform)),n):(ee("Mask bounds, renderable is not inside the root container"),n)}class jy{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof dr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,n){this.inverse||Ny(this.mask,t,n)}addLocalBounds(t,n){Py(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof dr}}jy.extension=dt.MaskEffect;class Gy{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Gy.extension=dt.MaskEffect;class Iy{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,n){Ny(this.mask,t,n)}addLocalBounds(t,n){Py(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof An}}Iy.extension=dt.MaskEffect;const iS={createCanvas:(r,t)=>{const n=document.createElement("canvas");return n.width=r,n.height=t,n},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let u0=iS;const ne={get(){return u0},set(r){u0=r}};class Hy extends On{constructor(t){t.resource||(t.resource=ne.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,n=this.height,s=this._resolution){const o=super.resize(t,n,s);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Hy.extension=dt.TextureSource;class ds extends On{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}ds.extension=dt.TextureSource;var qh=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(qh||{});class Sh{constructor(t,n=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=n,this.priority=s,this._once=o}match(t,n=null){return this._fn===t&&this._context===n}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=t?null:n,this.previous=null,n}}const Fy=class cn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Sh(null,null,1/0),this.deltaMS=1/cn.targetFPMS,this.elapsedMS=1/cn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,n,s=qh.NORMAL){return this._addListener(new Sh(t,n,s))}addOnce(t,n,s=qh.NORMAL){return this._addListener(new Sh(t,n,s,!0))}_addListener(t){let n=this._head.next,s=this._head;if(!n)t.connect(s);else{for(;n;){if(t.priority>n.priority){t.connect(s);break}s=n,n=n.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,n){let s=this._head.next;for(;s;)s.match(t,n)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,n=this._head;for(;n=n.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const l=t-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=t-l%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*cn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,n)/1e3,cn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,t);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!cn._shared){const t=cn._shared=new cn;t.autoStart=!0,t._protected=!0}return cn._shared}static get system(){if(!cn._system){const t=cn._system=new cn;t.autoStart=!0,t._protected=!0}return cn._system}};Fy.targetFPMS=.06;let fl=Fy,Ch;async function Yy(){return Ch??(Ch=(async()=>{const t=ne.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const n=await new Promise(u=>{const h=document.createElement("video");h.onloadeddata=()=>u(h),h.onerror=()=>u(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!n)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);const l=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,l),t.deleteFramebuffer(o),t.deleteTexture(s),t.getExtension("WEBGL_lose_context")?.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Ch}const Il=class Vy extends On{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Vy.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=fl.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,n=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Yy(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(fl.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(fl.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(fl.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Il.extension=dt.TextureSource;Il.defaultOptions={...On.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Il.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ra=Il;const Bn=(r,t,n=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(s=>typeof s=="string"||n?t(s):s):r);class sS{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const n=this._cache.get(t);return n||ee(`[Assets] Asset id ${t} was not found in the Cache`),n}set(t,n){const s=Bn(t);let o;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.test(n)){o=m.getCacheableAssets(s,n);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(d=>{l.set(d,n)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,h)}),u.forEach(d=>{const m=o?o[d]:n;this._cache.has(d)&&this._cache.get(d)!==m&&ee("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(t){if(!this._cacheMap.has(t)){ee(`[Assets] Asset id ${t} was not found in the Cache`);return}const n=this._cacheMap.get(t);n.cacheKeys.forEach(o=>{this._cache.delete(o)}),n.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const te=new sS,$h=[];Oe.handleByList(dt.TextureSource,$h);function Xy(r={}){const t=r&&r.resource,n=t?r.resource:r,s=t?r:{resource:r};for(let o=0;o<$h.length;o++){const l=$h[o];if(l.test(n))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function rS(r={},t=!1){const n=r&&r.resource,s=n?r.resource:r,o=n?r:{resource:r};if(!t&&te.has(s))return te.get(s);const l=new Ut({source:Xy(o)});return l.on("destroy",()=>{te.has(s)&&te.remove(s)}),t||te.set(s,l),l}function aS(r,t=!1){return typeof r=="string"?te.get(r):r instanceof On?new Ut({source:r}):rS(r,t)}Ut.from=aS;On.from=Xy;Oe.add(jy,Gy,Iy,Ra,ds,Hy,xf);var Ii=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Ii||{});function Rn(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function da(r){return r.split("?")[0].split("#")[0]}function oS(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lS(r,t,n){return r.replace(new RegExp(oS(t),"g"),n)}function cS(r,t){let n="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=r.length;++h){if(h<r.length)u=r.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const d=n.lastIndexOf("/");if(d!==n.length-1){d===-1?(n="",s=0):(n=n.slice(0,d),s=n.length-1-n.lastIndexOf("/")),o=h,l=0;continue}}else if(n.length===2||n.length===1){n="",s=0,o=h,l=0;continue}}}else n.length>0?n+=`/${r.slice(o+1,h)}`:n=r.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return n}const un={toPosix(r){return lS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Rn(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(r);return n?n[0]:""},toAbsolute(r,t,n){if(Rn(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const s=da(this.toPosix(t??ne.get().getBaseUrl())),o=da(this.toPosix(n??this.rootname(s)));return r=this.toPosix(r),r.startsWith("/")?un.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(s,r)},normalize(r){if(Rn(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const n=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const s=r.endsWith("/");return r=cS(r),r.length>0&&s&&(r+="/"),n?`/${r}`:t+r},isAbsolute(r){return Rn(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let n=0;n<r.length;++n){const s=r[n];if(Rn(s),s.length>0)if(t===void 0)t=s;else{const o=r[n-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(Rn(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const n=t===47;let s=-1,o=!0;const l=this.getProtocol(r),u=r;r=r.slice(l.length);for(let h=r.length-1;h>=1;--h)if(t=r.charCodeAt(h),t===47){if(!o){s=h;break}}else o=!1;return s===-1?n?"/":this.isUrl(u)?l+r:l:n&&s===1?"//":l+r.slice(0,s)},rootname(r){Rn(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const n=r.indexOf("/",t.length);n!==-1?t=r.slice(0,n):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){Rn(r),t&&Rn(t),r=da(this.toPosix(r));let n=0,s=-1,o=!0,l;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let u=t.length-1,h=-1;for(l=r.length-1;l>=0;--l){const d=r.charCodeAt(l);if(d===47){if(!o){n=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(d===t.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return n===s?s=h:s===-1&&(s=r.length),r.slice(n,s)}for(l=r.length-1;l>=0;--l)if(r.charCodeAt(l)===47){if(!o){n=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":r.slice(n,s)},extname(r){Rn(r),r=da(this.toPosix(r));let t=-1,n=0,s=-1,o=!0,l=0;for(let u=r.length-1;u>=0;--u){const h=r.charCodeAt(u);if(h===47){if(!o){n=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?t===-1?t=u:l!==1&&(l=1):t!==-1&&(l=-1)}return t===-1||s===-1||l===0||l===1&&t===s-1&&t===n+1?"":r.slice(t,s)},parse(r){Rn(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=da(this.toPosix(r));let n=r.charCodeAt(0);const s=this.isAbsolute(r);let o;t.root=this.rootname(r),s||this.hasProtocol(r)?o=1:o=0;let l=-1,u=0,h=-1,d=!0,m=r.length-1,g=0;for(;m>=o;--m){if(n=r.charCodeAt(m),n===47){if(!d){u=m+1;break}continue}h===-1&&(d=!1,h=m+1),n===46?l===-1?l=m:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||h===-1||g===0||g===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?t.base=t.name=r.slice(1,h):t.base=t.name=r.slice(u,h)):(u===0&&s?(t.name=r.slice(1,l),t.base=r.slice(1,h)):(t.name=r.slice(u,l),t.base=r.slice(u,h)),t.ext=r.slice(l,h)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function qy(r,t,n,s,o){const l=t[n];for(let u=0;u<l.length;u++){const h=l[u];n<t.length-1?qy(r.replace(s[n],h),t,n+1,s,o):o.push(r.replace(s[n],h))}}function uS(r){const t=/\{(.*?)\}/g,n=r.match(t),s=[];if(n){const o=[];n.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),qy(r,o,0,n,s)}else s.push(r);return s}const Ul=r=>!Array.isArray(r);class mr{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,n)=>`${t}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(t,n)=>n.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const n=t;this._defaultSearchParams=Object.keys(n).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(n[s])}`).join("&")}}getAlias(t){const{alias:n,src:s}=t;return Bn(n||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>u?.src??u):l?.src?l.src:l,!0)}addManifest(t){this._manifest&&ee("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(t,n){const s=[];let o=n;Array.isArray(n)||(o=Object.entries(n).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let d;if(typeof h=="string"){const m=this._createBundleAssetId(t,h);s.push(m),d=[h,m]}else{const m=h.map(g=>this._createBundleAssetId(t,g));s.push(...m),d=[...h,...m]}this.add({...l,alias:d,src:u})}),this._bundles[t]=s}add(t){const n=[];Array.isArray(t)?n.push(...t):n.push(t);let s;s=l=>{this.hasKey(l)&&ee(`[Resolver] already has key: ${l} overwriting`)},Bn(n).forEach(l=>{const{src:u}=l;let{data:h,format:d,loadParser:m,parser:g}=l;const y=Bn(u).map(E=>typeof E=="string"?uS(E):Array.isArray(E)?E:[E]),S=this.getAlias(l);Array.isArray(S)?S.forEach(s):s(S);const _=[],T=E=>({...this._parsers.find(R=>R.test(E))?.parse(E),src:E});y.forEach(E=>{E.forEach(M=>{let R={};if(typeof M!="object"?R=T(M):(h=M.data??h,d=M.format??d,(M.loadParser||M.parser)&&(m=M.loadParser??m,g=M.parser??g),R={...T(M.src),...M}),!S)throw new Error(`[Resolver] alias is undefined for this asset: ${R.src}`);R=this._buildResolvedAsset(R,{aliases:S,data:h,format:d,loadParser:m,parser:g,progressSize:l.progressSize}),_.push(R)})}),S.forEach(E=>{this._assetMap[E]=_})})}resolveBundle(t){const n=Ul(t);t=Bn(t);const s={};return t.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const d in u){const m=u[d];h[this._extractAssetIdFromBundle(o,d)]=m}s[o]=h}}),n?s[t[0]]:s}resolveUrl(t){const n=this.resolve(t);if(typeof t!="string"){const s={};for(const o in n)s[o]=n[o].src;return s}return n.src}resolve(t){const n=Ul(t);t=Bn(t);const s={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u?.priority.forEach(h=>{u.params[h].forEach(d=>{const m=l.filter(g=>g[h]?g[h]===d:!1);m.length&&(l=m)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),n?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let n=0;n<t.length;n++){const s=t[n],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const n=/\?/.test(t)?"&":"?";return`${t}${n}${this._defaultSearchParams}`}_buildResolvedAsset(t,n){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:d}=n;return(this._basePath||this._rootPath)&&(t.src=un.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=l??t.loadParser,t.parser=u??t.parser,t.format=h??t.format??hS(t.src),d!==void 0&&(t.progressSize=d),t}}mr.RETINA_PREFIX=/@([0-9\.]+)x/;function hS(r){return r.split(".").pop().split("?").shift().split("#").shift()}const Qh=(r,t)=>{const n=t.split("?")[1];return n&&(r+=`?${n}`),r},$y=class Ca{constructor(t,n){this.linkedSheets=[];let s=t;t?.source instanceof On&&(s={texture:t,data:n});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Ut?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Ca.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t;const s=Ca.BATCH_SIZE;for(;n-t<s&&n<this._frameKeys.length;){const o=this._frameKeys[n],l=this._frames[o],u=l.frame;if(u){let h=null,d=null;const m=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,g=new pe(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);l.rotated?h=new pe(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new pe(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new pe(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Ut({source:this.textureSource,frame:h,orig:g,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}n++}}_processAnimations(){const t=this.data.animations||{};for(const n in t){this.animations[n]=[];for(let s=0;s<t[n].length;s++){const o=t[n][s];this.animations[n].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ca.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ca.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};$y.BATCH_SIZE=1e3;let h0=$y;const fS=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Qy(r,t,n){const s={};if(r.forEach(o=>{s[o]=t}),Object.keys(t.textures).forEach(o=>{s[`${t.cachePrefix}${o}`]=t.textures[o]}),!n){const o=un.dirname(r[0]);t.linkedSheets.forEach((l,u)=>{const h=Qy([`${o}/${t.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const dS={extension:dt.Asset,cache:{test:r=>r instanceof h0,getCacheableAssets:(r,t)=>Qy(r,t,!1)},resolver:{extension:{type:dt.ResolveParser,name:"resolveSpritesheet"},test:r=>{const n=r.split("?")[0].split("."),s=n.pop(),o=n.pop();return s==="json"&&fS.includes(o)},parse:r=>{const t=r.split(".");return{resolution:parseFloat(mr.RETINA_PREFIX.exec(r)?.[1]??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:dt.LoadParser,priority:Ii.Normal,name:"spritesheetLoader"},async testParse(r,t){return un.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,n){const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=t?.data??{};let h=un.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let d;if(s instanceof Ut)d=s;else{const y=Qh(h+(o??r.meta.image),t.src);d=(await n.load([{src:y,data:l}]))[y]}const m=new h0({texture:d.source,data:r,cachePrefix:u});await m.parse();const g=r?.meta?.related_multi_packs;if(Array.isArray(g)){const y=[];for(const _ of g){if(typeof _!="string")continue;let T=h+_;t.data?.ignoreMultiPack||(T=Qh(T,t.src),y.push(n.load({src:T,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(y);m.linkedSheets=S,S.forEach(_=>{_.linkedSheets=[m].concat(m.linkedSheets.filter(T=>T!==_))})}return m},async unload(r,t,n){await n.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};Oe.add(dS);const Ah=Object.create(null),f0=Object.create(null);function bf(r,t){let n=f0[r];return n===void 0&&(Ah[t]===void 0&&(Ah[t]=1),f0[r]=n=Ah[t]++),n}let dl;function Zy(){return(!dl||dl?.isContextLost())&&(dl=ne.get().createCanvas().getContext("webgl",{})),dl}let pl;function pS(){if(!pl){pl="mediump";const r=Zy();r&&r.getShaderPrecisionFormat&&(pl=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return pl}function mS(r,t,n){return t?r:n?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function gS(r,t,n){const s=n?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=n?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(s!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function yS(r,t){return t?`#version 300 es
${r}`:r}const xS={},_S={};function bS(r,{name:t="pixi-program"},n=!0){t=t.replace(/\s+/g,"-"),t+=n?"-fragment":"-vertex";const s=n?xS:_S;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${t}`}
${r}`}function vS(r,t){return t?r.replace("#version 300 es",""):r}const Th={stripVersion:vS,ensurePrecision:gS,addProgramDefines:mS,setProgramName:bS,insertVersion:yS},pa=Object.create(null),Ky=class Zh{constructor(t){t={...Zh.defaultOptions,...t};const n=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:pS()},setProgramName:{name:t.name},addProgramDefines:n,insertVersion:n};let o=t.fragment,l=t.vertex;Object.keys(Th).forEach(u=>{const h=s[u];o=Th[u](o,h,!0),l=Th[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=bf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,pa[this._cacheKey]=null}static from(t){const n=`${t.vertex}:${t.fragment}`;return pa[n]||(pa[n]=new Zh(t),pa[n]._cacheKey=n),pa[n]}};Ky.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Wy=Ky;const d0={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function SS(r){return d0[r]??d0.float32}const CS={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function AS({source:r,entryPoint:t}){const n={},s=r.indexOf(`fn ${t}`);if(s!==-1){const o=r.indexOf("->",s);if(o!==-1){const l=r.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const d=CS[h[3]]??"float32";n[h[2]]={location:parseInt(h[1],10),format:d,stride:SS(d).stride,offset:0,instance:!1,start:0}}}}return n}function Eh(r){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,m=r.match(t)?.map(y=>({group:parseInt(y.match(n)[1],10),binding:parseInt(y.match(s)[1],10),name:y.match(o)[2],isUniform:y.match(o)[1]==="<uniform>",type:y.match(l)[1]}));if(!m)return{groups:[],structs:[]};const g=r.match(u)?.map(y=>{const S=y.match(d)[1],_=y.match(h).reduce((T,E)=>{const[M,R]=E.split(":");return T[M.trim()]=R.trim(),T},{});return _?{name:S,members:_}:null}).filter(({name:y})=>m.some(S=>S.type===y))??[];return{groups:m,structs:g}}var Aa=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(Aa||{});function TS({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:Aa.VERTEX|Aa.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:Aa.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:Aa.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function ES({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function MS(r,t){const n=new Set,s=new Set,o=[...r.structs,...t.structs].filter(u=>n.has(u.name)?!1:(n.add(u.name),!0)),l=[...r.groups,...t.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const ma=Object.create(null);class Hl{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:s,layout:o,gpuLayout:l,name:u}=t;if(this.name=u,this.fragment=n,this.vertex=s,n.source===s.source){const h=Eh(n.source);this.structsAndGroups=h}else{const h=Eh(s.source),d=Eh(n.source);this.structsAndGroups=MS(h,d)}this.layout=o??ES(this.structsAndGroups),this.gpuLayout=l??TS(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:n}=this,s=t.source+n.source+t.entryPoint+n.entryPoint;this._layoutKey=bf(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=AS(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,ma[this._cacheKey]=null}static from(t){const n=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return ma[n]||(ma[n]=new Hl(t),ma[n]._cacheKey=n),ma[n]}}const Jy=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],wS=Jy.reduce((r,t)=>(r[t]=!0,r),{});function RS(r,t){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const tx=class ex{constructor(t,n){this._touched=0,this.uid=ce("uniform"),this._resourceType="uniformGroup",this._resourceId=ce("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...ex.defaultOptions,...n},this.uniformStructures=t;const s={};for(const o in t){const l=t[o];if(l.name=o,l.size=l.size??1,!wS[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,d]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${d} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${Jy.join(", ")}`)}l.value??(l.value=RS(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=bf(Object.keys(s).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};tx.defaultOptions={ubo:!1,isStatic:!1};let nx=tx;class Cl{constructor(t){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const s in t){const o=t[s];this.setResource(o,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let n=0;for(const s in this.resources)t[n++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,n){const s=this.resources[n];t!==s&&(s&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[n]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t,n){const s=this.resources;for(const o in s)s[o]._gcLastUsed=t,s[o]._touched=n}destroy(){const t=this.resources;for(const n in t)t[n]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const n=this.resources;for(const s in n)n[s]===t&&(n[s]=null)}else this._updateKey()}}var Kh=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(Kh||{});class vf extends Dn{constructor(t){super(),this.uid=ce("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:n,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=t;this.gpuProgram=n,this.glProgram=s,u===void 0&&(u=0,n&&(u|=Kh.WEBGPU),s&&(u|=Kh.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&o&&h)for(const m in h)for(const g in h[m]){const y=h[m][g];d[y]={group:m,binding:g,name:y}}else if(n&&o&&!h){const m=n.structsAndGroups.groups;h={},m.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,d[g.name]=g})}else if(l){o={},h={},n&&n.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,d[y.name]=y});let m=0;for(const g in l)d[g]||(o[99]||(o[99]=new Cl,this._ownedBindGroups.push(o[99])),d[g]={group:99,binding:m,name:g},h[99]=h[99]||{},h[99][m]=g,m++);for(const g in l){const y=g;let S=l[g];!S.source&&!S._resourceType&&(S=new nx(S));const _=d[y];_&&(o[_.group]||(o[_.group]=new Cl,this._ownedBindGroups.push(o[_.group])),o[_.group].setResource(S,_.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,d)}addResource(t,n,s){var o,l;(o=this._uniformBindMap)[n]||(o[n]={}),(l=this._uniformBindMap[n])[s]||(l[s]=t),this.groups[n]||(this.groups[n]=new Cl,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(t,n){const s={};for(const o in n){const l=n[o];Object.defineProperty(s,l.name,{get(){return t[l.group].getResource(l.binding)},set(u){t[l.group].setResource(u,l.binding)}})}return s}destroy(t=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:n,gl:s,...o}=t;let l,u;return n&&(l=Hl.from(n)),s&&(u=Wy.from(s)),new vf({gpuProgram:l,glProgram:u,...o})}}const Wh=[];Oe.handleByNamedList(dt.Environment,Wh);async function BS(r){if(!r)for(let t=0;t<Wh.length;t++){const n=Wh[t];if(n.value.test()){await n.value.load();return}}}let ga;function kS(){if(typeof ga=="boolean")return ga;try{ga=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ga=!1}return ga}function p0(r,t,n=2){const s=t&&t.length,o=s?t[0]*n:r.length;let l=ix(r,0,o,n,!0);const u=[];if(!l||l.next===l.prev)return u;let h,d,m;if(s&&(l=NS(r,t,l,n)),r.length>80*n){h=r[0],d=r[1];let g=h,y=d;for(let S=n;S<o;S+=n){const _=r[S],T=r[S+1];_<h&&(h=_),T<d&&(d=T),_>g&&(g=_),T>y&&(y=T)}m=Math.max(g-h,y-d),m=m!==0?32767/m:0}return Oa(l,u,n,h,d,m,0),u}function ix(r,t,n,s,o){let l;if(o===qS(r,t,n,s)>0)for(let u=t;u<n;u+=s)l=m0(u/s|0,r[u],r[u+1],l);else for(let u=n-s;u>=t;u-=s)l=m0(u/s|0,r[u],r[u+1],l);return l&&pr(l,l.next)&&(Ua(l),l=l.next),l}function ps(r,t){if(!r)return r;t||(t=r);let n=r,s;do if(s=!1,!n.steiner&&(pr(n,n.next)||re(n.prev,n,n.next)===0)){if(Ua(n),n=t=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==t);return t}function Oa(r,t,n,s,o,l,u){if(!r)return;!u&&l&&IS(r,s,o,l);let h=r;for(;r.prev!==r.next;){const d=r.prev,m=r.next;if(l?OS(r,s,o,l):DS(r)){t.push(d.i,r.i,m.i),Ua(r),r=m.next,h=m.next;continue}if(r=m,r===h){u?u===1?(r=zS(ps(r),t),Oa(r,t,n,s,o,l,2)):u===2&&US(r,t,n,s,o,l):Oa(ps(r),t,n,s,o,l,1);break}}}function DS(r){const t=r.prev,n=r,s=r.next;if(re(t,n,s)>=0)return!1;const o=t.x,l=n.x,u=s.x,h=t.y,d=n.y,m=s.y,g=Math.min(o,l,u),y=Math.min(h,d,m),S=Math.max(o,l,u),_=Math.max(h,d,m);let T=s.next;for(;T!==t;){if(T.x>=g&&T.x<=S&&T.y>=y&&T.y<=_&&Ta(o,h,l,d,u,m,T.x,T.y)&&re(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function OS(r,t,n,s){const o=r.prev,l=r,u=r.next;if(re(o,l,u)>=0)return!1;const h=o.x,d=l.x,m=u.x,g=o.y,y=l.y,S=u.y,_=Math.min(h,d,m),T=Math.min(g,y,S),E=Math.max(h,d,m),M=Math.max(g,y,S),R=Jh(_,T,t,n,s),B=Jh(E,M,t,n,s);let O=r.prevZ,P=r.nextZ;for(;O&&O.z>=R&&P&&P.z<=B;){if(O.x>=_&&O.x<=E&&O.y>=T&&O.y<=M&&O!==o&&O!==u&&Ta(h,g,d,y,m,S,O.x,O.y)&&re(O.prev,O,O.next)>=0||(O=O.prevZ,P.x>=_&&P.x<=E&&P.y>=T&&P.y<=M&&P!==o&&P!==u&&Ta(h,g,d,y,m,S,P.x,P.y)&&re(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;O&&O.z>=R;){if(O.x>=_&&O.x<=E&&O.y>=T&&O.y<=M&&O!==o&&O!==u&&Ta(h,g,d,y,m,S,O.x,O.y)&&re(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;P&&P.z<=B;){if(P.x>=_&&P.x<=E&&P.y>=T&&P.y<=M&&P!==o&&P!==u&&Ta(h,g,d,y,m,S,P.x,P.y)&&re(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function zS(r,t){let n=r;do{const s=n.prev,o=n.next.next;!pr(s,o)&&rx(s,n,n.next,o)&&za(s,o)&&za(o,s)&&(t.push(s.i,n.i,o.i),Ua(n),Ua(n.next),n=r=o),n=n.next}while(n!==r);return ps(n)}function US(r,t,n,s,o,l){let u=r;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&YS(u,h)){let d=ax(u,h);u=ps(u,u.next),d=ps(d,d.next),Oa(u,t,n,s,o,l,0),Oa(d,t,n,s,o,l,0);return}h=h.next}u=u.next}while(u!==r)}function NS(r,t,n,s){const o=[];for(let l=0,u=t.length;l<u;l++){const h=t[l]*s,d=l<u-1?t[l+1]*s:r.length,m=ix(r,h,d,s,!1);m===m.next&&(m.steiner=!0),o.push(FS(m))}o.sort(PS);for(let l=0;l<o.length;l++)n=LS(o[l],n);return n}function PS(r,t){let n=r.x-t.x;if(n===0&&(n=r.y-t.y,n===0)){const s=(r.next.y-r.y)/(r.next.x-r.x),o=(t.next.y-t.y)/(t.next.x-t.x);n=s-o}return n}function LS(r,t){const n=jS(r,t);if(!n)return t;const s=ax(n,r);return ps(s,s.next),ps(n,n.next)}function jS(r,t){let n=t;const s=r.x,o=r.y;let l=-1/0,u;if(pr(r,n))return n;do{if(pr(r,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const y=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=s&&y>l&&(l=y,u=n.x<n.next.x?n:n.next,y===s))return u}n=n.next}while(n!==t);if(!u)return null;const h=u,d=u.x,m=u.y;let g=1/0;n=u;do{if(s>=n.x&&n.x>=d&&s!==n.x&&sx(o<m?s:l,o,d,m,o<m?l:s,o,n.x,n.y)){const y=Math.abs(o-n.y)/(s-n.x);za(n,r)&&(y<g||y===g&&(n.x>u.x||n.x===u.x&&GS(u,n)))&&(u=n,g=y)}n=n.next}while(n!==h);return u}function GS(r,t){return re(r.prev,r,t.prev)<0&&re(t.next,r,r.next)<0}function IS(r,t,n,s){let o=r;do o.z===0&&(o.z=Jh(o.x,o.y,t,n,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,HS(o)}function HS(r){let t,n=1;do{let s=r,o;r=null;let l=null;for(t=0;s;){t++;let u=s,h=0;for(let m=0;m<n&&(h++,u=u.nextZ,!!u);m++);let d=n;for(;h>0||d>0&&u;)h!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,d--),l?l.nextZ=o:r=o,o.prevZ=l,l=o;s=u}l.nextZ=null,n*=2}while(t>1);return r}function Jh(r,t,n,s,o){return r=(r-n)*o|0,t=(t-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function FS(r){let t=r,n=r;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==r);return n}function sx(r,t,n,s,o,l,u,h){return(o-u)*(t-h)>=(r-u)*(l-h)&&(r-u)*(s-h)>=(n-u)*(t-h)&&(n-u)*(l-h)>=(o-u)*(s-h)}function Ta(r,t,n,s,o,l,u,h){return!(r===u&&t===h)&&sx(r,t,n,s,o,l,u,h)}function YS(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!VS(r,t)&&(za(r,t)&&za(t,r)&&XS(r,t)&&(re(r.prev,r,t.prev)||re(r,t.prev,t))||pr(r,t)&&re(r.prev,r,r.next)>0&&re(t.prev,t,t.next)>0)}function re(r,t,n){return(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y)}function pr(r,t){return r.x===t.x&&r.y===t.y}function rx(r,t,n,s){const o=gl(re(r,t,n)),l=gl(re(r,t,s)),u=gl(re(n,s,r)),h=gl(re(n,s,t));return!!(o!==l&&u!==h||o===0&&ml(r,n,t)||l===0&&ml(r,s,t)||u===0&&ml(n,r,s)||h===0&&ml(n,t,s))}function ml(r,t,n){return t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)&&t.y<=Math.max(r.y,n.y)&&t.y>=Math.min(r.y,n.y)}function gl(r){return r>0?1:r<0?-1:0}function VS(r,t){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==t.i&&n.next.i!==t.i&&rx(n,n.next,r,t))return!0;n=n.next}while(n!==r);return!1}function za(r,t){return re(r.prev,r,r.next)<0?re(r,t,r.next)>=0&&re(r,r.prev,t)>=0:re(r,t,r.prev)<0||re(r,r.next,t)<0}function XS(r,t){let n=r,s=!1;const o=(r.x+t.x)/2,l=(r.y+t.y)/2;do n.y>l!=n.next.y>l&&n.next.y!==n.y&&o<(n.next.x-n.x)*(l-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==r);return s}function ax(r,t){const n=tf(r.i,r.x,r.y),s=tf(t.i,t.x,t.y),o=r.next,l=t.prev;return r.next=t,t.prev=r,n.next=o,o.prev=n,s.next=n,n.prev=s,l.next=s,s.prev=l,s}function m0(r,t,n,s){const o=tf(r,t,n);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Ua(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function tf(r,t,n){return{i:r,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function qS(r,t,n,s){let o=0;for(let l=t,u=n-s;l<n;l+=s)o+=(r[u]-r[l])*(r[l+1]+r[u+1]),u=l;return o}const $S=p0.default||p0;var ox=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(ox||{});class QS{constructor(t){this.items=[],this._name=t}emit(t,n,s,o,l,u,h,d){const{name:m,items:g}=this;for(let y=0,S=g.length;y<S;y++)g[y][m](t,n,s,o,l,u,h,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const n=this.items.indexOf(t);return n!==-1&&this.items.splice(n,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const ZS=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],lx=class cx extends Dn{constructor(t){super(),this.tick=0,this.uid=ce("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const n=[...ZS,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(t={}){const n=t.skipExtensionImports===!0?!0:t.manageImports===!1;await BS(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...cx.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,n){this.tick++;let s=t;if(s instanceof An&&(s={container:s},n&&(Mt(Qt,"passing a second argument is deprecated, please use render options instead"),s.target=n.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:Se.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(t,n,s){const o=this.view.resolution;this.view.resize(t,n,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(t={}){const n=this;t.target||(t.target=n.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=ox.ALL);const{clear:s,clearColor:o,target:l}=t;Se.shared.setValue(o??this.background.colorRgba),n.renderTarget.clear(l,s,Se.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(n=>{this.runners[n]=new QS(n)})}_addSystems(t){let n;for(n in t){const s=t[n];this._addSystem(s.value,s.name)}}_addSystem(t,n){const s=new t(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=s,this._systemsHash[n]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(t,n){const s=n.reduce((o,l)=>(o[l.name]=l.value,o),{});t.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&Ga.release(),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!kS())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};lx.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let ux=lx,yl;function KS(r){return yl!==void 0||(yl=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:r??ux.defaultOptions.failIfMajorPerformanceCaveat};try{if(!ne.get().getWebGLRenderingContext())return!1;let s=ne.get().createCanvas().getContext("webgl",t);const o=!!s?.getContextAttributes()?.stencil;if(s){const l=s.getExtension("WEBGL_lose_context");l&&l.loseContext()}return s=null,o}catch{return!1}})()),yl}let xl;async function WS(r={}){return xl!==void 0||(xl=await(async()=>{const t=ne.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),xl}const g0=["webgl","webgpu","canvas"];async function JS(r){let t=[];r.preference?(t.push(r.preference),g0.forEach(l=>{l!==r.preference&&t.push(l)})):t=g0.slice();let n,s={};for(let l=0;l<t.length;l++){const u=t[l];if(u==="webgpu"&&await WS()){const{WebGPURenderer:h}=await Dl(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-KE_1Aokb.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]),import.meta.url);n=h,s={...r,...r.webgpu};break}else if(u==="webgl"&&KS(r.failIfMajorPerformanceCaveat??ux.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Dl(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-BQ75DLOU.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]),import.meta.url);n=h,s={...r,...r.webgl};break}else if(u==="canvas")throw s={...r},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!n)throw new Error("No available renderer for the current environment");const o=new n;return await o.init(s),o}const hx="8.15.0";class fx{static init(){globalThis.__PIXI_APP_INIT__?.(this,hx)}static destroy(){}}fx.extension=dt.Application;class tC{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,hx)}destroy(){this._renderer=null}}tC.extension={type:[dt.WebGLSystem,dt.WebGPUSystem],name:"initHook",priority:-10};const dx=class ef{constructor(...t){this.stage=new An,t[0]!==void 0&&Mt(Qt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new An),this.renderer=await JS(t),ef._plugins.forEach(n=>{n.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Mt(Qt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){const s=ef._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};dx._plugins=[];let px=dx;Oe.handleByList(dt.Application,px._plugins);Oe.add(fx);class mx extends Dn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Mt(Qt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Mt(Qt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Mt(Qt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Mt(Qt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Mt(Qt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)this.chars[n].texture?.destroy();this.chars=null,t&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}class eC{constructor(t=0,n=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=s,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const n=this.items[t];delete this.items[t],this.size--,n.prev!==null&&(n.prev.next=n.next),n.next!==null&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++){const o=t[s];n[s]=[o,this.get(o)]}return n}evict(t=!1){if(t||this.size>0){const n=this.first;delete this.items[n.key],--this.size===0?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(t){let n;return this.has(t)&&(n=this.items[t].expiry),n}get(t){const n=this.items[t];if(n!==void 0){if(this.ttl>0&&n.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(n),n.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=new Array(this.size);let n=this.first,s=0;for(;n!==null;)t[s++]=n.key,n=n.next;return t}setWithEvicted(t,n,s=this.resetTtl){let o=null;if(this.has(t))this.set(t,n,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(t,n,s=!1,o=this.resetTtl){let l=this.items[t];return s||l!==void 0?(l.value=n,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=this.get(t[s]);return n}}function gx(r=1e3,t=0,n=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof n!="boolean")throw new TypeError("Invalid resetTtl value");return new eC(r,t,n)}const nC=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function nf(r){const t=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let n=r.fontFamily;Array.isArray(r.fontFamily)||(n=r.fontFamily.split(","));for(let s=n.length-1;s>=0;s--){let o=n[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!nC.includes(o)&&(o=`"${o}"`),n[s]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${t} ${n.join(",")}`}const Mh={willReadFrequently:!0},zn=class ut{static get experimentalLetterSpacingSupported(){let t=ut._experimentalLetterSpacingSupported;if(t===void 0){const n=ne.get().getCanvasRenderingContext2D().prototype;t=ut._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(t,n,s,o,l,u,h,d,m){this.text=t,this.style=n,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=m}static measureText(t=" ",n,s=ut._canvas,o=n.wordWrap){const l=`${t}-${n.styleKey}-wordWrap-${o}`;if(ut._measurementCache.has(l))return ut._measurementCache.get(l);const u=nf(n),h=ut.measureFont(u);h.fontSize===0&&(h.fontSize=n.fontSize,h.ascent=n.fontSize);const d=ut.__context;d.font=u;const g=(o?ut._wordWrap(t,n,s):t).split(/(?:\r\n|\r|\n)/),y=new Array(g.length);let S=0;for(let B=0;B<g.length;B++){const O=ut._measureText(g[B],n.letterSpacing,d);y[B]=O,S=Math.max(S,O)}const _=n._stroke?.width||0;let T=S+_;n.dropShadow&&(T+=n.dropShadow.distance);const E=n.lineHeight||h.fontSize;let M=Math.max(E,h.fontSize+_)+(g.length-1)*(E+n.leading);n.dropShadow&&(M+=n.dropShadow.distance);const R=new ut(t,n,T,M,g,y,E+n.leading,S,h);return ut._measurementCache.set(l,R),R}static _measureText(t,n,s){let o=!1;ut.experimentalLetterSpacingSupported&&(ut.experimentalLetterSpacing?(s.letterSpacing=`${n}px`,s.textLetterSpacing=`${n}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(t);let u=l.width;const h=-l.actualBoundingBoxLeft;let m=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=n,m-=n;else{const g=(ut.graphemeSegmenter(t).length-1)*n;u+=g,m+=g}return Math.max(u,m)}static _wordWrap(t,n,s=ut._canvas){const o=s.getContext("2d",Mh);let l=0,u="",h="";const d=Object.create(null),{letterSpacing:m,whiteSpace:g}=n,y=ut._collapseSpaces(g),S=ut._collapseNewlines(g);let _=!y;const T=n.wordWrapWidth+m,E=ut._tokenize(t);for(let M=0;M<E.length;M++){let R=E[M];if(ut._isNewline(R)){if(!S){h+=ut._addLine(u),_=!y,u="",l=0;continue}R=" "}if(y){const O=ut.isBreakingSpace(R),P=ut.isBreakingSpace(u[u.length-1]);if(O&&P)continue}const B=ut._getFromCache(R,m,d,o);if(B>T)if(u!==""&&(h+=ut._addLine(u),u="",l=0),ut.canBreakWords(R,n.breakWords)){const O=ut.wordWrapSplit(R);for(let P=0;P<O.length;P++){let Z=O[P],X=Z,H=1;for(;O[P+H];){const it=O[P+H];if(!ut.canBreakChars(X,it,R,P,n.breakWords))Z+=it;else break;X=it,H++}P+=H-1;const st=ut._getFromCache(Z,m,d,o);st+l>T&&(h+=ut._addLine(u),_=!1,u="",l=0),u+=Z,l+=st}}else{u.length>0&&(h+=ut._addLine(u),u="",l=0);const O=M===E.length-1;h+=ut._addLine(R,!O),_=!1,u="",l=0}else B+l>T&&(_=!1,h+=ut._addLine(u),u="",l=0),(u.length>0||!ut.isBreakingSpace(R)||_)&&(u+=R,l+=B)}return h+=ut._addLine(u,!1),h}static _addLine(t,n=!0){return t=ut._trimRight(t),t=n?`${t}
`:t,t}static _getFromCache(t,n,s,o){let l=s[t];return typeof l!="number"&&(l=ut._measureText(t,n,o)+n,s[t]=l),l}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let n=t.length-1;n>=0;n--){const s=t[n];if(!ut.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:ut._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return typeof t!="string"?!1:ut._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const n=[];let s="";if(typeof t!="string")return n;for(let o=0;o<t.length;o++){const l=t[o],u=t[o+1];if(ut.isBreakingSpace(l,u)||ut._isNewline(l)){s!==""&&(n.push(s),s=""),l==="\r"&&u===`
`?(n.push(`\r
`),o++):n.push(l);continue}s+=l}return s!==""&&n.push(s),n}static canBreakWords(t,n){return n}static canBreakChars(t,n,s,o,l){return!0}static wordWrapSplit(t){return ut.graphemeSegmenter(t)}static measureFont(t){if(ut._fonts[t])return ut._fonts[t];const n=ut._context;n.font=t;const s=n.measureText(ut.METRICS_STRING+ut.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ut._fonts[t]=o,o}static clearMetrics(t=""){t?delete ut._fonts[t]:ut._fonts={}}static get _canvas(){if(!ut.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if(n.getContext("2d",Mh)?.measureText)return ut.__canvas=n,n;t=ne.get().createCanvas()}catch{t=ne.get().createCanvas()}t.width=t.height=10,ut.__canvas=t}return ut.__canvas}static get _context(){return ut.__context||(ut.__context=ut._canvas.getContext("2d",Mh)),ut.__context}};zn.METRICS_STRING="|q";zn.BASELINE_SYMBOL="M";zn.BASELINE_MULTIPLIER=1.4;zn.HEIGHT_MULTIPLIER=2;zn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const r=new Intl.Segmenter;return t=>{const n=r.segment(t),s=[];let o=0;for(const l of n)s[o++]=l.segment;return s}}return r=>[...r]})();zn.experimentalLetterSpacing=!1;zn._fonts={};zn._newlines=[10,13];zn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];zn._measurementCache=gx(1e3);let Al=zn;const y0=[{offset:0,color:"white"},{offset:1,color:"black"}],Sf=class sf{constructor(...t){this.uid=ce("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let n=iC(t);n={...n.type==="radial"?sf.defaultRadialOptions:sf.defaultLinearOptions,..._y(n)},this._textureSize=n.textureSize,this._wrapMode=n.wrapMode,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(t,n){return this.colorStops.push({offset:t,color:Se.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:n}=this.start,{x:s,y:o}=this.end,l=s-t,u=o-n;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const M=t;t=s,s=M,l*=-1}if(u<0){const M=n;n=o,o=M,u*=-1}}const d=this.colorStops.length?this.colorStops:y0,m=this._textureSize,{canvas:g,context:y}=_0(m,1),S=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);x0(S,d),y.fillStyle=S,y.fillRect(0,0,m,1),this.texture=new Ut({source:new ds({resource:g,addressMode:this._wrapMode})});const _=Math.sqrt(l*l+u*u),T=Math.atan2(u,l),E=new Ot;E.scale(_/m,1),E.rotate(T),E.translate(t,n),this.textureSpace==="local"&&E.scale(m,m),this.transform=E}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:y0,n=this._textureSize,{canvas:s,context:o}=_0(n,n),{x:l,y:u}=this.center,{x:h,y:d}=this.outerCenter,m=this.innerRadius,g=this.outerRadius,y=h-g,S=d-g,_=n/(g*2),T=(l-y)*_,E=(u-S)*_,M=o.createRadialGradient(T,E,m*_,(h-y)*_,(d-S)*_,g*_);x0(M,t),o.fillStyle=t[t.length-1].color,o.fillRect(0,0,n,n),o.fillStyle=M,o.translate(T,E),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-T,-E),o.fillRect(0,0,n,n),this.texture=new Ut({source:new ds({resource:s,addressMode:this._wrapMode})});const R=new Ot;R.scale(1/_,1/_),R.translate(y,S),this.textureSpace==="local"&&R.scale(n,n),this.transform=R}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Sf.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Sf.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let hi=Sf;function x0(r,t){for(let n=0;n<t.length;n++){const s=t[n];r.addColorStop(s.offset,s.color)}}function _0(r,t){const n=ne.get().createCanvas(r,t),s=n.getContext("2d");return{canvas:n,context:s}}function iC(r){let t=r[0]??{};return(typeof t=="number"||r[1])&&(Mt("8.5.2","use options object instead"),t={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??hi.defaultLinearOptions.textureSize}),t}const b0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Fl{constructor(t,n){this.uid=ce("fillPattern"),this._tick=0,this.transform=new Ot,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),n&&(t.source.style.addressModeU=b0[n].addressModeU,t.source.style.addressModeV=b0[n].addressModeV)}setTransform(t){const n=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var wh,v0;function sC(){if(v0)return wh;v0=1,wh=n;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(l){var u=[];return l.replace(t,function(h,d,m){var g=d.toLowerCase();for(m=o(m),g=="m"&&m.length>2&&(u.push([d].concat(m.splice(0,2))),g="l",d=d=="m"?"l":"L");;){if(m.length==r[g])return m.unshift(d),u.push(m);if(m.length<r[g])throw new Error("malformed path data");u.push([d].concat(m.splice(0,r[g])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return wh}var rC=sC();const aC=ja(rC);function oC(r,t){const n=aC(r),s=[];let o=null,l=0,u=0;for(let h=0;h<n.length;h++){const d=n[h],m=d[0],g=d;switch(m){case"M":l=g[1],u=g[2],t.moveTo(l,u);break;case"m":l+=g[1],u+=g[2],t.moveTo(l,u);break;case"H":l=g[1],t.lineTo(l,u);break;case"h":l+=g[1],t.lineTo(l,u);break;case"V":u=g[1],t.lineTo(l,u);break;case"v":u+=g[1],t.lineTo(l,u);break;case"L":l=g[1],u=g[2],t.lineTo(l,u);break;case"l":l+=g[1],u+=g[2],t.lineTo(l,u);break;case"C":l=g[5],u=g[6],t.bezierCurveTo(g[1],g[2],g[3],g[4],l,u);break;case"c":t.bezierCurveTo(l+g[1],u+g[2],l+g[3],u+g[4],l+g[5],u+g[6]),l+=g[5],u+=g[6];break;case"S":l=g[3],u=g[4],t.bezierCurveToShort(g[1],g[2],l,u);break;case"s":t.bezierCurveToShort(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"Q":l=g[3],u=g[4],t.quadraticCurveTo(g[1],g[2],l,u);break;case"q":t.quadraticCurveTo(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"T":l=g[1],u=g[2],t.quadraticCurveToShort(l,u);break;case"t":l+=g[1],u+=g[2],t.quadraticCurveToShort(l,u);break;case"A":l=g[6],u=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"a":l+=g[6],u+=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"Z":case"z":t.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:ee(`Unknown SVG path command: ${m}`)}m!=="Z"&&m!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return t}class Cf{constructor(t=0,n=0,s=0){this.type="circle",this.x=t,this.y=n,this.radius=s}clone(){return new Cf(this.x,this.y,this.radius)}contains(t,n){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-t,l=this.y-n;return o*=o,l*=l,o+l<=s}strokeContains(t,n,s,o=.5){if(this.radius===0)return!1;const l=this.x-t,u=this.y-n,h=this.radius,d=(1-o)*s,m=Math.sqrt(l*l+u*u);return m<=h+d&&m>h-(s-d)}getBounds(t){return t||(t=new pe),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Af{constructor(t=0,n=0,s=0,o=0){this.type="ellipse",this.x=t,this.y=n,this.halfWidth=s,this.halfHeight=o}clone(){return new Af(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,o=(n-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(t,n,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),d=s-h,m=l-d,g=u-d,y=l+h,S=u+h,_=t-this.x,T=n-this.y,E=_*_/(m*m)+T*T/(g*g),M=_*_/(y*y)+T*T/(S*S);return E>1&&M<=1}getBounds(t){return t||(t=new pe),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function lC(r,t,n,s,o,l){const u=r-n,h=t-s,d=o-n,m=l-s,g=u*d+h*m,y=d*d+m*m;let S=-1;y!==0&&(S=g/y);let _,T;S<0?(_=n,T=s):S>1?(_=o,T=l):(_=n+S*d,T=s+S*m);const E=r-_,M=t-T;return E*E+M*M}let cC,uC;class Ba{constructor(...t){this.type="polygon";let n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){const s=[];for(let o=0,l=n.length;o<l;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.closePath=!0}isClockwise(){let t=0;const n=this.points,s=n.length;for(let o=0;o<s;o+=2){const l=n[o],u=n[o+1],h=n[(o+2)%s],d=n[(o+3)%s];t+=(h-l)*(d+u)}return t<0}containsPolygon(t){const n=this.getBounds(cC),s=t.getBounds(uC);if(!n.containsRect(s))return!1;const o=t.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const t=this.points.slice(),n=new Ba(t);return n.closePath=this.closePath,n}contains(t,n){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],d=this.points[l*2+1],m=this.points[u*2],g=this.points[u*2+1];d>n!=g>n&&t<(m-h)*((n-d)/(g-d))+h&&(s=!s)}return s}strokeContains(t,n,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:d}=this,m=d.length-(this.closePath?0:2);for(let g=0;g<m;g+=2){const y=d[g],S=d[g+1],_=d[(g+2)%d.length],T=d[(g+3)%d.length],E=lC(t,n,y,S,_,T),M=Math.sign((_-y)*(n-S)-(T-S)*(t-y));if(E<=(M<0?h:u))return!0}return!1}getBounds(t){t||(t=new pe);const n=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,d=n.length;h<d;h+=2){const m=n[h],g=n[h+1];s=m<s?m:s,o=m>o?m:o,l=g<l?g:l,u=g>u?g:u}return t.x=s,t.width=o-s,t.y=l,t.height=u-l,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,n)=>`${t}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Mt("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Mt("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const _l=(r,t,n,s,o,l,u)=>{const h=r-n,d=t-s,m=Math.sqrt(h*h+d*d);return m>=o-l&&m<=o+u};class Tf{constructor(t=0,n=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=t,this.y=n,this.width=s,this.height=o,this.radius=l}getBounds(t){return t||(t=new pe),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Tf(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+s&&n<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let o=t-(this.x+s),l=n-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=t-(this.x+this.width-s),o*o+l*l<=u)||(l=n-(this.y+this.height-s),o*o+l*l<=u)||(o=t-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(t,n,s,o=.5){const{x:l,y:u,width:h,height:d,radius:m}=this,g=s*(1-o),y=s-g,S=l+m,_=u+m,T=h-m*2,E=d-m*2,M=l+h,R=u+d;return(t>=l-g&&t<=l+y||t>=M-y&&t<=M+g)&&n>=_&&n<=_+E||(n>=u-g&&n<=u+y||n>=R-y&&n<=R+g)&&t>=S&&t<=S+T?!0:t<S&&n<_&&_l(t,n,S,_,m,y,g)||t>M-m&&n<_&&_l(t,n,M-m,_,m,y,g)||t>M-m&&n>R-m&&_l(t,n,M-m,R-m,m,y,g)||t<S&&n>R-m&&_l(t,n,S,R-m,m,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const yx={};function hC(r,t,n){let s=2166136261;for(let o=0;o<t;o++)s^=r[o].uid,s=Math.imul(s,16777619),s>>>=0;return yx[s]||fC(r,t,s,n)}function fC(r,t,n,s){const o={};let l=0;for(let h=0;h<s;h++){const d=h<t?r[h]:Ut.EMPTY.source;o[l++]=d.source,o[l++]=d.style}const u=new Cl(o);return yx[n]=u,u}class S0{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function C0(r,t){const n=r.byteLength/8|0,s=new Float64Array(r,0,n);new Float64Array(t,0,n).set(s);const l=r.byteLength-n*8;if(l>0){const u=new Uint8Array(r,n*8,l);new Uint8Array(t,n*8,l).set(u)}}const dC={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var pC=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(pC||{});function A0(r,t){return t.alphaMode==="no-premultiply-alpha"&&dC[r]||r}const mC=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function gC(r){let t="";for(let n=0;n<r;++n)n>0&&(t+=`
else `),n<r-1&&(t+=`if(test == ${n}.0){}`);return t}function yC(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=mC.replace(/%forloop%/gi,gC(r));if(t.shaderSource(n,s),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))r=r/2|0;else break}}finally{t.deleteShader(n)}return r}let rr=null;function xC(){if(rr)return rr;const r=Zy();return rr=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),rr=yC(rr,r),r.getExtension("WEBGL_lose_context")?.loseContext(),rr}class _C{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const n=this.textures[t];this.textures[t]=null,this.ids[n.uid]=null}this.count=0}}class bC{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new _C,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const ka=[];let Nl=0;Ga.register({clear:()=>{if(ka.length>0)for(const r of ka)r&&r.destroy();ka.length=0,Nl=0}});function T0(){return Nl>0?ka[--Nl]:new bC}function E0(r){ka[Nl++]=r}let ya=0;const xx=class _x{constructor(t){this.uid=ce("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={..._x.defaultOptions,...t},t.maxTextures||(Mt("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=xC());const{maxTextures:n,attributesInitialSize:s,indicesInitialSize:o}=t;this.attributeBuffer=new S0(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)E0(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,n){const s=t._batch.textures.ids[n._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=n,!0)}updateElement(t){this.dirty=!0;const n=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId)}break(t){const n=this._elements;if(!n[this.elementStart])return;let s=T0(),o=s.textures;o.clear();const l=n[this.elementStart];let u=A0(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,m=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,S=this._batchIndexStart,_="startBatch";const T=this.maxTextures;for(let E=this.elementStart;E<this.elementSize;++E){const M=n[E];n[E]=null;const B=M.texture._source,O=A0(M.blendMode,B),P=u!==O||h!==M.topology;if(B._batchTick===ya&&!P){M._textureId=B._textureBindLocation,y+=M.indexSize,M.packAsQuad?(this.packQuadAttributes(M,d,m,M._attributeStart,M._textureId),this.packQuadIndex(g,M._indexStart,M._attributeStart/this.vertexSize)):(this.packAttributes(M,d,m,M._attributeStart,M._textureId),this.packIndex(M,g,M._indexStart,M._attributeStart/this.vertexSize)),M._batch=s;continue}B._batchTick=ya,(o.count>=T||P)&&(this._finishBatch(s,S,y-S,o,u,h,t,_),_="renderBatch",S=y,u=O,h=M.topology,s=T0(),o=s.textures,o.clear(),++ya),M._textureId=B._textureBindLocation=o.count,o.ids[B.uid]=o.count,o.textures[o.count++]=B,M._batch=s,y+=M.indexSize,M.packAsQuad?(this.packQuadAttributes(M,d,m,M._attributeStart,M._textureId),this.packQuadIndex(g,M._indexStart,M._attributeStart/this.vertexSize)):(this.packAttributes(M,d,m,M._attributeStart,M._textureId),this.packIndex(M,g,M._indexStart,M._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,S,y-S,o,u,h,t,_),S=y,++ya),this.elementStart=this.elementSize,this._batchIndexStart=S,this._batchIndexSize=y}_finishBatch(t,n,s,o,l,u,h,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=o,t.blendMode=l,t.topology=u,t.start=n,t.size=s,++ya,this.batches[this.batchIndex++]=t,h.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const n=Math.max(t,this.attributeBuffer.size*2),s=new S0(n);C0(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const n=this.indexBuffer;let s=Math.max(t,n.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let l=0;l<n.length;l++)o[l]=n[l];else C0(n.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,n,s){t[n]=s+0,t[n+1]=s+1,t[n+2]=s+2,t[n+3]=s+0,t[n+4]=s+2,t[n+5]=s+3}packIndex(t,n,s,o){const l=t.indices,u=t.indexSize,h=t.indexOffset,d=t.attributeOffset;for(let m=0;m<u;m++)n[s++]=o+l[m+h]-d}destroy(t={}){if(this.batches!==null){for(let n=0;n<this.batchIndex;n++)E0(this.batches[n]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&(this.shader?.destroy(),this.shader=null);for(let n=0;n<this._elements.length;n++)this._elements[n]&&(this._elements[n]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};xx.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let vC=xx;var We=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(We||{});class Na extends Dn{constructor(t){let{data:n,size:s}=t;const{usage:o,label:l,shrinkToFit:u}=t;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=ce("buffer"),this._resourceType="buffer",this._resourceId=ce("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,s??(s=n?.byteLength);const h=!!n;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&We.STATIC)}set static(t){t?this.descriptor.usage|=We.STATIC:this.descriptor.usage&=~We.STATIC}setDataWithSize(t,n,s){if(this._updateID++,this._updateSize=n*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=ce("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function bx(r,t){if(!(r instanceof Na)){let n=t?We.INDEX:We.VERTEX;r instanceof Array&&(t?(r=new Uint32Array(r),n=We.INDEX|We.COPY_DST):(r=new Float32Array(r),n=We.VERTEX|We.COPY_DST)),r=new Na({data:r,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return r}function SC(r,t,n){const s=r.getAttribute(t);if(!s)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,d=-1/0;const m=o.BYTES_PER_ELEMENT,g=(s.offset||0)/m,y=(s.stride||8)/m;for(let S=g;S<o.length;S+=y){const _=o[S],T=o[S+1];_>h&&(h=_),T>d&&(d=T),_<l&&(l=_),T<u&&(u=T)}return n.minX=l,n.minY=u,n.maxX=h,n.maxY=d,n}function CC(r){return(r instanceof Na||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=bx(r.buffer,!1),r}class AC extends Dn{constructor(t={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=ce("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new kn,this._boundsDirty=!0;const{attributes:n,indexBuffer:s,topology:o}=t;if(this.buffers=[],this.attributes={},n)for(const l in n)this.addAttribute(l,n[l]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const n=this.attributes[t];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(t,n){const s=CC(n);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=bx(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,SC(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(n=>n.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const TC=new Float32Array(1),EC=new Uint32Array(1);class MC extends AC{constructor(){const n=new Na({data:TC,label:"attribute-batch-buffer",usage:We.VERTEX|We.COPY_DST,shrinkToFit:!1}),s=new Na({data:EC,label:"index-batch-buffer",usage:We.INDEX|We.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:o,offset:0},aUV:{buffer:n,format:"float32x2",stride:o,offset:8},aColor:{buffer:n,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function M0(r,t,n){if(r)for(const s in r){const o=s.toLocaleLowerCase(),l=t[o];if(l){let u=r[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&l.push(`//----${n}----//`),l.push(u)}else ee(`${s} placement hook does not exist in shader`)}}const wC=/\{\{(.*?)\}\}/g;function w0(r){const t={};return(r.match(wC)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{t[s]=[]}),t}function R0(r,t){let n;const s=/@in\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function B0(r,t,n=!1){const s=[];R0(t,s),r.forEach(h=>{h.header&&R0(h.header,s)});const o=s;n&&o.sort();const l=o.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let u=t.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function k0(r,t){let n;const s=/@out\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function RC(r){const n=/\b(\w+)\s*:/g.exec(r);return n?n[1]:""}function BC(r){const t=/@.*?\s+/g;return r.replace(t,"")}function kC(r,t){const n=[];k0(t,n),r.forEach(d=>{d.header&&k0(d.header,n)});let s=0;const o=n.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),l=n.sort().map(d=>`       var ${BC(d)};`).join(`
`),u=`return VSOutput(
            ${n.sort().map(d=>` ${RC(d)}`).join(`,
`)});`;let h=t.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function D0(r,t){let n=r;for(const s in t){const o=t[s];o.join(`
`).length?n=n.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):n=n.replace(`{{${s}}}`,"")}return n}const Li=Object.create(null),Rh=new Map;let DC=0;function OC({template:r,bits:t}){const n=vx(r,t);if(Li[n])return Li[n];const{vertex:s,fragment:o}=UC(r,t);return Li[n]=Sx(s,o,t),Li[n]}function zC({template:r,bits:t}){const n=vx(r,t);return Li[n]||(Li[n]=Sx(r.vertex,r.fragment,t)),Li[n]}function UC(r,t){const n=t.map(u=>u.vertex).filter(u=>!!u),s=t.map(u=>u.fragment).filter(u=>!!u);let o=B0(n,r.vertex,!0);o=kC(n,o);const l=B0(s,r.fragment,!0);return{vertex:o,fragment:l}}function vx(r,t){return t.map(n=>(Rh.has(n)||Rh.set(n,DC++),Rh.get(n))).sort((n,s)=>n-s).join("-")+r.vertex+r.fragment}function Sx(r,t,n){const s=w0(r),o=w0(t);return n.forEach(l=>{M0(l.vertex,s,l.name),M0(l.fragment,o,l.name)}),{vertex:D0(r,s),fragment:D0(t,o)}}const NC=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,PC=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,LC=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,jC=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,GC={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},IC={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function HC({bits:r,name:t}){const n=OC({template:{fragment:PC,vertex:NC},bits:[GC,...r]});return Hl.from({name:t,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function FC({bits:r,name:t}){return new Wy({name:t,...zC({template:{vertex:LC,fragment:jC},bits:[IC,...r]})})}const YC={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},VC={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Bh={};function XC(r){const t=[];if(r===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let s=0;s<r;s++)t.push(`@group(1) @binding(${n++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${n++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function qC(r){const t=[];if(r===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let n=0;n<r;n++)n===r-1?t.push("  default:{"):t.push(`  case ${n}:{`),t.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function $C(r){return Bh[r]||(Bh[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${XC(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${qC(r)}
            `}}),Bh[r]}const kh={};function QC(r){const t=[];for(let n=0;n<r;n++)n>0&&t.push("else"),n<r-1&&t.push(`if(vTextureId < ${n}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${n}], vUV);`),t.push("}");return t.join(`
`)}function ZC(r){return kh[r]||(kh[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${QC(r)}
            `}}),kh[r]}const KC={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},WC={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},O0={};function JC(r){let t=O0[r];if(t)return t;const n=new Int32Array(r);for(let s=0;s<r;s++)n[s]=s;return t=O0[r]=new nx({uTextures:{value:n,type:"i32",size:r}},{isStatic:!0}),t}class z0 extends vf{constructor(t){const n=FC({name:"batch",bits:[VC,ZC(t),WC]}),s=HC({name:"batch",bits:[YC,$C(t),KC]});super({glProgram:n,gpuProgram:s,resources:{batchSamplers:JC(t)}}),this.maxTextures=t}}let xa=null;const Cx=class Ax extends vC{constructor(t){super(t),this.geometry=new MC,this.name=Ax.extension.name,this.vertexSize=6,xa??(xa=new z0(t.maxTextures)),this.shader=xa}packAttributes(t,n,s,o,l){const u=l<<16|t.roundPixels&65535,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,S=h.tx,_=h.ty,{positions:T,uvs:E}=t,M=t.color,R=t.attributeOffset,B=R+t.attributeSize;for(let O=R;O<B;O++){const P=O*2,Z=T[P],X=T[P+1];n[o++]=d*Z+g*X+S,n[o++]=y*X+m*Z+_,n[o++]=E[P],n[o++]=E[P+1],s[o++]=M,s[o++]=u}}packQuadAttributes(t,n,s,o,l){const u=t.texture,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,S=h.tx,_=h.ty,T=t.bounds,E=T.maxX,M=T.minX,R=T.maxY,B=T.minY,O=u.uvs,P=t.color,Z=l<<16|t.roundPixels&65535;n[o+0]=d*M+g*B+S,n[o+1]=y*B+m*M+_,n[o+2]=O.x0,n[o+3]=O.y0,s[o+4]=P,s[o+5]=Z,n[o+6]=d*E+g*B+S,n[o+7]=y*B+m*E+_,n[o+8]=O.x1,n[o+9]=O.y1,s[o+10]=P,s[o+11]=Z,n[o+12]=d*E+g*R+S,n[o+13]=y*R+m*E+_,n[o+14]=O.x2,n[o+15]=O.y2,s[o+16]=P,s[o+17]=Z,n[o+18]=d*M+g*R+S,n[o+19]=y*R+m*M+_,n[o+20]=O.x3,n[o+21]=O.y3,s[o+22]=P,s[o+23]=Z}_updateMaxTextures(t){this.shader.maxTextures!==t&&(xa=new z0(t),this.shader=xa)}destroy(){this.shader=null,super.destroy()}};Cx.extension={type:[dt.Batcher],name:"default"};let tA=Cx;class eA{constructor(t){this.items=Object.create(null);const{renderer:n,type:s,onUnload:o,priority:l,name:u}=t;this._renderer=n,n.gc.addResourceHash(this,"items",s,l??0),this._onUnload=o,this.name=u}add(t){return this.items[t.uid]?!1:(this.items[t.uid]=t,t.once("unload",this.remove,this),t._gcLastUsed=this._renderer.gc.now,!0)}remove(t,...n){if(!this.items[t.uid])return;const s=t._gpuData[this._renderer.uid];s&&(this._onUnload?.(t,...n),s.destroy(),t._gpuData[this._renderer.uid]=null,this.items[t.uid]=null)}removeAll(...t){Object.values(this.items).forEach(n=>n&&this.remove(n,...t))}destroy(...t){this.removeAll(...t),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function nA(r,t,n,s,o,l,u,h=null){let d=0;n*=t,o*=l;const m=h.a,g=h.b,y=h.c,S=h.d,_=h.tx,T=h.ty;for(;d<u;){const E=r[n],M=r[n+1];s[o]=m*E+y*M+_,s[o+1]=g*E+S*M+T,o+=l,n+=t,d++}}function iA(r,t,n,s){let o=0;for(t*=n;o<s;)r[t]=0,r[t+1]=0,t+=n,o++}function Tx(r,t,n,s,o){const l=t.a,u=t.b,h=t.c,d=t.d,m=t.tx,g=t.ty;n||(n=0),s||(s=2),o||(o=r.length/s-n);let y=n*s;for(let S=0;S<o;S++){const _=r[y],T=r[y+1];r[y]=l*_+h*T+m,r[y+1]=u*_+d*T+g,y+=s}}const sA=new Ot;class Ex{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,n=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?Ry(n,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||sA}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Pa={extension:{type:dt.ShapeBuilder,name:"circle"},build(r,t){let n,s,o,l,u,h;if(r.type==="circle"){const P=r;if(u=h=P.radius,u<=0)return!1;n=P.x,s=P.y,o=l=0}else if(r.type==="ellipse"){const P=r;if(u=P.halfWidth,h=P.halfHeight,u<=0||h<=0)return!1;n=P.x,s=P.y,o=l=0}else{const P=r,Z=P.width/2,X=P.height/2;n=P.x+Z,s=P.y+X,u=h=Math.max(0,Math.min(P.radius,Math.min(Z,X))),o=Z-u,l=X-h}if(o<0||l<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+h)),m=d*8+(o?4:0)+(l?4:0);if(m===0)return!1;if(d===0)return t[0]=t[6]=n+o,t[1]=t[3]=s+l,t[2]=t[4]=n-o,t[5]=t[7]=s-l,!0;let g=0,y=d*4+(o?2:0)+2,S=y,_=m,T=o+u,E=l,M=n+T,R=n-T,B=s+E;if(t[g++]=M,t[g++]=B,t[--y]=B,t[--y]=R,l){const P=s-E;t[S++]=R,t[S++]=P,t[--_]=P,t[--_]=M}for(let P=1;P<d;P++){const Z=Math.PI/2*(P/d),X=o+Math.cos(Z)*u,H=l+Math.sin(Z)*h,st=n+X,it=n-X,tt=s+H,nt=s-H;t[g++]=st,t[g++]=tt,t[--y]=tt,t[--y]=it,t[S++]=it,t[S++]=nt,t[--_]=nt,t[--_]=st}T=o,E=l+h,M=n+T,R=n-T,B=s+E;const O=s-E;return t[g++]=M,t[g++]=B,t[--_]=O,t[--_]=M,o&&(t[g++]=R,t[g++]=B,t[--_]=O,t[--_]=R),!0},triangulate(r,t,n,s,o,l){if(r.length===0)return;let u=0,h=0;for(let g=0;g<r.length;g+=2)u+=r[g],h+=r[g+1];u/=r.length/2,h/=r.length/2;let d=s;t[d*n]=u,t[d*n+1]=h;const m=d++;for(let g=0;g<r.length;g+=2)t[d*n]=r[g],t[d*n+1]=r[g+1],g>0&&(o[l++]=d,o[l++]=m,o[l++]=d-1),d++;o[l++]=m+1,o[l++]=m,o[l++]=d-1}},rA={...Pa,extension:{...Pa.extension,name:"ellipse"}},aA={...Pa,extension:{...Pa.extension,name:"roundedRectangle"}},Mx=1e-4,U0=1e-4;function oA(r){const t=r.length;if(t<6)return 1;let n=0;for(let s=0,o=r[t-2],l=r[t-1];s<t;s+=2){const u=r[s],h=r[s+1];n+=(u-o)*(h+l),o=u,l=h}return n<0?-1:1}function N0(r,t,n,s,o,l,u,h){const d=r-n*o,m=t-s*o,g=r+n*l,y=t+s*l;let S,_;u?(S=s,_=-n):(S=-s,_=n);const T=d+S,E=m+_,M=g+S,R=y+_;return h.push(T,E),h.push(M,R),2}function os(r,t,n,s,o,l,u,h){const d=n-r,m=s-t;let g=Math.atan2(d,m),y=Math.atan2(o-r,l-t);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let S=g;const _=y-g,T=Math.abs(_),E=Math.sqrt(d*d+m*m),M=(15*T*Math.sqrt(E)/Math.PI>>0)+1,R=_/M;if(S+=R,h){u.push(r,t),u.push(n,s);for(let B=1,O=S;B<M;B++,O+=R)u.push(r,t),u.push(r+Math.sin(O)*E,t+Math.cos(O)*E);u.push(r,t),u.push(o,l)}else{u.push(n,s),u.push(r,t);for(let B=1,O=S;B<M;B++,O+=R)u.push(r+Math.sin(O)*E,t+Math.cos(O)*E),u.push(r,t);u.push(o,l),u.push(r,t)}return M*2}function lA(r,t,n,s,o,l){const u=Mx;if(r.length===0)return;const h=t;let d=h.alignment;if(t.alignment!==.5){let lt=oA(r);d=(d-.5)*lt+.5}const m=new Pe(r[0],r[1]),g=new Pe(r[r.length-2],r[r.length-1]),y=s,S=Math.abs(m.x-g.x)<u&&Math.abs(m.y-g.y)<u;if(y){r=r.slice(),S&&(r.pop(),r.pop(),g.set(r[r.length-2],r[r.length-1]));const lt=(m.x+g.x)*.5,Ct=(g.y+m.y)*.5;r.unshift(lt,Ct),r.push(lt,Ct)}const _=o,T=r.length/2;let E=r.length;const M=_.length/2,R=h.width/2,B=R*R,O=h.miterLimit*h.miterLimit;let P=r[0],Z=r[1],X=r[2],H=r[3],st=0,it=0,tt=-(Z-H),nt=P-X,bt=0,Nt=0,wt=Math.sqrt(tt*tt+nt*nt);tt/=wt,nt/=wt,tt*=R,nt*=R;const ue=d,N=(1-ue)*2,Q=ue*2;y||(h.cap==="round"?E+=os(P-tt*(N-Q)*.5,Z-nt*(N-Q)*.5,P-tt*N,Z-nt*N,P+tt*Q,Z+nt*Q,_,!0)+2:h.cap==="square"&&(E+=N0(P,Z,tt,nt,N,Q,!0,_))),_.push(P-tt*N,Z-nt*N),_.push(P+tt*Q,Z+nt*Q);for(let lt=1;lt<T-1;++lt){P=r[(lt-1)*2],Z=r[(lt-1)*2+1],X=r[lt*2],H=r[lt*2+1],st=r[(lt+1)*2],it=r[(lt+1)*2+1],tt=-(Z-H),nt=P-X,wt=Math.sqrt(tt*tt+nt*nt),tt/=wt,nt/=wt,tt*=R,nt*=R,bt=-(H-it),Nt=X-st,wt=Math.sqrt(bt*bt+Nt*Nt),bt/=wt,Nt/=wt,bt*=R,Nt*=R;const Ct=X-P,D=Z-H,V=X-st,et=it-H,rt=Ct*V+D*et,gt=D*V-et*Ct,yt=gt<0;if(Math.abs(gt)<.001*Math.abs(rt)){_.push(X-tt*N,H-nt*N),_.push(X+tt*Q,H+nt*Q),rt>=0&&(h.join==="round"?E+=os(X,H,X-tt*N,H-nt*N,X-bt*N,H-Nt*N,_,!1)+4:E+=2,_.push(X-bt*Q,H-Nt*Q),_.push(X+bt*N,H+Nt*N));continue}const Rt=(-tt+P)*(-nt+H)-(-tt+X)*(-nt+Z),Kt=(-bt+st)*(-Nt+H)-(-bt+X)*(-Nt+it),It=(Ct*Kt-V*Rt)/gt,Je=(et*Rt-D*Kt)/gt,Un=(It-X)*(It-X)+(Je-H)*(Je-H),Fe=X+(It-X)*N,Ee=H+(Je-H)*N,he=X-(It-X)*Q,tn=H-(Je-H)*Q,Hi=Math.min(Ct*Ct+D*D,V*V+et*et),fi=yt?N:Q,xs=Hi+fi*fi*B;Un<=xs?h.join==="bevel"||Un/B>O?(yt?(_.push(Fe,Ee),_.push(X+tt*Q,H+nt*Q),_.push(Fe,Ee),_.push(X+bt*Q,H+Nt*Q)):(_.push(X-tt*N,H-nt*N),_.push(he,tn),_.push(X-bt*N,H-Nt*N),_.push(he,tn)),E+=2):h.join==="round"?yt?(_.push(Fe,Ee),_.push(X+tt*Q,H+nt*Q),E+=os(X,H,X+tt*Q,H+nt*Q,X+bt*Q,H+Nt*Q,_,!0)+4,_.push(Fe,Ee),_.push(X+bt*Q,H+Nt*Q)):(_.push(X-tt*N,H-nt*N),_.push(he,tn),E+=os(X,H,X-tt*N,H-nt*N,X-bt*N,H-Nt*N,_,!1)+4,_.push(X-bt*N,H-Nt*N),_.push(he,tn)):(_.push(Fe,Ee),_.push(he,tn)):(_.push(X-tt*N,H-nt*N),_.push(X+tt*Q,H+nt*Q),h.join==="round"?yt?E+=os(X,H,X+tt*Q,H+nt*Q,X+bt*Q,H+Nt*Q,_,!0)+2:E+=os(X,H,X-tt*N,H-nt*N,X-bt*N,H-Nt*N,_,!1)+2:h.join==="miter"&&Un/B<=O&&(yt?(_.push(he,tn),_.push(he,tn)):(_.push(Fe,Ee),_.push(Fe,Ee)),E+=2),_.push(X-bt*N,H-Nt*N),_.push(X+bt*Q,H+Nt*Q),E+=2)}P=r[(T-2)*2],Z=r[(T-2)*2+1],X=r[(T-1)*2],H=r[(T-1)*2+1],tt=-(Z-H),nt=P-X,wt=Math.sqrt(tt*tt+nt*nt),tt/=wt,nt/=wt,tt*=R,nt*=R,_.push(X-tt*N,H-nt*N),_.push(X+tt*Q,H+nt*Q),y||(h.cap==="round"?E+=os(X-tt*(N-Q)*.5,H-nt*(N-Q)*.5,X-tt*N,H-nt*N,X+tt*Q,H+nt*Q,_,!1)+2:h.cap==="square"&&(E+=N0(X,H,tt,nt,N,Q,!1,_)));const ht=U0*U0;for(let lt=M;lt<E+M-2;++lt)P=_[lt*2],Z=_[lt*2+1],X=_[(lt+1)*2],H=_[(lt+1)*2+1],st=_[(lt+2)*2],it=_[(lt+2)*2+1],!(Math.abs(P*(H-it)+X*(it-Z)+st*(Z-H))<ht)&&l.push(lt,lt+1,lt+2)}function cA(r,t,n,s){const o=Mx;if(r.length===0)return;const l=r[0],u=r[1],h=r[r.length-2],d=r[r.length-1],m=t||Math.abs(l-h)<o&&Math.abs(u-d)<o,g=n,y=r.length/2,S=g.length/2;for(let _=0;_<y;_++)g.push(r[_*2]),g.push(r[_*2+1]);for(let _=0;_<y-1;_++)s.push(S+_,S+_+1);m&&s.push(S+y-1,S)}function wx(r,t,n,s,o,l,u){const h=$S(r,t,2);if(!h)return;for(let m=0;m<h.length;m+=3)l[u++]=h[m]+o,l[u++]=h[m+1]+o,l[u++]=h[m+2]+o;let d=o*s;for(let m=0;m<r.length;m+=2)n[d]=r[m],n[d+1]=r[m+1],d+=s}const uA=[],hA={extension:{type:dt.ShapeBuilder,name:"polygon"},build(r,t){for(let n=0;n<r.points.length;n++)t[n]=r.points[n];return!0},triangulate(r,t,n,s,o,l){wx(r,uA,t,n,s,o,l)}},fA={extension:{type:dt.ShapeBuilder,name:"rectangle"},build(r,t){const n=r,s=n.x,o=n.y,l=n.width,u=n.height;return l>0&&u>0?(t[0]=s,t[1]=o,t[2]=s+l,t[3]=o,t[4]=s+l,t[5]=o+u,t[6]=s,t[7]=o+u,!0):!1},triangulate(r,t,n,s,o,l){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[6],t[s+u+1]=r[7],u+=n,t[s+u]=r[4],t[s+u+1]=r[5],u+=n;const h=s/n;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},dA={extension:{type:dt.ShapeBuilder,name:"triangle"},build(r,t){return t[0]=r.x,t[1]=r.y,t[2]=r.x2,t[3]=r.y2,t[4]=r.x3,t[5]=r.y3,!0},triangulate(r,t,n,s,o,l){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[4],t[s+u+1]=r[5];const h=s/n;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},pA=new Ot,mA=new pe;function gA(r,t,n,s){const o=t.matrix?r.copyFrom(t.matrix).invert():r.identity();if(t.textureSpace==="local"){const u=n.getBounds(mA);t.width&&u.pad(t.width);const{x:h,y:d}=u,m=1/u.width,g=1/u.height,y=-h*m,S=-d*g,_=o.a,T=o.b,E=o.c,M=o.d;o.a*=m,o.b*=m,o.c*=g,o.d*=g,o.tx=y*_+S*E+o.tx,o.ty=y*T+S*M+o.ty}else o.translate(t.texture.frame.x,t.texture.frame.y),o.scale(1/t.texture.source.width,1/t.texture.source.height);const l=t.texture.source.style;return!(t.fill instanceof hi)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(pA.copyFrom(s).invert()),o}const Yl={};Oe.handleByMap(dt.ShapeBuilder,Yl);Oe.add(fA,hA,dA,Pa,rA,aA);const yA=new pe,xA=new Ot;function _A(r,t){const{geometryData:n,batches:s}=t;s.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let o=0;o<r.instructions.length;o++){const l=r.instructions[o];if(l.action==="texture")bA(l.data,s,n);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,d=l.data.style,m=l.data.hole;u&&m&&P0(m.shapePath,d,!0,s,n),m&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=m.shapePath.shapePrimitives),P0(h,d,u,s,n)}}}function bA(r,t,n){const s=[],o=Yl.rectangle,l=yA;l.x=r.dx,l.y=r.dy,l.width=r.dw,l.height=r.dh;const u=r.transform;if(!o.build(l,s))return;const{vertices:h,uvs:d,indices:m}=n,g=m.length,y=h.length/2;u&&Tx(s,u),o.triangulate(s,h,2,y,m,g);const S=r.image,_=S.uvs;d.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);const T=Tn.get(Ex);T.indexOffset=g,T.indexSize=m.length-g,T.attributeOffset=y,T.attributeSize=h.length/2-y,T.baseColor=r.style,T.alpha=r.alpha,T.texture=S,T.geometryData=n,t.push(T)}function P0(r,t,n,s,o){const{vertices:l,uvs:u,indices:h}=o;r.shapePrimitives.forEach(({shape:d,transform:m,holes:g})=>{const y=[],S=Yl[d.type];if(!S.build(d,y))return;const _=h.length,T=l.length/2;let E="triangle-list";if(m&&Tx(y,m),n){const O=d.closePath??!0,P=t;P.pixelLine?(cA(y,O,l,h),E="line-list"):lA(y,P,!1,O,l,h)}else if(g){const O=[],P=y.slice();vA(g).forEach(X=>{O.push(P.length/2),P.push(...X)}),wx(P,O,l,2,T,h,_)}else S.triangulate(y,l,2,T,h,_);const M=u.length/2,R=t.texture;if(R!==Ut.WHITE){const O=gA(xA,t,d,m);nA(l,2,T,u,M,2,l.length/2-T,O)}else iA(u,M,2,l.length/2-T);const B=Tn.get(Ex);B.indexOffset=_,B.indexSize=h.length-_,B.attributeOffset=T,B.attributeSize=l.length/2-T,B.baseColor=t.color,B.alpha=t.alpha,B.texture=R,B.geometryData=o,B.topology=E,s.push(B)})}function vA(r){const t=[];for(let n=0;n<r.length;n++){const s=r[n].shape,o=[];Yl[s.type].build(s,o)&&t.push(o)}return t}class SA{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(t=>{Tn.return(t)}),this.graphicsData&&Tn.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class CA{constructor(){this.instructions=new Oy}init(t){const n=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(n):this.batcher=new tA({maxTextures:n}),this.instructions.reset()}get geometry(){return Mt(_v,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Ef=class rf{constructor(t){this._renderer=t,this._managedContexts=new eA({renderer:t,type:"resource",name:"graphicsContext"})}init(t){rf.defaultOptions.bezierSmoothness=t?.bezierSmoothness??rf.defaultOptions.bezierSmoothness}getContextRenderData(t){return t._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(t)}updateGpuContext(t){const n=!!t._gpuData[this._renderer.uid],s=t._gpuData[this._renderer.uid]||this._initContext(t);if(t.dirty||!n){n&&s.reset(),_A(t,s);const o=t.batchMode;t.customShader||o==="no-batch"?s.isBatchable=!1:o==="auto"?s.isBatchable=s.geometryData.vertices.length<400:s.isBatchable=!0,t.dirty=!1}return s}getGpuContext(t){return t._gpuData[this._renderer.uid]||this._initContext(t)}_initContextRenderData(t){const n=Tn.get(CA,{maxTextures:this._renderer.limits.maxBatchableTextures}),s=t._gpuData[this._renderer.uid],{batches:o,geometryData:l}=s;s.graphicsData=n;const u=l.vertices.length,h=l.indices.length;for(let y=0;y<o.length;y++)o[y].applyTransform=!1;const d=n.batcher;d.ensureAttributeBuffer(u),d.ensureIndexBuffer(h),d.begin();for(let y=0;y<o.length;y++){const S=o[y];d.add(S)}d.finish(n.instructions);const m=d.geometry;m.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),m.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);const g=d.batches;for(let y=0;y<g.length;y++){const S=g[y];S.bindGroup=hC(S.textures.textures,S.textures.count,this._renderer.limits.maxBatchableTextures)}return n}_initContext(t){const n=new SA;return n.context=t,t._gpuData[this._renderer.uid]=n,this._managedContexts.add(t),n}destroy(){this._managedContexts.destroy(),this._renderer=null}};Ef.extension={type:[dt.WebGLSystem,dt.WebGPUSystem,dt.CanvasSystem],name:"graphicsContext"};Ef.defaultOptions={bezierSmoothness:.5};let Rx=Ef;const AA=8,bl=11920929e-14,TA=1;function Bx(r,t,n,s,o,l,u,h,d,m){const y=Math.min(.99,Math.max(0,m??Rx.defaultOptions.bezierSmoothness));let S=(TA-y)/1;return S*=S,EA(t,n,s,o,l,u,h,d,r,S),r}function EA(r,t,n,s,o,l,u,h,d,m){af(r,t,n,s,o,l,u,h,d,m,0),d.push(u,h)}function af(r,t,n,s,o,l,u,h,d,m,g){if(g>AA)return;const y=(r+n)/2,S=(t+s)/2,_=(n+o)/2,T=(s+l)/2,E=(o+u)/2,M=(l+h)/2,R=(y+_)/2,B=(S+T)/2,O=(_+E)/2,P=(T+M)/2,Z=(R+O)/2,X=(B+P)/2;if(g>0){let H=u-r,st=h-t;const it=Math.abs((n-u)*st-(s-h)*H),tt=Math.abs((o-u)*st-(l-h)*H);if(it>bl&&tt>bl){if((it+tt)*(it+tt)<=m*(H*H+st*st)){d.push(Z,X);return}}else if(it>bl){if(it*it<=m*(H*H+st*st)){d.push(Z,X);return}}else if(tt>bl){if(tt*tt<=m*(H*H+st*st)){d.push(Z,X);return}}else if(H=Z-(r+u)/2,st=X-(t+h)/2,H*H+st*st<=m){d.push(Z,X);return}}af(r,t,y,S,R,B,Z,X,d,m,g+1),af(Z,X,O,P,E,M,u,h,d,m,g+1)}const MA=8,wA=11920929e-14,RA=1;function BA(r,t,n,s,o,l,u,h){const m=Math.min(.99,Math.max(0,h??Rx.defaultOptions.bezierSmoothness));let g=(RA-m)/1;return g*=g,kA(t,n,s,o,l,u,r,g),r}function kA(r,t,n,s,o,l,u,h){of(u,r,t,n,s,o,l,h,0),u.push(o,l)}function of(r,t,n,s,o,l,u,h,d){if(d>MA)return;const m=(t+s)/2,g=(n+o)/2,y=(s+l)/2,S=(o+u)/2,_=(m+y)/2,T=(g+S)/2;let E=l-t,M=u-n;const R=Math.abs((s-l)*M-(o-u)*E);if(R>wA){if(R*R<=h*(E*E+M*M)){r.push(_,T);return}}else if(E=_-(t+l)/2,M=T-(n+u)/2,E*E+M*M<=h){r.push(_,T);return}of(r,t,n,m,g,_,T,h,d+1),of(r,_,T,y,S,l,u,h,d+1)}function kx(r,t,n,s,o,l,u,h){let d=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),h=Math.max(h,3);let m=d/h,g=o;m*=u?-1:1;for(let y=0;y<h+1;y++){const S=Math.cos(g),_=Math.sin(g),T=t+S*s,E=n+_*s;r.push(T,E),g+=m}}function DA(r,t,n,s,o,l){const u=r[r.length-2],d=r[r.length-1]-n,m=u-t,g=o-n,y=s-t,S=Math.abs(d*y-m*g);if(S<1e-8||l===0){(r[r.length-2]!==t||r[r.length-1]!==n)&&r.push(t,n);return}const _=d*d+m*m,T=g*g+y*y,E=d*g+m*y,M=l*Math.sqrt(_)/S,R=l*Math.sqrt(T)/S,B=M*E/_,O=R*E/T,P=M*y+R*m,Z=M*g+R*d,X=m*(R+B),H=d*(R+B),st=y*(M+O),it=g*(M+O),tt=Math.atan2(H-Z,X-P),nt=Math.atan2(it-Z,st-P);kx(r,P+t,Z+n,l,tt,nt,m*g>y*d)}const Da=Math.PI*2,Dh={centerX:0,centerY:0,ang1:0,ang2:0},Oh=({x:r,y:t},n,s,o,l,u,h,d)=>{r*=n,t*=s;const m=o*r-l*t,g=l*r+o*t;return d.x=m+u,d.y=g+h,d};function OA(r,t){const n=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:n,o=Math.cos(r),l=Math.sin(r),u=Math.cos(r+t),h=Math.sin(r+t);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const L0=(r,t,n,s)=>{const o=r*s-t*n<0?-1:1;let l=r*n+t*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},zA=(r,t,n,s,o,l,u,h,d,m,g,y,S)=>{const _=Math.pow(o,2),T=Math.pow(l,2),E=Math.pow(g,2),M=Math.pow(y,2);let R=_*T-_*M-T*E;R<0&&(R=0),R/=_*M+T*E,R=Math.sqrt(R)*(u===h?-1:1);const B=R*o/l*y,O=R*-l/o*g,P=m*B-d*O+(r+n)/2,Z=d*B+m*O+(t+s)/2,X=(g-B)/o,H=(y-O)/l,st=(-g-B)/o,it=(-y-O)/l,tt=L0(1,0,X,H);let nt=L0(X,H,st,it);h===0&&nt>0&&(nt-=Da),h===1&&nt<0&&(nt+=Da),S.centerX=P,S.centerY=Z,S.ang1=tt,S.ang2=nt};function UA(r,t,n,s,o,l,u,h=0,d=0,m=0){if(l===0||u===0)return;const g=Math.sin(h*Da/360),y=Math.cos(h*Da/360),S=y*(t-s)/2+g*(n-o)/2,_=-g*(t-s)/2+y*(n-o)/2;if(S===0&&_===0)return;l=Math.abs(l),u=Math.abs(u);const T=Math.pow(S,2)/Math.pow(l,2)+Math.pow(_,2)/Math.pow(u,2);T>1&&(l*=Math.sqrt(T),u*=Math.sqrt(T)),zA(t,n,s,o,l,u,d,m,g,y,S,_,Dh);let{ang1:E,ang2:M}=Dh;const{centerX:R,centerY:B}=Dh;let O=Math.abs(M)/(Da/4);Math.abs(1-O)<1e-7&&(O=1);const P=Math.max(Math.ceil(O),1);M/=P;let Z=r[r.length-2],X=r[r.length-1];const H={x:0,y:0};for(let st=0;st<P;st++){const it=OA(E,M),{x:tt,y:nt}=Oh(it[0],l,u,y,g,R,B,H),{x:bt,y:Nt}=Oh(it[1],l,u,y,g,R,B,H),{x:wt,y:ue}=Oh(it[2],l,u,y,g,R,B,H);Bx(r,Z,X,tt,nt,bt,Nt,wt,ue),Z=wt,X=ue,E+=M}}function NA(r,t,n){const s=(u,h)=>{const d=h.x-u.x,m=h.y-u.y,g=Math.sqrt(d*d+m*m),y=d/g,S=m/g;return{len:g,nx:y,ny:S}},o=(u,h)=>{u===0?r.moveTo(h.x,h.y):r.lineTo(h.x,h.y)};let l=t[t.length-1];for(let u=0;u<t.length;u++){const h=t[u%t.length],d=h.radius??n;if(d<=0){o(u,h),l=h;continue}const m=t[(u+1)%t.length],g=s(h,l),y=s(h,m);if(g.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let S=Math.asin(g.nx*y.ny-g.ny*y.nx),_=1,T=!1;g.nx*y.nx-g.ny*-y.ny<0?S<0?S=Math.PI+S:(S=Math.PI-S,_=-1,T=!0):S>0&&(_=-1,T=!0);const E=S/2;let M,R=Math.abs(Math.cos(E)*d/Math.sin(E));R>Math.min(g.len/2,y.len/2)?(R=Math.min(g.len/2,y.len/2),M=Math.abs(R*Math.sin(E)/Math.cos(E))):M=d;const B=h.x+y.nx*R+-y.ny*M*_,O=h.y+y.ny*R+y.nx*M*_,P=Math.atan2(g.ny,g.nx)+Math.PI/2*_,Z=Math.atan2(y.ny,y.nx)-Math.PI/2*_;u===0&&r.moveTo(B+Math.cos(P)*M,O+Math.sin(P)*M),r.arc(B,O,M,P,Z,T),l=h}}function PA(r,t,n,s){const o=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),l=(h,d,m)=>({x:h.x+(d.x-h.x)*m,y:h.y+(d.y-h.y)*m}),u=t.length;for(let h=0;h<u;h++){const d=t[(h+1)%u],m=d.radius??n;if(m<=0){h===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const g=t[h],y=t[(h+2)%u],S=o(g,d);let _;if(S<1e-4)_=d;else{const M=Math.min(S/2,m);_=l(d,g,M/S)}const T=o(y,d);let E;if(T<1e-4)E=d;else{const M=Math.min(T/2,m);E=l(d,y,M/T)}h===0?r.moveTo(_.x,_.y):r.lineTo(_.x,_.y),r.quadraticCurveTo(d.x,d.y,E.x,E.y,s)}}const LA=new pe;class jA{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new kn,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,n){return this.startPoly(t,n),this}lineTo(t,n){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==t||l!==n)&&s.push(t,n),this}arc(t,n,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return kx(h,t,n,s,o,l,u),this}arcTo(t,n,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return DA(u,t,n,s,o,l),this}arcToSvg(t,n,s,o,l,u,h){const d=this._currentPoly.points;return UA(d,this._currentPoly.lastX,this._currentPoly.lastY,u,h,t,n,s,o,l),this}bezierCurveTo(t,n,s,o,l,u,h){this._ensurePoly();const d=this._currentPoly;return Bx(this._currentPoly.points,d.lastX,d.lastY,t,n,s,o,l,u,h),this}quadraticCurveTo(t,n,s,o,l){this._ensurePoly();const u=this._currentPoly;return BA(this._currentPoly.points,u.lastX,u.lastY,t,n,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(t,n){this.endPoly(),n&&!n.isIdentity()&&(t=t.clone(!0),t.transform(n));const s=this.shapePrimitives,o=s.length;for(let l=0;l<t.instructions.length;l++){const u=t.instructions[l];this[u.action](...u.data)}if(t.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const d=h.shape,m=l?.shape;m&&m.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(t=!1){this.endPoly(t)}rect(t,n,s,o,l){return this.drawShape(new pe(t,n,s,o),l),this}circle(t,n,s,o){return this.drawShape(new Cf(t,n,s),o),this}poly(t,n,s){const o=new Ba(t);return o.closePath=n,this.drawShape(o,s),this}regularPoly(t,n,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,d=Math.PI*2/o,m=[];for(let g=0;g<o;g++){const y=h-g*d;m.push(t+s*Math.cos(y),n+s*Math.sin(y))}return this.poly(m,!0,u),this}roundPoly(t,n,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(t,n,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,d);const m=-1*Math.PI/2+u,g=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let S=0;S<o;S++){const _=S*g+m,T=t+s*Math.cos(_),E=n+s*Math.sin(_),M=_+Math.PI+y,R=_-Math.PI-y,B=T+l*Math.cos(M),O=E+l*Math.sin(M),P=T+l*Math.cos(R),Z=E+l*Math.sin(R);S===0?this.moveTo(B,O):this.lineTo(B,O),this.quadraticCurveTo(T,E,P,Z,h)}return this.closePath()}roundShape(t,n,s=!1,o){return t.length<3?this:(s?PA(this,t,n,o):NA(this,t,n),this.closePath())}filletRect(t,n,s,o,l){if(l===0)return this.rect(t,n,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),d=t+s,m=n+o,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(t,n+y).arcTo(t+g,n+g,t+y,n,y).lineTo(d-y,n).arcTo(d-g,n+g,d,n+y,y).lineTo(d,m-y).arcTo(d-g,m-g,t+s-y,m,y).lineTo(t+y,m).arcTo(t+g,m-g,t,m-y,y).closePath()}chamferRect(t,n,s,o,l,u){if(l<=0)return this.rect(t,n,s,o);const h=Math.min(l,Math.min(s,o)/2),d=t+s,m=n+o,g=[t+h,n,d-h,n,d,n+h,d,m-h,d-h,m,t+h,m,t,m-h,t,n+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,u)}ellipse(t,n,s,o,l){return this.drawShape(new Af(t,n,s,o),l),this}roundRect(t,n,s,o,l,u){return this.drawShape(new Tf(t,n,s,o,l),u),this}drawShape(t,n){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:n}),this}startPoly(t,n){let s=this._currentPoly;return s&&this.endPoly(),s=new Ba,s.points.push(t,n),this._currentPoly=s,this}endPoly(t=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=t,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Ba,t)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let s=n.shape.x,o=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const l=n.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const n=this.shapePrimitives;for(let s=0;s<n.length;s++){const o=n[s],l=o.shape.getBounds(LA);o.transform?t.addRect(l,o.transform):t.addRect(l)}return t}}class ui{constructor(t,n=!1){this.instructions=[],this.uid=ce("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof t=="string"?oC(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new jA(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,n){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,n]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,n,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Pe.shared);let d=0,m=0;if(!u||u.action!=="bezierCurveTo")d=h.x,m=h.y;else{d=u.data[2],m=u.data[3];const g=h.x,y=h.y;d=g+(g-d),m=y+(y-m)}return this.instructions.push({action:"bezierCurveTo",data:[d,m,t,n,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,n,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Pe.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const d=l.x,m=l.y;u=d+(d-u),h=m+(m-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,t,n,s]}),this._dirty=!0,this}rect(t,n,s,o,l){return this.instructions.push({action:"rect",data:[t,n,s,o,l]}),this._dirty=!0,this}circle(t,n,s,o){return this.instructions.push({action:"circle",data:[t,n,s,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,n,s,o,l,u,h){l||(l=o/2);const d=-1*Math.PI/2+u,m=s*2,g=Math.PI*2/m,y=[];for(let S=0;S<m;S++){const _=S%2?l:o,T=S*g+d;y.push(t+_*Math.cos(T),n+_*Math.sin(T))}return this.poly(y,!0,h),this}clone(t=!1){const n=new ui;if(n.checkForHoles=this.checkForHoles,!t)n.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];n.instructions.push({action:o.action,data:o.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const n=t.a,s=t.b,o=t.c,l=t.d,u=t.tx,h=t.ty;let d=0,m=0,g=0,y=0,S=0,_=0,T=0,E=0;for(let M=0;M<this.instructions.length;M++){const R=this.instructions[M],B=R.data;switch(R.action){case"moveTo":case"lineTo":d=B[0],m=B[1],B[0]=n*d+o*m+u,B[1]=s*d+l*m+h;break;case"bezierCurveTo":g=B[0],y=B[1],S=B[2],_=B[3],d=B[4],m=B[5],B[0]=n*g+o*y+u,B[1]=s*g+l*y+h,B[2]=n*S+o*_+u,B[3]=s*S+l*_+h,B[4]=n*d+o*m+u,B[5]=s*d+l*m+h;break;case"quadraticCurveTo":g=B[0],y=B[1],d=B[2],m=B[3],B[0]=n*g+o*y+u,B[1]=s*g+l*y+h,B[2]=n*d+o*m+u,B[3]=s*d+l*m+h;break;case"arcToSvg":d=B[5],m=B[6],T=B[0],E=B[1],B[0]=n*T+o*E,B[1]=s*T+l*E,B[5]=n*d+o*m+u,B[6]=s*d+l*m+h;break;case"circle":B[4]=_a(B[3],t);break;case"rect":B[4]=_a(B[4],t);break;case"ellipse":B[8]=_a(B[8],t);break;case"roundRect":B[5]=_a(B[5],t);break;case"addPath":B[0].transform(t);break;case"poly":B[2]=_a(B[2],t);break;default:ee("unknown transform action",R.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let n=this.instructions.length-1,s=this.instructions[n];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(n--,n<0)return t.x=0,t.y=0,t;s=this.instructions[n]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function _a(r,t){return r?r.prepend(t):t.clone()}function le(r,t,n){const s=r.getAttribute(t);return s?Number(s):n}function GA(r,t){const n=r.querySelectorAll("defs");for(let s=0;s<n.length;s++){const o=n[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":t.defs[u.id]=IA(u);break;case"radialgradient":t.defs[u.id]=HA();break}}}}function IA(r){const t=le(r,"x1",0),n=le(r,"y1",0),s=le(r,"x2",1),o=le(r,"y2",0),l=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new hi(t,n,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<r.children.length;h++){const d=r.children[h],m=le(d,"offset",0),g=Se.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(m,g)}return u}function HA(r){return ee("[SVG Parser] Radial gradients are not yet supported"),new hi(0,0,1,0)}function j0(r){const t=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const G0={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Dx(r,t){const n=r.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in G0){const h=r.getAttribute(u);h&&I0(t,l,u,h.trim())}if(n){const u=n.split(";");for(let h=0;h<u.length;h++){const d=u[h].trim(),[m,g]=d.split(":");G0[m]&&I0(t,l,m,g.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function I0(r,t,n,s){switch(n){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=j0(s);t.strokeStyle.fill=r.defs[o]}else t.strokeStyle.color=Se.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=j0(s);t.fillStyle.fill=r.defs[o]}else t.fillStyle.color=Se.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function FA(r){if(r.length<=2)return!0;const t=r.map(h=>h.area).sort((h,d)=>d-h),[n,s]=t,o=t[t.length-1],l=n/s,u=s/o;return!(l>3&&u<2)}function YA(r){return r.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function VA(r){const t=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const n=t.map(Number),s=[],o=[];for(let g=0;g<n.length;g+=2)g+1<n.length&&(s.push(n[g]),o.push(n[g+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),d=Math.max(...o);return(u-l)*(d-h)}function H0(r,t){const n=new ui(r,!1);for(const s of n.instructions)t.instructions.push(s)}function XA(r,t){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const n={context:t,defs:{},path:new ui};GA(r,n);const s=r.children,{fillStyle:o,strokeStyle:l}=Dx(r,n);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&Ox(h,n,o,l)}return t}function Ox(r,t,n,s){const o=r.children,{fillStyle:l,strokeStyle:u}=Dx(r,t);l&&n?n={...n,...l}:l&&(n=l),u&&s?s={...s,...u}:u&&(s=u);const h=!n&&!s;h&&(n={color:0});let d,m,g,y,S,_,T,E,M,R,B,O,P,Z,X,H,st;switch(r.nodeName.toLowerCase()){case"path":{Z=r.getAttribute("d");const it=r.getAttribute("fill-rule"),tt=YA(Z),nt=it==="evenodd",bt=tt.length>1;if(nt&&bt){const wt=tt.map(N=>({path:N,area:VA(N)}));if(wt.sort((N,Q)=>Q.area-N.area),tt.length>3||!FA(wt))for(let N=0;N<wt.length;N++){const Q=wt[N],ht=N===0;t.context.beginPath();const lt=new ui(void 0,!0);H0(Q.path,lt),t.context.path(lt),ht?(n&&t.context.fill(n),s&&t.context.stroke(s)):t.context.cut()}else for(let N=0;N<wt.length;N++){const Q=wt[N],ht=N%2===1;t.context.beginPath();const lt=new ui(void 0,!0);H0(Q.path,lt),t.context.path(lt),ht?t.context.cut():(n&&t.context.fill(n),s&&t.context.stroke(s))}}else{const wt=it?it==="evenodd":!0;X=new ui(Z,wt),t.context.path(X),n&&t.context.fill(n),s&&t.context.stroke(s)}break}case"circle":T=le(r,"cx",0),E=le(r,"cy",0),M=le(r,"r",0),t.context.ellipse(T,E,M,M),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"rect":d=le(r,"x",0),m=le(r,"y",0),H=le(r,"width",0),st=le(r,"height",0),R=le(r,"rx",0),B=le(r,"ry",0),R||B?t.context.roundRect(d,m,H,st,R||B):t.context.rect(d,m,H,st),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"ellipse":T=le(r,"cx",0),E=le(r,"cy",0),R=le(r,"rx",0),B=le(r,"ry",0),t.context.beginPath(),t.context.ellipse(T,E,R,B),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"line":g=le(r,"x1",0),y=le(r,"y1",0),S=le(r,"x2",0),_=le(r,"y2",0),t.context.beginPath(),t.context.moveTo(g,y),t.context.lineTo(S,_),s&&t.context.stroke(s);break;case"polygon":P=r.getAttribute("points"),O=P.match(/-?\d+/g).map(it=>parseInt(it,10)),t.context.poly(O,!0),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"polyline":P=r.getAttribute("points"),O=P.match(/-?\d+/g).map(it=>parseInt(it,10)),t.context.poly(O,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{ee(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}h&&(n=null);for(let it=0;it<o.length;it++)Ox(o[it],t,n,s)}function qA(r){return Se.isColorLike(r)}function F0(r){return r instanceof Fl}function Y0(r){return r instanceof hi}function $A(r){return r instanceof Ut}function QA(r,t,n){const s=Se.shared.setValue(t??0);return r.color=s.toNumber(),r.alpha=s.alpha===1?n.alpha:s.alpha,r.texture=Ut.WHITE,{...n,...r}}function ZA(r,t,n){return r.texture=t,{...n,...r}}function V0(r,t,n){return r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...n,...r}}function X0(r,t,n){return t.buildGradient(),r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,r.textureSpace=t.textureSpace,{...n,...r}}function KA(r,t){const n={...t,...r},s=Se.shared.setValue(n.color);return n.alpha*=s.alpha,n.color=s.toNumber(),n}function fs(r,t){if(r==null)return null;const n={},s=r;return qA(r)?QA(n,r,t):$A(r)?ZA(n,r,t):F0(r)?V0(n,r,t):Y0(r)?X0(n,r,t):s.fill&&F0(s.fill)?V0(s,s.fill,t):s.fill&&Y0(s.fill)?X0(s,s.fill,t):KA(s,t)}function Pl(r,t){const{width:n,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...d}=t,m=fs(r,d);return m?{width:n,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...m}:null}const WA=new Pe,q0=new Ot,Mf=class Hn extends Dn{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=ce("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new ui,this._transform=new Ot,this._fillStyle={...Hn.defaultFillStyle},this._strokeStyle={...Hn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new kn,this._boundsDirty=!0}clone(){const t=new Hn;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=fs(t,Hn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Pl(t,Hn.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=fs(t,Hn.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=fs(t,Hn.defaultStrokeStyle),this}texture(t,n,s,o,l,u){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:o||0,dw:l||t.frame.width,dh:u||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?Se.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ui,this}fill(t,n){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o?.action==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(t!=null&&(n!==void 0&&typeof t=="number"&&(Mt(Qt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:n}),this._fillStyle=fs(t,Hn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:n}=this._activePath.getLastPoint(Pe.shared);this._activePath.clear(),this._activePath.moveTo(t,n)}stroke(t){let n;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?n=s.data.path:n=this._activePath.clone(),n?(t!=null&&(this._strokeStyle=Pl(t,Hn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const n=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(s);else{n.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,n,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*t+h.c*n+h.tx,h.b*t+h.d*n+h.ty,s,o,l,u),this}arcTo(t,n,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(t,n,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,n,s,o,l,d.a*u+d.c*h+d.tx,d.b*u+d.d*h+d.ty),this}bezierCurveTo(t,n,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*n+d.tx,d.b*t+d.d*n+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,n,s,o){return this._tick++,this._activePath.ellipse(t,n,s,o,this._transform.clone()),this}circle(t,n,s){return this._tick++,this._activePath.circle(t,n,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,n){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*n+s.tx,s.b*t+s.d*n+s.ty),this}moveTo(t,n){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*t+s.c*n+s.tx,u=s.b*t+s.d*n+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(t,n,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(t,n,s,o){return this._tick++,this._activePath.rect(t,n,s,o,this._transform.clone()),this}roundRect(t,n,s,o,l){return this._tick++,this._activePath.roundRect(t,n,s,o,l,this._transform.clone()),this}poly(t,n){return this._tick++,this._activePath.poly(t,n,this._transform.clone()),this}regularPoly(t,n,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(t,n,s,o,l,u),this}roundPoly(t,n,s,o,l,u){return this._tick++,this._activePath.roundPoly(t,n,s,o,l,u),this}roundShape(t,n,s,o){return this._tick++,this._activePath.roundShape(t,n,s,o),this}filletRect(t,n,s,o,l){return this._tick++,this._activePath.filletRect(t,n,s,o,l),this}chamferRect(t,n,s,o,l,u){return this._tick++,this._activePath.chamferRect(t,n,s,o,l,u),this}star(t,n,s,o,l=0,u=0){return this._tick++,this._activePath.star(t,n,s,o,l,u,this._transform.clone()),this}svg(t){return this._tick++,XA(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,n=t){return this._transform.scale(t,n),this}setTransform(t,n,s,o,l,u){return t instanceof Ot?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,n,s,o,l,u),this)}transform(t,n,s,o,l,u){return t instanceof Ot?(this._transform.append(t),this):(q0.set(t,n,s,o,l,u),this._transform.append(q0),this)}translate(t,n=t){return this._transform.translate(t,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let n=0;n<this.instructions.length;n++){const s=this.instructions[n],o=s.action;if(o==="fill"){const l=s.data;t.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;t.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),d=l.path.bounds;t.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const n=this.instructions;let s=!1;for(let o=0;o<n.length;o++){const l=n[o],u=l.data,h=u.path;if(!l.action||!h)continue;const d=u.style,m=h.shapePath.shapePrimitives;for(let g=0;g<m.length;g++){const y=m[g].shape;if(!d||!y)continue;const S=m[g].transform,_=S?S.applyInverse(t,WA):t;if(l.action==="fill")s=y.contains(_.x,_.y);else{const E=d;s=y.strokeContains(_.x,_.y,E.width,E.alignment)}const T=u.hole;if(T){const E=T.shapePath?.shapePrimitives;if(E)for(let M=0;M<E.length;M++)E[M].shape.contains(_.x,_.y)&&(s=!1)}if(s)return!0}}return s}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Mf.defaultFillStyle={color:16777215,alpha:1,texture:Ut.WHITE,matrix:null,fill:null,textureSpace:"local"};Mf.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ut.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Sn=Mf;const wf=class ar extends Dn{constructor(t={}){super(),this.uid=ce("textStyle"),this._tick=0,JA(t);const n={...ar.defaultTextStyle,...t};for(const s in n){const o=s;this[o]=n[s]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...ar.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...ar.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Sn.defaultFillStyle,...t},()=>{this._fill=fs({...this._originalFill},Sn.defaultFillStyle)})),this._fill=fs(t===0?"black":t,Sn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Sn.defaultStrokeStyle,...t},()=>{this._stroke=Pl({...this._originalStroke},Sn.defaultStrokeStyle)})),this._stroke=Pl(t,Sn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=ar.defaultTextStyle;for(const n in t)this[n]=t[n]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new ar({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let n=0;n<this._filters.length;n++)t+=this._filters[n].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,n){return new Proxy(t,{set:(s,o,l)=>(s[o]===l||(s[o]=l,n?.(o,l),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Se.isColorLike(t)||t instanceof hi||t instanceof Fl)}};wf.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};wf.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ll=wf;function JA(r){const t=r;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const n=Ll.defaultDropShadow;r.dropShadow={alpha:t.dropShadowAlpha??n.alpha,angle:t.dropShadowAngle??n.angle,blur:t.dropShadowBlur??n.blur,color:t.dropShadowColor??n.color,distance:t.dropShadowDistance??n.distance}}if(t.strokeThickness!==void 0){Mt(Qt,"strokeThickness is now a part of stroke");const n=t.stroke;let s={};if(Se.isColorLike(n))s.color=n;else if(n instanceof hi||n instanceof Fl)s.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))s=n;else throw new Error("Invalid stroke value.");r.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(Mt(Qt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&ee("The number of fill colors must match the number of fill gradient stops.");const n=new hi({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=t.fillGradientStops.slice(),o=t.fill.map(l=>Se.shared.setValue(l).toNumber());s.forEach((l,u)=>{n.addColorStop(l,o[u])}),r.fill={fill:n}}}class tT{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,n){const s=ne.get().createCanvas();s.width=t,s.height=n;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(t,n,s=1){t=Math.ceil(t*s-1e-6),n=Math.ceil(n*s-1e-6),t=Ol(t),n=Ol(n);const o=(t<<17)+(n<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(t,n)),l}returnCanvasAndContext(t){const n=t.canvas,{width:s,height:o}=n,l=(s<<17)+(o<<1);t.context.resetTransform(),t.context.clearRect(0,0,s,o),this._canvasPool[l].push(t)}clear(){this._canvasPool={}}}const lf=new tT;Ga.register(lf);const $0=1e5;function Q0(r,t,n,s=0){if(r.texture===Ut.WHITE&&!r.fill)return Se.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof Fl){const o=r.fill,l=t.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Ot.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(r.fill instanceof hi){const o=r.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,d=1;u&&n&&(h=n.width+s,d=n.height+s);let m,g=!1;if(l){const{start:y,end:S}=o;m=t.createLinearGradient(y.x*h,y.y*d,S.x*h,S.y*d),g=Math.abs(S.x-y.x)<Math.abs((S.y-y.y)*.1)}else{const{center:y,innerRadius:S,outerCenter:_,outerRadius:T}=o;m=t.createRadialGradient(y.x*h,y.y*d,S*h,_.x*h,_.y*d,T*h)}if(g&&u&&n){const y=n.lineHeight/d;for(let S=0;S<n.lines.length;S++){const _=(S*n.lineHeight+s/2)/d;o.colorStops.forEach(T=>{const E=_+T.offset*y;m.addColorStop(Math.floor(E*$0)/$0,Se.shared.setValue(T.color).toHex())})}}else o.colorStops.forEach(y=>{m.addColorStop(y.offset,Se.shared.setValue(y.color).toHex())});return m}}else{const o=t.createPattern(r.texture.source.resource,"repeat"),l=r.matrix.copyTo(Ot.shared);return l.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(l),o}return ee("FillStyle not recognised",r),"red"}const zx=class Ux extends mx{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...Ux.defaultOptions,...t};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const s=n.style.clone();n.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Ut.WHITE,s._fill.fill=null),this.applyFillAsTint=n.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=nf(s);n.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,n.textureStyle&&(this._textureStyle=n.textureStyle instanceof zl?n.textureStyle:new zl(n.textureStyle)),this.fontMetrics=Al.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){const n=Al.graphemeSegmenter(t).filter(M=>!this._currentChars.includes(M)).filter((M,R,B)=>B.indexOf(M)===R);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let d=this._currentX,m=this._currentY,g=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,S=this._padding*y;let _=!1;const T=o.width/this.resolution,E=o.height/this.resolution;for(let M=0;M<n.length;M++){const R=n[M],B=Al.measureText(R,h,o,!1);B.lineHeight=B.height;const O=B.width*y,P=Math.ceil((h.fontStyle==="italic"?2:1)*O),Z=B.height*y,X=P+S*2,H=Z+S*2;if(_=!1,R!==`
`&&R!=="\r"&&R!=="	"&&R!==" "&&(_=!0,g=Math.ceil(Math.max(H,g))),d+X>T&&(m+=g,g=H,d=0,m+g>E)){u.update();const it=this._nextPage();o=it.canvasAndContext.canvas,l=it.canvasAndContext.context,u=it.texture.source,d=0,m=0,g=0}const st=O/y-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[R]={id:R.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:st,kerning:{}},_){this._drawGlyph(l,B,d+S,m+S,y,h);const it=u.width*y,tt=u.height*y,nt=new pe(d/it*u.width,m/tt*u.height,X/it*u.width,H/tt*u.height);this.chars[R].texture=new Ut({source:u,frame:nt}),d+=Math.ceil(X)}}u.update(),this._currentX=d,this._currentY=m,this._currentMaxCharHeight=g,this._skipKerning&&this._applyKerning(n,l)}get pageTextures(){return Mt(Qt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,n){const s=this._measureCache;for(let o=0;o<t.length;o++){const l=t[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let d=s[l];d||(d=s[l]=n.measureText(l).width);let m=s[h];m||(m=s[h]=n.measureText(h).width);let g=n.measureText(l+h).width,y=g-(d+m);y&&(this.chars[l].kerning[h]=y),g=n.measureText(l+h).width,y=g-(d+m),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,n=lf.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(n.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Ut({source:new ds({resource:n.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:n,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(t,n,s){n.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=nf(n),n.fontSize=this.baseMeasurementFontSize,t.textBaseline=n.textBaseline;const o=n._stroke,l=o?.width??0;if(o&&(t.lineWidth=l,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=Q0(o,t)),n._fill&&(t.fillStyle=Q0(n._fill,t)),n.dropShadow){const u=n.dropShadow,h=Se.shared.setValue(u.color).toArray(),d=u.blur*s,m=u.distance*s;t.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(u.angle)*m,t.shadowOffsetY=Math.sin(u.angle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,n,s,o,l,u){const h=n.text,d=n.fontProperties,g=(u._stroke?.width??0)*l,y=s+g/2,S=o-g/2,_=d.descent*l,T=n.lineHeight*l;let E=!1;u.stroke&&g&&(E=!0,t.strokeText(h,y,S+T-_));const{shadowBlur:M,shadowOffsetX:R,shadowOffsetY:B}=t;u._fill&&(E&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(h,y,S+T-_)),E&&(t.shadowBlur=M,t.shadowOffsetX=R,t.shadowOffsetY=B)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:n,texture:s}=this.pages[t];lf.returnCanvasAndContext(n),s.destroy(!0)}this.pages=null}};zx.defaultOptions={textureSize:512,style:new Ll,mipmap:!0};let Z0=zx;function eT(r,t,n,s){const o={width:0,height:0,offsetY:0,scale:t.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=n.baseLineOffset;let l=o.lines[0],u=null,h=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},m=n.baseMeasurementFontSize/t.fontSize,g=t.letterSpacing*m,y=t.wordWrapWidth*m,S=t.lineHeight?t.lineHeight*m:n.lineHeight,_=t.wordWrap&&t.breakWords,T=R=>{const B=l.width;for(let O=0;O<d.index;O++){const P=R.positions[O];l.chars.push(R.chars[O]),l.charPositions.push(P+B)}l.width+=R.width,h=!1,d.width=0,d.index=0,d.chars.length=0},E=()=>{let R=l.chars.length-1;if(s){let B=l.chars[R];for(;B===" ";)l.width-=n.chars[B].xAdvance,B=l.chars[--R]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=S},M=R=>R-g>y;for(let R=0;R<r.length+1;R++){let B;const O=R===r.length;O||(B=r[R]);const P=n.chars[B]||n.chars[" "];if(/(?:\s)/.test(B)||B==="\r"||B===`
`||O){if(!h&&t.wordWrap&&M(l.width+d.width)?(E(),T(d),O||l.charPositions.push(0)):(d.start=l.width,T(d),O||l.charPositions.push(0)),B==="\r"||B===`
`)E();else if(!O){const st=P.xAdvance+(P.kerning[u]||0)+g;l.width+=st,l.spaceWidth=st,l.spacesIndex.push(l.charPositions.length),l.chars.push(B)}}else{const H=P.kerning[u]||0,st=P.xAdvance+H+g;_&&M(l.width+d.width+st)&&(T(d),E()),d.positions[d.index++]=d.width+H,d.chars.push(B),d.width+=st}u=B}return E(),t.align==="center"?nT(o):t.align==="right"?iT(o):t.align==="justify"&&sT(o),o}function nT(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width/2-n.width/2;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function iT(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width-n.width;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function sT(r){const t=r.width;for(let n=0;n<r.lines.length;n++){const s=r.lines[n];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,m=(t-s.width)/h;for(let g=0;g<s.charPositions.length;g++)g===l&&(l=s.spacesIndex[o++],u+=m),s.charPositions[g]+=u}}function rT(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const t=[];for(let n=0,s=r.length;n<s;n++){const o=r[n];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,d=u;h<=d;h++)t.push(String.fromCharCode(h))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let vl=0;class aT{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=gx(1e3)}getFont(t,n){let s=`${n.fontFamily}-bitmap`,o=!0;if(n._fill.fill&&!n._stroke?(s+=n._fill.fill.styleKey,o=!1):(n._stroke||n.dropShadow)&&(s=`${n.styleKey}-bitmap`,o=!1),!te.has(s)){const u=Object.create(n);u.lineHeight=0;const h=new Z0({style:u,overrideFill:o,overrideSize:!0,...this.defaultOptions});vl++,vl>50&&ee("BitmapText",`You have dynamically created ${vl} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),h.once("destroy",()=>{vl--,te.remove(s)}),te.set(s,h)}const l=te.get(s);return l.ensureCharacters?.(t),l}getLayout(t,n,s=!0){const o=this.getFont(t,n),l=`${t}-${n.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=Al.graphemeSegmenter(t),h=eT(u,n,o,s);return this.measureCache.set(l,h),h}measureText(t,n,s=!0){return this.getLayout(t,n,s)}install(...t){let n=t[0];typeof n=="string"&&(n={name:n,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},Mt(Qt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=n?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const o=n.style,l=o instanceof Ll?o:new Ll(o),u=n.dynamicFill??this._canUseTintForStyle(l),h=new Z0({style:l,overrideFill:u,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1,textureStyle:n.textureStyle}),d=rT(n.chars);return h.ensureCharacters(d.join("")),te.set(`${s}-bitmap`,h),h.once("destroy",()=>te.remove(`${s}-bitmap`)),h}uninstall(t){const n=`${t}-bitmap`,s=te.get(n);s&&s.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}}const K0=new aT;class Nx extends mx{constructor(t,n){super();const{textures:s,data:o}=t;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:d,rotate:m}=s[u.page],g=$t.transformRectCoords(u,h,m,new pe),y=new Ut({frame:g,orig:new pe(0,0,u.width,u.height),source:d,rotate:m});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:n}=this.pages[t];n.destroy(!0)}this.pages=null}static install(t){K0.install(t)}static uninstall(t){K0.uninstall(t)}}const zh={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const t=r.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const S=t[y].match(/^[a-z]+/gm)[0],_=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),T={};for(const E in _){const M=_[E].split("="),R=M[0],B=M[1].replace(/"/gm,""),O=parseFloat(B),P=isNaN(O)?B:O;T[R]=P}n[S].push(T)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=n.info,[l]=n.common,[u]=n.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=n.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const m=n.char;for(let y=0;y<m.length;y++){const S=m[y],_=parseInt(S.id,10);let T=S.letter??S.char??String.fromCharCode(_);T==="space"&&(T=" "),d[_]=T,s.chars[T]={id:_,page:parseInt(S.page,10)||0,x:parseInt(S.x,10),y:parseInt(S.y,10),width:parseInt(S.width,10),height:parseInt(S.height,10),xOffset:parseInt(S.xoffset,10),yOffset:parseInt(S.yoffset,10),xAdvance:parseInt(S.xadvance,10),kerning:{}}}const g=n.kerning||[];for(let y=0;y<g.length;y++){const S=parseInt(g[y].first,10),_=parseInt(g[y].second,10),T=parseInt(g[y].amount,10);s.chars[d[_]].kerning[d[S]]=T}return s}},W0={test(r){const t=r;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=r.getElementsByTagName("info")[0],s=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=r.getElementsByTagName("page"),u=r.getElementsByTagName("char"),h=r.getElementsByTagName("kerning");t.fontSize=parseInt(n.getAttribute("size"),10),t.fontFamily=n.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let m=0;m<l.length;m++)t.pages.push({id:parseInt(l[m].getAttribute("id"),10)||0,file:l[m].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let m=0;m<u.length;m++){const g=u[m],y=parseInt(g.getAttribute("id"),10);let S=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(y);S==="space"&&(S=" "),d[y]=S,t.chars[S]={id:y,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let m=0;m<h.length;m++){const g=parseInt(h[m].getAttribute("first"),10),y=parseInt(h[m].getAttribute("second"),10),S=parseInt(h[m].getAttribute("amount"),10);t.chars[d[y]].kerning[d[g]]=S}return t}},J0={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?W0.test(ne.get().parseXML(r)):!1},parse(r){return W0.parse(ne.get().parseXML(r))}},oT=[".xml",".fnt"],lT={extension:{type:dt.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof Nx,getCacheableAssets(r,t){const n={};return r.forEach(s=>{n[s]=t,n[`${s}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},cT={extension:{type:dt.LoadParser,priority:Ii.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return oT.includes(un.extname(r).toLowerCase())},async testParse(r){return zh.test(r)||J0.test(r)},async parse(r,t,n){const s=zh.test(r)?zh.parse(r):J0.parse(r),{src:o}=t,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const S=l[y].file;let _=un.join(un.dirname(o),S);_=Qh(_,o),u.push({src:_,data:h})}const d=await n.load(u),m=u.map(y=>d[y.src]);return new Nx({data:s,textures:m},o)},async load(r,t){return await(await ne.get().fetch(r)).text()},async unload(r,t,n){await Promise.all(r.pages.map(s=>n.unload(s.texture.source._sourceOrigin))),r.destroy()}};class uT{constructor(t,n=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(t){t.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<n;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const hT={extension:{type:dt.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(t=>t instanceof Ut),getCacheableAssets:(r,t)=>{const n={};return r.forEach(s=>{t.forEach((o,l)=>{n[s+(l===0?"":l+1)]=o})}),n}};async function Px(r){if("Image"in globalThis)return new Promise(t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const fT={extension:{type:dt.DetectionParser,priority:1},test:async()=>Px("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")},ty=["png","jpg","jpeg"],dT={extension:{type:dt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...ty],remove:async r=>r.filter(t=>!ty.includes(t))},pT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Vl(r){return pT?!1:document.createElement("video").canPlayType(r)!==""}const mT={extension:{type:dt.DetectionParser,priority:0},test:async()=>Vl("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")},gT={extension:{type:dt.DetectionParser,priority:0},test:async()=>Vl("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")},yT={extension:{type:dt.DetectionParser,priority:0},test:async()=>Vl("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")},xT={extension:{type:dt.DetectionParser,priority:0},test:async()=>Px("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")},Lx=class Tl{constructor(){this.loadOptions={...Tl.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,n,s)=>(this._parsersValidated=!1,t[n]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,n){const s={promise:null,parser:null};return s.promise=(async()=>{let o=null,l=null;if((n.parser||n.loadParser)&&(l=this._parserHash[n.parser||n.loadParser],n.loadParser&&ee(`[Assets] "loadParser" is deprecated, use "parser" instead for ${t}`),l||ee(`[Assets] specified load parser "${n.parser||n.loadParser}" not found while loading ${t}`)),!l){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&h.test?.(t,n,this)){l=h;break}}if(!l)return ee(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(t,n,this),s.parser=l;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await h.testParse?.(o,n,this)&&(o=await h.parse(o,n,this)||o,s.parser=h)}return o})(),s}async load(t,n){this._parsersValidated||this._validateParsers();const s=typeof n=="function"?{...Tl.defaultOptions,...this.loadOptions,onProgress:n}:{...Tl.defaultOptions,...this.loadOptions,...n||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d}=s;let m=0;const g={},y=Ul(t),S=Bn(t,E=>({alias:[E],src:E,data:{}})),_=S.reduce((E,M)=>E+(M.progressSize||1),0),T=S.map(async E=>{const M=un.toAbsolute(E.src);g[E.src]||(await this._loadAssetWithRetry(M,E,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d},g),m+=E.progressSize||1,o&&o(m/_))});return await Promise.all(T),y?g[S[0].src]:g}async unload(t){const s=Bn(t,o=>({alias:[o],src:o})).map(async o=>{const l=un.toAbsolute(o.src),u=this.promiseCache[l];if(u){const h=await u.promise;delete this.promiseCache[l],await u.parser?.unload?.(h,o,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name||t.id).reduce((t,n)=>(!n.name&&!n.id?ee("[Assets] parser should have an id"):(t[n.name]||t[n.id])&&ee(`[Assets] parser id conflict "${n.id}"`),t[n.name]=n,n.id&&(t[n.id]=n),t),{})}async _loadAssetWithRetry(t,n,s,o){let l=0;const{onError:u,strategy:h,retryCount:d,retryDelay:m}=s,g=y=>new Promise(S=>setTimeout(S,y));for(;;)try{this.promiseCache[t]||(this.promiseCache[t]=this._getLoadPromiseAndParser(t,n)),o[n.src]=await this.promiseCache[t].promise;return}catch(y){delete this.promiseCache[t],delete o[n.src],l++;const S=h!=="retry"||l>d;if(h==="retry"&&!S){u&&u(y,n),await g(m);continue}if(h==="skip"){u&&u(y,n);return}u&&u(y,n);const _=new Error(`[Loader.load] Failed to load ${t}.
${y}`);throw y instanceof Error&&y.stack&&(_.stack=y.stack),_}}};Lx.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let _T=Lx;function gr(r,t){if(Array.isArray(t)){for(const n of t)if(r.startsWith(`data:${n}`))return!0;return!1}return r.startsWith(`data:${t}`)}function yr(r,t){const n=r.split("?")[0],s=un.extname(n).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const bT=".json",vT="application/json",ST={extension:{type:dt.LoadParser,priority:Ii.Low},name:"loadJson",id:"json",test(r){return gr(r,vT)||yr(r,bT)},async load(r){return await(await ne.get().fetch(r)).json()}},CT=".txt",AT="text/plain",TT={name:"loadTxt",id:"text",extension:{type:dt.LoadParser,priority:Ii.Low,name:"loadTxt"},test(r){return gr(r,AT)||yr(r,CT)},async load(r){return await(await ne.get().fetch(r)).text()}},ET=["normal","bold","100","200","300","400","500","600","700","800","900"],MT=[".ttf",".otf",".woff",".woff2"],wT=["font/ttf","font/otf","font/woff","font/woff2"],RT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function BT(r){const t=un.extname(r),o=un.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(RT)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const kT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function DT(r){return kT.test(r)?r:encodeURI(r)}const OT={extension:{type:dt.LoadParser,priority:Ii.Low},name:"loadWebFont",id:"web-font",test(r){return gr(r,wT)||yr(r,MT)},async load(r,t){const n=ne.get().getFontFaceSet();if(n){const s=[],o=t.data?.family??BT(r),l=t.data?.weights?.filter(h=>ET.includes(h))??["normal"],u=t.data??{};for(let h=0;h<l.length;h++){const d=l[h],m=new FontFace(o,`url(${DT(r)})`,{...u,weight:d});await m.load(),n.add(m),s.push(m)}return te.has(`${o}-and-url`)?te.get(`${o}-and-url`).entries.push({url:r,faces:s}):te.set(`${o}-and-url`,{entries:[{url:r,faces:s}]}),s.length===1?s[0]:s}return ee("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const t=Array.isArray(r)?r:[r],n=t[0].family,s=te.get(`${n}-and-url`),o=s.entries.find(l=>l.faces.some(u=>t.indexOf(u)!==-1));o.faces=o.faces.filter(l=>t.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),t.forEach(l=>{ne.get().getFontFaceSet().delete(l)}),s.entries.length===0&&te.remove(`${n}-and-url`)}};function Rf(r,t=1){const n=mr.RETINA_PREFIX?.exec(r);return n?parseFloat(n[1]):t}function Bf(r,t,n){r.label=n,r._sourceOrigin=n;const s=new Ut({source:r,label:n}),o=()=>{delete t.promiseCache[n],te.has(n)&&te.remove(n)};return s.source.once("destroy",()=>{t.promiseCache[n]&&(ee("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{r.destroyed||(ee("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const zT=".svg",UT="image/svg+xml",NT={extension:{type:dt.LoadParser,priority:Ii.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return gr(r,UT)||yr(r,zT)},async load(r,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?LT(r):PT(r,t,n,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function PT(r,t,n,s){const o=await ne.get().fetch(r),l=ne.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=t.data?.width??l.width,h=t.data?.height??l.height,d=t.data?.resolution||Rf(r),m=Math.ceil(u*d),g=Math.ceil(h*d),y=ne.get().createCanvas(m,g),S=y.getContext("2d");S.imageSmoothingEnabled=!0,S.imageSmoothingQuality="high",S.drawImage(l,0,0,u*d,h*d);const{parseAsGraphicsContext:_,...T}=t.data??{},E=new ds({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...T});return Bf(E,n,r)}async function LT(r){const n=await(await ne.get().fetch(r)).text(),s=new Sn;return s.svg(n),s}const jT=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let cr=null,cf=class{constructor(){cr||(cr=URL.createObjectURL(new Blob([jT],{type:"application/javascript"}))),this.worker=new Worker(cr)}};cf.revokeObjectURL=function(){cr&&(URL.revokeObjectURL(cr),cr=null)};const GT=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let ur=null;class jx{constructor(){ur||(ur=URL.createObjectURL(new Blob([GT],{type:"application/javascript"}))),this.worker=new Worker(ur)}}jx.revokeObjectURL=function(){ur&&(URL.revokeObjectURL(ur),ur=null)};let ey=0,Uh;class IT{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:n}=new cf;n.addEventListener("message",s=>{n.terminate(),cf.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,n){return this._run("loadImageBitmap",[t,n?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Uh===void 0&&(Uh=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Uh&&(this._createdWorkers++,t=new jx().worker,t.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){this._resolveHash[t.uuid]&&(t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),delete this._resolveHash[t.uuid])}async _run(t,n){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:t,arguments:n,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const n=this._queue.pop(),s=n.id;this._resolveHash[ey]={resolve:n.resolve,reject:n.reject},t.postMessage({data:n.arguments,uuid:ey++,id:s})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const ny=new IT,HT=[".jpeg",".jpg",".png",".webp",".avif"],FT=["image/jpeg","image/png","image/webp","image/avif"];async function YT(r,t){const n=await ne.get().fetch(r);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${n.status} ${n.statusText}`);const s=await n.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const Gx={name:"loadTextures",id:"texture",extension:{type:dt.LoadParser,priority:Ii.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return gr(r,FT)||yr(r,HT)},async load(r,t,n){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ny.isImageBitmapSupported()?s=await ny.loadImageBitmap(r,t):s=await YT(r,t):s=await new Promise((l,u)=>{s=ne.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=r,s.complete?l(s):(s.onload=()=>{l(s)},s.onerror=u)});const o=new ds({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||Rf(r),...t.data});return Bf(o,n,r)},unload(r){r.destroy(!0)}},VT=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Nh,Ph;function XT(r,t,n){n===void 0&&!t.startsWith("data:")?r.crossOrigin=$T(t):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")}function qT(r){return new Promise((t,n)=>{r.addEventListener("canplaythrough",s),r.addEventListener("error",o),r.load();function s(){l(),t()}function o(u){l(),n(u)}function l(){r.removeEventListener("canplaythrough",s),r.removeEventListener("error",o)}})}function $T(r,t=globalThis.location){if(r.startsWith("data:"))return"";t||(t=globalThis.location);const n=new URL(r,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}function QT(){const r=[],t=[];for(const n of VT){const s=Ra.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;Vl(s)&&(r.push(n),t.includes(s)||t.push(s))}return{validVideoExtensions:r,validVideoMime:t}}const ZT={name:"loadVideo",id:"video",extension:{type:dt.LoadParser,name:"loadVideo"},test(r){if(!Nh||!Ph){const{validVideoExtensions:s,validVideoMime:o}=QT();Nh=s,Ph=o}const t=gr(r,Ph),n=yr(r,Nh);return t||n},async load(r,t,n){const s={...Ra.defaultOptions,resolution:t.data?.resolution||Rf(r),alphaMode:t.data?.alphaMode||await Yy(),...t.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(d=>{const m=l[d];m!==void 0&&o.setAttribute(d,m)}),s.muted===!0&&(o.muted=!0),XT(o,r,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(r.startsWith("data:"))h=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const d=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();h=Ra.MIME_TYPES[d]||`video/${d}`}return u.src=r,h&&(u.type=h),new Promise(d=>{const m=async()=>{const g=new Ra({...s,resource:o});o.removeEventListener("canplay",m),t.data.preload&&await qT(o),d(Bf(g,n,r))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",m),o.appendChild(u)})},unload(r){r.destroy(!0)}},Ix={extension:{type:dt.ResolveParser,name:"resolveTexture"},test:Gx.test,parse:r=>({resolution:parseFloat(mr.RETINA_PREFIX.exec(r)?.[1]??"1"),format:r.split(".").pop(),src:r})},KT={extension:{type:dt.ResolveParser,priority:-2,name:"resolveJson"},test:r=>mr.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:Ix.parse};class WT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new mr,this.loader=new _T,this.cache=te,this._backgroundLoader=new uT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){ee("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const n=t.texturePreference?.resolution??1,s=typeof n=="number"?[n]:n,o=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,n){this._initialized||await this.init();const s=Ul(t),o=Bn(t).map(h=>{if(typeof h!="string"){const d=this.resolver.getAlias(h);return d.some(m=>!this.resolver.hasKey(m))&&this.add(h),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,n);return s?u[o[0]]:u}addBundle(t,n){this.resolver.addBundle(t,n)}async loadBundle(t,n){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const o=this.resolver.resolveBundle(t),l={},u=Object.keys(o);let h=0;const d=[],m=()=>{n?.(d.reduce((y,S)=>y+S,0)/h)},g=u.map((y,S)=>{const _=o[y],T=Object.values(_),M=[...new Set(T.flat())].reduce((R,B)=>R+(B.progressSize||1),0);return d.push(0),h+=M,this._mapLoadToResolve(_,R=>{d[S]=R*M,m()}).then(R=>{l[y]=R})});return await Promise.all(g),s?l[t[0]]:l}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolveBundle(t);Object.values(n).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return te.get(t);const n={};for(let s=0;s<t.length;s++)n[s]=te.get(t[s]);return n}async _mapLoadToResolve(t,n){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,n);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(m=>{l[m]=h}),te.set(d,h)}),l}async unload(t){this._initialized||await this.init();const n=Bn(t).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(n);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Bn(t);const n=this.resolver.resolveBundle(t),s=Object.keys(n).map(o=>this._unloadFromResolved(n[o]));await Promise.all(s)}async _unloadFromResolved(t){const n=Object.values(t);n.forEach(s=>{te.remove(s.src)}),await this.loader.unload(n)}async _detectFormats(t){let n=[];t.preferredFormats&&(n=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?n=await s.add(n):t.skipDetections||(n=await s.remove(n));return n=n.filter((s,o)=>n.indexOf(s)===o),n}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(s=>s in t).forEach(s=>{n.config[s]=t[s]})})}}const Ea=new WT;Oe.handleByList(dt.LoadParser,Ea.loader.parsers).handleByList(dt.ResolveParser,Ea.resolver.parsers).handleByList(dt.CacheParser,Ea.cache.parsers).handleByList(dt.DetectionParser,Ea.detections);Oe.add(hT,dT,fT,xT,mT,gT,yT,ST,TT,OT,NT,Gx,ZT,cT,lT,Ix,KT);const iy={loader:dt.LoadParser,resolver:dt.ResolveParser,cache:dt.CacheParser,detection:dt.DetectionParser};Oe.handle(dt.Asset,r=>{const t=r.ref;Object.entries(iy).filter(([n])=>!!t[n]).forEach(([n,s])=>Oe.add(Object.assign(t[n],{extension:t[n].extension??s})))},r=>{const t=r.ref;Object.keys(iy).filter(n=>!!t[n]).forEach(n=>Oe.remove(t[n]))});class li extends Uy{constructor(t){t instanceof Sn&&(t={context:t});const{context:n,roundPixels:s,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",n?this.context=n:(this.context=this._ownedContext=new Sn,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=t,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_onTouch(t){this._gcLastUsed=t,this._context._gcLastUsed=t}_callContextMethod(t,n){return this.context[t](...n),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new li(this._context.clone()):(this._ownedContext=null,new li(this._context))}lineStyle(t,n,s){Mt(Qt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),n&&(o.color=n),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(t,n){Mt(Qt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t!==void 0&&(s.color=t),n!==void 0&&(s.alpha=n),this.context.fillStyle=s,this}endFill(){Mt(Qt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Sn.defaultStrokeStyle.width||t.color!==Sn.defaultStrokeStyle.color||t.alpha!==Sn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Mt(Qt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Mt(Qt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Mt(Qt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Mt(Qt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Mt(Qt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Mt(Qt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}Oe.add(cv,uv);const sy=r=>{let t;const n=new Set,s=(m,g)=>{const y=typeof m=="function"?m(t):m;if(!Object.is(y,t)){const S=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(_=>_(t,S))}},o=()=>t,h={setState:s,getState:o,getInitialState:()=>d,subscribe:m=>(n.add(m),()=>n.delete(m))},d=t=r(s,o,h);return h},JT=(r=>r?sy(r):sy),tE=r=>r;function eE(r,t=tE){const n=va.useSyncExternalStore(r.subscribe,va.useCallback(()=>t(r.getState()),[r,t]),va.useCallback(()=>t(r.getInitialState()),[r,t]));return va.useDebugValue(n),n}const ry=r=>{const t=JT(r),n=s=>eE(t,s);return Object.assign(n,t),n},nE=(r=>r?ry(r):ry),De=[];for(let r=0;r<256;++r)De.push((r+256).toString(16).slice(1));function iE(r,t=0){return(De[r[t+0]]+De[r[t+1]]+De[r[t+2]]+De[r[t+3]]+"-"+De[r[t+4]]+De[r[t+5]]+"-"+De[r[t+6]]+De[r[t+7]]+"-"+De[r[t+8]]+De[r[t+9]]+"-"+De[r[t+10]]+De[r[t+11]]+De[r[t+12]]+De[r[t+13]]+De[r[t+14]]+De[r[t+15]]).toLowerCase()}let Lh;const sE=new Uint8Array(16);function rE(){if(!Lh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Lh=crypto.getRandomValues.bind(crypto)}return Lh(sE)}const aE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ay={randomUUID:aE};function oE(r,t,n){r=r||{};const s=r.random??r.rng?.()??rE();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,iE(s)}function lr(r,t,n){return ay.randomUUID&&!r?ay.randomUUID():oE(r)}const St=nE(r=>({myId:lr(),isHost:!1,username:"Player",tokens:[],map:{url:null,scale:50,offsetX:0,offsetY:0,gridType:"square",fogEnabled:!1,revealedAreas:[]},chat:[],turnOrder:[],macros:[],audio:{url:null,isPlaying:!1},setIdentity:(t,n)=>r({myId:t,isHost:n}),setUsername:t=>r({username:t}),addToken:t=>r(n=>({tokens:[...n.tokens,t]})),updateToken:(t,n)=>r(s=>({tokens:s.tokens.map(o=>o.id===t?{...o,...n}:o)})),removeToken:t=>r(n=>({tokens:n.tokens.filter(s=>s.id!==t)})),setMapBackground:t=>r(n=>({map:{...n.map,url:t}})),addChatMessage:t=>r(n=>({chat:[...n.chat,t]})),toggleFog:t=>r(n=>({map:{...n.map,fogEnabled:t}})),revealArea:(t,n,s)=>r(o=>({map:{...o.map,revealedAreas:[...o.map.revealedAreas,{x:t,y:n,radius:s}]}})),resetFog:()=>r(t=>({map:{...t.map,revealedAreas:[]}})),addMacro:t=>r(n=>({macros:[...n.macros,t]})),removeMacro:t=>r(n=>({macros:n.macros.filter(s=>s.id!==t)})),setAudio:(t,n)=>r({audio:{url:t,isPlaying:n}}),syncState:t=>r(n=>({...n,...t}))}));class lE{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return cE(t).buffer}}function cE(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r){const l=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(l,s),s+=o.byteLength}return n}function Hx(r){return new uE(r).unpack()}function Fx(r){const t=new hE,n=t.pack(r);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class uE{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let s=0,o="",l,u;for(;s<t;)l=n[s],l<160?(u=l,s++):(l^192)<32?(u=(l&31)<<6|n[s+1]&63,s+=2):(l^224)<16?(u=(l&15)<<12|(n[s+1]&63)<<6|n[s+2]&63,s+=3):(u=(l&7)<<18|(n[s+1]&63)<<12|(n[s+2]&63)<<6|n[s+3]&63,s+=4),o+=String.fromCodePoint(u);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let s=0;s<t;s++)n[s]=this.unpack();return n}unpack_map(t){const n={};for(let s=0;s<t;s++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,s=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(s-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),s=t>>31,o=(t>>20&2047)-1023,u=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(s===0?1:-1)*u}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class hE{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const s=this.pack_array(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const s=t;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const s=this.pack_object(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),s=n.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const s=o=>{if(o<n){const l=this.pack(t[o]);return l instanceof Promise?l.then(()=>s(o+1)):s(o+1)}};return s(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const s=Math.floor(Math.log(t)/Math.LN2),o=t/2**s-1,l=Math.floor(o*2**52),u=2**32,h=n<<31|s+1023<<20|l/u&1048575,d=l%u;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),s=n.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const o=l=>{if(l<n.length){const u=n[l];if(t.hasOwnProperty(u)){this.pack(u);const h=this.pack(t[u]);if(h instanceof Promise)return h.then(()=>o(l+1))}return o(l+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new lE,this._textEncoder=new TextEncoder}}let Yx=!0,Vx=!0;function Ma(r,t,n){const s=r.match(t);return s&&s.length>=n&&parseFloat(s[n],10)}function ms(r,t,n){if(!r.RTCPeerConnection)return;const s=r.RTCPeerConnection.prototype,o=s.addEventListener;s.addEventListener=function(u,h){if(u!==t)return o.apply(this,arguments);const d=m=>{const g=n(m);g&&(h.handleEvent?h.handleEvent(g):h(g))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(h,d),o.apply(this,[u,d])};const l=s.removeEventListener;s.removeEventListener=function(u,h){if(u!==t||!this._eventMap||!this._eventMap[t])return l.apply(this,arguments);if(!this._eventMap[t].has(h))return l.apply(this,arguments);const d=this._eventMap[t].get(h);return this._eventMap[t].delete(h),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[u,d])},Object.defineProperty(s,"on"+t,{get(){return this["_on"+t]},set(u){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),u&&this.addEventListener(t,this["_on"+t]=u)},enumerable:!0,configurable:!0})}function fE(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Yx=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function dE(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Vx=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Xx(){if(typeof window=="object"){if(Yx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function kf(r,t){Vx&&console.warn(r+" is deprecated, please use "+t+" instead.")}function pE(r){const t={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=r;if(n.userAgentData&&n.userAgentData.brands){const s=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Ma(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Ma(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Ma(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,t._safariVersion=Ma(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function oy(r){return Object.prototype.toString.call(r)==="[object Object]"}function qx(r){return oy(r)?Object.keys(r).reduce(function(t,n){const s=oy(r[n]),o=s?qx(r[n]):r[n],l=s&&!Object.keys(o).length;return o===void 0||l?t:Object.assign(t,{[n]:o})},{}):r}function uf(r,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(s=>{s.endsWith("Id")?uf(r,r.get(t[s]),n):s.endsWith("Ids")&&t[s].forEach(o=>{uf(r,r.get(o),n)})}))}function ly(r,t,n){const s=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const l=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===t.id&&l.push(u)}),l.forEach(u=>{r.forEach(h=>{h.type===s&&h.trackId===u.id&&uf(r,h,o)})}),o}const cy=Xx;function $x(r,t){const n=r&&r.navigator;if(!n.mediaDevices)return;const s=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const d={};return Object.keys(h).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const g=typeof h[m]=="object"?h[m]:{ideal:h[m]};g.exact!==void 0&&typeof g.exact=="number"&&(g.min=g.max=g.exact);const y=function(S,_){return S?S+_.charAt(0).toUpperCase()+_.slice(1):_==="deviceId"?"sourceId":_};if(g.ideal!==void 0){d.optional=d.optional||[];let S={};typeof g.ideal=="number"?(S[y("min",m)]=g.ideal,d.optional.push(S),S={},S[y("max",m)]=g.ideal,d.optional.push(S)):(S[y("",m)]=g.ideal,d.optional.push(S))}g.exact!==void 0&&typeof g.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[y("",m)]=g.exact):["min","max"].forEach(S=>{g[S]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[y(S,m)]=g[S])})}),h.advanced&&(d.optional=(d.optional||[]).concat(h.advanced)),d},o=function(h,d){if(t.version>=61)return d(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const m=function(g,y,S){y in g&&!(S in g)&&(g[S]=g[y],delete g[y])};h=JSON.parse(JSON.stringify(h)),m(h.audio,"autoGainControl","googAutoGainControl"),m(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=s(h.audio)}if(h&&typeof h.video=="object"){let m=h.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const g=t.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!g)){delete h.video.facingMode;let y;if(m.exact==="environment"||m.ideal==="environment"?y=["back","rear"]:(m.exact==="user"||m.ideal==="user")&&(y=["front"]),y)return n.mediaDevices.enumerateDevices().then(S=>{S=S.filter(T=>T.kind==="videoinput");let _=S.find(T=>y.some(E=>T.label.toLowerCase().includes(E)));return!_&&S.length&&y.includes("back")&&(_=S[S.length-1]),_&&(h.video.deviceId=m.exact?{exact:_.deviceId}:{ideal:_.deviceId}),h.video=s(h.video),cy("chrome: "+JSON.stringify(h)),d(h)})}h.video=s(h.video)}return cy("chrome: "+JSON.stringify(h)),d(h)},l=function(h){return t.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,d,m){o(h,g=>{n.webkitGetUserMedia(g,d,y=>{m&&m(l(y))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return o(d,m=>h(m).then(g=>{if(m.audio&&!g.getAudioTracks().length||m.video&&!g.getVideoTracks().length)throw g.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return g},g=>Promise.reject(l(g))))}}}function Qx(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function Zx(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",o=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===o.track.id):l={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)}),s.stream.getTracks().forEach(o=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===o.id):l={track:o};const u=new Event("track");u.track=o,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ms(r,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Kx(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const t=function(o,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=o.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:o}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(h,d){let m=o.apply(this,arguments);return m||(m=t(this,h),this._senders.push(m)),m};const l=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const d=this._senders.indexOf(h);d!==-1&&this._senders.splice(d,1)}}const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(t(this,u))})};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(u=>{const h=this._senders.find(d=>d.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Wx(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const n=r.RTCPeerConnection.prototype.getSenders;n&&(r.RTCPeerConnection.prototype.getSenders=function(){const l=n.apply(this,[]);return l.forEach(u=>u._pc=this),l});const s=r.RTCPeerConnection.prototype.addTrack;s&&(r.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),r.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>ly(u,l.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const n=r.RTCPeerConnection.prototype.getReceivers;n&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o}),ms(r,"track",s=>(s.receiver._pc=s.srcElement,s)),r.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>ly(l,o.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const s=arguments[0];let o,l,u;return this.getSenders().forEach(h=>{h.track===s&&(o?u=!0:o=h)}),this.getReceivers().forEach(h=>(h.track===s&&(l?u=!0:l=h),h.track===s)),u||o&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Jx(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(d)===-1&&this._shimmedLocalStreams[h.id].push(d):this._shimmedLocalStreams[h.id]=[h,d],d};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(m=>{if(this.getSenders().find(y=>y.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(m=>h.indexOf(m)===-1);this._shimmedLocalStreams[u.id]=[u].concat(d)};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],s.apply(this,arguments)};const o=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const d=this._shimmedLocalStreams[h].indexOf(u);d!==-1&&this._shimmedLocalStreams[h].splice(d,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),o.apply(this,arguments)}}function t_(r,t){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Jx(r);const n=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const g=n.apply(this);return this._reverseStreams=this._reverseStreams||{},g.map(y=>this._reverseStreams[y.id])};const s=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(g){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},g.getTracks().forEach(y=>{if(this.getSenders().find(_=>_.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[g.id]){const y=new r.MediaStream(g.getTracks());this._streams[g.id]=y,this._reverseStreams[y.id]=g,g=y}s.apply(this,[g])};const o=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(g){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[g.id]||g]),delete this._reverseStreams[this._streams[g.id]?this._streams[g.id].id:g.id],delete this._streams[g.id]},r.RTCPeerConnection.prototype.addTrack=function(g,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const S=[].slice.call(arguments,1);if(S.length!==1||!S[0].getTracks().find(E=>E===g))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(E=>E.track===g))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const T=this._streams[y.id];if(T)T.addTrack(g),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const E=new r.MediaStream([g]);this._streams[y.id]=E,this._reverseStreams[E.id]=y,this.addStream(E)}return this.getSenders().find(E=>E.track===g)};function l(m,g){let y=g.sdp;return Object.keys(m._reverseStreams||[]).forEach(S=>{const _=m._reverseStreams[S],T=m._streams[_.id];y=y.replace(new RegExp(T.id,"g"),_.id)}),new RTCSessionDescription({type:g.type,sdp:y})}function u(m,g){let y=g.sdp;return Object.keys(m._reverseStreams||[]).forEach(S=>{const _=m._reverseStreams[S],T=m._streams[_.id];y=y.replace(new RegExp(_.id,"g"),T.id)}),new RTCSessionDescription({type:g.type,sdp:y})}["createOffer","createAnswer"].forEach(function(m){const g=r.RTCPeerConnection.prototype[m],y={[m](){const S=arguments;return arguments.length&&typeof arguments[0]=="function"?g.apply(this,[T=>{const E=l(this,T);S[0].apply(null,[E])},T=>{S[1]&&S[1].apply(null,T)},arguments[2]]):g.apply(this,arguments).then(T=>l(this,T))}};r.RTCPeerConnection.prototype[m]=y[m]});const h=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const m=d.get.apply(this);return m.type===""?m:l(this,m)}}),r.RTCPeerConnection.prototype.removeTrack=function(g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!g._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(g._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let S;Object.keys(this._streams).forEach(_=>{this._streams[_].getTracks().find(E=>g.track===E)&&(S=this._streams[_])}),S&&(S.getTracks().length===1?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(g.track),this.dispatchEvent(new Event("negotiationneeded")))}}function hf(r,t){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=r.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=o[n]})}function e_(r,t){ms(r,"negotiationneeded",n=>{const s=n.target;if(!((t.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return n})}const uy=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:e_,shimAddTrackRemoveTrack:t_,shimAddTrackRemoveTrackWithNative:Jx,shimGetSendersWithDtmf:Kx,shimGetUserMedia:$x,shimMediaStream:Qx,shimOnTrack:Zx,shimPeerConnection:hf,shimSenderReceiverGetStats:Wx},Symbol.toStringTag,{value:"Module"}));function n_(r,t){const n=r&&r.navigator,s=r&&r.MediaStreamTrack;if(n.getUserMedia=function(o,l,u){kf("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(l,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(u,h,d){h in u&&!(d in u)&&(u[d]=u[h],delete u[h])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),l(u)},s&&s.prototype.getSettings){const u=s.prototype.getSettings;s.prototype.getSettings=function(){const h=u.apply(this,arguments);return o(h,"mozAutoGainControl","autoGainControl"),o(h,"mozNoiseSuppression","noiseSuppression"),h}}if(s&&s.prototype.applyConstraints){const u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),o(h,"autoGainControl","mozAutoGainControl"),o(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function mE(r,t){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return s.video===!0?s.video={mediaSource:t}:s.video.mediaSource=t,r.navigator.mediaDevices.getUserMedia(s)})}function i_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ff(r,t){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const l=r.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=u[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[l,u,h]=arguments;return s.apply(this,[l||null]).then(d=>{if(t.version<53&&!u)try{d.forEach(m=>{m.type=n[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;d.forEach((g,y)=>{d.set(y,Object.assign({},g,{type:n[g.type]||g.type}))})}return d}).then(u,h)}}function s_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(l=>l._pc=this),o});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function r_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s}),ms(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function a_(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){kf("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&n.getTracks().includes(s.track)&&this.removeTrack(s)})})}function o_(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function l_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.addTransceiver;t&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const o=s.length>0;o&&s.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=t.apply(this,arguments);if(o){const{sender:u}=l,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=s,u.sendEncodings=s,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function c_(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const t=r.RTCRtpSender.prototype.getParameters;t&&(r.RTCRtpSender.prototype.getParameters=function(){const s=t.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function u_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function h_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const hy=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:l_,shimCreateAnswer:h_,shimCreateOffer:u_,shimGetDisplayMedia:mE,shimGetParameters:c_,shimGetUserMedia:n_,shimOnTrack:i_,shimPeerConnection:ff,shimRTCDataChannel:o_,shimReceiverGetStats:r_,shimRemoveStream:a_,shimSenderGetStats:s_},Symbol.toStringTag,{value:"Module"}));function f_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(o=>t.call(this,o,s)),s.getVideoTracks().forEach(o=>t.call(this,o,s))},r.RTCPeerConnection.prototype.addTrack=function(s,...o){return o&&o.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),t.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(n);if(s===-1)return;this._localStreams.splice(s,1);const o=n.getTracks();this.getSenders().forEach(l=>{o.includes(l.track)&&this.removeTrack(l)})})}}function d_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,this.dispatchEvent(l)})})}});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(l=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(l)>=0)return;s._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,s.dispatchEvent(u)})}),t.apply(s,arguments)}}}function p_(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,n=t.createOffer,s=t.createAnswer,o=t.setLocalDescription,l=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(m,g){const y=arguments.length>=2?arguments[2]:arguments[0],S=n.apply(this,[y]);return g?(S.then(m,g),Promise.resolve()):S},t.createAnswer=function(m,g){const y=arguments.length>=2?arguments[2]:arguments[0],S=s.apply(this,[y]);return g?(S.then(m,g),Promise.resolve()):S};let h=function(d,m,g){const y=o.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y};t.setLocalDescription=h,h=function(d,m,g){const y=l.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y},t.setRemoteDescription=h,h=function(d,m,g){const y=u.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y},t.addIceCandidate=h}function m_(r){const t=r&&r.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,s=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>s(g_(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(s,o,l){t.mediaDevices.getUserMedia(s).then(o,l)}).bind(t))}function g_(r){return r&&r.video!==void 0?Object.assign({},r,{video:qx(r.video)}):r}function y_(r){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection;r.RTCPeerConnection=function(s,o){if(s&&s.iceServers){const l=[];for(let u=0;u<s.iceServers.length;u++){let h=s.iceServers[u];h.urls===void 0&&h.url?(kf("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(s.iceServers[u])}s.iceServers=l}return new t(s,o)},r.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function x_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function __(r){const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):s.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):s.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function b_(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const fy=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:b_,shimCallbacksAPI:p_,shimConstraints:g_,shimCreateOfferLegacy:__,shimGetUserMedia:m_,shimLocalStreamsAPI:f_,shimRTCIceServerUrls:y_,shimRemoteStreamsAPI:d_,shimTrackEventTransceiver:x_},Symbol.toStringTag,{value:"Module"}));var jh={exports:{}},dy;function gE(){return dy||(dy=1,(function(r){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(s=>s.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,l)=>(l>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const s=t.splitSections(n);return s&&s[0]},t.getMediaSections=function(n){const s=t.splitSections(n);return s.shift(),s},t.matchPrefix=function(n,s){return t.splitLines(n).filter(o=>o.indexOf(s)===0)},t.parseCandidate=function(n){let s;n.indexOf("a=candidate:")===0?s=n.substring(12).split(" "):s=n.substring(10).split(" ");const o={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let l=8;l<s.length;l+=2)switch(s[l]){case"raddr":o.relatedAddress=s[l+1];break;case"rport":o.relatedPort=parseInt(s[l+1],10);break;case"tcptype":o.tcpType=s[l+1];break;case"ufrag":o.ufrag=s[l+1],o.usernameFragment=s[l+1];break;default:o[s[l]]===void 0&&(o[s[l]]=s[l+1]);break}return o},t.writeCandidate=function(n){const s=[];s.push(n.foundation);const o=n.component;o==="rtp"?s.push(1):o==="rtcp"?s.push(2):s.push(o),s.push(n.protocol.toUpperCase()),s.push(n.priority),s.push(n.address||n.ip),s.push(n.port);const l=n.type;return s.push("typ"),s.push(l),l!=="host"&&n.relatedAddress&&n.relatedPort&&(s.push("raddr"),s.push(n.relatedAddress),s.push("rport"),s.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(s.push("ufrag"),s.push(n.usernameFragment||n.ufrag)),"candidate:"+s.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let s=n.substring(9).split(" ");const o={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),o.name=s[0],o.clockRate=parseInt(s[1],10),o.channels=s.length===3?parseInt(s[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let s=n.payloadType;n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+s+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const s=n.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const s={};let o;const l=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<l.length;u++)o=l[u].trim().split("="),s[o[0].trim()]=o[1];return s},t.writeFmtp=function(n){let s="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const l=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?l.push(u+"="+n.parameters[u]):l.push(u)}),s+="a=fmtp:"+o+" "+l.join(";")+`\r
`}return s},t.parseRtcpFb=function(n){const s=n.substring(n.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},t.writeRtcpFb=function(n){let s="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(l=>{s+="a=rtcp-fb:"+o+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),s},t.parseSsrcMedia=function(n){const s=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,s),10)},l=n.indexOf(":",s);return l>-1?(o.attribute=n.substring(s+1,l),o.value=n.substring(l+1)):o.attribute=n.substring(s+1),o},t.parseSsrcGroup=function(n){const s=n.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(o=>parseInt(o,10))}},t.getMid=function(n){const s=t.matchPrefix(n,"a=mid:")[0];if(s)return s.substring(6)},t.parseFingerprint=function(n){const s=n.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},t.getDtlsParameters=function(n,s){return{role:"auto",fingerprints:t.matchPrefix(n+s,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,s){let o="a=setup:"+s+`\r
`;return n.fingerprints.forEach(l=>{o+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),o},t.parseCryptoLine=function(n){const s=n.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const s=n.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,s){return t.matchPrefix(n+s,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,s){const o=t.matchPrefix(n+s,"a=ice-ufrag:")[0],l=t.matchPrefix(n+s,"a=ice-pwd:")[0];return o&&l?{usernameFragment:o.substring(12),password:l.substring(10)}:null},t.writeIceParameters=function(n){let s="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(s+=`a=ice-lite\r
`),s},t.parseRtpParameters=function(n){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=t.splitLines(n)[0].split(" ");s.profile=l[2];for(let h=3;h<l.length;h++){const d=l[h],m=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(m){const g=t.parseRtpMap(m),y=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(g.parameters=y.length?t.parseFmtp(y[0]):{},g.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),s.codecs.push(g),g.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(g.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(h=>{s.headerExtensions.push(t.parseExtmap(h))});const u=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return s.codecs.forEach(h=>{u.forEach(d=>{h.rtcpFeedback.find(g=>g.type===d.type&&g.parameter===d.parameter)||h.rtcpFeedback.push(d)})}),s},t.writeRtpDescription=function(n,s){let o="";o+="m="+n+" ",o+=s.codecs.length>0?"9":"0",o+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=s.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(u=>{o+=t.writeRtpMap(u),o+=t.writeFmtp(u),o+=t.writeRtcpFb(u)});let l=0;return s.codecs.forEach(u=>{u.maxptime>l&&(l=u.maxptime)}),l>0&&(o+="a=maxptime:"+l+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(u=>{o+=t.writeExtmap(u)}),o},t.parseRtpEncodingParameters=function(n){const s=[],o=t.parseRtpParameters(n),l=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,h=t.matchPrefix(n,"a=ssrc:").map(S=>t.parseSsrcMedia(S)).filter(S=>S.attribute==="cname"),d=h.length>0&&h[0].ssrc;let m;const g=t.matchPrefix(n,"a=ssrc-group:FID").map(S=>S.substring(17).split(" ").map(T=>parseInt(T,10)));g.length>0&&g[0].length>1&&g[0][0]===d&&(m=g[0][1]),o.codecs.forEach(S=>{if(S.name.toUpperCase()==="RTX"&&S.parameters.apt){let _={ssrc:d,codecPayloadType:parseInt(S.parameters.apt,10)};d&&m&&(_.rtx={ssrc:m}),s.push(_),l&&(_=JSON.parse(JSON.stringify(_)),_.fec={ssrc:d,mechanism:u?"red+ulpfec":"red"},s.push(_))}}),s.length===0&&d&&s.push({ssrc:d});let y=t.matchPrefix(n,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substring(5),10)*1e3*.95-2e3*8:y=void 0,s.forEach(S=>{S.maxBitrate=y})),s},t.parseRtcpParameters=function(n){const s={},o=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];o&&(s.cname=o.value,s.ssrc=o.ssrc);const l=t.matchPrefix(n,"a=rtcp-rsize");s.reducedSize=l.length>0,s.compound=l.length===0;const u=t.matchPrefix(n,"a=rtcp-mux");return s.mux=u.length>0,s},t.writeRtcpParameters=function(n){let s="";return n.reducedSize&&(s+=`a=rtcp-rsize\r
`),n.mux&&(s+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(s+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),s},t.parseMsid=function(n){let s;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return s=o[0].substring(7).split(" "),{stream:s[0],track:s[1]};const l=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(l.length>0)return s=l[0].value.split(" "),{stream:s[0],track:s[1]}},t.parseSctpDescription=function(n){const s=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let l;o.length>0&&(l=parseInt(o[0].substring(19),10)),isNaN(l)&&(l=65536);const u=t.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:s.fmt,maxMessageSize:l};const h=t.matchPrefix(n,"a=sctpmap:");if(h.length>0){const d=h[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:l}}},t.writeSctpDescription=function(n,s){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&o.push("a=max-message-size:"+s.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,s,o){let l;const u=s!==void 0?s:2;return n?l=n:l=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+l+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,s){const o=t.splitLines(n);for(let l=0;l<o.length;l++)switch(o[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[l].substring(2)}return s?t.getDirection(s):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const s=t.splitLines(n);for(let o=0;o<s.length;o++)if(s[o].length<2||s[o].charAt(1)!=="=")return!1;return!0},r.exports=t})(jh)),jh.exports}var v_=gE();const hr=ja(v_),yE=V1({__proto__:null,default:hr},[v_]);function El(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const t=r.RTCIceCandidate;r.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const o=new t(s),l=hr.parseCandidate(s.candidate);for(const u in l)u in o||Object.defineProperty(o,u,{value:l[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(s)},r.RTCIceCandidate.prototype=t.prototype,ms(r,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new r.RTCIceCandidate(n.candidate),writable:"false"}),n))}function df(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||ms(r,"icecandidate",t=>{if(t.candidate){const n=hr.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Ml(r,t){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const d=hr.splitSections(h.sdp);return d.shift(),d.some(m=>{const g=hr.parseMLine(m);return g&&g.kind==="application"&&g.protocol.indexOf("SCTP")!==-1})},s=function(h){const d=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const m=parseInt(d[1],10);return m!==m?-1:m},o=function(h){let d=65536;return t.browser==="firefox"&&(t.version<57?h===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},l=function(h,d){let m=65536;t.browser==="firefox"&&t.version===57&&(m=65535);const g=hr.matchPrefix(h.sdp,"a=max-message-size:");return g.length>0?m=parseInt(g[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(m=2147483637),m},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=s(arguments[0]),m=o(d),g=l(arguments[0],d);let y;m===0&&g===0?y=Number.POSITIVE_INFINITY:m===0||g===0?y=Math.max(m,g):y=Math.min(m,g);const S={};Object.defineProperty(S,"maxMessageSize",{get(){return y}}),this._sctp=S}return u.apply(this,arguments)}}function wl(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function t(s,o){const l=s.send;s.send=function(){const h=arguments[0],d=h.length||h.size||h.byteLength;if(s.readyState==="open"&&o.sctp&&d>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return l.apply(s,arguments)}}const n=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},ms(r,"datachannel",s=>(t(s.channel,s.target),s))}function pf(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const t=r.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const s=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const l=o.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const u=new Event("connectionstatechange",o);l.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function mf(r,t){if(!r.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&o instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:o.type,sdp:l}):o.sdp=l}return n.apply(this,arguments)}}function Rl(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Bl(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const xE=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:mf,shimAddIceCandidateNullOrEmpty:Rl,shimConnectionState:pf,shimMaxMessageSize:Ml,shimParameterlessSetLocalDescription:Bl,shimRTCIceCandidate:El,shimRTCIceCandidateRelayProtocol:df,shimSendThrowTypeError:wl},Symbol.toStringTag,{value:"Module"}));function _E({window:r}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Xx,s=pE(r),o={browserDetails:s,commonShim:xE,extractVersion:Ma,disableLog:fE,disableWarnings:dE,sdp:yE};switch(s.browser){case"chrome":if(!uy||!hf||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(s.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=uy,Rl(r,s),Bl(r),$x(r,s),Qx(r),hf(r,s),Zx(r),t_(r,s),Kx(r),Wx(r),e_(r,s),El(r),df(r),pf(r),Ml(r,s),wl(r),mf(r,s);break;case"firefox":if(!hy||!ff||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=hy,Rl(r,s),Bl(r),n_(r,s),ff(r,s),i_(r),a_(r),s_(r),r_(r),o_(r),l_(r),c_(r),u_(r),h_(r),El(r),pf(r),Ml(r,s),wl(r);break;case"safari":if(!fy||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=fy,Rl(r,s),Bl(r),y_(r),__(r),p_(r),f_(r),d_(r),x_(r),m_(r),b_(r),El(r),df(r),Ml(r,s),wl(r),mf(r,s);break;default:n("Unsupported browser!");break}return o}const py=_E({window:typeof window>"u"?void 0:window});function gs(r,t,n,s){Object.defineProperty(r,t,{get:n,set:s,enumerable:!0,configurable:!0})}class S_{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],s=t.byteLength,o=Math.ceil(s/this.chunkedMTU);let l=0,u=0;for(;u<s;){const h=Math.min(s,u+this.chunkedMTU),d=t.slice(u,h),m={__peerData:this._dataCount,n:l,data:d,total:o};n.push(m),u=h,l++}return this._dataCount++,n}}}function bE(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r)n.set(o,s),s+=o.byteLength;return n}const Gh=py.default||py,ba=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Gh.browserDetails.browser}getVersion(){return Gh.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),t=Gh.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,s=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),s=!0}catch{}finally{n&&n.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},vE=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),C_=()=>Math.random().toString(36).slice(2),my={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class SE extends S_{noop(){}blobToArrayBuffer(t,n){const s=new FileReader;return s.onload=function(o){o.target&&n(o.target.result)},s.readAsArrayBuffer(t),s}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=my,this.browser=ba.getBrowser(),this.browserVersion=ba.getVersion(),this.pack=Fx,this.unpack=Hx,this.supports=(function(){const n={browser:ba.isBrowserSupported(),webRTC:ba.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let s;try{s=new RTCPeerConnection(my),n.audioVideo=!0;let o;try{o=s.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!ba.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{s&&s.close()}return n})(),this.validateId=vE,this.randomToken=C_}}const Ke=new SE,CE="PeerJS: ";class AE{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const s=[CE,...n];for(const o in s)s[o]instanceof Error&&(s[o]="("+s[o].name+") "+s[o].message);t>=3?console.log(...s):t>=2?console.warn("WARNING",...s):t>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var ot=new AE,Df={},TE=Object.prototype.hasOwnProperty,He="~";function La(){}Object.create&&(La.prototype=Object.create(null),new La().__proto__||(He=!1));function EE(r,t,n){this.fn=r,this.context=t,this.once=n||!1}function A_(r,t,n,s,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var l=new EE(n,s||r,o),u=He?He+t:t;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],l]:r._events[u].push(l):(r._events[u]=l,r._eventsCount++),r}function kl(r,t){--r._eventsCount===0?r._events=new La:delete r._events[t]}function Le(){this._events=new La,this._eventsCount=0}Le.prototype.eventNames=function(){var t=[],n,s;if(this._eventsCount===0)return t;for(s in n=this._events)TE.call(n,s)&&t.push(He?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Le.prototype.listeners=function(t){var n=He?He+t:t,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var o=0,l=s.length,u=new Array(l);o<l;o++)u[o]=s[o].fn;return u};Le.prototype.listenerCount=function(t){var n=He?He+t:t,s=this._events[n];return s?s.fn?1:s.length:0};Le.prototype.emit=function(t,n,s,o,l,u){var h=He?He+t:t;if(!this._events[h])return!1;var d=this._events[h],m=arguments.length,g,y;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),m){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,s),!0;case 4:return d.fn.call(d.context,n,s,o),!0;case 5:return d.fn.call(d.context,n,s,o,l),!0;case 6:return d.fn.call(d.context,n,s,o,l,u),!0}for(y=1,g=new Array(m-1);y<m;y++)g[y-1]=arguments[y];d.fn.apply(d.context,g)}else{var S=d.length,_;for(y=0;y<S;y++)switch(d[y].once&&this.removeListener(t,d[y].fn,void 0,!0),m){case 1:d[y].fn.call(d[y].context);break;case 2:d[y].fn.call(d[y].context,n);break;case 3:d[y].fn.call(d[y].context,n,s);break;case 4:d[y].fn.call(d[y].context,n,s,o);break;default:if(!g)for(_=1,g=new Array(m-1);_<m;_++)g[_-1]=arguments[_];d[y].fn.apply(d[y].context,g)}}return!0};Le.prototype.on=function(t,n,s){return A_(this,t,n,s,!1)};Le.prototype.once=function(t,n,s){return A_(this,t,n,s,!0)};Le.prototype.removeListener=function(t,n,s,o){var l=He?He+t:t;if(!this._events[l])return this;if(!n)return kl(this,l),this;var u=this._events[l];if(u.fn)u.fn===n&&(!o||u.once)&&(!s||u.context===s)&&kl(this,l);else{for(var h=0,d=[],m=u.length;h<m;h++)(u[h].fn!==n||o&&!u[h].once||s&&u[h].context!==s)&&d.push(u[h]);d.length?this._events[l]=d.length===1?d[0]:d:kl(this,l)}return this};Le.prototype.removeAllListeners=function(t){var n;return t?(n=He?He+t:t,this._events[n]&&kl(this,n)):(this._events=new La,this._eventsCount=0),this};Le.prototype.off=Le.prototype.removeListener;Le.prototype.addListener=Le.prototype.on;Le.prefixed=He;Le.EventEmitter=Le;Df=Le;var ys={};gs(ys,"ConnectionType",()=>Gi);gs(ys,"PeerErrorType",()=>_e);gs(ys,"BaseConnectionErrorType",()=>gf);gs(ys,"DataConnectionErrorType",()=>Of);gs(ys,"SerializationType",()=>Xl);gs(ys,"SocketEventType",()=>ji);gs(ys,"ServerMessageType",()=>Ne);var Gi=(function(r){return r.Data="data",r.Media="media",r})({}),_e=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),gf=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),Of=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Xl=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),ji=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),Ne=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const T_="1.5.5";class ME extends Df.EventEmitter{constructor(t,n,s,o,l,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const h=t?"wss://":"ws://";this._baseUrl=h+n+":"+s+o+"peerjs?key="+l}start(t,n){this._id=t;const s=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+T_),this._disconnected=!1,this._socket.onmessage=o=>{let l;try{l=JSON.parse(o.data),ot.log("Server message received:",l)}catch{ot.log("Invalid server message",o.data);return}this.emit(ji.Message,l)},this._socket.onclose=o=>{this._disconnected||(ot.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(ji.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),ot.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){ot.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Ne.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(ji.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class E_{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Gi.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const s=this.connection,o={ordered:!!t.reliable},l=n.createDataChannel(s.label,o);s._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){ot.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,s=this.connection.connectionId,o=this.connection.type,l=this.connection.provider;ot.log("Listening for ICE candidates."),t.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(ot.log(`Received ICE candidates for ${n}:`,u.candidate),l.socket.send({type:Ne.Candidate,payload:{candidate:u.candidate,type:o,connectionId:s},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":ot.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(gf.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":ot.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(gf.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":ot.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},ot.log("Listening for data channel"),t.ondatachannel=u=>{ot.log("Received data channel");const h=u.channel;l.getConnection(n,s)._initializeDataChannel(h)},ot.log("Listening for remote stream"),t.ontrack=u=>{ot.log("Received remote stream");const h=u.streams[0],d=l.getConnection(n,s);if(d.type===Gi.Media){const m=d;this._addStreamToMediaConnection(h,m)}}}cleanup(){ot.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let s=!1;const o=this.connection.dataChannel;o&&(s=!!o.readyState&&o.readyState!=="closed"),(n||s)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createOffer(this.connection.options.constraints);ot.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),ot.log("Set localDescription:",s,`for:${this.connection.peer}`);let o={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Gi.Data){const l=this.connection;o={...o,label:l.label,reliable:l.reliable,serialization:l.serialization}}n.socket.send({type:Ne.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(_e.WebRTC,o),ot.log("Failed to setLocalDescription, ",o))}}catch(s){n.emitError(_e.WebRTC,s),ot.log("Failed to createOffer, ",s)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createAnswer();ot.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),ot.log("Set localDescription:",s,`for:${this.connection.peer}`),n.socket.send({type:Ne.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(_e.WebRTC,o),ot.log("Failed to setLocalDescription, ",o)}}catch(s){n.emitError(_e.WebRTC,s),ot.log("Failed to create answer, ",s)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const s=this.connection.peerConnection,o=this.connection.provider;ot.log("Setting remote description",n);const l=this;try{await s.setRemoteDescription(n),ot.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await l._makeAnswer()}catch(u){o.emitError(_e.WebRTC,u),ot.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(t){ot.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),ot.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(_e.WebRTC,n),ot.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(ot.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return ot.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(s=>{n.addTrack(s,t)})}_addStreamToMediaConnection(t,n){ot.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class M_ extends Df.EventEmitter{emitError(t,n){ot.error("Error:",n),this.emit("error",new wE(`${t}`,n))}}class wE extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class w_ extends M_{get open(){return this._open}constructor(t,n,s){super(),this.peer=t,this.provider=n,this.options=s,this._open=!1,this.metadata=s.metadata}}class jl extends w_{static#t=this.ID_PREFIX="mc_";get type(){return Gi.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,s){super(t,n,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||jl.ID_PREFIX+Ke.randomToken(),this._negotiator=new E_(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{ot.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{ot.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){ot.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,s=t.payload;switch(t.type){case Ne.Answer:this._negotiator.handleSDP(n,s.sdp),this._open=!0;break;case Ne.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:ot.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){ot.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const s=this.provider._getMessages(this.connectionId);for(const o of s)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class RE{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:s,port:o,path:l,key:u}=this._options,h=new URL(`${n}://${s}:${o}${l}${u}/${t}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",T_),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){ot.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Ke.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Ke.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw ot.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Gl extends w_{static#t=this.ID_PREFIX="dc_";static#e=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Gi.Data}constructor(t,n,s){super(t,n,s),this.connectionId=this.options.connectionId||Gl.ID_PREFIX+C_(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new E_(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{ot.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{ot.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{ot.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Of.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Ne.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Ne.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:ot.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class zf extends Gl{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Gl.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return ot.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Ih extends zf{close(t){super.close(t),this._chunkedData={}}constructor(t,n,s){super(t,n,s),this.chunker=new S_,this.serialization=Xl.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=Hx(t),s=n.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,s=this._chunkedData[n]||{data:[],count:0,total:t.total};if(s.data[t.n]=new Uint8Array(t.data),s.count++,this._chunkedData[n]=s,s.total===s.count){delete this._chunkedData[n];const o=bE(s.data);this._handleDataMessage({data:o})}}_send(t,n){const s=Fx(t);if(s instanceof Promise)return this._send_blob(s);if(!n&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);ot.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const s of n)this.send(s,!0)}}class BE extends zf{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Xl.None}}class kE extends zf{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),s=n.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const s=this.encoder.encode(this.stringify(t));if(s.byteLength>=Ke.chunkedMTU){this.emitError(Of.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...t){super(...t),this.serialization=Xl.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Uf extends M_{static#t=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,s]of this._connections)t[n]=s;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:BE,json:kE,binary:Ih,"binary-utf8":Ih,default:Ih},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(t&&t.constructor==Object?n=t:t&&(s=t.toString()),n={debug:0,host:Ke.CLOUD_HOST,port:Ke.CLOUD_PORT,path:"/",key:Uf.DEFAULT_KEY,token:Ke.randomToken(),config:Ke.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ke.CLOUD_HOST?this._options.secure=Ke.isSecure():this._options.host==Ke.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&ot.setLogFunction(this._options.logFunction),ot.logLevel=this._options.debug||0,this._api=new RE(n),this._socket=this._createServerConnection(),!Ke.supports.audioVideo&&!Ke.supports.data){this._delayedAbort(_e.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!Ke.validateId(s)){this._delayedAbort(_e.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(_e.ServerError,o))}_createServerConnection(){const t=new ME(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(ji.Message,n=>{this._handleMessage(n)}),t.on(ji.Error,n=>{this._abort(_e.SocketError,n)}),t.on(ji.Disconnected,()=>{this.disconnected||(this.emitError(_e.Network,"Lost connection to server."),this.disconnect())}),t.on(ji.Close,()=>{this.disconnected||this._abort(_e.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,s=t.payload,o=t.src;switch(n){case Ne.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ne.Error:this._abort(_e.ServerError,s.msg);break;case Ne.IdTaken:this._abort(_e.UnavailableID,`ID "${this.id}" is taken`);break;case Ne.InvalidKey:this._abort(_e.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ne.Leave:ot.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case Ne.Expire:this.emitError(_e.PeerUnavailable,`Could not connect to peer ${o}`);break;case Ne.Offer:{const l=s.connectionId;let u=this.getConnection(o,l);if(u&&(u.close(),ot.warn(`Offer received for existing Connection ID:${l}`)),s.type===Gi.Media){const d=new jl(o,this,{connectionId:l,_payload:s,metadata:s.metadata});u=d,this._addConnection(o,u),this.emit("call",d)}else if(s.type===Gi.Data){const d=new this._serializers[s.serialization](o,this,{connectionId:l,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});u=d,this._addConnection(o,u),this.emit("connection",d)}else{ot.warn(`Received malformed connection type:${s.type}`);return}const h=this._getMessages(l);for(const d of h)u.handleMessage(d);break}default:{if(!s){ot.warn(`You received a malformed message from ${o} of type ${n}`);return}const l=s.connectionId,u=this.getConnection(o,l);u&&u.peerConnection?u.handleMessage(t):l?this._storeMessage(l,t):ot.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){ot.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(_e.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,s),s}call(t,n,s={}){if(this.disconnected){ot.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(_e.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){ot.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new jl(t,this,{...s,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){ot.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const s=this._connections.get(t);if(!s)return null;for(const o of s)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){ot.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(ot.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const s of n)s.close()}disconnect(){if(this.disconnected)return;const t=this.id;ot.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)ot.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)ot.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(_e.ServerError,n))}}class DE{peer=null;connections=[];hostConnection=null;constructor(){}initialize(t){return new Promise((n,s)=>{this.peer=new Uf(t),this.peer.on("open",o=>{console.log("My Peer ID is: "+o),n(o)}),this.peer.on("connection",o=>{this.handleConnection(o)}),this.peer.on("error",o=>{console.error(o),s(o)})})}connectToHost(t){if(!this.peer)return;const n=this.peer.connect(t);this.hostConnection=n,n.on("open",()=>{console.log("Connected to host"),n.send({type:"REQUEST_STATE"})}),n.on("data",s=>{this.handleData(s,n)})}handleConnection(t){this.connections.push(t),t.on("data",n=>{this.handleData(n,t)}),t.on("close",()=>{this.connections=this.connections.filter(n=>n!==t)})}handleData(t,n){const s=St.getState();switch(console.log("Received data:",t),t.type){case"SYNC_STATE":s.syncState(t.payload);break;case"REQUEST_STATE":s.isHost&&n.send({type:"SYNC_STATE",payload:{tokens:s.tokens,map:s.map,chat:s.chat}});break;case"ACTION":this.applyAction(t.action,t.payload),s.isHost&&this.broadcast({type:"ACTION",action:t.action,payload:t.payload},n.peer);break}}applyAction(t,n){const s=St.getState();switch(t){case"ADD_TOKEN":s.addToken(n);break;case"UPDATE_TOKEN":s.updateToken(n.id,n.data);break;case"ADD_CHAT":s.addChatMessage(n);break;case"UPDATE_MAP":s.setMapBackground(n.url);break}}broadcast(t,n){this.connections.forEach(s=>{s.peer!==n&&s.send(t)})}sendAction(t,n){this.applyAction(t,n);const s={type:"ACTION",action:t,payload:n};this.hostConnection?this.hostConnection.send(s):this.broadcast(s)}}const be=new DE,OE=({onEditToken:r})=>{const t=Dt.useRef(null),n=Dt.useRef(null),s=St(S=>S.map),o=St(S=>S.tokens),l=St(S=>S.myId),u=St(S=>S.isHost),h=Dt.useRef(new An),d=Dt.useRef(new An),m=Dt.useRef(new An),g=Dt.useRef(new An),y=Dt.useRef(null);return Dt.useEffect(()=>t.current?((async()=>{const _=new px;await _.init({resizeTo:t.current,backgroundColor:1710618,antialias:!0}),t.current.appendChild(_.canvas),n.current=_,_.stage.addChild(h.current),h.current.addChild(d.current),h.current.addChild(m.current),h.current.addChild(g.current);let T=!1,E=!1,M={x:0,y:0},R={x:0,y:0};_.canvas.addEventListener("mousedown",B=>{const O=_.canvas.getBoundingClientRect(),P=B.clientX-O.left,Z=B.clientY-O.top;if(B.shiftKey&&St.getState().isHost){E=!0;const X=P,H=Z,st=(X-h.current.position.x)/h.current.scale.x,it=(H-h.current.position.y)/h.current.scale.y;R={x:st,y:it}}else(B.button===1||B.button===0&&B.altKey)&&(T=!0,M={x:B.clientX,y:B.clientY})}),window.addEventListener("mouseup",B=>{if(T=!1,E){E=!1,g.current.removeChildren();const O=_.canvas.getBoundingClientRect(),P=B.clientX-O.left,Z=B.clientY-O.top,X=(P-h.current.position.x)/h.current.scale.x,H=(Z-h.current.position.y)/h.current.scale.y,st=X-R.x,it=H-R.y,tt=Math.sqrt(st*st+it*it);tt>5&&(be.sendAction("SYNC_STATE",{map:{...St.getState().map,revealedAreas:[...St.getState().map.revealedAreas,{x:R.x,y:R.y,radius:tt}]}}),St.getState().revealArea(R.x,R.y,tt))}}),window.addEventListener("mousemove",B=>{if(T){const O=B.clientX-M.x,P=B.clientY-M.y;h.current.position.x+=O,h.current.position.y+=P,M={x:B.clientX,y:B.clientY}}else if(E){const O=_.canvas.getBoundingClientRect(),P=B.clientX-O.left,Z=B.clientY-O.top,X=(P-h.current.position.x)/h.current.scale.x,H=(Z-h.current.position.y)/h.current.scale.y,st=X-R.x,it=H-R.y,tt=Math.sqrt(st*st+it*it);g.current.removeChildren();const nt=new li;nt.circle(R.x,R.y,tt),nt.fill({color:16777215,alpha:.3}),nt.stroke({width:2,color:16776960}),g.current.addChild(nt)}}),_.canvas.addEventListener("wheel",B=>{B.preventDefault();const O=1.1,P=B.deltaY<0?h.current.scale.x*O:h.current.scale.x/O;P>.1&&P<5&&h.current.scale.set(P)})})(),()=>{n.current?.destroy({removeView:!0})}):void 0,[]),Dt.useEffect(()=>{(async()=>{if(!(!s.url||!n.current))try{const _=await Ea.load(s.url);y.current&&h.current.removeChild(y.current);const T=new dr(_);y.current=T,h.current.addChildAt(T,0)}catch(_){console.error("Failed to load map bg",_)}})()},[s.url]),Dt.useEffect(()=>{d.current.removeChildren(),o.forEach(S=>{if(S.hidden&&!u)return;const _=new li;if(_.circle(0,0,s.scale/2-2),_.fill(16711680),_.stroke({width:2,color:16777215}),S.hidden&&(_.alpha=.5),_.position.set(S.x*s.scale+s.scale/2,S.y*s.scale+s.scale/2),S.stats&&S.stats.maxHp>0){const R=s.scale*.8,B=4,O=Math.max(0,Math.min(1,S.stats.hp/S.stats.maxHp)),P=new li;P.rect(-R/2,-s.scale/2-8,R,B),P.fill(16711680);const Z=new li;Z.rect(-R/2,-s.scale/2-8,R*O,B),Z.fill(65280),_.addChild(P),_.addChild(Z)}if(S.conditions&&S.conditions.length>0){const B=-Math.PI/4,O={poisoned:65280,prone:16776960,stunned:65535,invisible:11189196};S.conditions.forEach((P,Z)=>{const X=B+Z*Math.PI/4,H=s.scale/2-2,st=Math.cos(X)*H,it=Math.sin(X)*H,tt=new li;tt.circle(st,it,4),tt.fill(O[P.toLowerCase()]||16777215),tt.stroke({width:1,color:0}),_.addChild(tt)})}_.eventMode="static",_.cursor="pointer";let T=null,E={x:0,y:0},M=0;(u||S.ownerId===l)&&(_.on("pointerdown",R=>{if(R.button===0){const B=Date.now();B-M<300&&r&&r(S.id),M=B,T=R,_.alpha=S.hidden?.3:.5,E={x:_.x,y:_.y},R.stopPropagation()}}),_.on("rightclick",R=>{u&&(R.stopPropagation(),setTimeout(()=>{confirm(`Manage Token?
OK: Toggle Visibility (Current: ${S.hidden?"Hidden":"Visible"})
Cancel: Delete Token`)&&be.sendAction("UPDATE_TOKEN",{id:S.id,data:{hidden:!S.hidden}})},10))}),_.on("rightclick",R=>{u&&(R.stopPropagation(),R.preventDefault(),be.sendAction("UPDATE_TOKEN",{id:S.id,data:{hidden:!S.hidden}}))}),_.on("pointermove",R=>{if(T){const B=R.getLocalPosition(_.parent);_.position.set(B.x,B.y)}}),_.on("pointerup",()=>{if(T){T=null,_.alpha=S.hidden?.5:1;const R=Math.floor(_.x/s.scale),B=Math.floor(_.y/s.scale);be.sendAction("UPDATE_TOKEN",{id:S.id,data:{x:R,y:B}})}}),_.on("pointerupoutside",()=>{T=null,_.alpha=S.hidden?.5:1,_.position.set(E.x,E.y)})),d.current.addChild(_)})},[o,s.scale,u,l,s.url]),Dt.useEffect(()=>{if(m.current.removeChildren(),!s.fogEnabled){m.current.visible=!1;return}m.current.visible=!0;const S=new li;S.rect(-1e4,-1e4,2e4,2e4),s.revealedAreas.forEach(_=>{S.circle(_.x,_.y,_.radius),S.cut()}),S.fill({color:0,alpha:.95}),m.current.addChild(S)},[s.fogEnabled,s.revealedAreas]),$.jsx("div",{ref:t,className:"w-full h-full"})};const R_=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();const zE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const UE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase());const gy=r=>{const t=UE(r);return t.charAt(0).toUpperCase()+t.slice(1)};var NE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PE=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const LE=Dt.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:u,...h},d)=>Dt.createElement("svg",{ref:d,...NE,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:R_("lucide",o),...!l&&!PE(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,g])=>Dt.createElement(m,g)),...Array.isArray(l)?l:[l]]));const B_=(r,t)=>{const n=Dt.forwardRef(({className:s,...o},l)=>Dt.createElement(LE,{ref:l,iconNode:t,className:R_(`lucide-${zE(gy(r))}`,`lucide-${r}`,s),...o}));return n.displayName=gy(r),n};const jE=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],GE=B_("scroll",jE);const IE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],HE=B_("send",IE),FE=r=>{const t=r.match(/(\d+)d(\d+)([+-]\d+)?/);if(!t)return null;const n=parseInt(t[1]),s=parseInt(t[2]),o=t[3]?parseInt(t[3]):0;let l=0;const u=[];for(let h=0;h<n;h++){const d=Math.floor(Math.random()*s)+1;u.push(d),l+=d}return l+=o,{total:l,rolls:u,mod:o}},YE=()=>{const[r,t]=Dt.useState(""),n=St(m=>m.chat),s=St(m=>m.username),o=St(m=>m.myId),l=Dt.useRef(null),u=()=>{l.current?.scrollIntoView({behavior:"smooth"})};Dt.useEffect(u,[n]);const h=()=>{if(!r.trim())return;let m={id:lr(),senderId:o,senderName:s,timestamp:Date.now(),content:r,type:"text"};if(r.startsWith("/roll ")){const g=r.replace("/roll ","").trim(),y=FE(g);y?(m.type="roll",m.rollData={formula:g,result:y.total,details:`[${y.rolls.join(", ")}] ${y.mod?y.mod>0?"+"+y.mod:y.mod:""}`},m.content=`rolled ${g} = ${y.total}`):(m.type="system",m.content="Invalid dice formula. Use format like 1d20+5")}be.sendAction("ADD_CHAT",m),t("")},d=m=>{m.key==="Enter"&&h()};return $.jsxs("div",{className:"flex flex-col h-full bg-gray-900 border-l border-gray-700 w-80",children:[$.jsxs("div",{className:"p-3 border-b border-gray-700 bg-gray-800 font-bold text-gray-200 flex items-center gap-2",children:[$.jsx(GE,{size:18})," Chat & Logs"]}),$.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[n.map(m=>$.jsxs("div",{className:`text-sm ${m.type==="system"?"text-yellow-400 italic":""}`,children:[$.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[$.jsx("span",{className:"font-bold text-blue-400",children:m.senderName}),$.jsx("span",{children:new Date(m.timestamp).toLocaleTimeString()})]}),m.type==="roll"?$.jsxs("div",{className:"bg-gray-800 p-2 rounded border border-gray-700",children:[$.jsx("div",{className:"font-mono text-lg font-bold text-green-400",children:m.rollData?.result}),$.jsxs("div",{className:"text-xs text-gray-400",children:[m.rollData?.formula," (",m.rollData?.details,")"]})]}):$.jsx("div",{className:"text-gray-300 break-words",children:m.content})]},m.id)),$.jsx("div",{ref:l})]}),$.jsxs("div",{className:"p-3 bg-gray-800 border-t border-gray-700 flex gap-2",children:[$.jsx("input",{className:"flex-1 bg-gray-900 border border-gray-600 rounded px-2 py-1 text-sm text-white focus:border-blue-500 outline-none",value:r,onChange:m=>t(m.target.value),onKeyDown:d,placeholder:"/roll 1d20 or message..."}),$.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-500 rounded px-3 py-1 flex items-center justify-center text-white",children:$.jsx(HE,{size:16})})]}),$.jsx("div",{className:"grid grid-cols-4 gap-1 p-2 bg-gray-800 border-t border-gray-700",children:["d4","d6","d8","d10","d12","d20","d100"].map(m=>$.jsx("button",{onClick:()=>{t(`/roll 1${m}`),h()},className:"bg-gray-700 hover:bg-gray-600 text-xs py-1 rounded text-gray-300",children:m},m))})]})},VE=()=>{const r=St(h=>h.tokens),t=St(h=>h.turnOrder),n=St(h=>h.isHost),[s,o]=Dt.useState(0),l=t.map(h=>r.find(d=>d.id===h)).filter(Boolean),u=()=>{o(h=>(h+1)%l.length)};return l.length===0?null:$.jsxs("div",{className:"absolute top-4 left-4 bg-gray-900/90 border border-gray-700 rounded-lg p-3 text-white w-64 shadow-2xl backdrop-blur-sm z-50",children:[$.jsxs("h3",{className:"text-sm font-bold border-b border-gray-700 pb-2 mb-2 flex justify-between",children:["Initiative",n&&$.jsx("button",{onClick:u,className:"text-xs bg-blue-600 px-2 rounded hover:bg-blue-500",children:"Next"})]}),$.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:l.map((h,d)=>$.jsxs("div",{className:`flex items-center gap-2 p-2 rounded text-sm ${d===s?"bg-blue-900/50 border border-blue-500":"bg-gray-800"}`,children:[$.jsx("span",{className:"font-mono text-gray-500 text-xs",children:d+1+"."}),$.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500 border border-white flex-shrink-0"}),$.jsx("span",{className:"flex-1 truncate",children:h?.label||"Unknown"}),$.jsxs("div",{className:"text-xs font-bold text-yellow-500",children:["HP: ",h?.stats?.hp]})]},h?.id))})]})},XE=({tokenId:r,onClose:t})=>{const n=St(E=>E.tokens.find(M=>M.id===r)),[s,o]=Dt.useState(""),[l,u]=Dt.useState(0),[h,d]=Dt.useState(0),[m,g]=Dt.useState(0),[y,S]=Dt.useState([]),_=["Poisoned","Prone","Stunned","Invisible"];Dt.useEffect(()=>{n&&(o(n.label||"Unknown"),u(n.stats?.hp||0),d(n.stats?.maxHp||0),g(n.stats?.ac||10),S(n.conditions||[]))},[n]);const T=()=>{n&&(be.sendAction("UPDATE_TOKEN",{id:n.id,data:{label:s,stats:{hp:l,maxHp:h,ac:m},conditions:y}}),t())};return n?$.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:$.jsxs("div",{className:"bg-gray-800 border border-gray-600 p-6 rounded-lg w-96 shadow-2xl",children:[$.jsxs("h2",{className:"text-xl font-bold mb-4 text-purple-400",children:["Edit Token: ",s]}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs text-gray-400",children:"Name / Label"}),$.jsx("input",{type:"text",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:s,onChange:E=>o(E.target.value)})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs text-gray-400",children:"Current HP"}),$.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:l,onChange:E=>u(Number(E.target.value))})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs text-gray-400",children:"Max HP"}),$.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:h,onChange:E=>d(Number(E.target.value))})]})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs text-gray-400",children:"Armour Class (AC)"}),$.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:m,onChange:E=>g(Number(E.target.value))})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Conditions"}),$.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(E=>$.jsxs("label",{className:"flex items-center gap-1 bg-gray-900 px-2 py-1 rounded text-xs select-none cursor-pointer border border-gray-700 hover:border-gray-500",children:[$.jsx("input",{type:"checkbox",checked:y.includes(E),onChange:M=>{M.target.checked?S([...y,E]):S(y.filter(R=>R!==E))},className:"accent-purple-500"}),E]},E))})]})]}),$.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[$.jsx("button",{onClick:t,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"}),$.jsx("button",{onClick:T,className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded font-bold",children:"Save"})]})]})}):null},qE=()=>{const r=St(_=>_.macros),t=St(_=>_.addMacro),n=St(_=>_.removeMacro),s=St(_=>_.myId),o=St(_=>_.username),[l,u]=Dt.useState(!1),[h,d]=Dt.useState(""),[m,g]=Dt.useState(""),y=_=>{if(_.command.startsWith("/roll ")){const T=_.command.replace("/roll ","").trim(),E=T.match(/(\d+)d(\d+)(.*?)([\+\-]\d+)?$/);if(E){const M=parseInt(E[1])||1,R=parseInt(E[2])||20,B=E[4]||"",O=parseInt(B)||0;let P=0;const Z=[];for(let it=0;it<M;it++){const tt=Math.floor(Math.random()*R)+1;Z.push(tt),P+=tt}const X=P+O,H={formula:T,result:X,details:`[${Z.join(", ")}] ${B}`},st={id:lr(),senderId:s,senderName:o,timestamp:Date.now(),content:`${_.label} (${T})`,type:"roll",rollData:H};be.sendAction("CHAT_MESSAGE",st),St.getState().addChatMessage(st)}else{const M={id:lr(),senderId:s,senderName:o,timestamp:Date.now(),content:`[Macro: ${_.label}] ${_.command}`,type:"text"};be.sendAction("CHAT_MESSAGE",M),St.getState().addChatMessage(M)}}else{const T={id:lr(),senderId:s,senderName:o,timestamp:Date.now(),content:`[Macro: ${_.label}] ${_.command}`,type:"text"};be.sendAction("CHAT_MESSAGE",T),St.getState().addChatMessage(T)}},S=()=>{!h||!m||(t({id:lr(),label:h,command:m}),d(""),g(""),u(!1))};return $.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-900 border-t border-gray-700 pointer-events-auto",children:[$.jsx("span",{className:"text-gray-500 text-xs font-bold uppercase mr-2",children:"Macros"}),r.map(_=>$.jsxs("div",{className:"group relative flex items-center",children:[$.jsx("button",{onClick:()=>y(_),className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 text-purple-300 font-mono text-sm rounded border border-gray-600 transition-colors",title:_.command,children:_.label}),$.jsx("button",{onClick:()=>n(_.id),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},_.id)),l?$.jsxs("div",{className:"flex gap-2 items-center bg-gray-800 p-1 rounded border border-gray-600 ml-2",children:[$.jsx("input",{type:"text",placeholder:"Label (e.g. Attack)",className:"bg-gray-900 px-2 py-1 text-xs rounded w-24 text-white",value:h,onChange:_=>d(_.target.value)}),$.jsx("input",{type:"text",placeholder:"Cmd (e.g. /roll 1d20+5)",className:"bg-gray-900 px-2 py-1 text-xs rounded w-32 text-white",value:m,onChange:_=>g(_.target.value)}),$.jsx("button",{onClick:S,className:"text-green-400 hover:text-green-300 px-2 text-xs font-bold",children:""}),$.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-300 px-2 text-xs",children:""})]}):$.jsx("button",{onClick:()=>u(!0),className:"ml-2 w-7 h-7 flex items-center justify-center bg-gray-800 hover:bg-gray-700 border border-gray-600 border-dashed rounded text-gray-400",title:"Add Macro",children:"+"})]})},$E=()=>{const r=St(h=>h.audio),t=St(h=>h.isHost),[n,s]=Dt.useState(""),o=Dt.useRef(null);Dt.useEffect(()=>{if(!o.current)return;const h=o.current;r.url&&r.isPlaying?(h.src!==r.url&&(h.src=r.url),h.play().catch(d=>console.error("Auto-play prevented",d))):(h.pause(),r.url||(h.src=""))},[r]);const l=()=>{n&&(be.sendAction("PLAY_AUDIO",{url:n,isPlaying:!0}),St.getState().setAudio(n,!0),s(""))},u=()=>{be.sendAction("PLAY_AUDIO",{url:null,isPlaying:!1}),St.getState().setAudio(null,!1)};return t?$.jsxs("div",{className:"mt-4 p-3 bg-gray-900 border border-gray-700 rounded-lg",children:[$.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-2 flex items-center gap-2",children:" Jukebox (Host Controls)"}),$.jsxs("div",{className:"flex flex-col gap-2",children:[$.jsx("input",{type:"text",placeholder:"Audio URL (mp3/wav)",className:"w-full bg-gray-800 border border-gray-600 px-2 py-1 rounded text-xs text-white",value:n,onChange:h=>s(h.target.value)}),$.jsxs("div",{className:"flex gap-2",children:[$.jsx("button",{onClick:l,disabled:!n,className:"flex-1 bg-green-700 hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs py-1 rounded font-bold",children:"Play"}),$.jsx("button",{onClick:u,disabled:!r.isPlaying,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs py-1 rounded font-bold",children:"Stop"})]}),$.jsxs("div",{className:"text-[10px] text-gray-500 mt-1 truncate",children:["Now playing: ",r.isPlaying&&r.url?r.url.split("/").pop():"None"]})]}),$.jsx("audio",{ref:o,loop:!0,hidden:!0})]}):$.jsxs("div",{className:"mt-4 p-3 bg-gray-900 border border-gray-700 rounded-lg",children:[$.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-2 flex items-center gap-2",children:" Jukebox"}),$.jsx("div",{className:"text-xs text-gray-400",children:r.isPlaying?"Playing track...":"Stopped"}),$.jsx("audio",{ref:o,loop:!0,hidden:!0})]})};function QE(){const[r,t]=Dt.useState(""),[n,s]=Dt.useState(null),o=St(d=>d.myId),l=St(d=>d.setIdentity);Dt.useEffect(()=>{be.initialize().then(d=>{l(d,!0)}).catch(console.error)},[]);const u=()=>{r&&(l(o,!1),be.connectToHost(r))},h=()=>{const d={id:Date.now().toString(),x:3,y:3,size:1,image:"",label:"Hero",stats:{hp:20,maxHp:20,ac:14}};be.sendAction("ADD_TOKEN",d)};return $.jsxs("div",{className:"flex h-screen w-screen bg-gray-900 text-white overflow-hidden font-sans",children:[$.jsxs("div",{className:"w-64 bg-gray-800 flex flex-col border-r border-gray-700 z-10 shadow-xl",children:[$.jsxs("div",{className:"p-4 border-b border-gray-700",children:[$.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent mb-4",children:"VTT RPG"}),$.jsxs("div",{className:"p-3 bg-gray-700 rounded-lg text-sm",children:[$.jsxs("div",{className:"mb-2",children:[$.jsx("span",{className:"text-gray-400",children:"My ID:"}),$.jsx("code",{className:"block mt-1 p-1 bg-black rounded select-all text-xs break-all cursor-pointer hover:bg-gray-900",title:"Click to Copy",onClick:()=>navigator.clipboard.writeText(o),children:o})]}),$.jsxs("div",{className:"flex gap-2",children:[$.jsx("input",{type:"text",placeholder:"Host ID to join...",className:"flex-1 px-2 py-1 bg-gray-900 rounded border border-gray-600 text-xs text-white",value:r,onChange:d=>t(d.target.value)}),$.jsx("button",{onClick:u,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-xs font-bold",children:"Join"})]})]})]}),$.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[$.jsx("h2",{className:"text-xs font-bold uppercase text-gray-500 mb-2",children:"Tools"}),$.jsxs("div",{className:"flex flex-col gap-2",children:[$.jsxs("label",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors cursor-pointer block",children:[$.jsx("span",{children:"Upload Map"}),$.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>{const m=d.target.files?.[0];if(m){const g=new FileReader;g.onload=y=>{const S=y.target?.result;be.sendAction("UPDATE_MAP",{url:S})},g.readAsDataURL(m)}}})]}),$.jsxs("label",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors cursor-pointer block",children:[$.jsx("span",{children:"Add Token (Image)"}),$.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>{const m=d.target.files?.[0];if(m){const g=new FileReader;g.onload=y=>{const S=y.target?.result,_={id:Date.now().toString(),x:3,y:3,size:1,image:S,label:"Token",stats:{hp:10,maxHp:10,ac:10}};be.sendAction("ADD_TOKEN",_)},g.readAsDataURL(m)}}})]}),$.jsx("button",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors",onClick:h,children:"Add Basic Token"}),St.getState().isHost&&$.jsxs("div",{className:"mt-4 p-2 bg-gray-900 border border-gray-700 rounded-lg space-y-2",children:[$.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 flex items-center gap-2",children:" Fog of War"}),$.jsxs("div",{className:"flex gap-2",children:[$.jsx("button",{onClick:()=>{const d=!St.getState().map.fogEnabled;St.getState().toggleFog(d),be.sendAction("SYNC_STATE",{map:St.getState().map})},className:`flex-1 text-xs py-1 rounded font-bold ${St.getState().map.fogEnabled?"bg-red-700 hover:bg-red-600":"bg-green-700 hover:bg-green-600"}`,children:St.getState().map.fogEnabled?"Disable Fog":"Enable Fog"}),$.jsx("button",{onClick:()=>{St.getState().resetFog(),be.sendAction("SYNC_STATE",{map:St.getState().map})},className:"flex-1 text-xs py-1 rounded font-bold bg-gray-700 hover:bg-gray-600 text-white",children:"Reset Vision"})]}),$.jsxs("p",{className:"text-[10px] text-gray-500",children:["Hold ",$.jsx("kbd",{className:"bg-gray-800 px-1 rounded",children:"Shift"})," and drag on map to reveal areas."]})]}),$.jsxs("div",{className:"mt-4 p-2 bg-yellow-900/30 border border-yellow-700/50 rounded text-xs text-yellow-200",children:[$.jsx("p",{children:"Debug Info:"}),$.jsxs("p",{children:["Connected: ",be.hostConnection?"Yes":"No"]})]}),$.jsx($E,{}),$.jsxs("div",{className:"border-t border-gray-700 my-2 pt-2 space-y-2",children:[$.jsx("button",{className:"w-full text-left px-3 py-2 bg-green-900/50 hover:bg-green-800 rounded text-sm transition-colors text-green-100 flex items-center gap-2",onClick:()=>{const d=St.getState(),m={tokens:d.tokens,map:d.map,chat:d.chat,turnOrder:d.turnOrder,version:1},g=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),y=URL.createObjectURL(g),S=document.createElement("a");S.href=y,S.download=`vtt-save-${new Date().toISOString().slice(0,10)}.json`,S.click(),URL.revokeObjectURL(y)},children:" Save Campaign"}),$.jsxs("label",{className:"w-full text-left px-3 py-2 bg-blue-900/50 hover:bg-blue-800 rounded text-sm transition-colors text-blue-100 flex items-center gap-2 cursor-pointer block",children:[$.jsx("span",{children:" Load Campaign"}),$.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:d=>{const m=d.target.files?.[0];if(!m)return;const g=new FileReader;g.onload=y=>{try{const S=JSON.parse(y.target?.result);S.version===1&&(be.sendAction("SYNC_STATE",S),alert("Campaign loaded successfully!"))}catch(S){console.error(S),alert("Failed to load save file.")}},g.readAsText(m)}})]})]})]})]})]}),$.jsxs("div",{className:"flex-1 relative bg-black overflow-hidden flex flex-col",children:[$.jsxs("div",{className:"flex-1 relative",children:[$.jsx(OE,{onEditToken:s}),$.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:$.jsx("div",{className:"pointer-events-auto p-4 flex flex-col items-start gap-4",children:$.jsx(VE,{})})})]}),$.jsx(qE,{})]}),$.jsx(YE,{}),n&&$.jsx(XE,{tokenId:n,onClose:()=>s(null)})]})}av.createRoot(document.getElementById("root")).render($.jsx(va.StrictMode,{children:$.jsx(QE,{})}));export{Se as $,ux as A,We as B,An as C,ne as D,dt as E,My as F,Hl as G,kn as H,zy as I,a0 as J,dr as K,SS as L,Ot as M,kS as N,Ga as O,Pe as P,pe as Q,Kh as R,vf as S,fl as T,qh as U,QS as V,l0 as W,vh as X,c0 as Y,eS as Z,zl as _,Wy as a,Jv as a0,By as a1,hx as a2,Mt as a3,Qt as a4,tC as a5,AC as a6,yC as a7,FC as a8,VC as a9,WC as aa,ZC as ab,JC as ac,Ol as ad,Al as ae,nf as af,Q0 as ag,Ex as ah,A0 as ai,S0 as aj,K0 as ak,eT as al,te as am,li as an,Sv as ao,Ll as ap,Rx as aq,Dn as b,eA as c,pC as d,Oe as e,C0 as f,hC as g,Na as h,Cl as i,bf as j,ox as k,Hy as l,On as m,nx as n,lf as o,HC as p,YC as q,Nv as r,KC as s,$C as t,ce as u,Ut as v,ee as w,vv as x,tA as y,Tn as z};
