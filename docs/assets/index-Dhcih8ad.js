const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browserAll-Bv9VkfUD.js","./webworkerAll-D9OpwxbZ.js","./colorToUniform-BFbK2D2f.js","./WebGPURenderer-IB93M1Rh.js","./SharedSystems-C7GWJ1Jy.js","./WebGLRenderer-BtTuq_GR.js"])))=>i.map(i=>d[i]);
function K1(r,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Va(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hh={exports:{}},ma={};var Lg;function J1(){if(Lg)return ma;Lg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var h in o)h!=="key"&&(l[h]=o[h])}else l=o;return o=l.ref,{$$typeof:r,type:s,key:u,ref:o!==void 0?o:null,props:l}}return ma.Fragment=t,ma.jsx=n,ma.jsxs=n,ma}var Pg;function tv(){return Pg||(Pg=1,hh.exports=J1()),hh.exports}var j=tv(),fh={},ga={},jg;function ev(){if(jg)return ga;jg=1,ga.byteLength=h,ga.toByteArray=p,ga.fromByteArray=S;for(var r=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],t[s.charCodeAt(o)]=o;t[45]=62,t[95]=63;function u(b){var C=b.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=b.indexOf("=");E===-1&&(E=C);var w=E===C?0:4-E%4;return[E,w]}function h(b){var C=u(b),E=C[0],w=C[1];return(E+w)*3/4-w}function d(b,C,E){return(C+E)*3/4-E}function p(b){var C,E=u(b),w=E[0],k=E[1],U=new n(d(b,w,k)),M=0,O=k>0?w-4:w,I;for(I=0;I<O;I+=4)C=t[b.charCodeAt(I)]<<18|t[b.charCodeAt(I+1)]<<12|t[b.charCodeAt(I+2)]<<6|t[b.charCodeAt(I+3)],U[M++]=C>>16&255,U[M++]=C>>8&255,U[M++]=C&255;return k===2&&(C=t[b.charCodeAt(I)]<<2|t[b.charCodeAt(I+1)]>>4,U[M++]=C&255),k===1&&(C=t[b.charCodeAt(I)]<<10|t[b.charCodeAt(I+1)]<<4|t[b.charCodeAt(I+2)]>>2,U[M++]=C>>8&255,U[M++]=C&255),U}function g(b){return r[b>>18&63]+r[b>>12&63]+r[b>>6&63]+r[b&63]}function y(b,C,E){for(var w,k=[],U=C;U<E;U+=3)w=(b[U]<<16&16711680)+(b[U+1]<<8&65280)+(b[U+2]&255),k.push(g(w));return k.join("")}function S(b){for(var C,E=b.length,w=E%3,k=[],U=16383,M=0,O=E-w;M<O;M+=U)k.push(y(b,M,M+U>O?O:M+U));return w===1?(C=b[E-1],k.push(r[C>>2]+r[C<<4&63]+"==")):w===2&&(C=(b[E-2]<<8)+b[E-1],k.push(r[C>>10]+r[C>>4&63]+r[C<<2&63]+"=")),k.join("")}return ga}var fl={};var Gg;function nv(){return Gg||(Gg=1,fl.read=function(r,t,n,s,o){var l,u,h=o*8-s-1,d=(1<<h)-1,p=d>>1,g=-7,y=n?o-1:0,S=n?-1:1,b=r[t+y];for(y+=S,l=b&(1<<-g)-1,b>>=-g,g+=h;g>0;l=l*256+r[t+y],y+=S,g-=8);for(u=l&(1<<-g)-1,l>>=-g,g+=s;g>0;u=u*256+r[t+y],y+=S,g-=8);if(l===0)l=1-p;else{if(l===d)return u?NaN:(b?-1:1)*(1/0);u=u+Math.pow(2,s),l=l-p}return(b?-1:1)*u*Math.pow(2,l-s)},fl.write=function(r,t,n,s,o,l){var u,h,d,p=l*8-o-1,g=(1<<p)-1,y=g>>1,S=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=s?0:l-1,C=s?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,u=g):(u=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+y>=1?t+=S/d:t+=S*Math.pow(2,1-y),t*d>=2&&(u++,d/=2),u+y>=g?(h=0,u=g):u+y>=1?(h=(t*d-1)*Math.pow(2,o),u=u+y):(h=t*Math.pow(2,y-1)*Math.pow(2,o),u=0));o>=8;r[n+b]=h&255,b+=C,h/=256,o-=8);for(u=u<<o|h,p+=o;p>0;r[n+b]=u&255,b+=C,u/=256,p-=8);r[n+b-C]|=E*128}),fl}var Ig;function iv(){return Ig||(Ig=1,(function(r){const t=ev(),n=nv(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=U,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const T=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(T,x),T.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function u(T){if(T>o)throw new RangeError('The value "'+T+'" is invalid for option "size"');const x=new Uint8Array(T);return Object.setPrototypeOf(x,h.prototype),x}function h(T,x,_){if(typeof T=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(T)}return d(T,x,_)}h.poolSize=8192;function d(T,x,_){if(typeof T=="string")return S(T,x);if(ArrayBuffer.isView(T))return C(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(dn(T,ArrayBuffer)||T&&dn(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(dn(T,SharedArrayBuffer)||T&&dn(T.buffer,SharedArrayBuffer)))return E(T,x,_);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const R=T.valueOf&&T.valueOf();if(R!=null&&R!==T)return h.from(R,x,_);const P=w(T);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return h.from(T[Symbol.toPrimitive]("string"),x,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}h.from=function(T,x,_){return d(T,x,_)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function p(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function g(T,x,_){return p(T),T<=0?u(T):x!==void 0?typeof _=="string"?u(T).fill(x,_):u(T).fill(x):u(T)}h.alloc=function(T,x,_){return g(T,x,_)};function y(T){return p(T),u(T<0?0:k(T)|0)}h.allocUnsafe=function(T){return y(T)},h.allocUnsafeSlow=function(T){return y(T)};function S(T,x){if((typeof x!="string"||x==="")&&(x="utf8"),!h.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const _=M(T,x)|0;let R=u(_);const P=R.write(T,x);return P!==_&&(R=R.slice(0,P)),R}function b(T){const x=T.length<0?0:k(T.length)|0,_=u(x);for(let R=0;R<x;R+=1)_[R]=T[R]&255;return _}function C(T){if(dn(T,Uint8Array)){const x=new Uint8Array(T);return E(x.buffer,x.byteOffset,x.byteLength)}return b(T)}function E(T,x,_){if(x<0||T.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<x+(_||0))throw new RangeError('"length" is outside of buffer bounds');let R;return x===void 0&&_===void 0?R=new Uint8Array(T):_===void 0?R=new Uint8Array(T,x):R=new Uint8Array(T,x,_),Object.setPrototypeOf(R,h.prototype),R}function w(T){if(h.isBuffer(T)){const x=k(T.length)|0,_=u(x);return _.length===0||T.copy(_,0,0,x),_}if(T.length!==void 0)return typeof T.length!="number"||Cr(T.length)?u(0):b(T);if(T.type==="Buffer"&&Array.isArray(T.data))return b(T.data)}function k(T){if(T>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return T|0}function U(T){return+T!=T&&(T=0),h.alloc(+T)}h.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==h.prototype},h.compare=function(x,_){if(dn(x,Uint8Array)&&(x=h.from(x,x.offset,x.byteLength)),dn(_,Uint8Array)&&(_=h.from(_,_.offset,_.byteLength)),!h.isBuffer(x)||!h.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===_)return 0;let R=x.length,P=_.length;for(let q=0,tt=Math.min(R,P);q<tt;++q)if(x[q]!==_[q]){R=x[q],P=_[q];break}return R<P?-1:P<R?1:0},h.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(x,_){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return h.alloc(0);let R;if(_===void 0)for(_=0,R=0;R<x.length;++R)_+=x[R].length;const P=h.allocUnsafe(_);let q=0;for(R=0;R<x.length;++R){let tt=x[R];if(dn(tt,Uint8Array))q+tt.length>P.length?(h.isBuffer(tt)||(tt=h.from(tt)),tt.copy(P,q)):Uint8Array.prototype.set.call(P,tt,q);else if(h.isBuffer(tt))tt.copy(P,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=tt.length}return P};function M(T,x){if(h.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||dn(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const _=T.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&_===0)return 0;let P=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return pi(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return Cs(T).length;default:if(P)return R?-1:pi(T).length;x=(""+x).toLowerCase(),P=!0}}h.byteLength=M;function O(T,x,_){let R=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,x>>>=0,_<=x))return"";for(T||(T="utf8");;)switch(T){case"hex":return lt(this,x,_);case"utf8":case"utf-8":return ht(this,x,_);case"ascii":return L(this,x,_);case"latin1":case"binary":return at(this,x,_);case"base64":return yt(this,x,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,x,_);default:if(R)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),R=!0}}h.prototype._isBuffer=!0;function I(T,x,_){const R=T[x];T[x]=T[_],T[_]=R}h.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<x;_+=2)I(this,_,_+1);return this},h.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<x;_+=4)I(this,_,_+3),I(this,_+1,_+2);return this},h.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<x;_+=8)I(this,_,_+7),I(this,_+1,_+6),I(this,_+2,_+5),I(this,_+3,_+4);return this},h.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?ht(this,0,x):O.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(x){if(!h.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:h.compare(this,x)===0},h.prototype.inspect=function(){let x="";const _=r.INSPECT_MAX_BYTES;return x=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(x+=" ... "),"<Buffer "+x+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(x,_,R,P,q){if(dn(x,Uint8Array)&&(x=h.from(x,x.offset,x.byteLength)),!h.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(_===void 0&&(_=0),R===void 0&&(R=x?x.length:0),P===void 0&&(P=0),q===void 0&&(q=this.length),_<0||R>x.length||P<0||q>this.length)throw new RangeError("out of range index");if(P>=q&&_>=R)return 0;if(P>=q)return-1;if(_>=R)return 1;if(_>>>=0,R>>>=0,P>>>=0,q>>>=0,this===x)return 0;let tt=q-P,bt=R-_;const It=Math.min(tt,bt),Rt=this.slice(P,q),re=x.slice(_,R);for(let Yt=0;Yt<It;++Yt)if(Rt[Yt]!==re[Yt]){tt=Rt[Yt],bt=re[Yt];break}return tt<bt?-1:bt<tt?1:0};function Q(T,x,_,R,P){if(T.length===0)return-1;if(typeof _=="string"?(R=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,Cr(_)&&(_=P?0:T.length-1),_<0&&(_=T.length+_),_>=T.length){if(P)return-1;_=T.length-1}else if(_<0)if(P)_=0;else return-1;if(typeof x=="string"&&(x=h.from(x,R)),h.isBuffer(x))return x.length===0?-1:H(T,x,_,R,P);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(T,x,_):Uint8Array.prototype.lastIndexOf.call(T,x,_):H(T,[x],_,R,P);throw new TypeError("val must be string, number or Buffer")}function H(T,x,_,R,P){let q=1,tt=T.length,bt=x.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(T.length<2||x.length<2)return-1;q=2,tt/=2,bt/=2,_/=2}function It(re,Yt){return q===1?re[Yt]:re.readUInt16BE(Yt*q)}let Rt;if(P){let re=-1;for(Rt=_;Rt<tt;Rt++)if(It(T,Rt)===It(x,re===-1?0:Rt-re)){if(re===-1&&(re=Rt),Rt-re+1===bt)return re*q}else re!==-1&&(Rt-=Rt-re),re=-1}else for(_+bt>tt&&(_=tt-bt),Rt=_;Rt>=0;Rt--){let re=!0;for(let Yt=0;Yt<bt;Yt++)if(It(T,Rt+Yt)!==It(x,Yt)){re=!1;break}if(re)return Rt}return-1}h.prototype.includes=function(x,_,R){return this.indexOf(x,_,R)!==-1},h.prototype.indexOf=function(x,_,R){return Q(this,x,_,R,!0)},h.prototype.lastIndexOf=function(x,_,R){return Q(this,x,_,R,!1)};function st(T,x,_,R){_=Number(_)||0;const P=T.length-_;R?(R=Number(R),R>P&&(R=P)):R=P;const q=x.length;R>q/2&&(R=q/2);let tt;for(tt=0;tt<R;++tt){const bt=parseInt(x.substr(tt*2,2),16);if(Cr(bt))return tt;T[_+tt]=bt}return tt}function K(T,x,_,R){return mi(pi(x,T.length-_),T,_,R)}function J(T,x,_,R){return mi(vs(x),T,_,R)}function it(T,x,_,R){return mi(Cs(x),T,_,R)}function rt(T,x,_,R){return mi(Ss(x,T.length-_),T,_,R)}h.prototype.write=function(x,_,R,P){if(_===void 0)P="utf8",R=this.length,_=0;else if(R===void 0&&typeof _=="string")P=_,R=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(R)?(R=R>>>0,P===void 0&&(P="utf8")):(P=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-_;if((R===void 0||R>q)&&(R=q),x.length>0&&(R<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let tt=!1;for(;;)switch(P){case"hex":return st(this,x,_,R);case"utf8":case"utf-8":return K(this,x,_,R);case"ascii":case"latin1":case"binary":return J(this,x,_,R);case"base64":return it(this,x,_,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rt(this,x,_,R);default:if(tt)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),tt=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function yt(T,x,_){return x===0&&_===T.length?t.fromByteArray(T):t.fromByteArray(T.slice(x,_))}function ht(T,x,_){_=Math.min(T.length,_);const R=[];let P=x;for(;P<_;){const q=T[P];let tt=null,bt=q>239?4:q>223?3:q>191?2:1;if(P+bt<=_){let It,Rt,re,Yt;switch(bt){case 1:q<128&&(tt=q);break;case 2:It=T[P+1],(It&192)===128&&(Yt=(q&31)<<6|It&63,Yt>127&&(tt=Yt));break;case 3:It=T[P+1],Rt=T[P+2],(It&192)===128&&(Rt&192)===128&&(Yt=(q&15)<<12|(It&63)<<6|Rt&63,Yt>2047&&(Yt<55296||Yt>57343)&&(tt=Yt));break;case 4:It=T[P+1],Rt=T[P+2],re=T[P+3],(It&192)===128&&(Rt&192)===128&&(re&192)===128&&(Yt=(q&15)<<18|(It&63)<<12|(Rt&63)<<6|re&63,Yt>65535&&Yt<1114112&&(tt=Yt))}}tt===null?(tt=65533,bt=1):tt>65535&&(tt-=65536,R.push(tt>>>10&1023|55296),tt=56320|tt&1023),R.push(tt),P+=bt}return B(R)}const St=4096;function B(T){const x=T.length;if(x<=St)return String.fromCharCode.apply(String,T);let _="",R=0;for(;R<x;)_+=String.fromCharCode.apply(String,T.slice(R,R+=St));return _}function L(T,x,_){let R="";_=Math.min(T.length,_);for(let P=x;P<_;++P)R+=String.fromCharCode(T[P]&127);return R}function at(T,x,_){let R="";_=Math.min(T.length,_);for(let P=x;P<_;++P)R+=String.fromCharCode(T[P]);return R}function lt(T,x,_){const R=T.length;(!x||x<0)&&(x=0),(!_||_<0||_>R)&&(_=R);let P="";for(let q=x;q<_;++q)P+=Ie[T[q]];return P}function ct(T,x,_){const R=T.slice(x,_);let P="";for(let q=0;q<R.length-1;q+=2)P+=String.fromCharCode(R[q]+R[q+1]*256);return P}h.prototype.slice=function(x,_){const R=this.length;x=~~x,_=_===void 0?R:~~_,x<0?(x+=R,x<0&&(x=0)):x>R&&(x=R),_<0?(_+=R,_<0&&(_=0)):_>R&&(_=R),_<x&&(_=x);const P=this.subarray(x,_);return Object.setPrototypeOf(P,h.prototype),P};function D(T,x,_){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+x>_)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(x,_,R){x=x>>>0,_=_>>>0,R||D(x,_,this.length);let P=this[x],q=1,tt=0;for(;++tt<_&&(q*=256);)P+=this[x+tt]*q;return P},h.prototype.readUintBE=h.prototype.readUIntBE=function(x,_,R){x=x>>>0,_=_>>>0,R||D(x,_,this.length);let P=this[x+--_],q=1;for(;_>0&&(q*=256);)P+=this[x+--_]*q;return P},h.prototype.readUint8=h.prototype.readUInt8=function(x,_){return x=x>>>0,_||D(x,1,this.length),this[x]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(x,_){return x=x>>>0,_||D(x,2,this.length),this[x]|this[x+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(x,_){return x=x>>>0,_||D(x,2,this.length),this[x]<<8|this[x+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(x,_){return x=x>>>0,_||D(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(x,_){return x=x>>>0,_||D(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},h.prototype.readBigUInt64LE=Ln(function(x){x=x>>>0,we(x,"offset");const _=this[x],R=this[x+7];(_===void 0||R===void 0)&&de(x,this.length-8);const P=_+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,q=this[++x]+this[++x]*2**8+this[++x]*2**16+R*2**24;return BigInt(P)+(BigInt(q)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ln(function(x){x=x>>>0,we(x,"offset");const _=this[x],R=this[x+7];(_===void 0||R===void 0)&&de(x,this.length-8);const P=_*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],q=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+R;return(BigInt(P)<<BigInt(32))+BigInt(q)}),h.prototype.readIntLE=function(x,_,R){x=x>>>0,_=_>>>0,R||D(x,_,this.length);let P=this[x],q=1,tt=0;for(;++tt<_&&(q*=256);)P+=this[x+tt]*q;return q*=128,P>=q&&(P-=Math.pow(2,8*_)),P},h.prototype.readIntBE=function(x,_,R){x=x>>>0,_=_>>>0,R||D(x,_,this.length);let P=_,q=1,tt=this[x+--P];for(;P>0&&(q*=256);)tt+=this[x+--P]*q;return q*=128,tt>=q&&(tt-=Math.pow(2,8*_)),tt},h.prototype.readInt8=function(x,_){return x=x>>>0,_||D(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},h.prototype.readInt16LE=function(x,_){x=x>>>0,_||D(x,2,this.length);const R=this[x]|this[x+1]<<8;return R&32768?R|4294901760:R},h.prototype.readInt16BE=function(x,_){x=x>>>0,_||D(x,2,this.length);const R=this[x+1]|this[x]<<8;return R&32768?R|4294901760:R},h.prototype.readInt32LE=function(x,_){return x=x>>>0,_||D(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},h.prototype.readInt32BE=function(x,_){return x=x>>>0,_||D(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},h.prototype.readBigInt64LE=Ln(function(x){x=x>>>0,we(x,"offset");const _=this[x],R=this[x+7];(_===void 0||R===void 0)&&de(x,this.length-8);const P=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(R<<24);return(BigInt(P)<<BigInt(32))+BigInt(_+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),h.prototype.readBigInt64BE=Ln(function(x){x=x>>>0,we(x,"offset");const _=this[x],R=this[x+7];(_===void 0||R===void 0)&&de(x,this.length-8);const P=(_<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(P)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+R)}),h.prototype.readFloatLE=function(x,_){return x=x>>>0,_||D(x,4,this.length),n.read(this,x,!0,23,4)},h.prototype.readFloatBE=function(x,_){return x=x>>>0,_||D(x,4,this.length),n.read(this,x,!1,23,4)},h.prototype.readDoubleLE=function(x,_){return x=x>>>0,_||D(x,8,this.length),n.read(this,x,!0,52,8)},h.prototype.readDoubleBE=function(x,_){return x=x>>>0,_||D(x,8,this.length),n.read(this,x,!1,52,8)};function V(T,x,_,R,P,q){if(!h.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>P||x<q)throw new RangeError('"value" argument is out of bounds');if(_+R>T.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(x,_,R,P){if(x=+x,_=_>>>0,R=R>>>0,!P){const bt=Math.pow(2,8*R)-1;V(this,x,_,R,bt,0)}let q=1,tt=0;for(this[_]=x&255;++tt<R&&(q*=256);)this[_+tt]=x/q&255;return _+R},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(x,_,R,P){if(x=+x,_=_>>>0,R=R>>>0,!P){const bt=Math.pow(2,8*R)-1;V(this,x,_,R,bt,0)}let q=R-1,tt=1;for(this[_+q]=x&255;--q>=0&&(tt*=256);)this[_+q]=x/tt&255;return _+R},h.prototype.writeUint8=h.prototype.writeUInt8=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,1,255,0),this[_]=x&255,_+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,2,65535,0),this[_]=x&255,this[_+1]=x>>>8,_+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,2,65535,0),this[_]=x>>>8,this[_+1]=x&255,_+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,4,4294967295,0),this[_+3]=x>>>24,this[_+2]=x>>>16,this[_+1]=x>>>8,this[_]=x&255,_+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,4,4294967295,0),this[_]=x>>>24,this[_+1]=x>>>16,this[_+2]=x>>>8,this[_+3]=x&255,_+4};function ot(T,x,_,R,P){Xe(x,R,P,T,_,7);let q=Number(x&BigInt(4294967295));T[_++]=q,q=q>>8,T[_++]=q,q=q>>8,T[_++]=q,q=q>>8,T[_++]=q;let tt=Number(x>>BigInt(32)&BigInt(4294967295));return T[_++]=tt,tt=tt>>8,T[_++]=tt,tt=tt>>8,T[_++]=tt,tt=tt>>8,T[_++]=tt,_}function ut(T,x,_,R,P){Xe(x,R,P,T,_,7);let q=Number(x&BigInt(4294967295));T[_+7]=q,q=q>>8,T[_+6]=q,q=q>>8,T[_+5]=q,q=q>>8,T[_+4]=q;let tt=Number(x>>BigInt(32)&BigInt(4294967295));return T[_+3]=tt,tt=tt>>8,T[_+2]=tt,tt=tt>>8,T[_+1]=tt,tt=tt>>8,T[_]=tt,_+8}h.prototype.writeBigUInt64LE=Ln(function(x,_=0){return ot(this,x,_,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ln(function(x,_=0){return ut(this,x,_,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(x,_,R,P){if(x=+x,_=_>>>0,!P){const It=Math.pow(2,8*R-1);V(this,x,_,R,It-1,-It)}let q=0,tt=1,bt=0;for(this[_]=x&255;++q<R&&(tt*=256);)x<0&&bt===0&&this[_+q-1]!==0&&(bt=1),this[_+q]=(x/tt>>0)-bt&255;return _+R},h.prototype.writeIntBE=function(x,_,R,P){if(x=+x,_=_>>>0,!P){const It=Math.pow(2,8*R-1);V(this,x,_,R,It-1,-It)}let q=R-1,tt=1,bt=0;for(this[_+q]=x&255;--q>=0&&(tt*=256);)x<0&&bt===0&&this[_+q+1]!==0&&(bt=1),this[_+q]=(x/tt>>0)-bt&255;return _+R},h.prototype.writeInt8=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,1,127,-128),x<0&&(x=255+x+1),this[_]=x&255,_+1},h.prototype.writeInt16LE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,2,32767,-32768),this[_]=x&255,this[_+1]=x>>>8,_+2},h.prototype.writeInt16BE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,2,32767,-32768),this[_]=x>>>8,this[_+1]=x&255,_+2},h.prototype.writeInt32LE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,4,2147483647,-2147483648),this[_]=x&255,this[_+1]=x>>>8,this[_+2]=x>>>16,this[_+3]=x>>>24,_+4},h.prototype.writeInt32BE=function(x,_,R){return x=+x,_=_>>>0,R||V(this,x,_,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[_]=x>>>24,this[_+1]=x>>>16,this[_+2]=x>>>8,this[_+3]=x&255,_+4},h.prototype.writeBigInt64LE=Ln(function(x,_=0){return ot(this,x,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ln(function(x,_=0){return ut(this,x,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(T,x,_,R,P,q){if(_+R>T.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function Ct(T,x,_,R,P){return x=+x,_=_>>>0,P||gt(T,x,_,4),n.write(T,x,_,R,23,4),_+4}h.prototype.writeFloatLE=function(x,_,R){return Ct(this,x,_,!0,R)},h.prototype.writeFloatBE=function(x,_,R){return Ct(this,x,_,!1,R)};function Ot(T,x,_,R,P){return x=+x,_=_>>>0,P||gt(T,x,_,8),n.write(T,x,_,R,52,8),_+8}h.prototype.writeDoubleLE=function(x,_,R){return Ot(this,x,_,!0,R)},h.prototype.writeDoubleBE=function(x,_,R){return Ot(this,x,_,!1,R)},h.prototype.copy=function(x,_,R,P){if(!h.isBuffer(x))throw new TypeError("argument should be a Buffer");if(R||(R=0),!P&&P!==0&&(P=this.length),_>=x.length&&(_=x.length),_||(_=0),P>0&&P<R&&(P=R),P===R||x.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),x.length-_<P-R&&(P=x.length-_+R);const q=P-R;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,R,P):Uint8Array.prototype.set.call(x,this.subarray(R,P),_),q},h.prototype.fill=function(x,_,R,P){if(typeof x=="string"){if(typeof _=="string"?(P=_,_=0,R=this.length):typeof R=="string"&&(P=R,R=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!h.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(x.length===1){const tt=x.charCodeAt(0);(P==="utf8"&&tt<128||P==="latin1")&&(x=tt)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(_<0||this.length<_||this.length<R)throw new RangeError("Out of range index");if(R<=_)return this;_=_>>>0,R=R===void 0?this.length:R>>>0,x||(x=0);let q;if(typeof x=="number")for(q=_;q<R;++q)this[q]=x;else{const tt=h.isBuffer(x)?x:h.from(x,P),bt=tt.length;if(bt===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(q=0;q<R-_;++q)this[q+_]=tt[q%bt]}return this};const te={};function Ft(T,x,_){te[T]=class extends _{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}Ft("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ft("ERR_INVALID_ARG_TYPE",function(T,x){return`The "${T}" argument must be of type number. Received type ${typeof x}`},TypeError),Ft("ERR_OUT_OF_RANGE",function(T,x,_){let R=`The value of "${T}" is out of range.`,P=_;return Number.isInteger(_)&&Math.abs(_)>2**32?P=en(String(_)):typeof _=="bigint"&&(P=String(_),(_>BigInt(2)**BigInt(32)||_<-(BigInt(2)**BigInt(32)))&&(P=en(P)),P+="n"),R+=` It must be ${x}. Received ${P}`,R},RangeError);function en(T){let x="",_=T.length;const R=T[0]==="-"?1:0;for(;_>=R+4;_-=3)x=`_${T.slice(_-3,_)}${x}`;return`${T.slice(0,_)}${x}`}function Nn(T,x,_){we(x,"offset"),(T[x]===void 0||T[x+_]===void 0)&&de(x,T.length-(_+1))}function Xe(T,x,_,R,P,q){if(T>_||T<x){const tt=typeof x=="bigint"?"n":"";let bt;throw x===0||x===BigInt(0)?bt=`>= 0${tt} and < 2${tt} ** ${(q+1)*8}${tt}`:bt=`>= -(2${tt} ** ${(q+1)*8-1}${tt}) and < 2 ** ${(q+1)*8-1}${tt}`,new te.ERR_OUT_OF_RANGE("value",bt,T)}Nn(R,P,q)}function we(T,x){if(typeof T!="number")throw new te.ERR_INVALID_ARG_TYPE(x,"number",T)}function de(T,x,_){throw Math.floor(T)!==T?(we(T,_),new te.ERR_OUT_OF_RANGE("offset","an integer",T)):x<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,T)}const nn=/[^+/0-9A-Za-z-_]/g;function Yi(T){if(T=T.split("=")[0],T=T.trim().replace(nn,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function pi(T,x){x=x||1/0;let _;const R=T.length;let P=null;const q=[];for(let tt=0;tt<R;++tt){if(_=T.charCodeAt(tt),_>55295&&_<57344){if(!P){if(_>56319){(x-=3)>-1&&q.push(239,191,189);continue}else if(tt+1===R){(x-=3)>-1&&q.push(239,191,189);continue}P=_;continue}if(_<56320){(x-=3)>-1&&q.push(239,191,189),P=_;continue}_=(P-55296<<10|_-56320)+65536}else P&&(x-=3)>-1&&q.push(239,191,189);if(P=null,_<128){if((x-=1)<0)break;q.push(_)}else if(_<2048){if((x-=2)<0)break;q.push(_>>6|192,_&63|128)}else if(_<65536){if((x-=3)<0)break;q.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((x-=4)<0)break;q.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return q}function vs(T){const x=[];for(let _=0;_<T.length;++_)x.push(T.charCodeAt(_)&255);return x}function Ss(T,x){let _,R,P;const q=[];for(let tt=0;tt<T.length&&!((x-=2)<0);++tt)_=T.charCodeAt(tt),R=_>>8,P=_%256,q.push(P),q.push(R);return q}function Cs(T){return t.toByteArray(Yi(T))}function mi(T,x,_,R){let P;for(P=0;P<R&&!(P+_>=x.length||P>=T.length);++P)x[P+_]=T[P];return P}function dn(T,x){return T instanceof x||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===x.name}function Cr(T){return T!==T}const Ie=(function(){const T="0123456789abcdef",x=new Array(256);for(let _=0;_<16;++_){const R=_*16;for(let P=0;P<16;++P)x[R+P]=T[_]+T[P]}return x})();function Ln(T){return typeof BigInt>"u"?$a:T}function $a(){throw new Error("BigInt not supported")}})(fh)),fh}var sv=iv();window.global=window;window.Buffer=sv.Buffer;window.process={env:{}};var dh={exports:{}},At={};var Hg;function rv(){if(Hg)return At;Hg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function k(D,V,ot){this.props=D,this.context=V,this.refs=w,this.updater=ot||C}k.prototype.isReactComponent={},k.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},k.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function U(){}U.prototype=k.prototype;function M(D,V,ot){this.props=D,this.context=V,this.refs=w,this.updater=ot||C}var O=M.prototype=new U;O.constructor=M,E(O,k.prototype),O.isPureReactComponent=!0;var I=Array.isArray;function Q(){}var H={H:null,A:null,T:null,S:null},st=Object.prototype.hasOwnProperty;function K(D,V,ot){var ut=ot.ref;return{$$typeof:r,type:D,key:V,ref:ut!==void 0?ut:null,props:ot}}function J(D,V){return K(D.type,V,D.props)}function it(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function rt(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ot){return V[ot]})}var yt=/\/+/g;function ht(D,V){return typeof D=="object"&&D!==null&&D.key!=null?rt(""+D.key):V.toString(36)}function St(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Q,Q):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,V,ot,ut,gt){var Ct=typeof D;(Ct==="undefined"||Ct==="boolean")&&(D=null);var Ot=!1;if(D===null)Ot=!0;else switch(Ct){case"bigint":case"string":case"number":Ot=!0;break;case"object":switch(D.$$typeof){case r:case t:Ot=!0;break;case g:return Ot=D._init,B(Ot(D._payload),V,ot,ut,gt)}}if(Ot)return gt=gt(D),Ot=ut===""?"."+ht(D,0):ut,I(gt)?(ot="",Ot!=null&&(ot=Ot.replace(yt,"$&/")+"/"),B(gt,V,ot,"",function(en){return en})):gt!=null&&(it(gt)&&(gt=J(gt,ot+(gt.key==null||D&&D.key===gt.key?"":(""+gt.key).replace(yt,"$&/")+"/")+Ot)),V.push(gt)),1;Ot=0;var te=ut===""?".":ut+":";if(I(D))for(var Ft=0;Ft<D.length;Ft++)ut=D[Ft],Ct=te+ht(ut,Ft),Ot+=B(ut,V,ot,Ct,gt);else if(Ft=b(D),typeof Ft=="function")for(D=Ft.call(D),Ft=0;!(ut=D.next()).done;)ut=ut.value,Ct=te+ht(ut,Ft++),Ot+=B(ut,V,ot,Ct,gt);else if(Ct==="object"){if(typeof D.then=="function")return B(St(D),V,ot,ut,gt);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ot}function L(D,V,ot){if(D==null)return D;var ut=[],gt=0;return B(D,ut,"","",function(Ct){return V.call(ot,Ct,gt++)}),ut}function at(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(ot){(D._status===0||D._status===-1)&&(D._status=1,D._result=ot)},function(ot){(D._status===0||D._status===-1)&&(D._status=2,D._result=ot)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var lt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ct={map:L,forEach:function(D,V,ot){L(D,function(){V.apply(this,arguments)},ot)},count:function(D){var V=0;return L(D,function(){V++}),V},toArray:function(D){return L(D,function(V){return V})||[]},only:function(D){if(!it(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return At.Activity=y,At.Children=ct,At.Component=k,At.Fragment=n,At.Profiler=o,At.PureComponent=M,At.StrictMode=s,At.Suspense=d,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,At.__COMPILER_RUNTIME={__proto__:null,c:function(D){return H.H.useMemoCache(D)}},At.cache=function(D){return function(){return D.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(D,V,ot){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ut=E({},D.props),gt=D.key;if(V!=null)for(Ct in V.key!==void 0&&(gt=""+V.key),V)!st.call(V,Ct)||Ct==="key"||Ct==="__self"||Ct==="__source"||Ct==="ref"&&V.ref===void 0||(ut[Ct]=V[Ct]);var Ct=arguments.length-2;if(Ct===1)ut.children=ot;else if(1<Ct){for(var Ot=Array(Ct),te=0;te<Ct;te++)Ot[te]=arguments[te+2];ut.children=Ot}return K(D.type,gt,ut)},At.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},At.createElement=function(D,V,ot){var ut,gt={},Ct=null;if(V!=null)for(ut in V.key!==void 0&&(Ct=""+V.key),V)st.call(V,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(gt[ut]=V[ut]);var Ot=arguments.length-2;if(Ot===1)gt.children=ot;else if(1<Ot){for(var te=Array(Ot),Ft=0;Ft<Ot;Ft++)te[Ft]=arguments[Ft+2];gt.children=te}if(D&&D.defaultProps)for(ut in Ot=D.defaultProps,Ot)gt[ut]===void 0&&(gt[ut]=Ot[ut]);return K(D,Ct,gt)},At.createRef=function(){return{current:null}},At.forwardRef=function(D){return{$$typeof:h,render:D}},At.isValidElement=it,At.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:at}},At.memo=function(D,V){return{$$typeof:p,type:D,compare:V===void 0?null:V}},At.startTransition=function(D){var V=H.T,ot={};H.T=ot;try{var ut=D(),gt=H.S;gt!==null&&gt(ot,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(Q,lt)}catch(Ct){lt(Ct)}finally{V!==null&&ot.types!==null&&(V.types=ot.types),H.T=V}},At.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},At.use=function(D){return H.H.use(D)},At.useActionState=function(D,V,ot){return H.H.useActionState(D,V,ot)},At.useCallback=function(D,V){return H.H.useCallback(D,V)},At.useContext=function(D){return H.H.useContext(D)},At.useDebugValue=function(){},At.useDeferredValue=function(D,V){return H.H.useDeferredValue(D,V)},At.useEffect=function(D,V){return H.H.useEffect(D,V)},At.useEffectEvent=function(D){return H.H.useEffectEvent(D)},At.useId=function(){return H.H.useId()},At.useImperativeHandle=function(D,V,ot){return H.H.useImperativeHandle(D,V,ot)},At.useInsertionEffect=function(D,V){return H.H.useInsertionEffect(D,V)},At.useLayoutEffect=function(D,V){return H.H.useLayoutEffect(D,V)},At.useMemo=function(D,V){return H.H.useMemo(D,V)},At.useOptimistic=function(D,V){return H.H.useOptimistic(D,V)},At.useReducer=function(D,V,ot){return H.H.useReducer(D,V,ot)},At.useRef=function(D){return H.H.useRef(D)},At.useState=function(D){return H.H.useState(D)},At.useSyncExternalStore=function(D,V,ot){return H.H.useSyncExternalStore(D,V,ot)},At.useTransition=function(){return H.H.useTransition()},At.version="19.2.4",At}var Fg;function vf(){return Fg||(Fg=1,dh.exports=rv()),dh.exports}var Tt=vf();const Ea=Va(Tt);var ph={exports:{}},ya={},mh={exports:{}},gh={};var Yg;function av(){return Yg||(Yg=1,(function(r){function t(B,L){var at=B.length;B.push(L);t:for(;0<at;){var lt=at-1>>>1,ct=B[lt];if(0<o(ct,L))B[lt]=L,B[at]=ct,at=lt;else break t}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var L=B[0],at=B.pop();if(at!==L){B[0]=at;t:for(var lt=0,ct=B.length,D=ct>>>1;lt<D;){var V=2*(lt+1)-1,ot=B[V],ut=V+1,gt=B[ut];if(0>o(ot,at))ut<ct&&0>o(gt,ot)?(B[lt]=gt,B[ut]=at,lt=ut):(B[lt]=ot,B[V]=at,lt=V);else if(ut<ct&&0>o(gt,at))B[lt]=gt,B[ut]=at,lt=ut;else break t}}return L}function o(B,L){var at=B.sortIndex-L.sortIndex;return at!==0?at:B.id-L.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],p=[],g=1,y=null,S=3,b=!1,C=!1,E=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function O(B){for(var L=n(p);L!==null;){if(L.callback===null)s(p);else if(L.startTime<=B)s(p),L.sortIndex=L.expirationTime,t(d,L);else break;L=n(p)}}function I(B){if(E=!1,O(B),!C)if(n(d)!==null)C=!0,Q||(Q=!0,rt());else{var L=n(p);L!==null&&St(I,L.startTime-B)}}var Q=!1,H=-1,st=5,K=-1;function J(){return w?!0:!(r.unstable_now()-K<st)}function it(){if(w=!1,Q){var B=r.unstable_now();K=B;var L=!0;try{t:{C=!1,E&&(E=!1,U(H),H=-1),b=!0;var at=S;try{e:{for(O(B),y=n(d);y!==null&&!(y.expirationTime>B&&J());){var lt=y.callback;if(typeof lt=="function"){y.callback=null,S=y.priorityLevel;var ct=lt(y.expirationTime<=B);if(B=r.unstable_now(),typeof ct=="function"){y.callback=ct,O(B),L=!0;break e}y===n(d)&&s(d),O(B)}else s(d);y=n(d)}if(y!==null)L=!0;else{var D=n(p);D!==null&&St(I,D.startTime-B),L=!1}}break t}finally{y=null,S=at,b=!1}L=void 0}}finally{L?rt():Q=!1}}}var rt;if(typeof M=="function")rt=function(){M(it)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,ht=yt.port2;yt.port1.onmessage=it,rt=function(){ht.postMessage(null)}}else rt=function(){k(it,0)};function St(B,L){H=k(function(){B(r.unstable_now())},L)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):st=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(B){switch(S){case 1:case 2:case 3:var L=3;break;default:L=S}var at=S;S=L;try{return B()}finally{S=at}},r.unstable_requestPaint=function(){w=!0},r.unstable_runWithPriority=function(B,L){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var at=S;S=B;try{return L()}finally{S=at}},r.unstable_scheduleCallback=function(B,L,at){var lt=r.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?lt+at:lt):at=lt,B){case 1:var ct=-1;break;case 2:ct=250;break;case 5:ct=1073741823;break;case 4:ct=1e4;break;default:ct=5e3}return ct=at+ct,B={id:g++,callback:L,priorityLevel:B,startTime:at,expirationTime:ct,sortIndex:-1},at>lt?(B.sortIndex=at,t(p,B),n(d)===null&&B===n(p)&&(E?(U(H),H=-1):E=!0,St(I,at-lt))):(B.sortIndex=ct,t(d,B),C||b||(C=!0,Q||(Q=!0,rt()))),B},r.unstable_shouldYield=J,r.unstable_wrapCallback=function(B){var L=S;return function(){var at=S;S=L;try{return B.apply(this,arguments)}finally{S=at}}}})(gh)),gh}var Xg;function ov(){return Xg||(Xg=1,mh.exports=av()),mh.exports}var yh={exports:{}},Ne={};var Vg;function lv(){if(Vg)return Ne;Vg=1;var r=vf();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ne.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ne.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(d,p,null,g)},Ne.flushSync=function(d){var p=u.T,g=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=p,s.p=g,s.d.f()}},Ne.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},Ne.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Ne.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:b}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:S,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ne.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},Ne.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ne.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=h(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},Ne.requestFormReset=function(d){s.d.r(d)},Ne.unstable_batchedUpdates=function(d,p){return d(p)},Ne.useFormState=function(d,p,g){return u.H.useFormState(d,p,g)},Ne.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ne.version="19.2.4",Ne}var qg;function cv(){if(qg)return yh.exports;qg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),yh.exports=lv(),yh.exports}var $g;function uv(){if($g)return ya;$g=1;var r=ov(),t=vf(),n=cv();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function u(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=l(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,c=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return d(f),e;if(m===c)return d(f),i;m=m.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=m;else{for(var v=!1,A=f.child;A;){if(A===a){v=!0,a=f,c=m;break}if(A===c){v=!0,c=f,a=m;break}A=A.sibling}if(!v){for(A=m.child;A;){if(A===a){v=!0,a=m,c=f;break}if(A===c){v=!0,c=m,a=f;break}A=A.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function rt(e){return e===null||typeof e!="object"?null:(e=it&&e[it]||e["@@iterator"],typeof e=="function"?e:null)}var yt=Symbol.for("react.client.reference");function ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===yt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case k:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case Q:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case M:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return i=e.displayName||null,i!==null?i:ht(e.type)||"Memo";case st:i=e._payload,e=e._init;try{return ht(e(i))}catch{}}return null}var St=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},lt=[],ct=-1;function D(e){return{current:e}}function V(e){0>ct||(e.current=lt[ct],lt[ct]=null,ct--)}function ot(e,i){ct++,lt[ct]=e.current,e.current=i}var ut=D(null),gt=D(null),Ct=D(null),Ot=D(null);function te(e,i){switch(ot(Ct,i),ot(gt,e),ot(ut,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?ag(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=ag(i),e=og(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ut),ot(ut,e)}function Ft(){V(ut),V(gt),V(Ct)}function en(e){e.memoizedState!==null&&ot(Ot,e);var i=ut.current,a=og(i,e.type);i!==a&&(ot(gt,e),ot(ut,a))}function Nn(e){gt.current===e&&(V(ut),V(gt)),Ot.current===e&&(V(Ot),ha._currentValue=at)}var Xe,we;function de(e){if(Xe===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Xe=i&&i[1]||"",we=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+e+we}var nn=!1;function Yi(e,i){if(!e||nn)return"";nn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch($){var X=$}Reflect.construct(e,[],nt)}else{try{nt.call()}catch($){X=$}e.call(nt.prototype)}}else{try{throw Error()}catch($){X=$}(nt=e())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch($){if($&&X&&typeof $.stack=="string")return[$.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],A=m[1];if(v&&A){var z=v.split(`
`),Y=A.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===Y.length)for(c=z.length-1,f=Y.length-1;1<=c&&0<=f&&z[c]!==Y[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==Y[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==Y[f]){var Z=`
`+z[c].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=c&&0<=f);break}}}finally{nn=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?de(a):""}function pi(e,i){switch(e.tag){case 26:case 27:case 5:return de(e.type);case 16:return de("Lazy");case 13:return e.child!==i&&i!==null?de("Suspense Fallback"):de("Suspense");case 19:return de("SuspenseList");case 0:case 15:return Yi(e.type,!1);case 11:return Yi(e.type.render,!1);case 1:return Yi(e.type,!0);case 31:return de("Activity");default:return""}}function vs(e){try{var i="",a=null;do i+=pi(e,a),a=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ss=Object.prototype.hasOwnProperty,Cs=r.unstable_scheduleCallback,mi=r.unstable_cancelCallback,dn=r.unstable_shouldYield,Cr=r.unstable_requestPaint,Ie=r.unstable_now,Ln=r.unstable_getCurrentPriorityLevel,$a=r.unstable_ImmediatePriority,T=r.unstable_UserBlockingPriority,x=r.unstable_NormalPriority,_=r.unstable_LowPriority,R=r.unstable_IdlePriority,P=r.log,q=r.unstable_setDisableYieldValue,tt=null,bt=null;function It(e){if(typeof P=="function"&&q(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(tt,e)}catch{}}var Rt=Math.clz32?Math.clz32:P_,re=Math.log,Yt=Math.LN2;function P_(e){return e>>>=0,e===0?32:31-(re(e)/Yt|0)|0}var Qa=256,Wa=262144,Za=4194304;function Xi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ka(e,i,a){var c=e.pendingLanes;if(c===0)return 0;var f=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var A=c&134217727;return A!==0?(c=A&~m,c!==0?f=Xi(c):(v&=A,v!==0?f=Xi(v):a||(a=A&~e,a!==0&&(f=Xi(a))))):(A=c&~m,A!==0?f=Xi(A):v!==0?f=Xi(v):a||(a=c&~e,a!==0&&(f=Xi(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function Ar(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function j_(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function If(){var e=Za;return Za<<=1,(Za&62914560)===0&&(Za=4194304),e}function Jl(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Tr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function G_(e,i,a,c,f,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var A=e.entanglements,z=e.expirationTimes,Y=e.hiddenUpdates;for(a=v&~a;0<a;){var Z=31-Rt(a),nt=1<<Z;A[Z]=0,z[Z]=-1;var X=Y[Z];if(X!==null)for(Y[Z]=null,Z=0;Z<X.length;Z++){var $=X[Z];$!==null&&($.lane&=-536870913)}a&=~nt}c!==0&&Hf(e,c,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~i))}function Hf(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-Rt(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function Ff(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var c=31-Rt(a),f=1<<c;f&i|e[c]&i&&(e[c]|=i),a&=~f}}function Yf(e,i){var a=i&-i;return a=(a&42)!==0?1:tc(a),(a&(e.suspendedLanes|i))!==0?0:a}function tc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ec(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Xf(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:kg(e.type))}function Vf(e,i){var a=L.p;try{return L.p=e,i()}finally{L.p=a}}var gi=Math.random().toString(36).slice(2),Me="__reactFiber$"+gi,Ve="__reactProps$"+gi,As="__reactContainer$"+gi,nc="__reactEvents$"+gi,I_="__reactListeners$"+gi,H_="__reactHandles$"+gi,qf="__reactResources$"+gi,Er="__reactMarker$"+gi;function ic(e){delete e[Me],delete e[Ve],delete e[nc],delete e[I_],delete e[H_]}function Ts(e){var i=e[Me];if(i)return i;for(var a=e.parentNode;a;){if(i=a[As]||a[Me]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=pg(e);e!==null;){if(a=e[Me])return a;e=pg(e)}return i}e=a,a=e.parentNode}return null}function Es(e){if(e=e[Me]||e[As]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function wr(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function ws(e){var i=e[qf];return i||(i=e[qf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ce(e){e[Er]=!0}var $f=new Set,Qf={};function Vi(e,i){Ms(e,i),Ms(e+"Capture",i)}function Ms(e,i){for(Qf[e]=i,e=0;e<i.length;e++)$f.add(i[e])}var F_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wf={},Zf={};function Y_(e){return Ss.call(Zf,e)?!0:Ss.call(Wf,e)?!1:F_.test(e)?Zf[e]=!0:(Wf[e]=!0,!1)}function Ja(e,i,a){if(Y_(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function to(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Xn(e,i,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+c)}}function pn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kf(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function X_(e,i,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function sc(e){if(!e._valueTracker){var i=Kf(e)?"checked":"value";e._valueTracker=X_(e,i,""+e[i])}}function Jf(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return e&&(c=Kf(e)?e.checked?"true":"false":e.value),e=c,e!==a?(i.setValue(e),!0):!1}function eo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var V_=/[\n"\\]/g;function mn(e){return e.replace(V_,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function rc(e,i,a,c,f,m,v,A){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+pn(i)):e.value!==""+pn(i)&&(e.value=""+pn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?ac(e,v,pn(i)):a!=null?ac(e,v,pn(a)):c!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+pn(A):e.removeAttribute("name")}function td(e,i,a,c,f,m,v,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){sc(e);return}a=a!=null?""+pn(a):"",i=i!=null?""+pn(i):a,A||i===e.value||(e.value=i),e.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=A?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),sc(e)}function ac(e,i,a){i==="number"&&eo(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Rs(e,i,a,c){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&c&&(e[a].defaultSelected=!0)}else{for(a=""+pn(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function ed(e,i,a){if(i!=null&&(i=""+pn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+pn(a):""}function nd(e,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(s(92));if(St(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=pn(i),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),sc(e)}function ks(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var q_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function id(e,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,a):typeof a!="number"||a===0||q_.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function sd(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&a[f]!==c&&id(e,f,c)}else for(var m in i)i.hasOwnProperty(m)&&id(e,m,i[m])}function oc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(e){return Q_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Vn(){}var lc=null;function cc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bs=null,Ds=null;function rd(e){var i=Es(e);if(i&&(e=i.stateNode)){var a=e[Ve]||null;t:switch(e=i.stateNode,i.type){case"input":if(rc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==e&&c.form===e.form){var f=c[Ve]||null;if(!f)throw Error(s(90));rc(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===e.form&&Jf(c)}break t;case"textarea":ed(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Rs(e,!!a.multiple,i,!1)}}}var uc=!1;function ad(e,i,a){if(uc)return e(i,a);uc=!0;try{var c=e(i);return c}finally{if(uc=!1,(Bs!==null||Ds!==null)&&(Yo(),Bs&&(i=Bs,e=Ds,Ds=Bs=null,rd(i),e)))for(i=0;i<e.length;i++)rd(e[i])}}function Mr(e,i){var a=e.stateNode;if(a===null)return null;var c=a[Ve]||null;if(c===null)return null;a=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=!1;if(qn)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){hc=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{hc=!1}var yi=null,fc=null,io=null;function od(){if(io)return io;var e,i=fc,a=i.length,c,f="value"in yi?yi.value:yi.textContent,m=f.length;for(e=0;e<a&&i[e]===f[e];e++);var v=a-e;for(c=1;c<=v&&i[a-c]===f[m-c];c++);return io=f.slice(e,1<c?1-c:void 0)}function so(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ro(){return!0}function ld(){return!1}function qe(e){function i(a,c,f,m,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(a=e[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ro:ld,this.isPropagationStopped=ld,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),i}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ao=qe(qi),kr=y({},qi,{view:0,detail:0}),W_=qe(kr),dc,pc,Br,oo=y({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Br&&(Br&&e.type==="mousemove"?(dc=e.screenX-Br.screenX,pc=e.screenY-Br.screenY):pc=dc=0,Br=e),dc)},movementY:function(e){return"movementY"in e?e.movementY:pc}}),cd=qe(oo),Z_=y({},oo,{dataTransfer:0}),K_=qe(Z_),J_=y({},kr,{relatedTarget:0}),mc=qe(J_),tb=y({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),eb=qe(tb),nb=y({},qi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ib=qe(nb),sb=y({},qi,{data:0}),ud=qe(sb),rb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ab={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ob={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lb(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ob[e])?!!i[e]:!1}function gc(){return lb}var cb=y({},kr,{key:function(e){if(e.key){var i=rb[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=so(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ab[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gc,charCode:function(e){return e.type==="keypress"?so(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?so(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ub=qe(cb),hb=y({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hd=qe(hb),fb=y({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gc}),db=qe(fb),pb=y({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),mb=qe(pb),gb=y({},oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yb=qe(gb),xb=y({},qi,{newState:0,oldState:0}),_b=qe(xb),bb=[9,13,27,32],yc=qn&&"CompositionEvent"in window,Dr=null;qn&&"documentMode"in document&&(Dr=document.documentMode);var vb=qn&&"TextEvent"in window&&!Dr,fd=qn&&(!yc||Dr&&8<Dr&&11>=Dr),dd=" ",pd=!1;function md(e,i){switch(e){case"keyup":return bb.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Os=!1;function Sb(e,i){switch(e){case"compositionend":return gd(i);case"keypress":return i.which!==32?null:(pd=!0,dd);case"textInput":return e=i.data,e===dd&&pd?null:e;default:return null}}function Cb(e,i){if(Os)return e==="compositionend"||!yc&&md(e,i)?(e=od(),io=fc=yi=null,Os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fd&&i.locale!=="ko"?null:i.data;default:return null}}var Ab={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ab[e.type]:i==="textarea"}function xd(e,i,a,c){Bs?Ds?Ds.push(c):Ds=[c]:Bs=c,i=Zo(i,"onChange"),0<i.length&&(a=new ao("onChange","change",null,a,c),e.push({event:a,listeners:i}))}var Or=null,zr=null;function Tb(e){tg(e,0)}function lo(e){var i=wr(e);if(Jf(i))return e}function _d(e,i){if(e==="change")return i}var bd=!1;if(qn){var xc;if(qn){var _c="oninput"in document;if(!_c){var vd=document.createElement("div");vd.setAttribute("oninput","return;"),_c=typeof vd.oninput=="function"}xc=_c}else xc=!1;bd=xc&&(!document.documentMode||9<document.documentMode)}function Sd(){Or&&(Or.detachEvent("onpropertychange",Cd),zr=Or=null)}function Cd(e){if(e.propertyName==="value"&&lo(zr)){var i=[];xd(i,zr,e,cc(e)),ad(Tb,i)}}function Eb(e,i,a){e==="focusin"?(Sd(),Or=i,zr=a,Or.attachEvent("onpropertychange",Cd)):e==="focusout"&&Sd()}function wb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lo(zr)}function Mb(e,i){if(e==="click")return lo(i)}function Rb(e,i){if(e==="input"||e==="change")return lo(i)}function kb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var sn=typeof Object.is=="function"?Object.is:kb;function Ur(e,i){if(sn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Ss.call(i,f)||!sn(e[f],i[f]))return!1}return!0}function Ad(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Td(e,i){var a=Ad(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=i&&c>=i)return{node:a,offset:i-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ad(a)}}function Ed(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Ed(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function wd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=eo(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=eo(e.document)}return i}function bc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Bb=qn&&"documentMode"in document&&11>=document.documentMode,zs=null,vc=null,Nr=null,Sc=!1;function Md(e,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sc||zs==null||zs!==eo(c)||(c=zs,"selectionStart"in c&&bc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Nr&&Ur(Nr,c)||(Nr=c,c=Zo(vc,"onSelect"),0<c.length&&(i=new ao("onSelect","select",null,i,a),e.push({event:i,listeners:c}),i.target=zs)))}function $i(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Us={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},Cc={},Rd={};qn&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Qi(e){if(Cc[e])return Cc[e];if(!Us[e])return e;var i=Us[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Rd)return Cc[e]=i[a];return e}var kd=Qi("animationend"),Bd=Qi("animationiteration"),Dd=Qi("animationstart"),Db=Qi("transitionrun"),Ob=Qi("transitionstart"),zb=Qi("transitioncancel"),Od=Qi("transitionend"),zd=new Map,Ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ac.push("scrollEnd");function wn(e,i){zd.set(e,i),Vi(i,[e])}var co=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},gn=[],Ns=0,Tc=0;function uo(){for(var e=Ns,i=Tc=Ns=0;i<e;){var a=gn[i];gn[i++]=null;var c=gn[i];gn[i++]=null;var f=gn[i];gn[i++]=null;var m=gn[i];if(gn[i++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&Ud(a,f,m)}}function ho(e,i,a,c){gn[Ns++]=e,gn[Ns++]=i,gn[Ns++]=a,gn[Ns++]=c,Tc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Ec(e,i,a,c){return ho(e,i,a,c),fo(e)}function Wi(e,i){return ho(e,null,null,i),fo(e)}function Ud(e,i,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var f=!1,m=e.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&i!==null&&(f=31-Rt(a),e=m.hiddenUpdates,c=e[f],c===null?e[f]=[i]:c.push(i),i.lane=a|536870912),m):null}function fo(e){if(50<sa)throw sa=0,Uu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ls={};function Ub(e,i,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(e,i,a,c){return new Ub(e,i,a,c)}function wc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $n(e,i){var a=e.alternate;return a===null?(a=rn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Nd(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function po(e,i,a,c,f,m){var v=0;if(c=e,typeof e=="function")wc(e)&&(v=1);else if(typeof e=="string")v=G1(e,a,ut.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case K:return e=rn(31,a,i,f),e.elementType=K,e.lanes=m,e;case E:return Zi(a.children,f,m,i);case w:v=8,f|=24;break;case k:return e=rn(12,a,i,f|2),e.elementType=k,e.lanes=m,e;case I:return e=rn(13,a,i,f),e.elementType=I,e.lanes=m,e;case Q:return e=rn(19,a,i,f),e.elementType=Q,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:v=10;break t;case U:v=9;break t;case O:v=11;break t;case H:v=14;break t;case st:v=16,c=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=rn(v,a,i,f),i.elementType=e,i.type=c,i.lanes=m,i}function Zi(e,i,a,c){return e=rn(7,e,c,i),e.lanes=a,e}function Mc(e,i,a){return e=rn(6,e,null,i),e.lanes=a,e}function Ld(e){var i=rn(18,null,null,0);return i.stateNode=e,i}function Rc(e,i,a){return i=rn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Pd=new WeakMap;function yn(e,i){if(typeof e=="object"&&e!==null){var a=Pd.get(e);return a!==void 0?a:(i={value:e,source:i,stack:vs(i)},Pd.set(e,i),i)}return{value:e,source:i,stack:vs(i)}}var Ps=[],js=0,mo=null,Lr=0,xn=[],_n=0,xi=null,Pn=1,jn="";function Qn(e,i){Ps[js++]=Lr,Ps[js++]=mo,mo=e,Lr=i}function jd(e,i,a){xn[_n++]=Pn,xn[_n++]=jn,xn[_n++]=xi,xi=e;var c=Pn;e=jn;var f=32-Rt(c)-1;c&=~(1<<f),a+=1;var m=32-Rt(i)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Pn=1<<32-Rt(i)+f|a<<f|c,jn=m+e}else Pn=1<<m|a<<f|c,jn=e}function kc(e){e.return!==null&&(Qn(e,1),jd(e,1,0))}function Bc(e){for(;e===mo;)mo=Ps[--js],Ps[js]=null,Lr=Ps[--js],Ps[js]=null;for(;e===xi;)xi=xn[--_n],xn[_n]=null,jn=xn[--_n],xn[_n]=null,Pn=xn[--_n],xn[_n]=null}function Gd(e,i){xn[_n++]=Pn,xn[_n++]=jn,xn[_n++]=xi,Pn=i.id,jn=i.overflow,xi=e}var Re=null,ee=null,Lt=!1,_i=null,bn=!1,Dc=Error(s(519));function bi(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pr(yn(i,e)),Dc}function Id(e){var i=e.stateNode,a=e.type,c=e.memoizedProps;switch(i[Me]=e,i[Ve]=c,a){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(a=0;a<aa.length;a++)Dt(aa[a],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":Dt("invalid",i),td(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Dt("invalid",i);break;case"textarea":Dt("invalid",i),nd(i,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||sg(i.textContent,a)?(c.popover!=null&&(Dt("beforetoggle",i),Dt("toggle",i)),c.onScroll!=null&&Dt("scroll",i),c.onScrollEnd!=null&&Dt("scrollend",i),c.onClick!=null&&(i.onclick=Vn),i=!0):i=!1,i||bi(e,!0)}function Hd(e){for(Re=e.return;Re;)switch(Re.tag){case 5:case 31:case 13:bn=!1;return;case 27:case 3:bn=!0;return;default:Re=Re.return}}function Gs(e){if(e!==Re)return!1;if(!Lt)return Hd(e),Lt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Wu(e.type,e.memoizedProps)),a=!a),a&&ee&&bi(e),Hd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));ee=dg(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));ee=dg(e)}else i===27?(i=ee,zi(e.type)?(e=eh,eh=null,ee=e):ee=i):ee=Re?Sn(e.stateNode.nextSibling):null;return!0}function Ki(){ee=Re=null,Lt=!1}function Oc(){var e=_i;return e!==null&&(Ze===null?Ze=e:Ze.push.apply(Ze,e),_i=null),e}function Pr(e){_i===null?_i=[e]:_i.push(e)}var zc=D(null),Ji=null,Wn=null;function vi(e,i,a){ot(zc,i._currentValue),i._currentValue=a}function Zn(e){e._currentValue=zc.current,V(zc)}function Uc(e,i,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===a)break;e=e.return}}function Nc(e,i,a,c){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;t:for(;m!==null;){var A=m;m=f;for(var z=0;z<i.length;z++)if(A.context===i[z]){m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),Uc(m.return,a,e),c||(v=null);break t}m=A.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Uc(v,a,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Is(e,i,a,c){e=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var A=f.type;sn(f.pendingProps.value,v.value)||(e!==null?e.push(A):e=[A])}}else if(f===Ot.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(ha):e=[ha])}f=f.return}e!==null&&Nc(i,e,a,c),i.flags|=262144}function go(e){for(e=e.firstContext;e!==null;){if(!sn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ts(e){Ji=e,Wn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ke(e){return Fd(Ji,e)}function yo(e,i){return Ji===null&&ts(e),Fd(e,i)}function Fd(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Wn===null){if(e===null)throw Error(s(308));Wn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Wn=Wn.next=i;return a}var Nb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Lb=r.unstable_scheduleCallback,Pb=r.unstable_NormalPriority,ge={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lc(){return{controller:new Nb,data:new Map,refCount:0}}function jr(e){e.refCount--,e.refCount===0&&Lb(Pb,function(){e.controller.abort()})}var Gr=null,Pc=0,Hs=0,Fs=null;function jb(e,i){if(Gr===null){var a=Gr=[];Pc=0,Hs=Iu(),Fs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Pc++,i.then(Yd,Yd),i}function Yd(){if(--Pc===0&&Gr!==null){Fs!==null&&(Fs.status="fulfilled");var e=Gr;Gr=null,Hs=0,Fs=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Gb(e,i){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Xd=B.S;B.S=function(e,i){Mm=Ie(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&jb(e,i),Xd!==null&&Xd(e,i)};var es=D(null);function jc(){var e=es.current;return e!==null?e:Kt.pooledCache}function xo(e,i){i===null?ot(es,es.current):ot(es,i.pool)}function Vd(){var e=jc();return e===null?null:{parent:ge._currentValue,pool:e}}var Ys=Error(s(460)),Gc=Error(s(474)),_o=Error(s(542)),bo={then:function(){}};function qd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $d(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Vn,Vn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Wd(e),e;default:if(typeof i.status=="string")i.then(Vn,Vn);else{if(e=Kt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Wd(e),e}throw is=i,Ys}}function ns(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(is=a,Ys):a}}var is=null;function Qd(){if(is===null)throw Error(s(459));var e=is;return is=null,e}function Wd(e){if(e===Ys||e===_o)throw Error(s(483))}var Xs=null,Ir=0;function vo(e){var i=Ir;return Ir+=1,Xs===null&&(Xs=[]),$d(Xs,e,i)}function Hr(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function So(e,i){throw i.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Zd(e){function i(G,N){if(e){var F=G.deletions;F===null?(G.deletions=[N],G.flags|=16):F.push(N)}}function a(G,N){if(!e)return null;for(;N!==null;)i(G,N),N=N.sibling;return null}function c(G){for(var N=new Map;G!==null;)G.key!==null?N.set(G.key,G):N.set(G.index,G),G=G.sibling;return N}function f(G,N){return G=$n(G,N),G.index=0,G.sibling=null,G}function m(G,N,F){return G.index=F,e?(F=G.alternate,F!==null?(F=F.index,F<N?(G.flags|=67108866,N):F):(G.flags|=67108866,N)):(G.flags|=1048576,N)}function v(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function A(G,N,F,et){return N===null||N.tag!==6?(N=Mc(F,G.mode,et),N.return=G,N):(N=f(N,F),N.return=G,N)}function z(G,N,F,et){var xt=F.type;return xt===E?Z(G,N,F.props.children,et,F.key):N!==null&&(N.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===st&&ns(xt)===N.type)?(N=f(N,F.props),Hr(N,F),N.return=G,N):(N=po(F.type,F.key,F.props,null,G.mode,et),Hr(N,F),N.return=G,N)}function Y(G,N,F,et){return N===null||N.tag!==4||N.stateNode.containerInfo!==F.containerInfo||N.stateNode.implementation!==F.implementation?(N=Rc(F,G.mode,et),N.return=G,N):(N=f(N,F.children||[]),N.return=G,N)}function Z(G,N,F,et,xt){return N===null||N.tag!==7?(N=Zi(F,G.mode,et,xt),N.return=G,N):(N=f(N,F),N.return=G,N)}function nt(G,N,F){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Mc(""+N,G.mode,F),N.return=G,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return F=po(N.type,N.key,N.props,null,G.mode,F),Hr(F,N),F.return=G,F;case C:return N=Rc(N,G.mode,F),N.return=G,N;case st:return N=ns(N),nt(G,N,F)}if(St(N)||rt(N))return N=Zi(N,G.mode,F,null),N.return=G,N;if(typeof N.then=="function")return nt(G,vo(N),F);if(N.$$typeof===M)return nt(G,yo(G,N),F);So(G,N)}return null}function X(G,N,F,et){var xt=N!==null?N.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return xt!==null?null:A(G,N,""+F,et);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===xt?z(G,N,F,et):null;case C:return F.key===xt?Y(G,N,F,et):null;case st:return F=ns(F),X(G,N,F,et)}if(St(F)||rt(F))return xt!==null?null:Z(G,N,F,et,null);if(typeof F.then=="function")return X(G,N,vo(F),et);if(F.$$typeof===M)return X(G,N,yo(G,F),et);So(G,F)}return null}function $(G,N,F,et,xt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return G=G.get(F)||null,A(N,G,""+et,xt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case b:return G=G.get(et.key===null?F:et.key)||null,z(N,G,et,xt);case C:return G=G.get(et.key===null?F:et.key)||null,Y(N,G,et,xt);case st:return et=ns(et),$(G,N,F,et,xt)}if(St(et)||rt(et))return G=G.get(F)||null,Z(N,G,et,xt,null);if(typeof et.then=="function")return $(G,N,F,vo(et),xt);if(et.$$typeof===M)return $(G,N,F,yo(N,et),xt);So(N,et)}return null}function ft(G,N,F,et){for(var xt=null,jt=null,pt=N,wt=N=0,Ut=null;pt!==null&&wt<F.length;wt++){pt.index>wt?(Ut=pt,pt=null):Ut=pt.sibling;var Gt=X(G,pt,F[wt],et);if(Gt===null){pt===null&&(pt=Ut);break}e&&pt&&Gt.alternate===null&&i(G,pt),N=m(Gt,N,wt),jt===null?xt=Gt:jt.sibling=Gt,jt=Gt,pt=Ut}if(wt===F.length)return a(G,pt),Lt&&Qn(G,wt),xt;if(pt===null){for(;wt<F.length;wt++)pt=nt(G,F[wt],et),pt!==null&&(N=m(pt,N,wt),jt===null?xt=pt:jt.sibling=pt,jt=pt);return Lt&&Qn(G,wt),xt}for(pt=c(pt);wt<F.length;wt++)Ut=$(pt,G,wt,F[wt],et),Ut!==null&&(e&&Ut.alternate!==null&&pt.delete(Ut.key===null?wt:Ut.key),N=m(Ut,N,wt),jt===null?xt=Ut:jt.sibling=Ut,jt=Ut);return e&&pt.forEach(function(ji){return i(G,ji)}),Lt&&Qn(G,wt),xt}function vt(G,N,F,et){if(F==null)throw Error(s(151));for(var xt=null,jt=null,pt=N,wt=N=0,Ut=null,Gt=F.next();pt!==null&&!Gt.done;wt++,Gt=F.next()){pt.index>wt?(Ut=pt,pt=null):Ut=pt.sibling;var ji=X(G,pt,Gt.value,et);if(ji===null){pt===null&&(pt=Ut);break}e&&pt&&ji.alternate===null&&i(G,pt),N=m(ji,N,wt),jt===null?xt=ji:jt.sibling=ji,jt=ji,pt=Ut}if(Gt.done)return a(G,pt),Lt&&Qn(G,wt),xt;if(pt===null){for(;!Gt.done;wt++,Gt=F.next())Gt=nt(G,Gt.value,et),Gt!==null&&(N=m(Gt,N,wt),jt===null?xt=Gt:jt.sibling=Gt,jt=Gt);return Lt&&Qn(G,wt),xt}for(pt=c(pt);!Gt.done;wt++,Gt=F.next())Gt=$(pt,G,wt,Gt.value,et),Gt!==null&&(e&&Gt.alternate!==null&&pt.delete(Gt.key===null?wt:Gt.key),N=m(Gt,N,wt),jt===null?xt=Gt:jt.sibling=Gt,jt=Gt);return e&&pt.forEach(function(Z1){return i(G,Z1)}),Lt&&Qn(G,wt),xt}function Wt(G,N,F,et){if(typeof F=="object"&&F!==null&&F.type===E&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:t:{for(var xt=F.key;N!==null;){if(N.key===xt){if(xt=F.type,xt===E){if(N.tag===7){a(G,N.sibling),et=f(N,F.props.children),et.return=G,G=et;break t}}else if(N.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===st&&ns(xt)===N.type){a(G,N.sibling),et=f(N,F.props),Hr(et,F),et.return=G,G=et;break t}a(G,N);break}else i(G,N);N=N.sibling}F.type===E?(et=Zi(F.props.children,G.mode,et,F.key),et.return=G,G=et):(et=po(F.type,F.key,F.props,null,G.mode,et),Hr(et,F),et.return=G,G=et)}return v(G);case C:t:{for(xt=F.key;N!==null;){if(N.key===xt)if(N.tag===4&&N.stateNode.containerInfo===F.containerInfo&&N.stateNode.implementation===F.implementation){a(G,N.sibling),et=f(N,F.children||[]),et.return=G,G=et;break t}else{a(G,N);break}else i(G,N);N=N.sibling}et=Rc(F,G.mode,et),et.return=G,G=et}return v(G);case st:return F=ns(F),Wt(G,N,F,et)}if(St(F))return ft(G,N,F,et);if(rt(F)){if(xt=rt(F),typeof xt!="function")throw Error(s(150));return F=xt.call(F),vt(G,N,F,et)}if(typeof F.then=="function")return Wt(G,N,vo(F),et);if(F.$$typeof===M)return Wt(G,N,yo(G,F),et);So(G,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,N!==null&&N.tag===6?(a(G,N.sibling),et=f(N,F),et.return=G,G=et):(a(G,N),et=Mc(F,G.mode,et),et.return=G,G=et),v(G)):a(G,N)}return function(G,N,F,et){try{Ir=0;var xt=Wt(G,N,F,et);return Xs=null,xt}catch(pt){if(pt===Ys||pt===_o)throw pt;var jt=rn(29,pt,null,G.mode);return jt.lanes=et,jt.return=G,jt}}}var ss=Zd(!0),Kd=Zd(!1),Si=!1;function Ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ci(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,i,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Ht&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=fo(e),Ud(e,null,a),i}return ho(e,c,i,a),fo(e)}function Fr(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Ff(e,a)}}function Fc(e,i){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Yc=!1;function Yr(){if(Yc){var e=Fs;if(e!==null)throw e}}function Xr(e,i,a,c){Yc=!1;var f=e.updateQueue;Si=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var z=A,Y=z.next;z.next=null,v===null?m=Y:v.next=Y,v=z;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==v&&(A===null?Z.firstBaseUpdate=Y:A.next=Y,Z.lastBaseUpdate=z))}if(m!==null){var nt=f.baseState;v=0,Z=Y=z=null,A=m;do{var X=A.lane&-536870913,$=X!==A.lane;if($?(zt&X)===X:(c&X)===X){X!==0&&X===Hs&&(Yc=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var ft=e,vt=A;X=i;var Wt=a;switch(vt.tag){case 1:if(ft=vt.payload,typeof ft=="function"){nt=ft.call(Wt,nt,X);break t}nt=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=vt.payload,X=typeof ft=="function"?ft.call(Wt,nt,X):ft,X==null)break t;nt=y({},nt,X);break t;case 2:Si=!0}}X=A.callback,X!==null&&(e.flags|=64,$&&(e.flags|=8192),$=f.callbacks,$===null?f.callbacks=[X]:$.push(X))}else $={lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(Y=Z=$,z=nt):Z=Z.next=$,v|=X;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;$=A,A=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);Z===null&&(z=nt),f.baseState=z,f.firstBaseUpdate=Y,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),Ri|=v,e.lanes=v,e.memoizedState=nt}}function Jd(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function tp(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Jd(a[e],i)}var Vs=D(null),Co=D(0);function ep(e,i){e=ai,ot(Co,e),ot(Vs,i),ai=e|i.baseLanes}function Xc(){ot(Co,ai),ot(Vs,Vs.current)}function Vc(){ai=Co.current,V(Vs),V(Co)}var an=D(null),vn=null;function Ti(e){var i=e.alternate;ot(pe,pe.current&1),ot(an,e),vn===null&&(i===null||Vs.current!==null||i.memoizedState!==null)&&(vn=e)}function qc(e){ot(pe,pe.current),ot(an,e),vn===null&&(vn=e)}function np(e){e.tag===22?(ot(pe,pe.current),ot(an,e),vn===null&&(vn=e)):Ei()}function Ei(){ot(pe,pe.current),ot(an,an.current)}function on(e){V(an),vn===e&&(vn=null),V(pe)}var pe=D(0);function Ao(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ju(a)||th(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Kn=0,Et=null,$t=null,ye=null,To=!1,qs=!1,rs=!1,Eo=0,Vr=0,$s=null,Ib=0;function ce(){throw Error(s(321))}function $c(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!sn(e[a],i[a]))return!1;return!0}function Qc(e,i,a,c,f,m){return Kn=m,Et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?jp:uu,rs=!1,m=a(c,f),rs=!1,qs&&(m=sp(i,a,c,f)),ip(e),m}function ip(e){B.H=Qr;var i=$t!==null&&$t.next!==null;if(Kn=0,ye=$t=Et=null,To=!1,Vr=0,$s=null,i)throw Error(s(300));e===null||xe||(e=e.dependencies,e!==null&&go(e)&&(xe=!0))}function sp(e,i,a,c){Et=e;var f=0;do{if(qs&&($s=null),Vr=0,qs=!1,25<=f)throw Error(s(301));if(f+=1,ye=$t=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=Gp,m=i(a,c)}while(qs);return m}function Hb(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?qr(i):i,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(Et.flags|=1024),i}function Wc(){var e=Eo!==0;return Eo=0,e}function Zc(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Kc(e){if(To){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}To=!1}Kn=0,ye=$t=Et=null,qs=!1,Vr=Eo=0,$s=null}function He(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?Et.memoizedState=ye=e:ye=ye.next=e,ye}function me(){if($t===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var i=ye===null?Et.memoizedState:ye.next;if(i!==null)ye=i,$t=e;else{if(e===null)throw Et.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},ye===null?Et.memoizedState=ye=e:ye=ye.next=e}return ye}function wo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qr(e){var i=Vr;return Vr+=1,$s===null&&($s=[]),e=$d($s,e,i),i=Et,(ye===null?i.memoizedState:ye.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?jp:uu),e}function Mo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qr(e);if(e.$$typeof===M)return ke(e)}throw Error(s(438,String(e)))}function Jc(e){var i=null,a=Et.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=Et.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=wo(),Et.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),c=0;c<e;c++)a[c]=J;return i.index++,a}function Jn(e,i){return typeof i=="function"?i(e):i}function Ro(e){var i=me();return tu(i,$t,e)}function tu(e,i,a){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=e.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,c.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{i=f.next;var A=v=null,z=null,Y=i,Z=!1;do{var nt=Y.lane&-536870913;if(nt!==Y.lane?(zt&nt)===nt:(Kn&nt)===nt){var X=Y.revertLane;if(X===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),nt===Hs&&(Z=!0);else if((Kn&X)===X){Y=Y.next,X===Hs&&(Z=!0);continue}else nt={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},z===null?(A=z=nt,v=m):z=z.next=nt,Et.lanes|=X,Ri|=X;nt=Y.action,rs&&a(m,nt),m=Y.hasEagerState?Y.eagerState:a(m,nt)}else X={lane:nt,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},z===null?(A=z=X,v=m):z=z.next=X,Et.lanes|=nt,Ri|=nt;Y=Y.next}while(Y!==null&&Y!==i);if(z===null?v=m:z.next=A,!sn(m,e.memoizedState)&&(xe=!0,Z&&(a=Fs,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function eu(e){var i=me(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var c=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=e(m,v.action),v=v.next;while(v!==f);sn(m,i.memoizedState)||(xe=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function rp(e,i,a){var c=Et,f=me(),m=Lt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!sn(($t||f).memoizedState,a);if(v&&(f.memoizedState=a,xe=!0),f=f.queue,su(lp.bind(null,c,f,e),[e]),f.getSnapshot!==i||v||ye!==null&&ye.memoizedState.tag&1){if(c.flags|=2048,Qs(9,{destroy:void 0},op.bind(null,c,f,a,i),null),Kt===null)throw Error(s(349));m||(Kn&127)!==0||ap(c,i,a)}return a}function ap(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Et.updateQueue,i===null?(i=wo(),Et.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function op(e,i,a,c){i.value=a,i.getSnapshot=c,cp(i)&&up(e)}function lp(e,i,a){return a(function(){cp(i)&&up(e)})}function cp(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!sn(e,a)}catch{return!0}}function up(e){var i=Wi(e,2);i!==null&&Ke(i,e,2)}function nu(e){var i=He();if(typeof e=="function"){var a=e;if(e=a(),rs){It(!0);try{a()}finally{It(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:e},i}function hp(e,i,a,c){return e.baseState=a,tu(e,$t,typeof c=="function"?c:Jn)}function Fb(e,i,a,c,f){if(Do(e))throw Error(s(485));if(e=i.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};B.T!==null?a(!0):m.isTransition=!1,c(m),a=i.pending,a===null?(m.next=i.pending=m,fp(i,m)):(m.next=a.next,i.pending=a.next=m)}}function fp(e,i){var a=i.action,c=i.payload,f=e.state;if(i.isTransition){var m=B.T,v={};B.T=v;try{var A=a(f,c),z=B.S;z!==null&&z(v,A),dp(e,i,A)}catch(Y){iu(e,i,Y)}finally{m!==null&&v.types!==null&&(m.types=v.types),B.T=m}}else try{m=a(f,c),dp(e,i,m)}catch(Y){iu(e,i,Y)}}function dp(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){pp(e,i,c)},function(c){return iu(e,i,c)}):pp(e,i,a)}function pp(e,i,a){i.status="fulfilled",i.value=a,mp(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,fp(e,a)))}function iu(e,i,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,mp(i),i=i.next;while(i!==c)}e.action=null}function mp(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function gp(e,i){return i}function yp(e,i){if(Lt){var a=Kt.formState;if(a!==null){t:{var c=Et;if(Lt){if(ee){e:{for(var f=ee,m=bn;f.nodeType!==8;){if(!m){f=null;break e}if(f=Sn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ee=Sn(f.nextSibling),c=f.data==="F!";break t}}bi(c)}c=!1}c&&(i=a[0])}}return a=He(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gp,lastRenderedState:i},a.queue=c,a=Np.bind(null,Et,c),c.dispatch=a,c=nu(!1),m=cu.bind(null,Et,!1,c.queue),c=He(),f={state:i,dispatch:null,action:e,pending:null},c.queue=f,a=Fb.bind(null,Et,f,m,a),f.dispatch=a,c.memoizedState=e,[i,a,!1]}function xp(e){var i=me();return _p(i,$t,e)}function _p(e,i,a){if(i=tu(e,i,gp)[0],e=Ro(Jn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=qr(i)}catch(v){throw v===Ys?_o:v}else c=i;i=me();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(Et.flags|=2048,Qs(9,{destroy:void 0},Yb.bind(null,f,a),null)),[c,m,e]}function Yb(e,i){e.action=i}function bp(e){var i=me(),a=$t;if(a!==null)return _p(i,a,e);me(),i=i.memoizedState,a=me();var c=a.queue.dispatch;return a.memoizedState=e,[i,c,!1]}function Qs(e,i,a,c){return e={tag:e,create:a,deps:c,inst:i,next:null},i=Et.updateQueue,i===null&&(i=wo(),Et.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,i.lastEffect=e),e}function vp(){return me().memoizedState}function ko(e,i,a,c){var f=He();Et.flags|=e,f.memoizedState=Qs(1|i,{destroy:void 0},a,c===void 0?null:c)}function Bo(e,i,a,c){var f=me();c=c===void 0?null:c;var m=f.memoizedState.inst;$t!==null&&c!==null&&$c(c,$t.memoizedState.deps)?f.memoizedState=Qs(i,m,a,c):(Et.flags|=e,f.memoizedState=Qs(1|i,m,a,c))}function Sp(e,i){ko(8390656,8,e,i)}function su(e,i){Bo(2048,8,e,i)}function Xb(e){Et.flags|=4;var i=Et.updateQueue;if(i===null)i=wo(),Et.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function Cp(e){var i=me().memoizedState;return Xb({ref:i,nextImpl:e}),function(){if((Ht&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ap(e,i){return Bo(4,2,e,i)}function Tp(e,i){return Bo(4,4,e,i)}function Ep(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function wp(e,i,a){a=a!=null?a.concat([e]):null,Bo(4,4,Ep.bind(null,i,e),a)}function ru(){}function Mp(e,i){var a=me();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&$c(i,c[1])?c[0]:(a.memoizedState=[e,i],e)}function Rp(e,i){var a=me();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&$c(i,c[1]))return c[0];if(c=e(),rs){It(!0);try{e()}finally{It(!1)}}return a.memoizedState=[c,i],c}function au(e,i,a){return a===void 0||(Kn&1073741824)!==0&&(zt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=km(),Et.lanes|=e,Ri|=e,a)}function kp(e,i,a,c){return sn(a,i)?a:Vs.current!==null?(e=au(e,a,c),sn(e,i)||(xe=!0),e):(Kn&42)===0||(Kn&1073741824)!==0&&(zt&261930)===0?(xe=!0,e.memoizedState=a):(e=km(),Et.lanes|=e,Ri|=e,i)}function Bp(e,i,a,c,f){var m=L.p;L.p=m!==0&&8>m?m:8;var v=B.T,A={};B.T=A,cu(e,!1,i,a);try{var z=f(),Y=B.S;if(Y!==null&&Y(A,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var Z=Gb(z,c);$r(e,i,Z,un(e))}else $r(e,i,c,un(e))}catch(nt){$r(e,i,{then:function(){},status:"rejected",reason:nt},un())}finally{L.p=m,v!==null&&A.types!==null&&(v.types=A.types),B.T=v}}function Vb(){}function ou(e,i,a,c){if(e.tag!==5)throw Error(s(476));var f=Dp(e).queue;Bp(e,f,i,at,a===null?Vb:function(){return Op(e),a(c)})}function Dp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:at},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Op(e){var i=Dp(e);i.next===null&&(i=e.alternate.memoizedState),$r(e,i.next.queue,{},un())}function lu(){return ke(ha)}function zp(){return me().memoizedState}function Up(){return me().memoizedState}function qb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=un();e=Ci(a);var c=Ai(i,e,a);c!==null&&(Ke(c,i,a),Fr(c,i,a)),i={cache:Lc()},e.payload=i;return}i=i.return}}function $b(e,i,a){var c=un();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Do(e)?Lp(i,a):(a=Ec(e,i,a,c),a!==null&&(Ke(a,e,c),Pp(a,i,c)))}function Np(e,i,a){var c=un();$r(e,i,a,c)}function $r(e,i,a,c){var f={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Do(e))Lp(i,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,A=m(v,a);if(f.hasEagerState=!0,f.eagerState=A,sn(A,v))return ho(e,i,f,0),Kt===null&&uo(),!1}catch{}if(a=Ec(e,i,f,c),a!==null)return Ke(a,e,c),Pp(a,i,c),!0}return!1}function cu(e,i,a,c){if(c={lane:2,revertLane:Iu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Do(e)){if(i)throw Error(s(479))}else i=Ec(e,a,c,2),i!==null&&Ke(i,e,2)}function Do(e){var i=e.alternate;return e===Et||i!==null&&i===Et}function Lp(e,i){qs=To=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Pp(e,i,a){if((a&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Ff(e,a)}}var Qr={readContext:ke,use:Mo,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce};Qr.useEffectEvent=ce;var jp={readContext:ke,use:Mo,useCallback:function(e,i){return He().memoizedState=[e,i===void 0?null:i],e},useContext:ke,useEffect:Sp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,ko(4194308,4,Ep.bind(null,i,e),a)},useLayoutEffect:function(e,i){return ko(4194308,4,e,i)},useInsertionEffect:function(e,i){ko(4,2,e,i)},useMemo:function(e,i){var a=He();i=i===void 0?null:i;var c=e();if(rs){It(!0);try{e()}finally{It(!1)}}return a.memoizedState=[c,i],c},useReducer:function(e,i,a){var c=He();if(a!==void 0){var f=a(i);if(rs){It(!0);try{a(i)}finally{It(!1)}}}else f=i;return c.memoizedState=c.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},c.queue=e,e=e.dispatch=$b.bind(null,Et,e),[c.memoizedState,e]},useRef:function(e){var i=He();return e={current:e},i.memoizedState=e},useState:function(e){e=nu(e);var i=e.queue,a=Np.bind(null,Et,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:ru,useDeferredValue:function(e,i){var a=He();return au(a,e,i)},useTransition:function(){var e=nu(!1);return e=Bp.bind(null,Et,e.queue,!0,!1),He().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var c=Et,f=He();if(Lt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Kt===null)throw Error(s(349));(zt&127)!==0||ap(c,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,Sp(lp.bind(null,c,m,e),[e]),c.flags|=2048,Qs(9,{destroy:void 0},op.bind(null,c,m,a,i),null),a},useId:function(){var e=He(),i=Kt.identifierPrefix;if(Lt){var a=jn,c=Pn;a=(c&~(1<<32-Rt(c)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Eo++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Ib++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:lu,useFormState:yp,useActionState:yp,useOptimistic:function(e){var i=He();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=cu.bind(null,Et,!0,a),a.dispatch=i,[e,i]},useMemoCache:Jc,useCacheRefresh:function(){return He().memoizedState=qb.bind(null,Et)},useEffectEvent:function(e){var i=He(),a={impl:e};return i.memoizedState=a,function(){if((Ht&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},uu={readContext:ke,use:Mo,useCallback:Mp,useContext:ke,useEffect:su,useImperativeHandle:wp,useInsertionEffect:Ap,useLayoutEffect:Tp,useMemo:Rp,useReducer:Ro,useRef:vp,useState:function(){return Ro(Jn)},useDebugValue:ru,useDeferredValue:function(e,i){var a=me();return kp(a,$t.memoizedState,e,i)},useTransition:function(){var e=Ro(Jn)[0],i=me().memoizedState;return[typeof e=="boolean"?e:qr(e),i]},useSyncExternalStore:rp,useId:zp,useHostTransitionStatus:lu,useFormState:xp,useActionState:xp,useOptimistic:function(e,i){var a=me();return hp(a,$t,e,i)},useMemoCache:Jc,useCacheRefresh:Up};uu.useEffectEvent=Cp;var Gp={readContext:ke,use:Mo,useCallback:Mp,useContext:ke,useEffect:su,useImperativeHandle:wp,useInsertionEffect:Ap,useLayoutEffect:Tp,useMemo:Rp,useReducer:eu,useRef:vp,useState:function(){return eu(Jn)},useDebugValue:ru,useDeferredValue:function(e,i){var a=me();return $t===null?au(a,e,i):kp(a,$t.memoizedState,e,i)},useTransition:function(){var e=eu(Jn)[0],i=me().memoizedState;return[typeof e=="boolean"?e:qr(e),i]},useSyncExternalStore:rp,useId:zp,useHostTransitionStatus:lu,useFormState:bp,useActionState:bp,useOptimistic:function(e,i){var a=me();return $t!==null?hp(a,$t,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Jc,useCacheRefresh:Up};Gp.useEffectEvent=Cp;function hu(e,i,a,c){i=e.memoizedState,a=a(c,i),a=a==null?i:y({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var fu={enqueueSetState:function(e,i,a){e=e._reactInternals;var c=un(),f=Ci(c);f.payload=i,a!=null&&(f.callback=a),i=Ai(e,f,c),i!==null&&(Ke(i,e,c),Fr(i,e,c))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var c=un(),f=Ci(c);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ai(e,f,c),i!==null&&(Ke(i,e,c),Fr(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=un(),c=Ci(a);c.tag=2,i!=null&&(c.callback=i),i=Ai(e,c,a),i!==null&&(Ke(i,e,a),Fr(i,e,a))}};function Ip(e,i,a,c,f,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,v):i.prototype&&i.prototype.isPureReactComponent?!Ur(a,c)||!Ur(f,m):!0}function Hp(e,i,a,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==e&&fu.enqueueReplaceState(i,i.state,null)}function as(e,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(e=e.defaultProps){a===i&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Fp(e){co(e)}function Yp(e){console.error(e)}function Xp(e){co(e)}function Oo(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Vp(e,i,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function du(e,i,a){return a=Ci(a),a.tag=3,a.payload={element:null},a.callback=function(){Oo(e,i)},a}function qp(e){return e=Ci(e),e.tag=3,e}function $p(e,i,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;e.payload=function(){return f(m)},e.callback=function(){Vp(i,a,c)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Vp(i,a,c),typeof f!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function Qb(e,i,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&Is(i,a,f,!0),a=an.current,a!==null){switch(a.tag){case 31:case 13:return vn===null?Xo():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===bo?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),Pu(e,c,f)),!1;case 22:return a.flags|=65536,c===bo?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),Pu(e,c,f)),!1}throw Error(s(435,a.tag))}return Pu(e,c,f),Xo(),!1}if(Lt)return i=an.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Dc&&(e=Error(s(422),{cause:c}),Pr(yn(e,a)))):(c!==Dc&&(i=Error(s(423),{cause:c}),Pr(yn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,c=yn(c,a),f=du(e.stateNode,c,f),Fc(e,f),ue!==4&&(ue=2)),!1;var m=Error(s(520),{cause:c});if(m=yn(m,a),ia===null?ia=[m]:ia.push(m),ue!==4&&(ue=2),i===null)return!0;c=yn(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=du(a.stateNode,c,e),Fc(a,e),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ki===null||!ki.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=qp(f),$p(f,e,a,c),Fc(a,f),!1}a=a.return}while(a!==null);return!1}var pu=Error(s(461)),xe=!1;function Be(e,i,a,c){i.child=e===null?Kd(i,null,a,c):ss(i,e.child,a,c)}function Qp(e,i,a,c,f){a=a.render;var m=i.ref;if("ref"in c){var v={};for(var A in c)A!=="ref"&&(v[A]=c[A])}else v=c;return ts(i),c=Qc(e,i,a,v,m,f),A=Wc(),e!==null&&!xe?(Zc(e,i,f),ti(e,i,f)):(Lt&&A&&kc(i),i.flags|=1,Be(e,i,c,f),i.child)}function Wp(e,i,a,c,f){if(e===null){var m=a.type;return typeof m=="function"&&!wc(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,Zp(e,i,m,c,f)):(e=po(a.type,null,c,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!Su(e,f)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ur,a(v,c)&&e.ref===i.ref)return ti(e,i,f)}return i.flags|=1,e=$n(m,c),e.ref=i.ref,e.return=i,i.child=e}function Zp(e,i,a,c,f){if(e!==null){var m=e.memoizedProps;if(Ur(m,c)&&e.ref===i.ref)if(xe=!1,i.pendingProps=c=m,Su(e,f))(e.flags&131072)!==0&&(xe=!0);else return i.lanes=e.lanes,ti(e,i,f)}return mu(e,i,a,c,f)}function Kp(e,i,a,c){var f=c.children,m=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(c=i.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,i.child=null;return Jp(e,i,m,a,c)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&xo(i,m!==null?m.cachePool:null),m!==null?ep(i,m):Xc(),np(i);else return c=i.lanes=536870912,Jp(e,i,m!==null?m.baseLanes|a:a,a,c)}else m!==null?(xo(i,m.cachePool),ep(i,m),Ei(),i.memoizedState=null):(e!==null&&xo(i,null),Xc(),Ei());return Be(e,i,f,a),i.child}function Wr(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Jp(e,i,a,c,f){var m=jc();return m=m===null?null:{parent:ge._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},e!==null&&xo(i,null),Xc(),np(i),e!==null&&Is(e,i,c,!0),i.childLanes=f,null}function zo(e,i){return i=No({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function tm(e,i,a){return ss(i,e.child,null,a),e=zo(i,i.pendingProps),e.flags|=2,on(i),i.memoizedState=null,e}function Wb(e,i,a){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Lt){if(c.mode==="hidden")return e=zo(i,c),i.lanes=536870912,Wr(null,e);if(qc(i),(e=ee)?(e=fg(e,bn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:xi!==null?{id:Pn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},a=Ld(e),a.return=i,i.child=a,Re=i,ee=null)):e=null,e===null)throw bi(i);return i.lanes=536870912,null}return zo(i,c)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(qc(i),f)if(i.flags&256)i.flags&=-257,i=tm(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(xe||Is(e,i,a,!1),f=(a&e.childLanes)!==0,xe||f){if(c=Kt,c!==null&&(v=Yf(c,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,Wi(e,v),Ke(c,e,v),pu;Xo(),i=tm(e,i,a)}else e=m.treeContext,ee=Sn(v.nextSibling),Re=i,Lt=!0,_i=null,bn=!1,e!==null&&Gd(i,e),i=zo(i,c),i.flags|=4096;return i}return e=$n(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Uo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function mu(e,i,a,c,f){return ts(i),a=Qc(e,i,a,c,void 0,f),c=Wc(),e!==null&&!xe?(Zc(e,i,f),ti(e,i,f)):(Lt&&c&&kc(i),i.flags|=1,Be(e,i,a,f),i.child)}function em(e,i,a,c,f,m){return ts(i),i.updateQueue=null,a=sp(i,c,a,f),ip(e),c=Wc(),e!==null&&!xe?(Zc(e,i,m),ti(e,i,m)):(Lt&&c&&kc(i),i.flags|=1,Be(e,i,a,m),i.child)}function nm(e,i,a,c,f){if(ts(i),i.stateNode===null){var m=Ls,v=a.contextType;typeof v=="object"&&v!==null&&(m=ke(v)),m=new a(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=fu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},Ic(i),v=a.contextType,m.context=typeof v=="object"&&v!==null?ke(v):Ls,m.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(hu(i,a,v,c),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&fu.enqueueReplaceState(m,m.state,null),Xr(i,c,m,f),Yr(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){m=i.stateNode;var A=i.memoizedProps,z=as(a,A);m.props=z;var Y=m.context,Z=a.contextType;v=Ls,typeof Z=="object"&&Z!==null&&(v=ke(Z));var nt=a.getDerivedStateFromProps;Z=typeof nt=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||Y!==v)&&Hp(i,m,c,v),Si=!1;var X=i.memoizedState;m.state=X,Xr(i,c,m,f),Yr(),Y=i.memoizedState,A||X!==Y||Si?(typeof nt=="function"&&(hu(i,a,nt,c),Y=i.memoizedState),(z=Si||Ip(i,a,z,c,X,Y,v))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=Y),m.props=c,m.state=Y,m.context=v,c=z):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,Hc(e,i),v=i.memoizedProps,Z=as(a,v),m.props=Z,nt=i.pendingProps,X=m.context,Y=a.contextType,z=Ls,typeof Y=="object"&&Y!==null&&(z=ke(Y)),A=a.getDerivedStateFromProps,(Y=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==nt||X!==z)&&Hp(i,m,c,z),Si=!1,X=i.memoizedState,m.state=X,Xr(i,c,m,f),Yr();var $=i.memoizedState;v!==nt||X!==$||Si||e!==null&&e.dependencies!==null&&go(e.dependencies)?(typeof A=="function"&&(hu(i,a,A,c),$=i.memoizedState),(Z=Si||Ip(i,a,Z,c,X,$,z)||e!==null&&e.dependencies!==null&&go(e.dependencies))?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,$,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,$,z)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&X===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&X===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=$),m.props=c,m.state=$,m.context=z,c=Z):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&X===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&X===e.memoizedState||(i.flags|=1024),c=!1)}return m=c,Uo(e,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&c?(i.child=ss(i,e.child,null,f),i.child=ss(i,null,a,f)):Be(e,i,a,f),i.memoizedState=m.state,e=i.child):e=ti(e,i,f),e}function im(e,i,a,c){return Ki(),i.flags|=256,Be(e,i,a,c),i.child}var gu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yu(e){return{baseLanes:e,cachePool:Vd()}}function xu(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=cn),e}function sm(e,i,a){var c=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(pe.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Lt){if(f?Ti(i):Ei(),(e=ee)?(e=fg(e,bn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:xi!==null?{id:Pn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},a=Ld(e),a.return=i,i.child=a,Re=i,ee=null)):e=null,e===null)throw bi(i);return th(e)?i.lanes=32:i.lanes=536870912,null}var A=c.children;return c=c.fallback,f?(Ei(),f=i.mode,A=No({mode:"hidden",children:A},f),c=Zi(c,f,a,null),A.return=i,c.return=i,A.sibling=c,i.child=A,c=i.child,c.memoizedState=yu(a),c.childLanes=xu(e,v,a),i.memoizedState=gu,Wr(null,c)):(Ti(i),_u(i,A))}var z=e.memoizedState;if(z!==null&&(A=z.dehydrated,A!==null)){if(m)i.flags&256?(Ti(i),i.flags&=-257,i=bu(e,i,a)):i.memoizedState!==null?(Ei(),i.child=e.child,i.flags|=128,i=null):(Ei(),A=c.fallback,f=i.mode,c=No({mode:"visible",children:c.children},f),A=Zi(A,f,a,null),A.flags|=2,c.return=i,A.return=i,c.sibling=A,i.child=c,ss(i,e.child,null,a),c=i.child,c.memoizedState=yu(a),c.childLanes=xu(e,v,a),i.memoizedState=gu,i=Wr(null,c));else if(Ti(i),th(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var Y=v.dgst;v=Y,c=Error(s(419)),c.stack="",c.digest=v,Pr({value:c,source:null,stack:null}),i=bu(e,i,a)}else if(xe||Is(e,i,a,!1),v=(a&e.childLanes)!==0,xe||v){if(v=Kt,v!==null&&(c=Yf(v,a),c!==0&&c!==z.retryLane))throw z.retryLane=c,Wi(e,c),Ke(v,e,c),pu;Ju(A)||Xo(),i=bu(e,i,a)}else Ju(A)?(i.flags|=192,i.child=e.child,i=null):(e=z.treeContext,ee=Sn(A.nextSibling),Re=i,Lt=!0,_i=null,bn=!1,e!==null&&Gd(i,e),i=_u(i,c.children),i.flags|=4096);return i}return f?(Ei(),A=c.fallback,f=i.mode,z=e.child,Y=z.sibling,c=$n(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,Y!==null?A=$n(Y,A):(A=Zi(A,f,a,null),A.flags|=2),A.return=i,c.return=i,c.sibling=A,i.child=c,Wr(null,c),c=i.child,A=e.child.memoizedState,A===null?A=yu(a):(f=A.cachePool,f!==null?(z=ge._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Vd(),A={baseLanes:A.baseLanes|a,cachePool:f}),c.memoizedState=A,c.childLanes=xu(e,v,a),i.memoizedState=gu,Wr(e.child,c)):(Ti(i),a=e.child,e=a.sibling,a=$n(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function _u(e,i){return i=No({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function No(e,i){return e=rn(22,e,null,i),e.lanes=0,e}function bu(e,i,a){return ss(i,e.child,null,a),e=_u(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function rm(e,i,a){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Uc(e.return,i,a)}function vu(e,i,a,c,f,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=a,v.tailMode=f,v.treeForkCount=m)}function am(e,i,a){var c=i.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=pe.current,A=(v&2)!==0;if(A?(v=v&1|2,i.flags|=128):v&=1,ot(pe,v),Be(e,i,c,a),c=Lt?Lr:0,!A&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rm(e,a,i);else if(e.tag===19)rm(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Ao(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),vu(i,!1,f,a,m,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Ao(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}vu(i,!0,a,null,m,c);break;case"together":vu(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ti(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ri|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Is(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=$n(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=$n(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Su(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&go(e)))}function Zb(e,i,a){switch(i.tag){case 3:te(i,i.stateNode.containerInfo),vi(i,ge,e.memoizedState.cache),Ki();break;case 27:case 5:en(i);break;case 4:te(i,i.stateNode.containerInfo);break;case 10:vi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,qc(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ti(i),i.flags|=128,null):(a&i.child.childLanes)!==0?sm(e,i,a):(Ti(i),e=ti(e,i,a),e!==null?e.sibling:null);Ti(i);break;case 19:var f=(e.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(Is(e,i,a,!1),c=(a&i.childLanes)!==0),f){if(c)return am(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(pe,pe.current),c)break;return null;case 22:return i.lanes=0,Kp(e,i,a,i.pendingProps);case 24:vi(i,ge,e.memoizedState.cache)}return ti(e,i,a)}function om(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)xe=!0;else{if(!Su(e,a)&&(i.flags&128)===0)return xe=!1,Zb(e,i,a);xe=(e.flags&131072)!==0}else xe=!1,Lt&&(i.flags&1048576)!==0&&jd(i,Lr,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=ns(i.elementType),i.type=e,typeof e=="function")wc(e)?(c=as(e,c),i.tag=1,i=nm(null,i,e,c,a)):(i.tag=0,i=mu(null,i,e,c,a));else{if(e!=null){var f=e.$$typeof;if(f===O){i.tag=11,i=Qp(null,i,e,c,a);break t}else if(f===H){i.tag=14,i=Wp(null,i,e,c,a);break t}}throw i=ht(e)||e,Error(s(306,i,""))}}return i;case 0:return mu(e,i,i.type,i.pendingProps,a);case 1:return c=i.type,f=as(c,i.pendingProps),nm(e,i,c,f,a);case 3:t:{if(te(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;f=m.element,Hc(e,i),Xr(i,c,null,a);var v=i.memoizedState;if(c=v.cache,vi(i,ge,c),c!==m.cache&&Nc(i,[ge],a,!0),Yr(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=im(e,i,c,a);break t}else if(c!==f){f=yn(Error(s(424)),i),Pr(f),i=im(e,i,c,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ee=Sn(e.firstChild),Re=i,Lt=!0,_i=null,bn=!0,a=Kd(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ki(),c===f){i=ti(e,i,a);break t}Be(e,i,c,a)}i=i.child}return i;case 26:return Uo(e,i),e===null?(a=xg(i.type,null,i.pendingProps,null))?i.memoizedState=a:Lt||(a=i.type,e=i.pendingProps,c=Ko(Ct.current).createElement(a),c[Me]=i,c[Ve]=e,De(c,a,e),Ce(c),i.stateNode=c):i.memoizedState=xg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return en(i),e===null&&Lt&&(c=i.stateNode=mg(i.type,i.pendingProps,Ct.current),Re=i,bn=!0,f=ee,zi(i.type)?(eh=f,ee=Sn(c.firstChild)):ee=f),Be(e,i,i.pendingProps.children,a),Uo(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Lt&&((f=c=ee)&&(c=w1(c,i.type,i.pendingProps,bn),c!==null?(i.stateNode=c,Re=i,ee=Sn(c.firstChild),bn=!1,f=!0):f=!1),f||bi(i)),en(i),f=i.type,m=i.pendingProps,v=e!==null?e.memoizedProps:null,c=m.children,Wu(f,m)?c=null:v!==null&&Wu(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Qc(e,i,Hb,null,null,a),ha._currentValue=f),Uo(e,i),Be(e,i,c,a),i.child;case 6:return e===null&&Lt&&((e=a=ee)&&(a=M1(a,i.pendingProps,bn),a!==null?(i.stateNode=a,Re=i,ee=null,e=!0):e=!1),e||bi(i)),null;case 13:return sm(e,i,a);case 4:return te(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=ss(i,null,c,a):Be(e,i,c,a),i.child;case 11:return Qp(e,i,i.type,i.pendingProps,a);case 7:return Be(e,i,i.pendingProps,a),i.child;case 8:return Be(e,i,i.pendingProps.children,a),i.child;case 12:return Be(e,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,vi(i,i.type,c.value),Be(e,i,c.children,a),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,ts(i),f=ke(f),c=c(f),i.flags|=1,Be(e,i,c,a),i.child;case 14:return Wp(e,i,i.type,i.pendingProps,a);case 15:return Zp(e,i,i.type,i.pendingProps,a);case 19:return am(e,i,a);case 31:return Wb(e,i,a);case 22:return Kp(e,i,a,i.pendingProps);case 24:return ts(i),c=ke(ge),e===null?(f=jc(),f===null&&(f=Kt,m=Lc(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:c,cache:f},Ic(i),vi(i,ge,f)):((e.lanes&a)!==0&&(Hc(e,i),Xr(i,null,null,a),Yr()),f=e.memoizedState,m=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),vi(i,ge,c)):(c=m.cache,vi(i,ge,c),c!==f.cache&&Nc(i,[ge],a,!0))),Be(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ei(e){e.flags|=4}function Cu(e,i,a,c,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(zm())e.flags|=8192;else throw is=bo,Gc}else e.flags&=-16777217}function lm(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Cg(i))if(zm())e.flags|=8192;else throw is=bo,Gc}function Lo(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?If():536870912,e.lanes|=i,Js|=i)}function Zr(e,i){if(!Lt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function ne(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=a,i}function Kb(e,i,a){var c=i.pendingProps;switch(Bc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ne(i),null;case 1:return ne(i),null;case 3:return a=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Zn(ge),Ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gs(i)?ei(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Oc())),ne(i),null;case 26:var f=i.type,m=i.memoizedState;return e===null?(ei(i),m!==null?(ne(i),lm(i,m)):(ne(i),Cu(i,f,null,c,a))):m?m!==e.memoizedState?(ei(i),ne(i),lm(i,m)):(ne(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&ei(i),ne(i),Cu(i,f,e,c,a)),null;case 27:if(Nn(i),a=Ct.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return ne(i),null}e=ut.current,Gs(i)?Id(i):(e=mg(f,c,a),i.stateNode=e,ei(i))}return ne(i),null;case 5:if(Nn(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return ne(i),null}if(m=ut.current,Gs(i))Id(i);else{var v=Ko(Ct.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[Me]=i,m[Ve]=c;t:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break t;for(;v.sibling===null;){if(v.return===null||v.return===i)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;t:switch(De(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ei(i)}}return ne(i),Cu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&ei(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=Ct.current,Gs(i)){if(e=i.stateNode,a=i.memoizedProps,c=null,f=Re,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}e[Me]=i,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||sg(e.nodeValue,a)),e||bi(i,!0)}else e=Ko(e).createTextNode(c),e[Me]=i,i.stateNode=e}return ne(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(c=Gs(i),a!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Me]=i}else Ki(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ne(i),e=!1}else a=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(on(i),i):(on(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ne(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Gs(i),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Me]=i}else Ki(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ne(i),f=!1}else f=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(on(i),i):(on(i),null)}return on(i),(i.flags&128)!==0?(i.lanes=a,i):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Lo(i,i.updateQueue),ne(i),null);case 4:return Ft(),e===null&&Xu(i.stateNode.containerInfo),ne(i),null;case 10:return Zn(i.type),ne(i),null;case 19:if(V(pe),c=i.memoizedState,c===null)return ne(i),null;if(f=(i.flags&128)!==0,m=c.rendering,m===null)if(f)Zr(c,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=Ao(e),m!==null){for(i.flags|=128,Zr(c,!1),e=m.updateQueue,i.updateQueue=e,Lo(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Nd(a,e),a=a.sibling;return ot(pe,pe.current&1|2),Lt&&Qn(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&Ie()>Ho&&(i.flags|=128,f=!0,Zr(c,!1),i.lanes=4194304)}else{if(!f)if(e=Ao(m),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Lo(i,e),Zr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Lt)return ne(i),null}else 2*Ie()-c.renderingStartTime>Ho&&a!==536870912&&(i.flags|=128,f=!0,Zr(c,!1),i.lanes=4194304);c.isBackwards?(m.sibling=i.child,i.child=m):(e=c.last,e!==null?e.sibling=m:i.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Ie(),e.sibling=null,a=pe.current,ot(pe,f?a&1|2:a&1),Lt&&Qn(i,c.treeForkCount),e):(ne(i),null);case 22:case 23:return on(i),Vc(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(ne(i),i.subtreeFlags&6&&(i.flags|=8192)):ne(i),a=i.updateQueue,a!==null&&Lo(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),e!==null&&V(es),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Zn(ge),ne(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Jb(e,i){switch(Bc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Zn(ge),Ft(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Nn(i),null;case 31:if(i.memoizedState!==null){if(on(i),i.alternate===null)throw Error(s(340));Ki()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(on(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ki()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return V(pe),null;case 4:return Ft(),null;case 10:return Zn(i.type),null;case 22:case 23:return on(i),Vc(),e!==null&&V(es),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Zn(ge),null;case 25:return null;default:return null}}function cm(e,i){switch(Bc(i),i.tag){case 3:Zn(ge),Ft();break;case 26:case 27:case 5:Nn(i);break;case 4:Ft();break;case 31:i.memoizedState!==null&&on(i);break;case 13:on(i);break;case 19:V(pe);break;case 10:Zn(i.type);break;case 22:case 23:on(i),Vc(),e!==null&&V(es);break;case 24:Zn(ge)}}function Kr(e,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){c=void 0;var m=a.create,v=a.inst;c=m(),v.destroy=c}a=a.next}while(a!==f)}}catch(A){Vt(i,i.return,A)}}function wi(e,i,a){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&e)===e){var v=c.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,f=i;var z=a,Y=A;try{Y()}catch(Z){Vt(f,z,Z)}}}c=c.next}while(c!==m)}}catch(Z){Vt(i,i.return,Z)}}function um(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{tp(i,a)}catch(c){Vt(e,e.return,c)}}}function hm(e,i,a){a.props=as(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){Vt(e,i,c)}}function Jr(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(f){Vt(e,i,f)}}function Gn(e,i){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){Vt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Vt(e,i,f)}else a.current=null}function fm(e){var i=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){Vt(e,e.return,f)}}function Au(e,i,a){try{var c=e.stateNode;v1(c,e.type,a,i),c[Ve]=i}catch(f){Vt(e,e.return,f)}}function dm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zi(e.type)||e.tag===4}function Tu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eu(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Vn));else if(c!==4&&(c===27&&zi(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Eu(e,i,a),e=e.sibling;e!==null;)Eu(e,i,a),e=e.sibling}function Po(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(c!==4&&(c===27&&zi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Po(e,i,a),e=e.sibling;e!==null;)Po(e,i,a),e=e.sibling}function pm(e){var i=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);De(i,c,a),i[Me]=e,i[Ve]=a}catch(m){Vt(e,e.return,m)}}var ni=!1,_e=!1,wu=!1,mm=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function t1(e,i){if(e=e.containerInfo,$u=rl,e=wd(e),bc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,A=-1,z=-1,Y=0,Z=0,nt=e,X=null;e:for(;;){for(var $;nt!==a||f!==0&&nt.nodeType!==3||(A=v+f),nt!==m||c!==0&&nt.nodeType!==3||(z=v+c),nt.nodeType===3&&(v+=nt.nodeValue.length),($=nt.firstChild)!==null;)X=nt,nt=$;for(;;){if(nt===e)break e;if(X===a&&++Y===f&&(A=v),X===m&&++Z===c&&(z=v),($=nt.nextSibling)!==null)break;nt=X,X=nt.parentNode}nt=$}a=A===-1||z===-1?null:{start:A,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qu={focusedElem:e,selectionRange:a},rl=!1,Ae=i;Ae!==null;)if(i=Ae,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Ae=e;else for(;Ae!==null;){switch(i=Ae,m=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var ft=as(a.type,f);e=c.getSnapshotBeforeUpdate(ft,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(vt){Vt(a,a.return,vt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Ku(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ku(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ae=e;break}Ae=i.return}}function gm(e,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:si(e,a),c&4&&Kr(5,a);break;case 1:if(si(e,a),c&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Vt(a,a.return,v)}else{var f=as(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Vt(a,a.return,v)}}c&64&&um(a),c&512&&Jr(a,a.return);break;case 3:if(si(e,a),c&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{tp(e,i)}catch(v){Vt(a,a.return,v)}}break;case 27:i===null&&c&4&&pm(a);case 26:case 5:si(e,a),i===null&&c&4&&fm(a),c&512&&Jr(a,a.return);break;case 12:si(e,a);break;case 31:si(e,a),c&4&&_m(e,a);break;case 13:si(e,a),c&4&&bm(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=c1.bind(null,a),R1(e,a))));break;case 22:if(c=a.memoizedState!==null||ni,!c){i=i!==null&&i.memoizedState!==null||_e,f=ni;var m=_e;ni=c,(_e=i)&&!m?ri(e,a,(a.subtreeFlags&8772)!==0):si(e,a),ni=f,_e=m}break;case 30:break;default:si(e,a)}}function ym(e){var i=e.alternate;i!==null&&(e.alternate=null,ym(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ic(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ae=null,$e=!1;function ii(e,i,a){for(a=a.child;a!==null;)xm(e,i,a),a=a.sibling}function xm(e,i,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(tt,a)}catch{}switch(a.tag){case 26:_e||Gn(a,i),ii(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_e||Gn(a,i);var c=ae,f=$e;zi(a.type)&&(ae=a.stateNode,$e=!1),ii(e,i,a),la(a.stateNode),ae=c,$e=f;break;case 5:_e||Gn(a,i);case 6:if(c=ae,f=$e,ae=null,ii(e,i,a),ae=c,$e=f,ae!==null)if($e)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(a.stateNode)}catch(m){Vt(a,i,m)}else try{ae.removeChild(a.stateNode)}catch(m){Vt(a,i,m)}break;case 18:ae!==null&&($e?(e=ae,ug(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),or(e)):ug(ae,a.stateNode));break;case 4:c=ae,f=$e,ae=a.stateNode.containerInfo,$e=!0,ii(e,i,a),ae=c,$e=f;break;case 0:case 11:case 14:case 15:wi(2,a,i),_e||wi(4,a,i),ii(e,i,a);break;case 1:_e||(Gn(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&hm(a,i,c)),ii(e,i,a);break;case 21:ii(e,i,a);break;case 22:_e=(c=_e)||a.memoizedState!==null,ii(e,i,a),_e=c;break;default:ii(e,i,a)}}function _m(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{or(e)}catch(a){Vt(i,i.return,a)}}}function bm(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{or(e)}catch(a){Vt(i,i.return,a)}}function e1(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new mm),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new mm),i;default:throw Error(s(435,e.tag))}}function jo(e,i){var a=e1(e);i.forEach(function(c){if(!a.has(c)){a.add(c);var f=u1.bind(null,e,c);c.then(f,f)}})}function Qe(e,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],m=e,v=i,A=v;t:for(;A!==null;){switch(A.tag){case 27:if(zi(A.type)){ae=A.stateNode,$e=!1;break t}break;case 5:ae=A.stateNode,$e=!1;break t;case 3:case 4:ae=A.stateNode.containerInfo,$e=!0;break t}A=A.return}if(ae===null)throw Error(s(160));xm(m,v,f),ae=null,$e=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)vm(i,e),i=i.sibling}var Mn=null;function vm(e,i){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qe(i,e),We(e),c&4&&(wi(3,e,e.return),Kr(3,e),wi(5,e,e.return));break;case 1:Qe(i,e),We(e),c&512&&(_e||a===null||Gn(a,a.return)),c&64&&ni&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=Mn;if(Qe(i,e),We(e),c&512&&(_e||a===null||Gn(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Er]||m[Me]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),De(m,c,a),m[Me]=e,Ce(m),c=m;break t;case"link":var v=vg("link","href",f).get(c+(a.href||""));if(v){for(var A=0;A<v.length;A++)if(m=v[A],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(A,1);break e}}m=f.createElement(c),De(m,c,a),f.head.appendChild(m);break;case"meta":if(v=vg("meta","content",f).get(c+(a.content||""))){for(A=0;A<v.length;A++)if(m=v[A],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(A,1);break e}}m=f.createElement(c),De(m,c,a),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[Me]=e,Ce(m),c=m}e.stateNode=c}else Sg(f,e.type,e.stateNode);else e.stateNode=bg(f,c,e.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?Sg(f,e.type,e.stateNode):bg(f,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Au(e,e.memoizedProps,a.memoizedProps)}break;case 27:Qe(i,e),We(e),c&512&&(_e||a===null||Gn(a,a.return)),a!==null&&c&4&&Au(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Qe(i,e),We(e),c&512&&(_e||a===null||Gn(a,a.return)),e.flags&32){f=e.stateNode;try{ks(f,"")}catch(ft){Vt(e,e.return,ft)}}c&4&&e.stateNode!=null&&(f=e.memoizedProps,Au(e,f,a!==null?a.memoizedProps:f)),c&1024&&(wu=!0);break;case 6:if(Qe(i,e),We(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(ft){Vt(e,e.return,ft)}}break;case 3:if(el=null,f=Mn,Mn=Jo(i.containerInfo),Qe(i,e),Mn=f,We(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{or(i.containerInfo)}catch(ft){Vt(e,e.return,ft)}wu&&(wu=!1,Sm(e));break;case 4:c=Mn,Mn=Jo(e.stateNode.containerInfo),Qe(i,e),We(e),Mn=c;break;case 12:Qe(i,e),We(e);break;case 31:Qe(i,e),We(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,jo(e,c)));break;case 13:Qe(i,e),We(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Io=Ie()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,jo(e,c)));break;case 22:f=e.memoizedState!==null;var z=a!==null&&a.memoizedState!==null,Y=ni,Z=_e;if(ni=Y||f,_e=Z||z,Qe(i,e),_e=Z,ni=Y,We(e),c&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||z||ni||_e||os(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){z=a=i;try{if(m=z.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=z.stateNode;var nt=z.memoizedProps.style,X=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;A.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ft){Vt(z,z.return,ft)}}}else if(i.tag===6){if(a===null){z=i;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(ft){Vt(z,z.return,ft)}}}else if(i.tag===18){if(a===null){z=i;try{var $=z.stateNode;f?hg($,!0):hg(z.stateNode,!1)}catch(ft){Vt(z,z.return,ft)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,jo(e,a))));break;case 19:Qe(i,e),We(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,jo(e,c)));break;case 30:break;case 21:break;default:Qe(i,e),We(e)}}function We(e){var i=e.flags;if(i&2){try{for(var a,c=e.return;c!==null;){if(dm(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=Tu(e);Po(e,m,f);break;case 5:var v=a.stateNode;a.flags&32&&(ks(v,""),a.flags&=-33);var A=Tu(e);Po(e,A,v);break;case 3:case 4:var z=a.stateNode.containerInfo,Y=Tu(e);Eu(e,Y,z);break;default:throw Error(s(161))}}catch(Z){Vt(e,e.return,Z)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Sm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Sm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function si(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)gm(e,i.alternate,i),i=i.sibling}function os(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:wi(4,i,i.return),os(i);break;case 1:Gn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&hm(i,i.return,a),os(i);break;case 27:la(i.stateNode);case 26:case 5:Gn(i,i.return),os(i);break;case 22:i.memoizedState===null&&os(i);break;case 30:os(i);break;default:os(i)}e=e.sibling}}function ri(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=e,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:ri(f,m,a),Kr(4,m);break;case 1:if(ri(f,m,a),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){Vt(c,c.return,Y)}if(c=m,f=c.updateQueue,f!==null){var A=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)Jd(z[f],A)}catch(Y){Vt(c,c.return,Y)}}a&&v&64&&um(m),Jr(m,m.return);break;case 27:pm(m);case 26:case 5:ri(f,m,a),a&&c===null&&v&4&&fm(m),Jr(m,m.return);break;case 12:ri(f,m,a);break;case 31:ri(f,m,a),a&&v&4&&_m(f,m);break;case 13:ri(f,m,a),a&&v&4&&bm(f,m);break;case 22:m.memoizedState===null&&ri(f,m,a),Jr(m,m.return);break;case 30:break;default:ri(f,m,a)}i=i.sibling}}function Mu(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&jr(a))}function Ru(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&jr(e))}function Rn(e,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Cm(e,i,a,c),i=i.sibling}function Cm(e,i,a,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Rn(e,i,a,c),f&2048&&Kr(9,i);break;case 1:Rn(e,i,a,c);break;case 3:Rn(e,i,a,c),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&jr(e)));break;case 12:if(f&2048){Rn(e,i,a,c),e=i.stateNode;try{var m=i.memoizedProps,v=m.id,A=m.onPostCommit;typeof A=="function"&&A(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Vt(i,i.return,z)}}else Rn(e,i,a,c);break;case 31:Rn(e,i,a,c);break;case 13:Rn(e,i,a,c);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?Rn(e,i,a,c):ta(e,i):m._visibility&2?Rn(e,i,a,c):(m._visibility|=2,Ws(e,i,a,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Mu(v,i);break;case 24:Rn(e,i,a,c),f&2048&&Ru(i.alternate,i);break;default:Rn(e,i,a,c)}}function Ws(e,i,a,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=e,v=i,A=a,z=c,Y=v.flags;switch(v.tag){case 0:case 11:case 15:Ws(m,v,A,z,f),Kr(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?Ws(m,v,A,z,f):ta(m,v):(Z._visibility|=2,Ws(m,v,A,z,f)),f&&Y&2048&&Mu(v.alternate,v);break;case 24:Ws(m,v,A,z,f),f&&Y&2048&&Ru(v.alternate,v);break;default:Ws(m,v,A,z,f)}i=i.sibling}}function ta(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,c=i,f=c.flags;switch(c.tag){case 22:ta(a,c),f&2048&&Mu(c.alternate,c);break;case 24:ta(a,c),f&2048&&Ru(c.alternate,c);break;default:ta(a,c)}i=i.sibling}}var ea=8192;function Zs(e,i,a){if(e.subtreeFlags&ea)for(e=e.child;e!==null;)Am(e,i,a),e=e.sibling}function Am(e,i,a){switch(e.tag){case 26:Zs(e,i,a),e.flags&ea&&e.memoizedState!==null&&I1(a,Mn,e.memoizedState,e.memoizedProps);break;case 5:Zs(e,i,a);break;case 3:case 4:var c=Mn;Mn=Jo(e.stateNode.containerInfo),Zs(e,i,a),Mn=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=ea,ea=16777216,Zs(e,i,a),ea=c):Zs(e,i,a));break;default:Zs(e,i,a)}}function Tm(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function na(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Ae=c,wm(c,e)}Tm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Em(e),e=e.sibling}function Em(e){switch(e.tag){case 0:case 11:case 15:na(e),e.flags&2048&&wi(9,e,e.return);break;case 3:na(e);break;case 12:na(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Go(e)):na(e);break;default:na(e)}}function Go(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Ae=c,wm(c,e)}Tm(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:wi(8,i,i.return),Go(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Go(i));break;default:Go(i)}e=e.sibling}}function wm(e,i){for(;Ae!==null;){var a=Ae;switch(a.tag){case 0:case 11:case 15:wi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:jr(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Ae=c;else t:for(a=e;Ae!==null;){c=Ae;var f=c.sibling,m=c.return;if(ym(c),c===a){Ae=null;break t}if(f!==null){f.return=m,Ae=f;break t}Ae=m}}}var n1={getCacheForType:function(e){var i=ke(ge),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return ke(ge).controller.signal}},i1=typeof WeakMap=="function"?WeakMap:Map,Ht=0,Kt=null,Bt=null,zt=0,Xt=0,ln=null,Mi=!1,Ks=!1,ku=!1,ai=0,ue=0,Ri=0,ls=0,Bu=0,cn=0,Js=0,ia=null,Ze=null,Du=!1,Io=0,Mm=0,Ho=1/0,Fo=null,ki=null,Se=0,Bi=null,tr=null,oi=0,Ou=0,zu=null,Rm=null,sa=0,Uu=null;function un(){return(Ht&2)!==0&&zt!==0?zt&-zt:B.T!==null?Iu():Xf()}function km(){if(cn===0)if((zt&536870912)===0||Lt){var e=Wa;Wa<<=1,(Wa&3932160)===0&&(Wa=262144),cn=e}else cn=536870912;return e=an.current,e!==null&&(e.flags|=32),cn}function Ke(e,i,a){(e===Kt&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)&&(er(e,0),Di(e,zt,cn,!1)),Tr(e,a),((Ht&2)===0||e!==Kt)&&(e===Kt&&((Ht&2)===0&&(ls|=a),ue===4&&Di(e,zt,cn,!1)),In(e))}function Bm(e,i,a){if((Ht&6)!==0)throw Error(s(327));var c=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Ar(e,i),f=c?a1(e,i):Lu(e,i,!0),m=c;do{if(f===0){Ks&&!c&&Di(e,i,0,!1);break}else{if(a=e.current.alternate,m&&!s1(a)){f=Lu(e,i,!1),m=!1;continue}if(f===2){if(m=i,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var A=e;f=ia;var z=A.current.memoizedState.isDehydrated;if(z&&(er(A,v).flags|=256),v=Lu(A,v,!1),v!==2){if(ku&&!z){A.errorRecoveryDisabledLanes|=m,ls|=m,f=4;break t}m=Ze,Ze=f,m!==null&&(Ze===null?Ze=m:Ze.push.apply(Ze,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){er(e,0),Di(e,i,0,!0);break}t:{switch(c=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Di(c,i,cn,!Mi);break t;case 2:Ze=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Io+300-Ie(),10<f)){if(Di(c,i,cn,!Mi),Ka(c,0,!0)!==0)break t;oi=i,c.timeoutHandle=lg(Dm.bind(null,c,a,Ze,Fo,Du,i,cn,ls,Js,Mi,m,"Throttled",-0,0),f);break t}Dm(c,a,Ze,Fo,Du,i,cn,ls,Js,Mi,m,null,-0,0)}}break}while(!0);In(e)}function Dm(e,i,a,c,f,m,v,A,z,Y,Z,nt,X,$){if(e.timeoutHandle=-1,nt=i.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},Am(i,m,nt);var ft=(m&62914560)===m?Io-Ie():(m&4194048)===m?Mm-Ie():0;if(ft=H1(nt,ft),ft!==null){oi=m,e.cancelPendingCommit=ft(Gm.bind(null,e,i,m,a,c,f,v,A,z,Z,nt,null,X,$)),Di(e,m,v,!Y);return}}Gm(e,i,m,a,c,f,v,A,z)}function s1(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!sn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Di(e,i,a,c){i&=~Bu,i&=~ls,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var f=i;0<f;){var m=31-Rt(f),v=1<<m;c[m]=-1,f&=~v}a!==0&&Hf(e,a,i)}function Yo(){return(Ht&6)===0?(ra(0),!1):!0}function Nu(){if(Bt!==null){if(Xt===0)var e=Bt.return;else e=Bt,Wn=Ji=null,Kc(e),Xs=null,Ir=0,e=Bt;for(;e!==null;)cm(e.alternate,e),e=e.return;Bt=null}}function er(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,A1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),oi=0,Nu(),Kt=e,Bt=a=$n(e.current,null),zt=i,Xt=0,ln=null,Mi=!1,Ks=Ar(e,i),ku=!1,Js=cn=Bu=ls=Ri=ue=0,Ze=ia=null,Du=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var f=31-Rt(c),m=1<<f;i|=e[f],c&=~m}return ai=i,uo(),a}function Om(e,i){Et=null,B.H=Qr,i===Ys||i===_o?(i=Qd(),Xt=3):i===Gc?(i=Qd(),Xt=4):Xt=i===pu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ln=i,Bt===null&&(ue=1,Oo(e,yn(i,e.current)))}function zm(){var e=an.current;return e===null?!0:(zt&4194048)===zt?vn===null:(zt&62914560)===zt||(zt&536870912)!==0?e===vn:!1}function Um(){var e=B.H;return B.H=Qr,e===null?Qr:e}function Nm(){var e=B.A;return B.A=n1,e}function Xo(){ue=4,Mi||(zt&4194048)!==zt&&an.current!==null||(Ks=!0),(Ri&134217727)===0&&(ls&134217727)===0||Kt===null||Di(Kt,zt,cn,!1)}function Lu(e,i,a){var c=Ht;Ht|=2;var f=Um(),m=Nm();(Kt!==e||zt!==i)&&(Fo=null,er(e,i)),i=!1;var v=ue;t:do try{if(Xt!==0&&Bt!==null){var A=Bt,z=ln;switch(Xt){case 8:Nu(),v=6;break t;case 3:case 2:case 9:case 6:an.current===null&&(i=!0);var Y=Xt;if(Xt=0,ln=null,nr(e,A,z,Y),a&&Ks){v=0;break t}break;default:Y=Xt,Xt=0,ln=null,nr(e,A,z,Y)}}r1(),v=ue;break}catch(Z){Om(e,Z)}while(!0);return i&&e.shellSuspendCounter++,Wn=Ji=null,Ht=c,B.H=f,B.A=m,Bt===null&&(Kt=null,zt=0,uo()),v}function r1(){for(;Bt!==null;)Lm(Bt)}function a1(e,i){var a=Ht;Ht|=2;var c=Um(),f=Nm();Kt!==e||zt!==i?(Fo=null,Ho=Ie()+500,er(e,i)):Ks=Ar(e,i);t:do try{if(Xt!==0&&Bt!==null){i=Bt;var m=ln;e:switch(Xt){case 1:Xt=0,ln=null,nr(e,i,m,1);break;case 2:case 9:if(qd(m)){Xt=0,ln=null,Pm(i);break}i=function(){Xt!==2&&Xt!==9||Kt!==e||(Xt=7),In(e)},m.then(i,i);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:qd(m)?(Xt=0,ln=null,Pm(i)):(Xt=0,ln=null,nr(e,i,m,7));break;case 5:var v=null;switch(Bt.tag){case 26:v=Bt.memoizedState;case 5:case 27:var A=Bt;if(v?Cg(v):A.stateNode.complete){Xt=0,ln=null;var z=A.sibling;if(z!==null)Bt=z;else{var Y=A.return;Y!==null?(Bt=Y,Vo(Y)):Bt=null}break e}}Xt=0,ln=null,nr(e,i,m,5);break;case 6:Xt=0,ln=null,nr(e,i,m,6);break;case 8:Nu(),ue=6;break t;default:throw Error(s(462))}}o1();break}catch(Z){Om(e,Z)}while(!0);return Wn=Ji=null,B.H=c,B.A=f,Ht=a,Bt!==null?0:(Kt=null,zt=0,uo(),ue)}function o1(){for(;Bt!==null&&!dn();)Lm(Bt)}function Lm(e){var i=om(e.alternate,e,ai);e.memoizedProps=e.pendingProps,i===null?Vo(e):Bt=i}function Pm(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=em(a,i,i.pendingProps,i.type,void 0,zt);break;case 11:i=em(a,i,i.pendingProps,i.type.render,i.ref,zt);break;case 5:Kc(i);default:cm(a,i),i=Bt=Nd(i,ai),i=om(a,i,ai)}e.memoizedProps=e.pendingProps,i===null?Vo(e):Bt=i}function nr(e,i,a,c){Wn=Ji=null,Kc(i),Xs=null,Ir=0;var f=i.return;try{if(Qb(e,f,i,a,zt)){ue=1,Oo(e,yn(a,e.current)),Bt=null;return}}catch(m){if(f!==null)throw Bt=f,m;ue=1,Oo(e,yn(a,e.current)),Bt=null;return}i.flags&32768?(Lt||c===1?e=!0:Ks||(zt&536870912)!==0?e=!1:(Mi=e=!0,(c===2||c===9||c===3||c===6)&&(c=an.current,c!==null&&c.tag===13&&(c.flags|=16384))),jm(i,e)):Vo(i)}function Vo(e){var i=e;do{if((i.flags&32768)!==0){jm(i,Mi);return}e=i.return;var a=Kb(i.alternate,i,ai);if(a!==null){Bt=a;return}if(i=i.sibling,i!==null){Bt=i;return}Bt=i=e}while(i!==null);ue===0&&(ue=5)}function jm(e,i){do{var a=Jb(e.alternate,e);if(a!==null){a.flags&=32767,Bt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Bt=e;return}Bt=e=a}while(e!==null);ue=6,Bt=null}function Gm(e,i,a,c,f,m,v,A,z){e.cancelPendingCommit=null;do qo();while(Se!==0);if((Ht&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Tc,G_(e,a,m,v,A,z),e===Kt&&(Bt=Kt=null,zt=0),tr=i,Bi=e,oi=a,Ou=m,zu=f,Rm=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,h1(x,function(){return Xm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,f=L.p,L.p=2,v=Ht,Ht|=4;try{t1(e,i,a)}finally{Ht=v,L.p=f,B.T=c}}Se=1,Im(),Hm(),Fm()}}function Im(){if(Se===1){Se=0;var e=Bi,i=tr,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var c=L.p;L.p=2;var f=Ht;Ht|=4;try{vm(i,e);var m=Qu,v=wd(e.containerInfo),A=m.focusedElem,z=m.selectionRange;if(v!==A&&A&&A.ownerDocument&&Ed(A.ownerDocument.documentElement,A)){if(z!==null&&bc(A)){var Y=z.start,Z=z.end;if(Z===void 0&&(Z=Y),"selectionStart"in A)A.selectionStart=Y,A.selectionEnd=Math.min(Z,A.value.length);else{var nt=A.ownerDocument||document,X=nt&&nt.defaultView||window;if(X.getSelection){var $=X.getSelection(),ft=A.textContent.length,vt=Math.min(z.start,ft),Wt=z.end===void 0?vt:Math.min(z.end,ft);!$.extend&&vt>Wt&&(v=Wt,Wt=vt,vt=v);var G=Td(A,vt),N=Td(A,Wt);if(G&&N&&($.rangeCount!==1||$.anchorNode!==G.node||$.anchorOffset!==G.offset||$.focusNode!==N.node||$.focusOffset!==N.offset)){var F=nt.createRange();F.setStart(G.node,G.offset),$.removeAllRanges(),vt>Wt?($.addRange(F),$.extend(N.node,N.offset)):(F.setEnd(N.node,N.offset),$.addRange(F))}}}}for(nt=[],$=A;$=$.parentNode;)$.nodeType===1&&nt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<nt.length;A++){var et=nt[A];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}rl=!!$u,Qu=$u=null}finally{Ht=f,L.p=c,B.T=a}}e.current=i,Se=2}}function Hm(){if(Se===2){Se=0;var e=Bi,i=tr,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var c=L.p;L.p=2;var f=Ht;Ht|=4;try{gm(e,i.alternate,i)}finally{Ht=f,L.p=c,B.T=a}}Se=3}}function Fm(){if(Se===4||Se===3){Se=0,Cr();var e=Bi,i=tr,a=oi,c=Rm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Se=5:(Se=0,tr=Bi=null,Ym(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(ki=null),ec(a),i=i.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(tt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=B.T,f=L.p,L.p=2,B.T=null;try{for(var m=e.onRecoverableError,v=0;v<c.length;v++){var A=c[v];m(A.value,{componentStack:A.stack})}}finally{B.T=i,L.p=f}}(oi&3)!==0&&qo(),In(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Uu?sa++:(sa=0,Uu=e):sa=0,ra(0)}}function Ym(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,jr(i)))}function qo(){return Im(),Hm(),Fm(),Xm()}function Xm(){if(Se!==5)return!1;var e=Bi,i=Ou;Ou=0;var a=ec(oi),c=B.T,f=L.p;try{L.p=32>a?32:a,B.T=null,a=zu,zu=null;var m=Bi,v=oi;if(Se=0,tr=Bi=null,oi=0,(Ht&6)!==0)throw Error(s(331));var A=Ht;if(Ht|=4,Em(m.current),Cm(m,m.current,v,a),Ht=A,ra(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(tt,m)}catch{}return!0}finally{L.p=f,B.T=c,Ym(e,i)}}function Vm(e,i,a){i=yn(a,i),i=du(e.stateNode,i,2),e=Ai(e,i,2),e!==null&&(Tr(e,2),In(e))}function Vt(e,i,a){if(e.tag===3)Vm(e,e,a);else for(;i!==null;){if(i.tag===3){Vm(i,e,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ki===null||!ki.has(c))){e=yn(a,e),a=qp(2),c=Ai(i,a,2),c!==null&&($p(a,c,i,e),Tr(c,2),In(c));break}}i=i.return}}function Pu(e,i,a){var c=e.pingCache;if(c===null){c=e.pingCache=new i1;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(ku=!0,f.add(a),e=l1.bind(null,e,i,a),i.then(e,e))}function l1(e,i,a){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Kt===e&&(zt&a)===a&&(ue===4||ue===3&&(zt&62914560)===zt&&300>Ie()-Io?(Ht&2)===0&&er(e,0):Bu|=a,Js===zt&&(Js=0)),In(e)}function qm(e,i){i===0&&(i=If()),e=Wi(e,i),e!==null&&(Tr(e,i),In(e))}function c1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),qm(e,a)}function u1(e,i){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),qm(e,a)}function h1(e,i){return Cs(e,i)}var $o=null,ir=null,ju=!1,Qo=!1,Gu=!1,Oi=0;function In(e){e!==ir&&e.next===null&&(ir===null?$o=ir=e:ir=ir.next=e),Qo=!0,ju||(ju=!0,d1())}function ra(e,i){if(!Gu&&Qo){Gu=!0;do for(var a=!1,c=$o;c!==null;){if(e!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,A=c.pingedLanes;m=(1<<31-Rt(42|e)+1)-1,m&=f&~(v&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Zm(c,m))}else m=zt,m=Ka(c,c===Kt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Ar(c,m)||(a=!0,Zm(c,m));c=c.next}while(a);Gu=!1}}function f1(){$m()}function $m(){Qo=ju=!1;var e=0;Oi!==0&&C1()&&(e=Oi);for(var i=Ie(),a=null,c=$o;c!==null;){var f=c.next,m=Qm(c,i);m===0?(c.next=null,a===null?$o=f:a.next=f,f===null&&(ir=a)):(a=c,(e!==0||(m&3)!==0)&&(Qo=!0)),c=f}Se!==0&&Se!==5||ra(e),Oi!==0&&(Oi=0)}function Qm(e,i){for(var a=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Rt(m),A=1<<v,z=f[v];z===-1?((A&a)===0||(A&c)!==0)&&(f[v]=j_(A,i)):z<=i&&(e.expiredLanes|=A),m&=~A}if(i=Kt,a=zt,a=Ka(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===i&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&mi(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ar(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(c!==null&&mi(c),ec(a)){case 2:case 8:a=T;break;case 32:a=x;break;case 268435456:a=R;break;default:a=x}return c=Wm.bind(null,e),a=Cs(a,c),e.callbackPriority=i,e.callbackNode=a,i}return c!==null&&c!==null&&mi(c),e.callbackPriority=2,e.callbackNode=null,2}function Wm(e,i){if(Se!==0&&Se!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(qo()&&e.callbackNode!==a)return null;var c=zt;return c=Ka(e,e===Kt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Bm(e,c,i),Qm(e,Ie()),e.callbackNode!=null&&e.callbackNode===a?Wm.bind(null,e):null)}function Zm(e,i){if(qo())return null;Bm(e,i,!0)}function d1(){T1(function(){(Ht&6)!==0?Cs($a,f1):$m()})}function Iu(){if(Oi===0){var e=Hs;e===0&&(e=Qa,Qa<<=1,(Qa&261888)===0&&(Qa=256)),Oi=e}return Oi}function Km(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:no(""+e)}function Jm(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function p1(e,i,a,c,f){if(i==="submit"&&a&&a.stateNode===f){var m=Km((f[Ve]||null).action),v=c.submitter;v&&(i=(i=v[Ve]||null)?Km(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var A=new ao("action","action",null,c,f);e.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Oi!==0){var z=v?Jm(f,v):new FormData(f);ou(a,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(A.preventDefault(),z=v?Jm(f,v):new FormData(f),ou(a,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var Hu=0;Hu<Ac.length;Hu++){var Fu=Ac[Hu],m1=Fu.toLowerCase(),g1=Fu[0].toUpperCase()+Fu.slice(1);wn(m1,"on"+g1)}wn(kd,"onAnimationEnd"),wn(Bd,"onAnimationIteration"),wn(Dd,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(Db,"onTransitionRun"),wn(Ob,"onTransitionStart"),wn(zb,"onTransitionCancel"),wn(Od,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(aa));function tg(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],f=c.event;c=c.listeners;t:{var m=void 0;if(i)for(var v=c.length-1;0<=v;v--){var A=c[v],z=A.instance,Y=A.currentTarget;if(A=A.listener,z!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=Y;try{m(f)}catch(Z){co(Z)}f.currentTarget=null,m=z}else for(v=0;v<c.length;v++){if(A=c[v],z=A.instance,Y=A.currentTarget,A=A.listener,z!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=Y;try{m(f)}catch(Z){co(Z)}f.currentTarget=null,m=z}}}}function Dt(e,i){var a=i[nc];a===void 0&&(a=i[nc]=new Set);var c=e+"__bubble";a.has(c)||(eg(i,e,2,!1),a.add(c))}function Yu(e,i,a){var c=0;i&&(c|=4),eg(a,e,c,i)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function Xu(e){if(!e[Wo]){e[Wo]=!0,$f.forEach(function(a){a!=="selectionchange"&&(y1.has(a)||Yu(a,!1,e),Yu(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Wo]||(i[Wo]=!0,Yu("selectionchange",!1,i))}}function eg(e,i,a,c){switch(kg(i)){case 2:var f=X1;break;case 8:f=V1;break;default:f=ah}a=f.bind(null,i,a,e),f=void 0,!hc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function Vu(e,i,a,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var A=c.stateNode.containerInfo;if(A===f)break;if(v===4)for(v=c.return;v!==null;){var z=v.tag;if((z===3||z===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;A!==null;){if(v=Ts(A),v===null)return;if(z=v.tag,z===5||z===6||z===26||z===27){c=m=v;continue t}A=A.parentNode}}c=c.return}ad(function(){var Y=m,Z=cc(a),nt=[];t:{var X=zd.get(e);if(X!==void 0){var $=ao,ft=e;switch(e){case"keypress":if(so(a)===0)break t;case"keydown":case"keyup":$=ub;break;case"focusin":ft="focus",$=mc;break;case"focusout":ft="blur",$=mc;break;case"beforeblur":case"afterblur":$=mc;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=K_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=db;break;case kd:case Bd:case Dd:$=eb;break;case Od:$=mb;break;case"scroll":case"scrollend":$=W_;break;case"wheel":$=yb;break;case"copy":case"cut":case"paste":$=ib;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=hd;break;case"toggle":case"beforetoggle":$=_b}var vt=(i&4)!==0,Wt=!vt&&(e==="scroll"||e==="scrollend"),G=vt?X!==null?X+"Capture":null:X;vt=[];for(var N=Y,F;N!==null;){var et=N;if(F=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||F===null||G===null||(et=Mr(N,G),et!=null&&vt.push(oa(N,et,F))),Wt)break;N=N.return}0<vt.length&&(X=new $(X,ft,null,a,Z),nt.push({event:X,listeners:vt}))}}if((i&7)===0){t:{if(X=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",X&&a!==lc&&(ft=a.relatedTarget||a.fromElement)&&(Ts(ft)||ft[As]))break t;if(($||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,$?(ft=a.relatedTarget||a.toElement,$=Y,ft=ft?Ts(ft):null,ft!==null&&(Wt=l(ft),vt=ft.tag,ft!==Wt||vt!==5&&vt!==27&&vt!==6)&&(ft=null)):($=null,ft=Y),$!==ft)){if(vt=cd,et="onMouseLeave",G="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(vt=hd,et="onPointerLeave",G="onPointerEnter",N="pointer"),Wt=$==null?X:wr($),F=ft==null?X:wr(ft),X=new vt(et,N+"leave",$,a,Z),X.target=Wt,X.relatedTarget=F,et=null,Ts(Z)===Y&&(vt=new vt(G,N+"enter",ft,a,Z),vt.target=F,vt.relatedTarget=Wt,et=vt),Wt=et,$&&ft)e:{for(vt=x1,G=$,N=ft,F=0,et=G;et;et=vt(et))F++;et=0;for(var xt=N;xt;xt=vt(xt))et++;for(;0<F-et;)G=vt(G),F--;for(;0<et-F;)N=vt(N),et--;for(;F--;){if(G===N||N!==null&&G===N.alternate){vt=G;break e}G=vt(G),N=vt(N)}vt=null}else vt=null;$!==null&&ng(nt,X,$,vt,!1),ft!==null&&Wt!==null&&ng(nt,Wt,ft,vt,!0)}}t:{if(X=Y?wr(Y):window,$=X.nodeName&&X.nodeName.toLowerCase(),$==="select"||$==="input"&&X.type==="file")var jt=_d;else if(yd(X))if(bd)jt=Rb;else{jt=wb;var pt=Eb}else $=X.nodeName,!$||$.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&oc(Y.elementType)&&(jt=_d):jt=Mb;if(jt&&(jt=jt(e,Y))){xd(nt,jt,a,Z);break t}pt&&pt(e,X,Y),e==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&ac(X,"number",X.value)}switch(pt=Y?wr(Y):window,e){case"focusin":(yd(pt)||pt.contentEditable==="true")&&(zs=pt,vc=Y,Nr=null);break;case"focusout":Nr=vc=zs=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Md(nt,a,Z);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":Md(nt,a,Z)}var wt;if(yc)t:{switch(e){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else Os?md(e,a)&&(Ut="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ut="onCompositionStart");Ut&&(fd&&a.locale!=="ko"&&(Os||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Os&&(wt=od()):(yi=Z,fc="value"in yi?yi.value:yi.textContent,Os=!0)),pt=Zo(Y,Ut),0<pt.length&&(Ut=new ud(Ut,e,null,a,Z),nt.push({event:Ut,listeners:pt}),wt?Ut.data=wt:(wt=gd(a),wt!==null&&(Ut.data=wt)))),(wt=vb?Sb(e,a):Cb(e,a))&&(Ut=Zo(Y,"onBeforeInput"),0<Ut.length&&(pt=new ud("onBeforeInput","beforeinput",null,a,Z),nt.push({event:pt,listeners:Ut}),pt.data=wt)),p1(nt,e,Y,a,Z)}tg(nt,i)})}function oa(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Zo(e,i){for(var a=i+"Capture",c=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Mr(e,a),f!=null&&c.unshift(oa(e,f,m)),f=Mr(e,i),f!=null&&c.push(oa(e,f,m))),e.tag===3)return c;e=e.return}return[]}function x1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ng(e,i,a,c,f){for(var m=i._reactName,v=[];a!==null&&a!==c;){var A=a,z=A.alternate,Y=A.stateNode;if(A=A.tag,z!==null&&z===c)break;A!==5&&A!==26&&A!==27||Y===null||(z=Y,f?(Y=Mr(a,m),Y!=null&&v.unshift(oa(a,Y,z))):f||(Y=Mr(a,m),Y!=null&&v.push(oa(a,Y,z)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var _1=/\r\n?/g,b1=/\u0000|\uFFFD/g;function ig(e){return(typeof e=="string"?e:""+e).replace(_1,`
`).replace(b1,"")}function sg(e,i){return i=ig(i),ig(e)===i}function Qt(e,i,a,c,f,m){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||ks(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&ks(e,""+c);break;case"className":to(e,"class",c);break;case"tabIndex":to(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":to(e,a,c);break;case"style":sd(e,c,m);break;case"data":if(i!=="object"){to(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=no(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&Qt(e,i,"name",f.name,f,null),Qt(e,i,"formEncType",f.formEncType,f,null),Qt(e,i,"formMethod",f.formMethod,f,null),Qt(e,i,"formTarget",f.formTarget,f,null)):(Qt(e,i,"encType",f.encType,f,null),Qt(e,i,"method",f.method,f,null),Qt(e,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=no(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Vn);break;case"onScroll":c!=null&&Dt("scroll",e);break;case"onScrollEnd":c!=null&&Dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=no(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":Dt("beforetoggle",e),Dt("toggle",e),Ja(e,"popover",c);break;case"xlinkActuate":Xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Xn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Xn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Xn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Xn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ja(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$_.get(a)||a,Ja(e,a,c))}}function qu(e,i,a,c,f,m){switch(a){case"style":sd(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof c=="string"?ks(e,c):(typeof c=="number"||typeof c=="bigint")&&ks(e,""+c);break;case"onScroll":c!=null&&Dt("scroll",e);break;case"onScrollEnd":c!=null&&Dt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qf.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=e[Ve]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(i,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,c,f);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):Ja(e,a,c)}}}function De(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",e),Dt("load",e);var c=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qt(e,i,m,v,a,null)}}f&&Qt(e,i,"srcSet",a.srcSet,a,null),c&&Qt(e,i,"src",a.src,a,null);return;case"input":Dt("invalid",e);var A=m=v=f=null,z=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":f=Z;break;case"type":v=Z;break;case"checked":z=Z;break;case"defaultChecked":Y=Z;break;case"value":m=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:Qt(e,i,c,Z,a,null)}}td(e,m,A,z,Y,v,f,!1);return;case"select":Dt("invalid",e),c=v=m=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":v=A;break;case"multiple":c=A;default:Qt(e,i,f,A,a,null)}i=m,a=v,e.multiple=!!c,i!=null?Rs(e,!!c,i,!1):a!=null&&Rs(e,!!c,a,!0);return;case"textarea":Dt("invalid",e),m=f=c=null;for(v in a)if(a.hasOwnProperty(v)&&(A=a[v],A!=null))switch(v){case"value":c=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Qt(e,i,v,A,a,null)}nd(e,c,f,m);return;case"option":for(z in a)a.hasOwnProperty(z)&&(c=a[z],c!=null)&&(z==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":Qt(e,i,z,c,a,null));return;case"dialog":Dt("beforetoggle",e),Dt("toggle",e),Dt("cancel",e),Dt("close",e);break;case"iframe":case"object":Dt("load",e);break;case"video":case"audio":for(c=0;c<aa.length;c++)Dt(aa[c],e);break;case"image":Dt("error",e),Dt("load",e);break;case"details":Dt("toggle",e);break;case"embed":case"source":case"link":Dt("error",e),Dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qt(e,i,Y,c,a,null)}return;default:if(oc(i)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&qu(e,i,Z,c,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(c=a[A],c!=null&&Qt(e,i,A,c,a,null))}function v1(e,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,A=null,z=null,Y=null,Z=null;for($ in a){var nt=a[$];if(a.hasOwnProperty($)&&nt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":z=nt;default:c.hasOwnProperty($)||Qt(e,i,$,null,c,nt)}}for(var X in c){var $=c[X];if(nt=a[X],c.hasOwnProperty(X)&&($!=null||nt!=null))switch(X){case"type":m=$;break;case"name":f=$;break;case"checked":Y=$;break;case"defaultChecked":Z=$;break;case"value":v=$;break;case"defaultValue":A=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:$!==nt&&Qt(e,i,X,$,c,nt)}}rc(e,v,A,z,Y,Z,m,f);return;case"select":$=v=A=X=null;for(m in a)if(z=a[m],a.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":$=z;default:c.hasOwnProperty(m)||Qt(e,i,m,null,c,z)}for(f in c)if(m=c[f],z=a[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":X=m;break;case"defaultValue":A=m;break;case"multiple":v=m;default:m!==z&&Qt(e,i,f,m,c,z)}i=A,a=v,c=$,X!=null?Rs(e,!!a,X,!1):!!c!=!!a&&(i!=null?Rs(e,!!a,i,!0):Rs(e,!!a,a?[]:"",!1));return;case"textarea":$=X=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Qt(e,i,A,null,c,f)}for(v in c)if(f=c[v],m=a[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":X=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Qt(e,i,v,f,c,m)}ed(e,X,$);return;case"option":for(var ft in a)X=a[ft],a.hasOwnProperty(ft)&&X!=null&&!c.hasOwnProperty(ft)&&(ft==="selected"?e.selected=!1:Qt(e,i,ft,null,c,X));for(z in c)X=c[z],$=a[z],c.hasOwnProperty(z)&&X!==$&&(X!=null||$!=null)&&(z==="selected"?e.selected=X&&typeof X!="function"&&typeof X!="symbol":Qt(e,i,z,X,c,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in a)X=a[vt],a.hasOwnProperty(vt)&&X!=null&&!c.hasOwnProperty(vt)&&Qt(e,i,vt,null,c,X);for(Y in c)if(X=c[Y],$=a[Y],c.hasOwnProperty(Y)&&X!==$&&(X!=null||$!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:Qt(e,i,Y,X,c,$)}return;default:if(oc(i)){for(var Wt in a)X=a[Wt],a.hasOwnProperty(Wt)&&X!==void 0&&!c.hasOwnProperty(Wt)&&qu(e,i,Wt,void 0,c,X);for(Z in c)X=c[Z],$=a[Z],!c.hasOwnProperty(Z)||X===$||X===void 0&&$===void 0||qu(e,i,Z,X,c,$);return}}for(var G in a)X=a[G],a.hasOwnProperty(G)&&X!=null&&!c.hasOwnProperty(G)&&Qt(e,i,G,null,c,X);for(nt in c)X=c[nt],$=a[nt],!c.hasOwnProperty(nt)||X===$||X==null&&$==null||Qt(e,i,nt,X,c,$)}function rg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function S1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var f=a[c],m=f.transferSize,v=f.initiatorType,A=f.duration;if(m&&A&&rg(v)){for(v=0,A=f.responseEnd,c+=1;c<a.length;c++){var z=a[c],Y=z.startTime;if(Y>A)break;var Z=z.transferSize,nt=z.initiatorType;Z&&rg(nt)&&(z=z.responseEnd,v+=Z*(z<A?1:(A-Y)/(z-Y)))}if(--c,i+=8*(m+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $u=null,Qu=null;function Ko(e){return e.nodeType===9?e:e.ownerDocument}function ag(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function og(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Wu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Zu=null;function C1(){var e=window.event;return e&&e.type==="popstate"?e===Zu?!1:(Zu=e,!0):(Zu=null,!1)}var lg=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,T1=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(e){return cg.resolve(null).then(e).catch(E1)}:lg;function E1(e){setTimeout(function(){throw e})}function zi(e){return e==="head"}function ug(e,i){var a=i,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(f),or(i);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")la(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,la(a);for(var m=a.firstChild;m;){var v=m.nextSibling,A=m.nodeName;m[Er]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&la(e.ownerDocument.body);a=f}while(a);or(i)}function hg(e,i){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function Ku(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ku(a),ic(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function w1(e,i,a,c){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Er])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=Sn(e.nextSibling),e===null)break}return null}function M1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Sn(e.nextSibling),e===null))return null;return e}function fg(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Sn(e.nextSibling),e===null))return null;return e}function Ju(e){return e.data==="$?"||e.data==="$~"}function th(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function R1(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Sn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var eh=null;function dg(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Sn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function pg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function mg(e,i,a){switch(i=Ko(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function la(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ic(e)}var Cn=new Map,gg=new Set;function Jo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var li=L.d;L.d={f:k1,r:B1,D:D1,C:O1,L:z1,m:U1,X:L1,S:N1,M:P1};function k1(){var e=li.f(),i=Yo();return e||i}function B1(e){var i=Es(e);i!==null&&i.tag===5&&i.type==="form"?Op(i):li.r(e)}var sr=typeof document>"u"?null:document;function yg(e,i,a){var c=sr;if(c&&typeof i=="string"&&i){var f=mn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),gg.has(f)||(gg.add(f),e={rel:e,crossOrigin:a,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),De(i,"link",e),Ce(i),c.head.appendChild(i)))}}function D1(e){li.D(e),yg("dns-prefetch",e,null)}function O1(e,i){li.C(e,i),yg("preconnect",e,i)}function z1(e,i,a){li.L(e,i,a);var c=sr;if(c&&e&&i){var f='link[rel="preload"][as="'+mn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+mn(a.imageSizes)+'"]')):f+='[href="'+mn(e)+'"]';var m=f;switch(i){case"style":m=rr(e);break;case"script":m=ar(e)}Cn.has(m)||(e=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Cn.set(m,e),c.querySelector(f)!==null||i==="style"&&c.querySelector(ca(m))||i==="script"&&c.querySelector(ua(m))||(i=c.createElement("link"),De(i,"link",e),Ce(i),c.head.appendChild(i)))}}function U1(e,i){li.m(e,i);var a=sr;if(a&&e){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+mn(c)+'"][href="'+mn(e)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ar(e)}if(!Cn.has(m)&&(e=y({rel:"modulepreload",href:e},i),Cn.set(m,e),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ua(m)))return}c=a.createElement("link"),De(c,"link",e),Ce(c),a.head.appendChild(c)}}}function N1(e,i,a){li.S(e,i,a);var c=sr;if(c&&e){var f=ws(c).hoistableStyles,m=rr(e);i=i||"default";var v=f.get(m);if(!v){var A={loading:0,preload:null};if(v=c.querySelector(ca(m)))A.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Cn.get(m))&&nh(e,a);var z=v=c.createElement("link");Ce(z),De(z,"link",e),z._p=new Promise(function(Y,Z){z.onload=Y,z.onerror=Z}),z.addEventListener("load",function(){A.loading|=1}),z.addEventListener("error",function(){A.loading|=2}),A.loading|=4,tl(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:A},f.set(m,v)}}}function L1(e,i){li.X(e,i);var a=sr;if(a&&e){var c=ws(a).hoistableScripts,f=ar(e),m=c.get(f);m||(m=a.querySelector(ua(f)),m||(e=y({src:e,async:!0},i),(i=Cn.get(f))&&ih(e,i),m=a.createElement("script"),Ce(m),De(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function P1(e,i){li.M(e,i);var a=sr;if(a&&e){var c=ws(a).hoistableScripts,f=ar(e),m=c.get(f);m||(m=a.querySelector(ua(f)),m||(e=y({src:e,async:!0,type:"module"},i),(i=Cn.get(f))&&ih(e,i),m=a.createElement("script"),Ce(m),De(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function xg(e,i,a,c){var f=(f=Ct.current)?Jo(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=rr(a.href),a=ws(f).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=rr(a.href);var m=ws(f).hoistableStyles,v=m.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=f.querySelector(ca(e)))&&!m._p&&(v.instance=m,v.state.loading=5),Cn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Cn.set(e,a),m||j1(f,e,a,v.state))),i&&c===null)throw Error(s(528,""));return v}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ar(a),a=ws(f).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function rr(e){return'href="'+mn(e)+'"'}function ca(e){return'link[rel="stylesheet"]['+e+"]"}function _g(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function j1(e,i,a,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),De(i,"link",a),Ce(i),e.head.appendChild(i))}function ar(e){return'[src="'+mn(e)+'"]'}function ua(e){return"script[async]"+e}function bg(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+mn(a.href)+'"]');if(c)return i.instance=c,Ce(c),c;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Ce(c),De(c,"style",f),tl(c,a.precedence,e),i.instance=c;case"stylesheet":f=rr(a.href);var m=e.querySelector(ca(f));if(m)return i.state.loading|=4,i.instance=m,Ce(m),m;c=_g(a),(f=Cn.get(f))&&nh(c,f),m=(e.ownerDocument||e).createElement("link"),Ce(m);var v=m;return v._p=new Promise(function(A,z){v.onload=A,v.onerror=z}),De(m,"link",c),i.state.loading|=4,tl(m,a.precedence,e),i.instance=m;case"script":return m=ar(a.src),(f=e.querySelector(ua(m)))?(i.instance=f,Ce(f),f):(c=a,(f=Cn.get(m))&&(c=y({},a),ih(c,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ce(f),De(f,"link",c),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,tl(c,a.precedence,e));return i.instance}function tl(e,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var A=c[v];if(A.dataset.precedence===i)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function nh(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function ih(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var el=null;function vg(e,i,a){if(el===null){var c=new Map,f=el=new Map;f.set(a,c)}else f=el,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var m=a[f];if(!(m[Er]||m[Me]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=e+v;var A=c.get(v);A?A.push(m):c.set(v,[m])}}return c}function Sg(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function G1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Cg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function I1(e,i,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=rr(c.href),m=i.querySelector(ca(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=nl.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=m,Ce(m);return}m=i.ownerDocument||i,c=_g(c),(f=Cn.get(f))&&nh(c,f),m=m.createElement("link"),Ce(m);var v=m;v._p=new Promise(function(A,z){v.onload=A,v.onerror=z}),De(m,"link",c),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=nl.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var sh=0;function H1(e,i){return e.stylesheets&&e.count===0&&sl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&sl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+i);0<e.imgBytes&&sh===0&&(sh=62500*S1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>sh?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function nl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var il=null;function sl(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,il=new Map,i.forEach(F1,e),il=null,nl.call(e))}function F1(e,i){if(!(i.state.loading&4)){var a=il.get(e);if(a)var c=a.get(null);else{a=new Map,il.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),c=v)}c&&a.set(null,c)}f=i.instance,v=f.getAttribute("data-precedence"),m=a.get(v)||c,m===c&&a.set(null,f),a.set(v,f),this.count++,c=nl.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var ha={$$typeof:M,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function Y1(e,i,a,c,f,m,v,A,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.hiddenUpdates=Jl(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Ag(e,i,a,c,f,m,v,A,z,Y,Z,nt){return e=new Y1(e,i,a,v,z,Y,Z,nt,A),i=1,m===!0&&(i|=24),m=rn(3,null,null,i),e.current=m,m.stateNode=e,i=Lc(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:i},Ic(m),e}function Tg(e){return e?(e=Ls,e):Ls}function Eg(e,i,a,c,f,m){f=Tg(f),c.context===null?c.context=f:c.pendingContext=f,c=Ci(i),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=Ai(e,c,i),a!==null&&(Ke(a,e,i),Fr(a,e,i))}function wg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function rh(e,i){wg(e,i),(e=e.alternate)&&wg(e,i)}function Mg(e){if(e.tag===13||e.tag===31){var i=Wi(e,67108864);i!==null&&Ke(i,e,67108864),rh(e,67108864)}}function Rg(e){if(e.tag===13||e.tag===31){var i=un();i=tc(i);var a=Wi(e,i);a!==null&&Ke(a,e,i),rh(e,i)}}var rl=!0;function X1(e,i,a,c){var f=B.T;B.T=null;var m=L.p;try{L.p=2,ah(e,i,a,c)}finally{L.p=m,B.T=f}}function V1(e,i,a,c){var f=B.T;B.T=null;var m=L.p;try{L.p=8,ah(e,i,a,c)}finally{L.p=m,B.T=f}}function ah(e,i,a,c){if(rl){var f=oh(c);if(f===null)Vu(e,i,c,al,a),Bg(e,c);else if($1(f,e,i,a,c))c.stopPropagation();else if(Bg(e,c),i&4&&-1<q1.indexOf(e)){for(;f!==null;){var m=Es(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Xi(m.pendingLanes);if(v!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var z=1<<31-Rt(v);A.entanglements[1]|=z,v&=~z}In(m),(Ht&6)===0&&(Ho=Ie()+500,ra(0))}}break;case 31:case 13:A=Wi(m,2),A!==null&&Ke(A,m,2),Yo(),rh(m,2)}if(m=oh(c),m===null&&Vu(e,i,c,al,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else Vu(e,i,c,null,a)}}function oh(e){return e=cc(e),lh(e)}var al=null;function lh(e){if(al=null,e=Ts(e),e!==null){var i=l(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=u(i),e!==null)return e;e=null}else if(a===31){if(e=h(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return al=e,null}function kg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ln()){case $a:return 2;case T:return 8;case x:case _:return 32;case R:return 268435456;default:return 32}default:return 32}}var ch=!1,Ui=null,Ni=null,Li=null,fa=new Map,da=new Map,Pi=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bg(e,i){switch(e){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":fa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(i.pointerId)}}function pa(e,i,a,c,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Es(i),i!==null&&Mg(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function $1(e,i,a,c,f){switch(i){case"focusin":return Ui=pa(Ui,e,i,a,c,f),!0;case"dragenter":return Ni=pa(Ni,e,i,a,c,f),!0;case"mouseover":return Li=pa(Li,e,i,a,c,f),!0;case"pointerover":var m=f.pointerId;return fa.set(m,pa(fa.get(m)||null,e,i,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,da.set(m,pa(da.get(m)||null,e,i,a,c,f)),!0}return!1}function Dg(e){var i=Ts(e.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=u(a),i!==null){e.blockedOn=i,Vf(e.priority,function(){Rg(a)});return}}else if(i===31){if(i=h(a),i!==null){e.blockedOn=i,Vf(e.priority,function(){Rg(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ol(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=oh(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);lc=c,a.target.dispatchEvent(c),lc=null}else return i=Es(a),i!==null&&Mg(i),e.blockedOn=a,!1;i.shift()}return!0}function Og(e,i,a){ol(e)&&a.delete(i)}function Q1(){ch=!1,Ui!==null&&ol(Ui)&&(Ui=null),Ni!==null&&ol(Ni)&&(Ni=null),Li!==null&&ol(Li)&&(Li=null),fa.forEach(Og),da.forEach(Og)}function ll(e,i){e.blockedOn===i&&(e.blockedOn=null,ch||(ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Q1)))}var cl=null;function zg(e){cl!==e&&(cl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cl===e&&(cl=null);for(var i=0;i<e.length;i+=3){var a=e[i],c=e[i+1],f=e[i+2];if(typeof c!="function"){if(lh(c||a)===null)continue;break}var m=Es(a);m!==null&&(e.splice(i,3),i-=3,ou(m,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function or(e){function i(z){return ll(z,e)}Ui!==null&&ll(Ui,e),Ni!==null&&ll(Ni,e),Li!==null&&ll(Li,e),fa.forEach(i),da.forEach(i);for(var a=0;a<Pi.length;a++){var c=Pi[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Pi.length&&(a=Pi[0],a.blockedOn===null);)Dg(a),a.blockedOn===null&&Pi.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],v=f[Ve]||null;if(typeof m=="function")v||zg(a);else if(v){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Ve]||null)A=v.formAction;else if(lh(f)!==null)continue}else A=v.action;typeof A=="function"?a[c+1]=A:(a.splice(c,3),c-=3),zg(a)}}}function Ug(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function uh(e){this._internalRoot=e}ul.prototype.render=uh.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,c=un();Eg(a,c,e,i,null,null)},ul.prototype.unmount=uh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Eg(e.current,2,null,e,null,null),Yo(),i[As]=null}};function ul(e){this._internalRoot=e}ul.prototype.unstable_scheduleHydration=function(e){if(e){var i=Xf();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Pi.length&&i!==0&&i<Pi[a].priority;a++);Pi.splice(a,0,e),a===0&&Dg(e)}};var Ng=t.version;if(Ng!=="19.2.4")throw Error(s(527,Ng,"19.2.4"));L.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var W1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{tt=hl.inject(W1),bt=hl}catch{}}return ya.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,c="",f=Fp,m=Yp,v=Xp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=Ag(e,1,!1,null,null,a,c,null,f,m,v,Ug),e[As]=i.current,Xu(e),new uh(i)},ya.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var c=!1,f="",m=Fp,v=Yp,A=Xp,z=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(z=a.formState)),i=Ag(e,1,!0,i,a??null,c,f,z,m,v,A,Ug),i.context=Tg(null),a=i.current,c=un(),c=tc(c),f=Ci(c),f.callback=null,Ai(a,f,c),a=c,i.current.lanes=a,Tr(i,a),In(i),e[As]=i.current,Xu(e),new ul(i)},ya.version="19.2.4",ya}var Qg;function hv(){if(Qg)return ph.exports;Qg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),ph.exports=uv(),ph.exports}var fv=hv();const dv=Va(fv),pv="modulepreload",mv=function(r,t){return new URL(r,t).href},Wg={},Pl=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){let p=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const u=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");o=p(n.map(g=>{if(g=mv(g,s),g in Wg)return;Wg[g]=!0;const y=g.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(s)for(let C=u.length-1;C>=0;C--){const E=u[C];if(E.href===g&&(!y||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${S}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":pv,y||(b.as="script"),b.crossOrigin="",b.href=g,d&&b.setAttribute("nonce",d),document.head.appendChild(b),y)return new Promise((C,E)=>{b.addEventListener("load",C),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})};var _t=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(_t||{});const $h=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},dl=(r,t)=>$h(r).priority??t,Ue={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map($h).forEach(t=>{t.type.forEach(n=>this._removeHandlers[n]?.(t))}),this},add(...r){return r.map($h).forEach(t=>{t.type.forEach(n=>{const s=this._addHandlers,o=this._queue;s[n]?s[n]?.(t):(o[n]=o[n]||[],o[n]?.push(t))})}),this},handle(r,t,n){const s=this._addHandlers,o=this._removeHandlers;if(s[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);s[r]=t,o[r]=n;const l=this._queue;return l[r]&&(l[r]?.forEach(u=>t(u)),delete l[r]),this},handleByMap(r,t){return this.handle(r,n=>{n.name&&(t[n.name]=n.ref)},n=>{n.name&&delete t[n.name]})},handleByNamedList(r,t,n=-1){return this.handle(r,s=>{t.findIndex(l=>l.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((l,u)=>dl(u.value,n)-dl(l.value,n)))},s=>{const o=t.findIndex(l=>l.name===s.name);o!==-1&&t.splice(o,1)})},handleByList(r,t,n=-1){return this.handle(r,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((o,l)=>dl(l,n)-dl(o,n)))},s=>{const o=t.indexOf(s.ref);o!==-1&&t.splice(o,1)})},mixin(r,...t){for(const n of t)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(n))}},gv={extension:{type:_t.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Pl(()=>import("./browserAll-Bv9VkfUD.js"),__vite__mapDeps([0,1,2]),import.meta.url)}},yv={extension:{type:_t.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Pl(()=>import("./webworkerAll-D9OpwxbZ.js"),__vite__mapDeps([1,2]),import.meta.url)}};class ze{constructor(t,n,s){this._x=n||0,this._y=s||0,this._observer=t}clone(t){return new ze(t??this._observer,this._x,this._y)}set(t=0,n=t){return(this._x!==t||this._y!==n)&&(this._x=t,this._y=n,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var xh={exports:{}},Zg;function xv(){return Zg||(Zg=1,(function(r){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function o(d,p,g){this.fn=d,this.context=p,this.once=g||!1}function l(d,p,g,y,S){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new o(g,y||d,S),C=n?n+p:p;return d._events[C]?d._events[C].fn?d._events[C]=[d._events[C],b]:d._events[C].push(b):(d._events[C]=b,d._eventsCount++),d}function u(d,p){--d._eventsCount===0?d._events=new s:delete d._events[p]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],g,y;if(this._eventsCount===0)return p;for(y in g=this._events)t.call(g,y)&&p.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},h.prototype.listeners=function(p){var g=n?n+p:p,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var S=0,b=y.length,C=new Array(b);S<b;S++)C[S]=y[S].fn;return C},h.prototype.listenerCount=function(p){var g=n?n+p:p,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(p,g,y,S,b,C){var E=n?n+p:p;if(!this._events[E])return!1;var w=this._events[E],k=arguments.length,U,M;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),k){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,g),!0;case 3:return w.fn.call(w.context,g,y),!0;case 4:return w.fn.call(w.context,g,y,S),!0;case 5:return w.fn.call(w.context,g,y,S,b),!0;case 6:return w.fn.call(w.context,g,y,S,b,C),!0}for(M=1,U=new Array(k-1);M<k;M++)U[M-1]=arguments[M];w.fn.apply(w.context,U)}else{var O=w.length,I;for(M=0;M<O;M++)switch(w[M].once&&this.removeListener(p,w[M].fn,void 0,!0),k){case 1:w[M].fn.call(w[M].context);break;case 2:w[M].fn.call(w[M].context,g);break;case 3:w[M].fn.call(w[M].context,g,y);break;case 4:w[M].fn.call(w[M].context,g,y,S);break;default:if(!U)for(I=1,U=new Array(k-1);I<k;I++)U[I-1]=arguments[I];w[M].fn.apply(w[M].context,U)}}return!0},h.prototype.on=function(p,g,y){return l(this,p,g,y,!1)},h.prototype.once=function(p,g,y){return l(this,p,g,y,!0)},h.prototype.removeListener=function(p,g,y,S){var b=n?n+p:p;if(!this._events[b])return this;if(!g)return u(this,b),this;var C=this._events[b];if(C.fn)C.fn===g&&(!S||C.once)&&(!y||C.context===y)&&u(this,b);else{for(var E=0,w=[],k=C.length;E<k;E++)(C[E].fn!==g||S&&!C[E].once||y&&C[E].context!==y)&&w.push(C[E]);w.length?this._events[b]=w.length===1?w[0]:w:u(this,b)}return this},h.prototype.removeAllListeners=function(p){var g;return p?(g=n?n+p:p,this._events[g]&&u(this,g)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,r.exports=h})(xh)),xh.exports}var _v=xv();const On=Va(_v),bv=Math.PI*2,vv=180/Math.PI,Sv=Math.PI/180;class je{constructor(t=0,n=0){this.x=0,this.y=0,this.x=t,this.y=n}clone(){return new je(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,n=t){return this.x=t,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return _h.x=0,_h.y=0,_h}}const _h=new je;class Nt{constructor(t=1,n=0,s=0,o=1,l=0,u=0){this.array=null,this.a=t,this.b=n,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,n,s,o,l,u){return this.a=t,this.b=n,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(t,n){this.array||(this.array=new Float32Array(9));const s=n||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,n){n=n||new je;const s=t.x,o=t.y;return n.x=this.a*s+this.c*o+this.tx,n.y=this.b*s+this.d*o+this.ty,n}applyInverse(t,n){n=n||new je;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,d=this.ty,p=1/(s*u+l*-o),g=t.x,y=t.y;return n.x=u*p*g+-l*p*y+(d*l-h*u)*p,n.y=s*p*y+-o*p*g+(-d*s+h*o)*p,n}translate(t,n){return this.tx+=t,this.ty+=n,this}scale(t,n){return this.a*=t,this.d*=n,this.c*=t,this.b*=n,this.tx*=t,this.ty*=n,this}rotate(t){const n=Math.cos(t),s=Math.sin(t),o=this.a,l=this.c,u=this.tx;return this.a=o*n-this.b*s,this.b=o*s+this.b*n,this.c=l*n-this.d*s,this.d=l*s+this.d*n,this.tx=u*n-this.ty*s,this.ty=u*s+this.ty*n,this}append(t){const n=this.a,s=this.b,o=this.c,l=this.d;return this.a=t.a*n+t.b*o,this.b=t.a*s+t.b*l,this.c=t.c*n+t.d*o,this.d=t.c*s+t.d*l,this.tx=t.tx*n+t.ty*o+this.tx,this.ty=t.tx*s+t.ty*l+this.ty,this}appendFrom(t,n){const s=t.a,o=t.b,l=t.c,u=t.d,h=t.tx,d=t.ty,p=n.a,g=n.b,y=n.c,S=n.d;return this.a=s*p+o*y,this.b=s*g+o*S,this.c=l*p+u*y,this.d=l*g+u*S,this.tx=h*p+d*y+n.tx,this.ty=h*g+d*S+n.ty,this}setTransform(t,n,s,o,l,u,h,d,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-d)*u,this.d=Math.cos(h-d)*u,this.tx=t-(s*this.a+o*this.c),this.ty=n-(s*this.b+o*this.d),this}prepend(t){const n=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,o=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this}decompose(t){const n=this.a,s=this.b,o=this.c,l=this.d,u=t.pivot,h=-Math.atan2(-o,l),d=Math.atan2(s,n),p=Math.abs(h+d);return p<1e-5||Math.abs(bv-p)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=d),t.scale.x=Math.sqrt(n*n+s*s),t.scale.y=Math.sqrt(o*o+l*l),t.position.x=this.tx+(u.x*n+u.y*o),t.position.y=this.ty+(u.x*s+u.y*l),t}invert(){const t=this.a,n=this.b,s=this.c,o=this.d,l=this.tx,u=t*o-n*s;return this.a=o/u,this.b=-n/u,this.c=-s/u,this.d=t/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(t*this.ty-n*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Nt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Av.identity()}static get shared(){return Cv.identity()}}const Cv=new Nt,Av=new Nt,hs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],fs=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ds=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ps=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Qh=[],Ey=[],pl=Math.sign;function Tv(){for(let r=0;r<16;r++){const t=[];Qh.push(t);for(let n=0;n<16;n++){const s=pl(hs[r]*hs[n]+ds[r]*fs[n]),o=pl(fs[r]*hs[n]+ps[r]*fs[n]),l=pl(hs[r]*ds[n]+ds[r]*ps[n]),u=pl(fs[r]*ds[n]+ps[r]*ps[n]);for(let h=0;h<16;h++)if(hs[h]===s&&fs[h]===o&&ds[h]===l&&ps[h]===u){t.push(h);break}}}for(let r=0;r<16;r++){const t=new Nt;t.set(hs[r],fs[r],ds[r],ps[r],0,0),Ey.push(t)}}Tv();const Zt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>hs[r],uY:r=>fs[r],vX:r=>ds[r],vY:r=>ps[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>Qh[r][t],sub:(r,t)=>Qh[r][Zt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Zt.S:Zt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Zt.E:Zt.W:t>0?r>0?Zt.SE:Zt.SW:r>0?Zt.NE:Zt.NW,matrixAppendRotationInv:(r,t,n=0,s=0)=>{const o=Ey[Zt.inv(t)];o.tx=n,o.ty=s,r.append(o)},transformRectCoords:(r,t,n,s)=>{const{x:o,y:l,width:u,height:h}=r,{x:d,y:p,width:g,height:y}=t;return n===Zt.E?(s.set(o+d,l+p,u,h),s):n===Zt.S?s.set(g-l-h+d,o+p,h,u):n===Zt.W?s.set(g-o-u+d,y-l-h+p,u,h):n===Zt.N?s.set(l+d,y-o-u+p,h,u):s.set(o+d,l+p,u,h)}},ml=[new je,new je,new je,new je];class oe{constructor(t=0,n=0,s=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(n),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new oe(0,0,0,0)}clone(){return new oe(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(t,n,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,d=this.y,p=s*(1-o),g=s-p,y=h-p,S=h+l+p,b=d-p,C=d+u+p,E=h+g,w=h+l-g,k=d+g,U=d+u-g;return t>=y&&t<=S&&n>=b&&n<=C&&!(t>E&&t<w&&n>k&&n<U)}intersects(t,n){if(!n){const st=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=st)return!1;const J=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>J}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=ml[0].set(t.left,t.top),d=ml[1].set(t.left,t.bottom),p=ml[2].set(t.right,t.top),g=ml[3].set(t.right,t.bottom);if(p.x<=h.x||d.y<=h.y)return!1;const y=Math.sign(n.a*n.d-n.b*n.c);if(y===0||(n.apply(h,h),n.apply(d,d),n.apply(p,p),n.apply(g,g),Math.max(h.x,d.x,p.x,g.x)<=s||Math.min(h.x,d.x,p.x,g.x)>=o||Math.max(h.y,d.y,p.y,g.y)<=l||Math.min(h.y,d.y,p.y,g.y)>=u))return!1;const S=y*(d.y-h.y),b=y*(h.x-d.x),C=S*s+b*l,E=S*o+b*l,w=S*s+b*u,k=S*o+b*u;if(Math.max(C,E,w,k)<=S*h.x+b*h.y||Math.min(C,E,w,k)>=S*g.x+b*g.y)return!1;const U=y*(h.y-p.y),M=y*(p.x-h.x),O=U*s+M*l,I=U*o+M*l,Q=U*s+M*u,H=U*o+M*u;return!(Math.max(O,I,Q,H)<=U*h.x+M*h.y||Math.min(O,I,Q,H)>=U*g.x+M*g.y)}pad(t=0,n=t){return this.x-=t,this.y-=n,this.width+=t*2,this.height+=n*2,this}fit(t){const n=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),l=Math.min(this.y+this.height,t.y+t.height);return this.x=n,this.width=Math.max(s-n,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(t=1,n=.001){const s=Math.ceil((this.x+this.width-n)*t)/t,o=Math.ceil((this.y+this.height-n)*t)/t;return this.x=Math.floor((this.x+n)*t)/t,this.y=Math.floor((this.y+n)*t)/t,this.width=s-this.x,this.height=o-this.y,this}scale(t,n=t){return this.x*=t,this.y*=n,this.width*=t,this.height*=n,this}enlarge(t){const n=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),l=Math.max(this.y+this.height,t.y+t.height);return this.x=n,this.width=s-n,this.y=o,this.height=l-o,this}getBounds(t){return t||(t=new oe),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const n=t.x,s=t.y,o=t.x+t.width,l=t.y+t.height;return n>=this.x&&n<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(t,n,s,o){return this.x=t,this.y=n,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const bh={default:-1};function fe(r="default"){return bh[r]===void 0&&(bh[r]=-1),++bh[r]}const Kg=new Set,qt="8.0.0",Ev="8.3.4",ur={quiet:!1,noColor:!1},kt=(r,t,n=3)=>{if(ur.quiet||Kg.has(t))return;let s=new Error().stack;const o=`${t}
Deprecated since v${r}`,l=typeof console.groupCollapsed=="function"&&!ur.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(n).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Kg.add(t)};Object.defineProperties(kt,{quiet:{get:()=>ur.quiet,set:r=>{ur.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>ur.noColor,set:r=>{ur.noColor=r},enumerable:!0,configurable:!1}});const wy=()=>{};function pr(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Jg(r){return!(r&r-1)&&!!r}function My(r){const t={};for(const n in r)r[n]!==void 0&&(t[n]=r[n]);return t}const t0=Object.create(null);function wv(r){const t=t0[r];return t===void 0&&(t0[r]=fe("resource")),t}const Ry=class ky extends On{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...ky.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){kt(qt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=wv(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Ry.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let mr=Ry;const By=class Dy extends On{constructor(t={}){super(),this.options=t,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=fe("textureSource"),this._resourceType="textureSource",this._resourceId=fe("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Dy.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new mr(My(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=fe("resource"),this.emit("change",this),this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,n,s){s||(s=this._resolution),t||(t=this.width),n||(n=this.height);const o=Math.round(t*s),l=Math.round(n*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=fe("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Jg(this.pixelWidth)&&Jg(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};By.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let zn=By;class Sf extends zn{constructor(t){const n=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(n instanceof Float32Array?s="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?s="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?s="rgba16uint":(n instanceof Int8Array,s="bgra8unorm")),super({...t,resource:n,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Sf.extension=_t.TextureSource;const e0=new Nt;class Mv{constructor(t,n){this.mapCoord=new Nt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,n){n===void 0&&(n=t);const s=this.mapCoord;for(let o=0;o<t.length;o+=2){const l=t[o],u=t[o+1];n[o]=l*s.a+u*s.c+s.tx,n[o+1]=l*s.b+u*s.d+s.ty}return n}update(){const t=this._texture;this._updateID++;const n=t.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=t.orig,o=t.trim;o&&(e0.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(e0));const l=t.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(t.frame.x+h+d)/l.width,u[1]=(t.frame.y+h+d)/l.height,u[2]=(t.frame.x+t.frame.width-h+d)/l.width,u[3]=(t.frame.y+t.frame.height-h+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=t.frame.width===l.width&&t.frame.height===l.height&&t.rotate===0,!0}}class Pt extends On{constructor({source:t,label:n,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:d,dynamic:p}={}){if(super(),this.uid=fe("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new oe,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=t?.source??new zn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Mv(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:n}=this,{width:s,height:o}=this._source,l=n.x/s,u=n.y/o,h=n.width/s,d=n.height/o;let p=this.rotate;if(p){const g=h/2,y=d/2,S=l+g,b=u+y;p=Zt.add(p,Zt.NW),t.x0=S+g*Zt.uX(p),t.y0=b+y*Zt.uY(p),p=Zt.add(p,2),t.x1=S+g*Zt.uX(p),t.y1=b+y*Zt.uY(p),p=Zt.add(p,2),t.x2=S+g*Zt.uX(p),t.y2=b+y*Zt.uY(p),p=Zt.add(p,2),t.x3=S+g*Zt.uX(p),t.y3=b+y*Zt.uY(p)}else t.x0=l,t.y0=u,t.x1=l+h,t.y1=u,t.x2=l+h,t.y2=u+d,t.x3=l,t.y3=u+d}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return kt(qt,"Texture.baseTexture is now Texture.source"),this._source}}Pt.EMPTY=new Pt({label:"EMPTY",source:new zn({label:"EMPTY"})});Pt.EMPTY.destroy=wy;Pt.WHITE=new Pt({source:new Sf({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Pt.WHITE.destroy=wy;function Rv(r,t,n){const{width:s,height:o}=n.orig,l=n.trim;if(l){const u=l.width,h=l.height;r.minX=l.x-t._x*s,r.maxX=r.minX+u,r.minY=l.y-t._y*o,r.maxY=r.minY+h}else r.minX=-t._x*s,r.maxX=r.minX+s,r.minY=-t._y*o,r.maxY=r.minY+o}const n0=new Nt;class Dn{constructor(t=1/0,n=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=n0,this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new oe);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=n0,this}set(t,n,s,o){this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}addFrame(t,n,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,d=l.c,p=l.d,g=l.tx,y=l.ty;let S=this.minX,b=this.minY,C=this.maxX,E=this.maxY,w=u*t+d*n+g,k=h*t+p*n+y;w<S&&(S=w),k<b&&(b=k),w>C&&(C=w),k>E&&(E=k),w=u*s+d*n+g,k=h*s+p*n+y,w<S&&(S=w),k<b&&(b=k),w>C&&(C=w),k>E&&(E=k),w=u*t+d*o+g,k=h*t+p*o+y,w<S&&(S=w),k<b&&(b=k),w>C&&(C=w),k>E&&(E=k),w=u*s+d*o+g,k=h*s+p*o+y,w<S&&(S=w),k<b&&(b=k),w>C&&(C=w),k>E&&(E=k),this.minX=S,this.minY=b,this.maxX=C,this.maxY=E}addRect(t,n){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,n)}addBounds(t,n){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,n)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const n=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:d,d:p,tx:g,ty:y}=t;let S=u*n+d*s+g,b=h*n+p*s+y;this.minX=S,this.minY=b,this.maxX=S,this.maxY=b,S=u*o+d*s+g,b=h*o+p*s+y,this.minX=S<this.minX?S:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=S>this.maxX?S:this.maxX,this.maxY=b>this.maxY?b:this.maxY,S=u*n+d*l+g,b=h*n+p*l+y,this.minX=S<this.minX?S:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=S>this.maxX?S:this.maxX,this.maxY=b>this.maxY?b:this.maxY,S=u*o+d*l+g,b=h*o+p*l+y,this.minX=S<this.minX?S:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=S>this.maxX?S:this.maxX,this.maxY=b>this.maxY?b:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,n,s,o){return this.minX<t&&(this.minX=t),this.maxX>n&&(this.maxX=n),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(t,n=t){return this.minX-=t,this.maxX+=t,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Dn(this.minX,this.minY,this.maxX,this.maxY)}scale(t,n=t){return this.minX*=t,this.minY*=n,this.maxX*=t,this.maxY*=n,this}get x(){return this.minX}set x(t){const n=this.maxX-this.minX;this.minX=t,this.maxX=t+n}get y(){return this.minY}set y(t){const n=this.maxY-this.minY;this.minY=t,this.maxY=t+n}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,n,s,o){let l=this.minX,u=this.minY,h=this.maxX,d=this.maxY;o||(o=this.matrix);const p=o.a,g=o.b,y=o.c,S=o.d,b=o.tx,C=o.ty;for(let E=n;E<s;E+=2){const w=t[E],k=t[E+1],U=p*w+y*k+b,M=g*w+S*k+C;l=U<l?U:l,u=M<u?M:u,h=U>h?U:h,d=M>d?M:d}this.minX=l,this.minY=u,this.maxX=h,this.maxY=d}containsPoint(t,n){return this.minX<=t&&this.minY<=n&&this.maxX>=t&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var kv={grad:.9,turn:360,rad:360/(2*Math.PI)},ci=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Ee=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},Tn=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),r>n?n:r>t?r:t},Oy=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},i0=function(r){return{r:Tn(r.r,0,255),g:Tn(r.g,0,255),b:Tn(r.b,0,255),a:Tn(r.a)}},vh=function(r){return{r:Ee(r.r),g:Ee(r.g),b:Ee(r.b),a:Ee(r.a,3)}},Bv=/^#([0-9a-f]{3,8})$/i,gl=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},zy=function(r){var t=r.r,n=r.g,s=r.b,o=r.a,l=Math.max(t,n,s),u=l-Math.min(t,n,s),h=u?l===t?(n-s)/u:l===n?2+(s-t)/u:4+(t-n)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},Uy=function(r){var t=r.h,n=r.s,s=r.v,o=r.a;t=t/360*6,n/=100,s/=100;var l=Math.floor(t),u=s*(1-n),h=s*(1-(t-l)*n),d=s*(1-(1-t+l)*n),p=l%6;return{r:255*[s,h,u,u,d,s][p],g:255*[d,s,s,h,u,u][p],b:255*[u,u,d,s,s,h][p],a:o}},s0=function(r){return{h:Oy(r.h),s:Tn(r.s,0,100),l:Tn(r.l,0,100),a:Tn(r.a)}},r0=function(r){return{h:Ee(r.h),s:Ee(r.s),l:Ee(r.l),a:Ee(r.a,3)}},a0=function(r){return Uy((n=(t=r).s,{h:t.h,s:(n*=((s=t.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:t.a}));var t,n,s},za=function(r){return{h:(t=zy(r)).h,s:(o=(200-(n=t.s))*(s=t.v)/100)>0&&o<200?n*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,s,o},Dv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ov=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Uv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wh={string:[[function(r){var t=Bv.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Ee(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Ee(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=zv.exec(r)||Uv.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:i0({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=Dv.exec(r)||Ov.exec(r);if(!t)return null;var n,s,o=s0({h:(n=t[1],s=t[2],s===void 0&&(s="deg"),Number(n)*(kv[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return a0(o)},"hsl"]],object:[[function(r){var t=r.r,n=r.g,s=r.b,o=r.a,l=o===void 0?1:o;return ci(t)&&ci(n)&&ci(s)?i0({r:Number(t),g:Number(n),b:Number(s),a:Number(l)}):null},"rgb"],[function(r){var t=r.h,n=r.s,s=r.l,o=r.a,l=o===void 0?1:o;if(!ci(t)||!ci(n)||!ci(s))return null;var u=s0({h:Number(t),s:Number(n),l:Number(s),a:Number(l)});return a0(u)},"hsl"],[function(r){var t=r.h,n=r.s,s=r.v,o=r.a,l=o===void 0?1:o;if(!ci(t)||!ci(n)||!ci(s))return null;var u=(function(h){return{h:Oy(h.h),s:Tn(h.s,0,100),v:Tn(h.v,0,100),a:Tn(h.a)}})({h:Number(t),s:Number(n),v:Number(s),a:Number(l)});return Uy(u)},"hsv"]]},o0=function(r,t){for(var n=0;n<t.length;n++){var s=t[n][0](r);if(s)return[s,t[n][1]]}return[null,void 0]},Nv=function(r){return typeof r=="string"?o0(r.trim(),Wh.string):typeof r=="object"&&r!==null?o0(r,Wh.object):[null,void 0]},Sh=function(r,t){var n=za(r);return{h:n.h,s:Tn(n.s+100*t,0,100),l:n.l,a:n.a}},Ch=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},l0=function(r,t){var n=za(r);return{h:n.h,s:n.s,l:Tn(n.l+100*t,0,100),a:n.a}},Zh=(function(){function r(t){this.parsed=Nv(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Ee(Ch(this.rgba),2)},r.prototype.isDark=function(){return Ch(this.rgba)<.5},r.prototype.isLight=function(){return Ch(this.rgba)>=.5},r.prototype.toHex=function(){return t=vh(this.rgba),n=t.r,s=t.g,o=t.b,u=(l=t.a)<1?gl(Ee(255*l)):"","#"+gl(n)+gl(s)+gl(o)+u;var t,n,s,o,l,u},r.prototype.toRgb=function(){return vh(this.rgba)},r.prototype.toRgbString=function(){return t=vh(this.rgba),n=t.r,s=t.g,o=t.b,(l=t.a)<1?"rgba("+n+", "+s+", "+o+", "+l+")":"rgb("+n+", "+s+", "+o+")";var t,n,s,o,l},r.prototype.toHsl=function(){return r0(za(this.rgba))},r.prototype.toHslString=function(){return t=r0(za(this.rgba)),n=t.h,s=t.s,o=t.l,(l=t.a)<1?"hsla("+n+", "+s+"%, "+o+"%, "+l+")":"hsl("+n+", "+s+"%, "+o+"%)";var t,n,s,o,l},r.prototype.toHsv=function(){return t=zy(this.rgba),{h:Ee(t.h),s:Ee(t.s),v:Ee(t.v),a:Ee(t.a,3)};var t},r.prototype.invert=function(){return Hn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),Hn(Sh(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),Hn(Sh(this.rgba,-t))},r.prototype.grayscale=function(){return Hn(Sh(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),Hn(l0(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),Hn(l0(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?Hn({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):Ee(this.rgba.a,3);var n},r.prototype.hue=function(t){var n=za(this.rgba);return typeof t=="number"?Hn({h:t,s:n.s,l:n.l,a:n.a}):Ee(n.h)},r.prototype.isEqual=function(t){return this.toHex()===Hn(t).toHex()},r})(),Hn=function(r){return r instanceof Zh?r:new Zh(r)},c0=[],Lv=function(r){r.forEach(function(t){c0.indexOf(t)<0&&(t(Zh,Wh),c0.push(t))})};function Pv(r,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in n)s[n[o]]=o;var l={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,p=s[this.toHex()];if(p)return p;if(u?.closest){var g=this.toRgb(),y=1/0,S="black";if(!l.length)for(var b in n)l[b]=new r(n[b]).toRgb();for(var C in n){var E=(h=g,d=l[C],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));E<y&&(y=E,S=C)}return S}},t.string.push([function(u){var h=u.toLowerCase(),d=h==="transparent"?"#0000":n[h];return d?new r(d).toRgb():null},"name"])}Lv([Pv]);const gr=class wa{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof wa)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,n){const s=typeof t;if(s!==typeof n)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===n;if(Array.isArray(t)&&Array.isArray(n)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))return t.length!==n.length?!1:t.every((l,u)=>l===n[u]);if(t!==null&&n!==null){const l=Object.keys(t),u=Object.keys(n);return l.length!==u.length?!1:l.every(h=>t[h]===n[h])}return t===n}toRgba(){const[t,n,s,o]=this._components;return{r:t,g:n,b:s,a:o}}toRgb(){const[t,n,s]=this._components;return{r:t,g:n,b:s}}toRgbaString(){const[t,n,s]=this.toUint8RgbArray();return`rgba(${t},${n},${s},${this.alpha})`}toUint8RgbArray(t){const[n,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(n*255),t[1]=Math.round(s*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[n,s,o,l]=this._components;return t[0]=n,t[1]=s,t[2]=o,t[3]=l,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[n,s,o]=this._components;return t[0]=n,t[1]=s,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,n,s]=this.toUint8RgbArray();return(s<<16)+(n<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[n,s,o,l]=wa._temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(t,n=!0){return n&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,n=!0){if(t===1)return(255<<24)+this._int;if(t===0)return n?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return n&&(s=s*t+.5|0,o=o*t+.5|0,l=l*t+.5|0),(t*255<<24)+(s<<16)+(o<<8)+l}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let n,s,o,l;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const u=t;n=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,s,o,l=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,s,o,l=255]=t,n/=255,s/=255,o/=255,l/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=wa.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const u=Hn(t);u.isValid()&&({r:n,g:s,b:o,a:l}=u.rgba,n/=255,s/=255,o/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,n,s]=this._components;this._int=(t*255<<16)+(n*255<<8)+(s*255|0)}_clamp(t,n=0,s=1){return typeof t=="number"?Math.min(Math.max(t,n),s):(t.forEach((o,l)=>{t[l]=Math.min(Math.max(o,n),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof wa||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};gr.shared=new gr;gr._temp=new gr;gr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ve=gr;const jv={cullArea:null,cullable:!1,cullableChildren:!0};let Ah=0;const u0=500;function se(...r){Ah!==u0&&(Ah++,Ah===u0?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const qa={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class Gv{constructor(t,n){this._pool=[],this._count=0,this._index=0,this._classType=t,n&&this.prepopulate(n)}prepopulate(t){for(let n=0;n<t;n++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let n;return this._index>0?n=this._pool[--this._index]:(n=new this._classType,this._count++),n.init?.(t),n}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class Iv{constructor(){this._poolsByClass=new Map}prepopulate(t,n){this.getPool(t).prepopulate(n)}get(t,n){return this.getPool(t).get(n)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Gv(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(n=>{const s=t[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;t[s]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const En=new Iv;qa.register(En);const Hv={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){kt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function Fv(r,t,n){const s=r.length;let o;if(t>=s||n===0)return;n=t+n>s?s-t:n;const l=s-n;for(o=t;o<l;++o)r[o]=r[o+n];r.length=l}const Yv={allowChildren:!0,removeChildren(r=0,t){const n=t??this.children.length,s=n-r,o=[];if(s>0&&s<=n){for(let u=n-1;u>=r;u--){const h=this.children[u];h&&(o.push(h),h.parent=null)}Fv(this.children,r,n);const l=this.renderGroup||this.parentRenderGroup;l&&l.removeChildren(o);for(let u=0;u<o.length;++u){const h=o[u];h.parentRenderLayer?.detach(h),this.emit("childRemoved",h,this,u),o[u].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const t=this.getChildAt(r);return this.removeChild(t)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,t)},getChildIndex(r){const t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(r,t){this.allowChildren||kt(qt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(t<0||t>n.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${n.length}`);if(r.parent){const o=r.parent.children.indexOf(r);if(r.parent===this&&o===t)return r;o!==-1&&r.parent.children.splice(o,1)}t===n.length?n.push(r):n.splice(t,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,t),r.emit("added",this),r},swapChildren(r,t){if(r===t)return;const n=this.getChildIndex(r),s=this.getChildIndex(t);this.children[n]=t,this.children[s]=r;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(t=>this.reparentChildAt(t,this.children.length)),r[0])},reparentChildAt(r,t){if(r.parent===this)return this.setChildIndex(r,t),r;const n=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,t);const s=this.worldTransform.clone();return s.invert(),n.prepend(s),r.setFromMatrix(n),r},replaceChild(r,t){r.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(r)),t.setFromMatrix(r.localTransform),t.updateLocalTransform(),this.removeChild(r)}},Xv={collectRenderables(r,t,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,t,n):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,t,n))},collectRenderablesSimple(r,t,n){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(r,t,n)},collectRenderablesWithEffects(r,t,n){const{renderPipes:s}=t;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,r)}this.collectRenderablesSimple(r,t,n);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,r)}}};class h0{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class Vv{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const s=this._tests[n];if(s.test(t))return En.get(s.maskClass,t)}return t}returnMaskEffect(t){En.return(t)}}const Kh=new Vv;Ue.handleByList(_t.MaskEffect,Kh._effectClasses);const qv={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((n,s)=>n.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const t=this.effects.indexOf(r);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const t=this._maskEffect;t?.mask!==r&&(t&&(this.removeEffect(t),Kh.returnMaskEffect(t),this._maskEffect=null),r!=null&&(this._maskEffect=Kh.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){!Array.isArray(r)&&r&&(r=[r]);const t=this._filterEffect||(this._filterEffect=new h0);r=r;const n=r?.length>0,s=t.filters?.length>0,o=n!==s;r=Array.isArray(r)?r.slice(0):r,t.filters=Object.freeze(r),o&&(n?this.addEffect(t):(this.removeEffect(t),t.filters=r??null))},get filters(){return this._filterEffect?.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new h0),this._filterEffect.filterArea=r},get filterArea(){return this._filterEffect?.filterArea}},$v={label:null,get name(){return kt(qt,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){kt(qt,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,t=!1){return this.getChildByLabel(r,t)},getChildByLabel(r,t=!1){const n=this.children;for(let s=0;s<n.length;s++){const o=n[s];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(t)for(let s=0;s<n.length;s++){const l=n[s].getChildByLabel(r,!0);if(l)return l}return null},getChildrenByLabel(r,t=!1,n=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===r||r instanceof RegExp&&r.test(l.label))&&n.push(l)}if(t)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(r,!0,n);return n}},Fe=En.getPool(Nt),hi=En.getPool(Dn),Qv=new Nt,Wv={getFastGlobalBounds(r,t){t||(t=new Dn),t.clear(),this._getGlobalBoundsRecursive(!!r,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(n.worldTransform),t},_getGlobalBoundsRecursive(r,t,n){let s=t;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=hi.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(r,s,n)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(Qv).invert()),t.addBounds(s),hi.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),hi.return(s))}};function Ny(r,t,n){n.clear();let s,o;return r.parent?t?s=r.parent.worldTransform:(o=Fe.get().identity(),s=Cf(r,o)):s=Nt.IDENTITY,Ly(r,n,s,t),o&&Fe.return(o),n.isValid||n.set(0,0,0,0),n}function Ly(r,t,n,s){if(!r.visible||!r.measurable)return;let o;s?o=r.worldTransform:(r.updateLocalTransform(),o=Fe.get(),o.appendFrom(r.localTransform,n));const l=t,u=!!r.effects.length;if(u&&(t=hi.get().clear()),r.boundsArea)t.addRect(r.boundsArea,o);else{const h=r.bounds;h&&!h.isEmpty()&&(t.matrix=o,t.addBounds(h));for(let d=0;d<r.children.length;d++)Ly(r.children[d],t,o,s)}if(u){for(let h=0;h<r.effects.length;h++)r.effects[h].addBounds?.(t);l.addBounds(t,Nt.IDENTITY),hi.return(t)}s||Fe.return(o)}function Cf(r,t){const n=r.parent;return n&&(Cf(n,t),n.updateLocalTransform(),t.append(n.localTransform)),t}function Py(r,t){if(r===16777215||!t)return t;if(t===16777215||!r)return r;const n=r>>16&255,s=r>>8&255,o=r&255,l=t>>16&255,u=t>>8&255,h=t&255,d=n*l/255|0,p=s*u/255|0,g=o*h/255|0;return(d<<16)+(p<<8)+g}const f0=16777215;function d0(r,t){return r===f0?t:t===f0?r:Py(r,t)}function Rl(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const Zv={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,n=this.parent;for(;n;)t*=n.alpha,n=n.parent;return t},getGlobalTransform(r=new Nt,t){if(t)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const n=Cf(this,Fe.get().identity());return r.appendFrom(this.localTransform,n),Fe.return(n),r},getGlobalTint(r){if(r)return this.renderGroup?Rl(this.renderGroup.worldColor):this.parentRenderGroup?Rl(d0(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,n=this.parent;for(;n;)t=d0(t,n.localColor),n=n.parent;return Rl(t)}};function jy(r,t,n){return t.clear(),n||(n=Nt.IDENTITY),Gy(r,t,n,r,!0),t.isValid||t.set(0,0,0,0),t}function Gy(r,t,n,s,o){let l;if(o)l=Fe.get(),l=n.copyTo(l);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const d=r.localTransform;l=Fe.get(),l.appendFrom(d,n)}const u=t,h=!!r.effects.length;if(h&&(t=hi.get().clear()),r.boundsArea)t.addRect(r.boundsArea,l);else{r.renderPipeId&&(t.matrix=l,t.addBounds(r.bounds));const d=r.children;for(let p=0;p<d.length;p++)Gy(d[p],t,l,s,!1)}if(h){for(let d=0;d<r.effects.length;d++)r.effects[d].addLocalBounds?.(t,s);u.addBounds(t,Nt.IDENTITY),hi.return(t)}Fe.return(l)}function Iy(r,t){const n=r.children;for(let s=0;s<n.length;s++){const o=n[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=t.index;(t.data[h]!==l||t.data[h+1]!==u)&&(t.data[t.index]=l,t.data[t.index+1]=u,t.didChange=!0),t.index=h+2,o.children.length&&Iy(o,t)}return t.didChange}const Kv=new Nt,Jv={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,t){const n=Math.sign(this.scale.x)||1;t!==0?this.scale.x=r/t*n:this.scale.x=n},_setHeight(r,t){const n=Math.sign(this.scale.y)||1;t!==0?this.scale.y=r/t*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Dn});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),Iy(this,r),r.didChange&&jy(this,r.localBounds,Kv),r.localBounds},getBounds(r,t){return Ny(this,r,t||new Dn)}},tS={_onRender:null,set onRender(r){const t=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},eS={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(nS))}};function nS(r,t){return r._zIndex-t._zIndex}const iS={getGlobalPosition(r=new je,t=!1){return this.parent?this.parent.toGlobal(this._position,r,t):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,t,n=!1){const s=this.getGlobalTransform(Fe.get(),n);return t=s.apply(r,t),Fe.return(s),t},toLocal(r,t,n,s){t&&(r=t.toGlobal(r,n,s));const o=this.getGlobalTransform(Fe.get(),s);return n=o.applyInverse(r,n),Fe.return(o),n}};class Hy{constructor(){this.uid=fe("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let sS=0;class rS{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new mr(this.textureOptions)}createTexture(t,n,s){const o=new zn({...this.textureOptions,width:t,height:n,resolution:1,antialias:s,autoGarbageCollect:!1});return new Pt({source:o,label:`texturePool_${sS++}`})}getOptimalTexture(t,n,s=1,o){let l=Math.ceil(t*s-1e-6),u=Math.ceil(n*s-1e-6);l=pr(l),u=pr(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(l,u,o)),d.source._resolution=s,d.source.width=l/s,d.source.height=u/s,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=n,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(t,n=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,n)}returnTexture(t,n=!1){const s=this._poolKeyHash[t.uid];n&&(t.source.style=this.textureStyle),this._texturePool[s].push(t)}clear(t){if(t=t!==!1,t)for(const n in this._texturePool){const s=this._texturePool[n];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const Fy=new rS;qa.register(Fy);class aS{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Nt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Hy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const n=t.children;for(let s=0;s<n.length;s++){const o=n[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Fy.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const n=this.childrenToUpdate[t];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const n=this.renderGroupChildren.indexOf(t);n>-1&&this.renderGroupChildren.splice(n,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const n=t.children;for(let s=0;s<n.length;s++)this.addChild(n[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const n=t.children;for(let s=0;s<n.length;s++)this.removeChild(n[s])}removeChildren(t){for(let n=0;n<t.length;n++)this.removeChild(t[n])}onChildUpdate(t){let n=this.childrenToUpdate[t.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const n=this.root.children;for(let s=0;s<n.length;s++)this._getChildren(n[s],t);return t}_getChildren(t,n=[]){if(n.push(t),t.renderGroup)return n;const s=t.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Nt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Nt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Nt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function oS(r,t,n={}){for(const s in t)!n[s]&&t[s]!==void 0&&(r[s]=t[s])}const Th=new ze(null),yl=new ze(null),Eh=new ze(null,1,1),xl=new ze(null),p0=1,lS=2,wh=4;class Le extends On{constructor(t={}){super(),this.uid=fe("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Nt,this.relativeGroupTransform=new Nt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new ze(this,0,0),this._scale=Eh,this._pivot=yl,this._origin=xl,this._skew=Th,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],oS(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(n=>this.addChild(n)),t.parent?.addChild(this)}static mixin(t){kt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Ue.mixin(Le,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||kt(qt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const n=t[0],s=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),s&&(s.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,s&&s.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const n=t[0],s=this.children.indexOf(n);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,s),n.emit("removed",this)),n}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=En.get(aS,this),this.groupTransform=Nt.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),En.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Nt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*vv}set angle(t){this.rotation=t*Sv}get pivot(){return this._pivot===yl&&(this._pivot=new ze(this,0,0)),this._pivot}set pivot(t){this._pivot===yl&&(this._pivot=new ze(this,0,0),this._origin!==xl&&se("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Th&&(this._skew=new ze(this,0,0)),this._skew}set skew(t){this._skew===Th&&(this._skew=new ze(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Eh&&(this._scale=new ze(this,1,1)),this._scale}set scale(t){this._scale===Eh&&(this._scale=new ze(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===xl&&(this._origin=new ze(this,0,0)),this._origin}set origin(t){this._origin===xl&&(this._origin=new ze(this,0,0),this._pivot!==yl&&se("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const n=this.getLocalBounds().width;this._setWidth(t,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const n=this.getLocalBounds().height;this._setHeight(t,n)}getSize(t){t||(t={});const n=this.getLocalBounds();return t.width=Math.abs(this.scale.x*n.width),t.height=Math.abs(this.scale.y*n.height),t}setSize(t,n){const s=this.getLocalBounds();typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,s.width),n!==void 0&&this._setHeight(n,s.height)}_updateSkew(){const t=this._rotation,n=this._skew;this._cx=Math.cos(t+n._y),this._sx=Math.sin(t+n._y),this._cy=-Math.sin(t-n._x),this._sy=Math.cos(t-n._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const n=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,d=s._y,p=o._x,g=o._y,y=-l._x,S=-l._y;n.a=this._cx*h,n.b=this._sx*h,n.c=this._cy*d,n.d=this._sy*d,n.tx=u._x-(p*n.a+g*n.c)+(y*n.a+S*n.c)-y,n.ty=u._y-(p*n.b+g*n.d)+(y*n.b+S*n.d)-S}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=p0,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=ve.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=p0,this._onUpdate())}get tint(){return Rl(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=lS,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const n=t?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=wh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const n=t?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=wh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const n=t?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=wh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&n)for(let o=0;o<n.length;++o)n[o].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}Ue.mixin(Le,Yv,Wv,iS,tS,Jv,qv,$v,eS,jv,Hv,Zv,Xv);class Af extends Le{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new Dn(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=t.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const n=this.bounds,{x:s,y:o}=t;return s>=n.minX&&s<=n.maxX&&o>=n.minY&&o<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(t){this.unload(),super.destroy(t),this._bounds=null}collectRenderablesSimple(t,n,s){const{renderPipes:o}=n;o.blendMode.pushBlendMode(this,this.groupBlendMode,t),o[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let d=0;d<h;d++)u[d].collectRenderables(t,n,s);o.blendMode.popBlendMode(t)}}class yr extends Af{constructor(t=Pt.EMPTY){t instanceof Pt&&(t={texture:t});const{texture:n=Pt.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new ze({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(t,n=!1){return t instanceof Pt?new yr(t):new yr(Pt.from(t,n))}set texture(t){t||(t=Pt.EMPTY);const n=this._texture;n!==t&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Rv(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return kt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,n=this._texture,s=this._bounds,{width:o,height:l}=n.orig;s.minX=-t._x*o,s.maxX=s.minX+o,s.minY=-t._y*l,s.maxY=s.minY+l}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const cS=new Dn;function Yy(r,t,n){const s=cS;r.measurable=!0,Ny(r,n,s),t.addBoundsMask(s),r.measurable=!1}function Xy(r,t,n){const s=hi.get();r.measurable=!0;const o=Fe.get().identity(),l=Vy(r,n,o);jy(r,s,l),r.measurable=!1,t.addBoundsMask(s),Fe.return(o),hi.return(s)}function Vy(r,t,n){return r?(r!==t&&(Vy(r.parent,t,n),r.updateLocalTransform(),n.append(r.localTransform)),n):(se("Mask bounds, renderable is not inside the root container"),n)}class qy{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof yr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,n){this.inverse||Yy(this.mask,t,n)}addLocalBounds(t,n){Xy(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof yr}}qy.extension=_t.MaskEffect;class $y{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}$y.extension=_t.MaskEffect;class Qy{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,n){Yy(this.mask,t,n)}addLocalBounds(t,n){Xy(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof Le}}Qy.extension=_t.MaskEffect;const uS={createCanvas:(r,t)=>{const n=document.createElement("canvas");return n.width=r,n.height=t,n},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let m0=uS;const Jt={get(){return m0},set(r){m0=r}};class Wy extends zn{constructor(t){t.resource||(t.resource=Jt.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,n=this.height,s=this._resolution){const o=super.resize(t,n,s);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Wy.extension=_t.TextureSource;class gs extends zn{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}gs.extension=_t.TextureSource;var Jh=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Jh||{});class Mh{constructor(t,n=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=n,this.priority=s,this._once=o}match(t,n=null){return this._fn===t&&this._context===n}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=t?null:n,this.previous=null,n}}const Zy=class hn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Mh(null,null,1/0),this.deltaMS=1/hn.targetFPMS,this.elapsedMS=1/hn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,n,s=Jh.NORMAL){return this._addListener(new Mh(t,n,s))}addOnce(t,n,s=Jh.NORMAL){return this._addListener(new Mh(t,n,s,!0))}_addListener(t){let n=this._head.next,s=this._head;if(!n)t.connect(s);else{for(;n;){if(t.priority>n.priority){t.connect(s);break}s=n,n=n.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,n){let s=this._head.next;for(;s;)s.match(t,n)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,n=this._head;for(;n=n.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const l=t-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=t-l%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*hn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,n)/1e3,hn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,t);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!hn._shared){const t=hn._shared=new hn;t.autoStart=!0,t._protected=!0}return hn._shared}static get system(){if(!hn._system){const t=hn._system=new hn;t.autoStart=!0,t._protected=!0}return hn._system}};Zy.targetFPMS=.06;let _l=Zy,Rh;async function Ky(){return Rh??(Rh=(async()=>{const t=Jt.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const n=await new Promise(u=>{const h=document.createElement("video");h.onloadeddata=()=>u(h),h.onerror=()=>u(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!n)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);const l=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,l),t.deleteFramebuffer(o),t.deleteTexture(s),t.getExtension("WEBGL_lose_context")?.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Rh}const Vl=class Jy extends zn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Jy.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=_l.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,n=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Ky(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(_l.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(_l.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(_l.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Vl.extension=_t.TextureSource;Vl.defaultOptions={...zn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Vl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ua=Vl;const Bn=(r,t,n=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(s=>typeof s=="string"||n?t(s):s):r);class hS{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const n=this._cache.get(t);return n||se(`[Assets] Asset id ${t} was not found in the Cache`),n}set(t,n){const s=Bn(t);let o;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.test(n)){o=p.getCacheableAssets(s,n);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(d=>{l.set(d,n)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,h)}),u.forEach(d=>{const p=o?o[d]:n;this._cache.has(d)&&this._cache.get(d)!==p&&se("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(t){if(!this._cacheMap.has(t)){se(`[Assets] Asset id ${t} was not found in the Cache`);return}const n=this._cacheMap.get(t);n.cacheKeys.forEach(o=>{this._cache.delete(o)}),n.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const ie=new hS,tf=[];Ue.handleByList(_t.TextureSource,tf);function tx(r={}){const t=r&&r.resource,n=t?r.resource:r,s=t?r:{resource:r};for(let o=0;o<tf.length;o++){const l=tf[o];if(l.test(n))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function fS(r={},t=!1){const n=r&&r.resource,s=n?r.resource:r,o=n?r:{resource:r};if(!t&&ie.has(s))return ie.get(s);const l=new Pt({source:tx(o)});return l.on("destroy",()=>{ie.has(s)&&ie.remove(s)}),t||ie.set(s,l),l}function dS(r,t=!1){return typeof r=="string"?ie.get(r):r instanceof zn?new Pt({source:r}):fS(r,t)}Pt.from=dS;zn.from=tx;Ue.add(qy,$y,Qy,Ua,gs,Wy,Sf);var Fi=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Fi||{});function kn(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function xa(r){return r.split("?")[0].split("#")[0]}function pS(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mS(r,t,n){return r.replace(new RegExp(pS(t),"g"),n)}function gS(r,t){let n="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=r.length;++h){if(h<r.length)u=r.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const d=n.lastIndexOf("/");if(d!==n.length-1){d===-1?(n="",s=0):(n=n.slice(0,d),s=n.length-1-n.lastIndexOf("/")),o=h,l=0;continue}}else if(n.length===2||n.length===1){n="",s=0,o=h,l=0;continue}}}else n.length>0?n+=`/${r.slice(o+1,h)}`:n=r.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return n}const fn={toPosix(r){return mS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){kn(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(r);return n?n[0]:""},toAbsolute(r,t,n){if(kn(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const s=xa(this.toPosix(t??Jt.get().getBaseUrl())),o=xa(this.toPosix(n??this.rootname(s)));return r=this.toPosix(r),r.startsWith("/")?fn.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(s,r)},normalize(r){if(kn(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const n=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const s=r.endsWith("/");return r=gS(r),r.length>0&&s&&(r+="/"),n?`/${r}`:t+r},isAbsolute(r){return kn(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let n=0;n<r.length;++n){const s=r[n];if(kn(s),s.length>0)if(t===void 0)t=s;else{const o=r[n-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(kn(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const n=t===47;let s=-1,o=!0;const l=this.getProtocol(r),u=r;r=r.slice(l.length);for(let h=r.length-1;h>=1;--h)if(t=r.charCodeAt(h),t===47){if(!o){s=h;break}}else o=!1;return s===-1?n?"/":this.isUrl(u)?l+r:l:n&&s===1?"//":l+r.slice(0,s)},rootname(r){kn(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const n=r.indexOf("/",t.length);n!==-1?t=r.slice(0,n):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){kn(r),t&&kn(t),r=xa(this.toPosix(r));let n=0,s=-1,o=!0,l;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let u=t.length-1,h=-1;for(l=r.length-1;l>=0;--l){const d=r.charCodeAt(l);if(d===47){if(!o){n=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(d===t.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return n===s?s=h:s===-1&&(s=r.length),r.slice(n,s)}for(l=r.length-1;l>=0;--l)if(r.charCodeAt(l)===47){if(!o){n=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":r.slice(n,s)},extname(r){kn(r),r=xa(this.toPosix(r));let t=-1,n=0,s=-1,o=!0,l=0;for(let u=r.length-1;u>=0;--u){const h=r.charCodeAt(u);if(h===47){if(!o){n=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?t===-1?t=u:l!==1&&(l=1):t!==-1&&(l=-1)}return t===-1||s===-1||l===0||l===1&&t===s-1&&t===n+1?"":r.slice(t,s)},parse(r){kn(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=xa(this.toPosix(r));let n=r.charCodeAt(0);const s=this.isAbsolute(r);let o;t.root=this.rootname(r),s||this.hasProtocol(r)?o=1:o=0;let l=-1,u=0,h=-1,d=!0,p=r.length-1,g=0;for(;p>=o;--p){if(n=r.charCodeAt(p),n===47){if(!d){u=p+1;break}continue}h===-1&&(d=!1,h=p+1),n===46?l===-1?l=p:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||h===-1||g===0||g===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?t.base=t.name=r.slice(1,h):t.base=t.name=r.slice(u,h)):(u===0&&s?(t.name=r.slice(1,l),t.base=r.slice(1,h)):(t.name=r.slice(u,l),t.base=r.slice(u,h)),t.ext=r.slice(l,h)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function ex(r,t,n,s,o){const l=t[n];for(let u=0;u<l.length;u++){const h=l[u];n<t.length-1?ex(r.replace(s[n],h),t,n+1,s,o):o.push(r.replace(s[n],h))}}function yS(r){const t=/\{(.*?)\}/g,n=r.match(t),s=[];if(n){const o=[];n.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),ex(r,o,0,n,s)}else s.push(r);return s}const jl=r=>!Array.isArray(r);class br{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,n)=>`${t}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(t,n)=>n.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const n=t;this._defaultSearchParams=Object.keys(n).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(n[s])}`).join("&")}}getAlias(t){const{alias:n,src:s}=t;return Bn(n||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>u?.src??u):l?.src?l.src:l,!0)}addManifest(t){this._manifest&&se("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(t,n){const s=[];let o=n;Array.isArray(n)||(o=Object.entries(n).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let d;if(typeof h=="string"){const p=this._createBundleAssetId(t,h);s.push(p),d=[h,p]}else{const p=h.map(g=>this._createBundleAssetId(t,g));s.push(...p),d=[...h,...p]}this.add({...l,alias:d,src:u})}),this._bundles[t]=s}add(t){const n=[];Array.isArray(t)?n.push(...t):n.push(t);let s;s=l=>{this.hasKey(l)&&se(`[Resolver] already has key: ${l} overwriting`)},Bn(n).forEach(l=>{const{src:u}=l;let{data:h,format:d,loadParser:p,parser:g}=l;const y=Bn(u).map(E=>typeof E=="string"?yS(E):Array.isArray(E)?E:[E]),S=this.getAlias(l);Array.isArray(S)?S.forEach(s):s(S);const b=[],C=E=>({...this._parsers.find(k=>k.test(E))?.parse(E),src:E});y.forEach(E=>{E.forEach(w=>{let k={};if(typeof w!="object"?k=C(w):(h=w.data??h,d=w.format??d,(w.loadParser||w.parser)&&(p=w.loadParser??p,g=w.parser??g),k={...C(w.src),...w}),!S)throw new Error(`[Resolver] alias is undefined for this asset: ${k.src}`);k=this._buildResolvedAsset(k,{aliases:S,data:h,format:d,loadParser:p,parser:g,progressSize:l.progressSize}),b.push(k)})}),S.forEach(E=>{this._assetMap[E]=b})})}resolveBundle(t){const n=jl(t);t=Bn(t);const s={};return t.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const d in u){const p=u[d];h[this._extractAssetIdFromBundle(o,d)]=p}s[o]=h}}),n?s[t[0]]:s}resolveUrl(t){const n=this.resolve(t);if(typeof t!="string"){const s={};for(const o in n)s[o]=n[o].src;return s}return n.src}resolve(t){const n=jl(t);t=Bn(t);const s={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u?.priority.forEach(h=>{u.params[h].forEach(d=>{const p=l.filter(g=>g[h]?g[h]===d:!1);p.length&&(l=p)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),n?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let n=0;n<t.length;n++){const s=t[n],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const n=/\?/.test(t)?"&":"?";return`${t}${n}${this._defaultSearchParams}`}_buildResolvedAsset(t,n){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:d}=n;return(this._basePath||this._rootPath)&&(t.src=fn.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=l??t.loadParser,t.parser=u??t.parser,t.format=h??t.format??xS(t.src),d!==void 0&&(t.progressSize=d),t}}br.RETINA_PREFIX=/@([0-9\.]+)x/;function xS(r){return r.split(".").pop().split("?").shift().split("#").shift()}const ef=(r,t)=>{const n=t.split("?")[1];return n&&(r+=`?${n}`),r},nx=class Ma{constructor(t,n){this.linkedSheets=[];let s=t;t?.source instanceof zn&&(s={texture:t,data:n});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Pt?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Ma.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t;const s=Ma.BATCH_SIZE;for(;n-t<s&&n<this._frameKeys.length;){const o=this._frameKeys[n],l=this._frames[o],u=l.frame;if(u){let h=null,d=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,g=new oe(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new oe(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new oe(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new oe(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Pt({source:this.textureSource,frame:h,orig:g,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}n++}}_processAnimations(){const t=this.data.animations||{};for(const n in t){this.animations[n]=[];for(let s=0;s<t[n].length;s++){const o=t[n][s];this.animations[n].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ma.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ma.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};nx.BATCH_SIZE=1e3;let g0=nx;const _S=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function ix(r,t,n){const s={};if(r.forEach(o=>{s[o]=t}),Object.keys(t.textures).forEach(o=>{s[`${t.cachePrefix}${o}`]=t.textures[o]}),!n){const o=fn.dirname(r[0]);t.linkedSheets.forEach((l,u)=>{const h=ix([`${o}/${t.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const bS={extension:_t.Asset,cache:{test:r=>r instanceof g0,getCacheableAssets:(r,t)=>ix(r,t,!1)},resolver:{extension:{type:_t.ResolveParser,name:"resolveSpritesheet"},test:r=>{const n=r.split("?")[0].split("."),s=n.pop(),o=n.pop();return s==="json"&&_S.includes(o)},parse:r=>{const t=r.split(".");return{resolution:parseFloat(br.RETINA_PREFIX.exec(r)?.[1]??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:_t.LoadParser,priority:Fi.Normal,name:"spritesheetLoader"},async testParse(r,t){return fn.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,n){const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=t?.data??{};let h=fn.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let d;if(s instanceof Pt)d=s;else{const y=ef(h+(o??r.meta.image),t.src);d=(await n.load([{src:y,data:l}]))[y]}const p=new g0({texture:d.source,data:r,cachePrefix:u});await p.parse();const g=r?.meta?.related_multi_packs;if(Array.isArray(g)){const y=[];for(const b of g){if(typeof b!="string")continue;let C=h+b;t.data?.ignoreMultiPack||(C=ef(C,t.src),y.push(n.load({src:C,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(y);p.linkedSheets=S,S.forEach(b=>{b.linkedSheets=[p].concat(p.linkedSheets.filter(C=>C!==b))})}return p},async unload(r,t,n){await n.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};Ue.add(bS);const kh=Object.create(null),y0=Object.create(null);function Tf(r,t){let n=y0[r];return n===void 0&&(kh[t]===void 0&&(kh[t]=1),y0[r]=n=kh[t]++),n}let bl;function sx(){return(!bl||bl?.isContextLost())&&(bl=Jt.get().createCanvas().getContext("webgl",{})),bl}let vl;function vS(){if(!vl){vl="mediump";const r=sx();r&&r.getShaderPrecisionFormat&&(vl=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return vl}function SS(r,t,n){return t?r:n?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function CS(r,t,n){const s=n?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=n?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(s!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function AS(r,t){return t?`#version 300 es
${r}`:r}const TS={},ES={};function wS(r,{name:t="pixi-program"},n=!0){t=t.replace(/\s+/g,"-"),t+=n?"-fragment":"-vertex";const s=n?TS:ES;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${t}`}
${r}`}function MS(r,t){return t?r.replace("#version 300 es",""):r}const Bh={stripVersion:MS,ensurePrecision:CS,addProgramDefines:SS,setProgramName:wS,insertVersion:AS},_a=Object.create(null),rx=class nf{constructor(t){t={...nf.defaultOptions,...t};const n=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:vS()},setProgramName:{name:t.name},addProgramDefines:n,insertVersion:n};let o=t.fragment,l=t.vertex;Object.keys(Bh).forEach(u=>{const h=s[u];o=Bh[u](o,h,!0),l=Bh[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=Tf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,_a[this._cacheKey]=null}static from(t){const n=`${t.vertex}:${t.fragment}`;return _a[n]||(_a[n]=new nf(t),_a[n]._cacheKey=n),_a[n]}};rx.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let ax=rx;const x0={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function RS(r){return x0[r]??x0.float32}const kS={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function BS({source:r,entryPoint:t}){const n={},s=r.indexOf(`fn ${t}`);if(s!==-1){const o=r.indexOf("->",s);if(o!==-1){const l=r.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const d=kS[h[3]]??"float32";n[h[2]]={location:parseInt(h[1],10),format:d,stride:RS(d).stride,offset:0,instance:!1,start:0}}}}return n}function Dh(r){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,p=r.match(t)?.map(y=>({group:parseInt(y.match(n)[1],10),binding:parseInt(y.match(s)[1],10),name:y.match(o)[2],isUniform:y.match(o)[1]==="<uniform>",type:y.match(l)[1]}));if(!p)return{groups:[],structs:[]};const g=r.match(u)?.map(y=>{const S=y.match(d)[1],b=y.match(h).reduce((C,E)=>{const[w,k]=E.split(":");return C[w.trim()]=k.trim(),C},{});return b?{name:S,members:b}:null}).filter(({name:y})=>p.some(S=>S.type===y))??[];return{groups:p,structs:g}}var Ra=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(Ra||{});function DS({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:Ra.VERTEX|Ra.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:Ra.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:Ra.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function OS({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function zS(r,t){const n=new Set,s=new Set,o=[...r.structs,...t.structs].filter(u=>n.has(u.name)?!1:(n.add(u.name),!0)),l=[...r.groups,...t.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const ba=Object.create(null);class ql{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:s,layout:o,gpuLayout:l,name:u}=t;if(this.name=u,this.fragment=n,this.vertex=s,n.source===s.source){const h=Dh(n.source);this.structsAndGroups=h}else{const h=Dh(s.source),d=Dh(n.source);this.structsAndGroups=zS(h,d)}this.layout=o??OS(this.structsAndGroups),this.gpuLayout=l??DS(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:n}=this,s=t.source+n.source+t.entryPoint+n.entryPoint;this._layoutKey=Tf(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=BS(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,ba[this._cacheKey]=null}static from(t){const n=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return ba[n]||(ba[n]=new ql(t),ba[n]._cacheKey=n),ba[n]}}const ox=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],US=ox.reduce((r,t)=>(r[t]=!0,r),{});function NS(r,t){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const lx=class cx{constructor(t,n){this._touched=0,this.uid=fe("uniform"),this._resourceType="uniformGroup",this._resourceId=fe("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...cx.defaultOptions,...n},this.uniformStructures=t;const s={};for(const o in t){const l=t[o];if(l.name=o,l.size=l.size??1,!US[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,d]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${d} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${ox.join(", ")}`)}l.value??(l.value=NS(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=Tf(Object.keys(s).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};lx.defaultOptions={ubo:!1,isStatic:!1};let ux=lx;class kl{constructor(t){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const s in t){const o=t[s];this.setResource(o,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let n=0;for(const s in this.resources)t[n++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,n){const s=this.resources[n];t!==s&&(s&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[n]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t,n){const s=this.resources;for(const o in s)s[o]._gcLastUsed=t,s[o]._touched=n}destroy(){const t=this.resources;for(const n in t)t[n]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const n=this.resources;for(const s in n)n[s]===t&&(n[s]=null)}else this._updateKey()}}var sf=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(sf||{});class Ef extends On{constructor(t){super(),this.uid=fe("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:n,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=t;this.gpuProgram=n,this.glProgram=s,u===void 0&&(u=0,n&&(u|=sf.WEBGPU),s&&(u|=sf.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&o&&h)for(const p in h)for(const g in h[p]){const y=h[p][g];d[y]={group:p,binding:g,name:y}}else if(n&&o&&!h){const p=n.structsAndGroups.groups;h={},p.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,d[g.name]=g})}else if(l){o={},h={},n&&n.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,d[y.name]=y});let p=0;for(const g in l)d[g]||(o[99]||(o[99]=new kl,this._ownedBindGroups.push(o[99])),d[g]={group:99,binding:p,name:g},h[99]=h[99]||{},h[99][p]=g,p++);for(const g in l){const y=g;let S=l[g];!S.source&&!S._resourceType&&(S=new ux(S));const b=d[y];b&&(o[b.group]||(o[b.group]=new kl,this._ownedBindGroups.push(o[b.group])),o[b.group].setResource(S,b.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,d)}addResource(t,n,s){var o,l;(o=this._uniformBindMap)[n]||(o[n]={}),(l=this._uniformBindMap[n])[s]||(l[s]=t),this.groups[n]||(this.groups[n]=new kl,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(t,n){const s={};for(const o in n){const l=n[o];Object.defineProperty(s,l.name,{get(){return t[l.group].getResource(l.binding)},set(u){t[l.group].setResource(u,l.binding)}})}return s}destroy(t=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:n,gl:s,...o}=t;let l,u;return n&&(l=ql.from(n)),s&&(u=ax.from(s)),new Ef({gpuProgram:l,glProgram:u,...o})}}const rf=[];Ue.handleByNamedList(_t.Environment,rf);async function LS(r){if(!r)for(let t=0;t<rf.length;t++){const n=rf[t];if(n.value.test()){await n.value.load();return}}}let va;function PS(){if(typeof va=="boolean")return va;try{va=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{va=!1}return va}function _0(r,t,n=2){const s=t&&t.length,o=s?t[0]*n:r.length;let l=hx(r,0,o,n,!0);const u=[];if(!l||l.next===l.prev)return u;let h,d,p;if(s&&(l=FS(r,t,l,n)),r.length>80*n){h=r[0],d=r[1];let g=h,y=d;for(let S=n;S<o;S+=n){const b=r[S],C=r[S+1];b<h&&(h=b),C<d&&(d=C),b>g&&(g=b),C>y&&(y=C)}p=Math.max(g-h,y-d),p=p!==0?32767/p:0}return ja(l,u,n,h,d,p,0),u}function hx(r,t,n,s,o){let l;if(o===tC(r,t,n,s)>0)for(let u=t;u<n;u+=s)l=b0(u/s|0,r[u],r[u+1],l);else for(let u=n-s;u>=t;u-=s)l=b0(u/s|0,r[u],r[u+1],l);return l&&xr(l,l.next)&&(Ia(l),l=l.next),l}function ys(r,t){if(!r)return r;t||(t=r);let n=r,s;do if(s=!1,!n.steiner&&(xr(n,n.next)||le(n.prev,n,n.next)===0)){if(Ia(n),n=t=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==t);return t}function ja(r,t,n,s,o,l,u){if(!r)return;!u&&l&&$S(r,s,o,l);let h=r;for(;r.prev!==r.next;){const d=r.prev,p=r.next;if(l?GS(r,s,o,l):jS(r)){t.push(d.i,r.i,p.i),Ia(r),r=p.next,h=p.next;continue}if(r=p,r===h){u?u===1?(r=IS(ys(r),t),ja(r,t,n,s,o,l,2)):u===2&&HS(r,t,n,s,o,l):ja(ys(r),t,n,s,o,l,1);break}}}function jS(r){const t=r.prev,n=r,s=r.next;if(le(t,n,s)>=0)return!1;const o=t.x,l=n.x,u=s.x,h=t.y,d=n.y,p=s.y,g=Math.min(o,l,u),y=Math.min(h,d,p),S=Math.max(o,l,u),b=Math.max(h,d,p);let C=s.next;for(;C!==t;){if(C.x>=g&&C.x<=S&&C.y>=y&&C.y<=b&&ka(o,h,l,d,u,p,C.x,C.y)&&le(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function GS(r,t,n,s){const o=r.prev,l=r,u=r.next;if(le(o,l,u)>=0)return!1;const h=o.x,d=l.x,p=u.x,g=o.y,y=l.y,S=u.y,b=Math.min(h,d,p),C=Math.min(g,y,S),E=Math.max(h,d,p),w=Math.max(g,y,S),k=af(b,C,t,n,s),U=af(E,w,t,n,s);let M=r.prevZ,O=r.nextZ;for(;M&&M.z>=k&&O&&O.z<=U;){if(M.x>=b&&M.x<=E&&M.y>=C&&M.y<=w&&M!==o&&M!==u&&ka(h,g,d,y,p,S,M.x,M.y)&&le(M.prev,M,M.next)>=0||(M=M.prevZ,O.x>=b&&O.x<=E&&O.y>=C&&O.y<=w&&O!==o&&O!==u&&ka(h,g,d,y,p,S,O.x,O.y)&&le(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;M&&M.z>=k;){if(M.x>=b&&M.x<=E&&M.y>=C&&M.y<=w&&M!==o&&M!==u&&ka(h,g,d,y,p,S,M.x,M.y)&&le(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;O&&O.z<=U;){if(O.x>=b&&O.x<=E&&O.y>=C&&O.y<=w&&O!==o&&O!==u&&ka(h,g,d,y,p,S,O.x,O.y)&&le(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function IS(r,t){let n=r;do{const s=n.prev,o=n.next.next;!xr(s,o)&&dx(s,n,n.next,o)&&Ga(s,o)&&Ga(o,s)&&(t.push(s.i,n.i,o.i),Ia(n),Ia(n.next),n=r=o),n=n.next}while(n!==r);return ys(n)}function HS(r,t,n,s,o,l){let u=r;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&ZS(u,h)){let d=px(u,h);u=ys(u,u.next),d=ys(d,d.next),ja(u,t,n,s,o,l,0),ja(d,t,n,s,o,l,0);return}h=h.next}u=u.next}while(u!==r)}function FS(r,t,n,s){const o=[];for(let l=0,u=t.length;l<u;l++){const h=t[l]*s,d=l<u-1?t[l+1]*s:r.length,p=hx(r,h,d,s,!1);p===p.next&&(p.steiner=!0),o.push(WS(p))}o.sort(YS);for(let l=0;l<o.length;l++)n=XS(o[l],n);return n}function YS(r,t){let n=r.x-t.x;if(n===0&&(n=r.y-t.y,n===0)){const s=(r.next.y-r.y)/(r.next.x-r.x),o=(t.next.y-t.y)/(t.next.x-t.x);n=s-o}return n}function XS(r,t){const n=VS(r,t);if(!n)return t;const s=px(n,r);return ys(s,s.next),ys(n,n.next)}function VS(r,t){let n=t;const s=r.x,o=r.y;let l=-1/0,u;if(xr(r,n))return n;do{if(xr(r,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const y=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=s&&y>l&&(l=y,u=n.x<n.next.x?n:n.next,y===s))return u}n=n.next}while(n!==t);if(!u)return null;const h=u,d=u.x,p=u.y;let g=1/0;n=u;do{if(s>=n.x&&n.x>=d&&s!==n.x&&fx(o<p?s:l,o,d,p,o<p?l:s,o,n.x,n.y)){const y=Math.abs(o-n.y)/(s-n.x);Ga(n,r)&&(y<g||y===g&&(n.x>u.x||n.x===u.x&&qS(u,n)))&&(u=n,g=y)}n=n.next}while(n!==h);return u}function qS(r,t){return le(r.prev,r,t.prev)<0&&le(t.next,r,r.next)<0}function $S(r,t,n,s){let o=r;do o.z===0&&(o.z=af(o.x,o.y,t,n,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,QS(o)}function QS(r){let t,n=1;do{let s=r,o;r=null;let l=null;for(t=0;s;){t++;let u=s,h=0;for(let p=0;p<n&&(h++,u=u.nextZ,!!u);p++);let d=n;for(;h>0||d>0&&u;)h!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,d--),l?l.nextZ=o:r=o,o.prevZ=l,l=o;s=u}l.nextZ=null,n*=2}while(t>1);return r}function af(r,t,n,s,o){return r=(r-n)*o|0,t=(t-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function WS(r){let t=r,n=r;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==r);return n}function fx(r,t,n,s,o,l,u,h){return(o-u)*(t-h)>=(r-u)*(l-h)&&(r-u)*(s-h)>=(n-u)*(t-h)&&(n-u)*(l-h)>=(o-u)*(s-h)}function ka(r,t,n,s,o,l,u,h){return!(r===u&&t===h)&&fx(r,t,n,s,o,l,u,h)}function ZS(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!KS(r,t)&&(Ga(r,t)&&Ga(t,r)&&JS(r,t)&&(le(r.prev,r,t.prev)||le(r,t.prev,t))||xr(r,t)&&le(r.prev,r,r.next)>0&&le(t.prev,t,t.next)>0)}function le(r,t,n){return(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y)}function xr(r,t){return r.x===t.x&&r.y===t.y}function dx(r,t,n,s){const o=Cl(le(r,t,n)),l=Cl(le(r,t,s)),u=Cl(le(n,s,r)),h=Cl(le(n,s,t));return!!(o!==l&&u!==h||o===0&&Sl(r,n,t)||l===0&&Sl(r,s,t)||u===0&&Sl(n,r,s)||h===0&&Sl(n,t,s))}function Sl(r,t,n){return t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)&&t.y<=Math.max(r.y,n.y)&&t.y>=Math.min(r.y,n.y)}function Cl(r){return r>0?1:r<0?-1:0}function KS(r,t){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==t.i&&n.next.i!==t.i&&dx(n,n.next,r,t))return!0;n=n.next}while(n!==r);return!1}function Ga(r,t){return le(r.prev,r,r.next)<0?le(r,t,r.next)>=0&&le(r,r.prev,t)>=0:le(r,t,r.prev)<0||le(r,r.next,t)<0}function JS(r,t){let n=r,s=!1;const o=(r.x+t.x)/2,l=(r.y+t.y)/2;do n.y>l!=n.next.y>l&&n.next.y!==n.y&&o<(n.next.x-n.x)*(l-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==r);return s}function px(r,t){const n=of(r.i,r.x,r.y),s=of(t.i,t.x,t.y),o=r.next,l=t.prev;return r.next=t,t.prev=r,n.next=o,o.prev=n,s.next=n,n.prev=s,l.next=s,s.prev=l,s}function b0(r,t,n,s){const o=of(r,t,n);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Ia(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function of(r,t,n){return{i:r,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function tC(r,t,n,s){let o=0;for(let l=t,u=n-s;l<n;l+=s)o+=(r[u]-r[l])*(r[l+1]+r[u+1]),u=l;return o}const eC=_0.default||_0;var mx=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(mx||{});class nC{constructor(t){this.items=[],this._name=t}emit(t,n,s,o,l,u,h,d){const{name:p,items:g}=this;for(let y=0,S=g.length;y<S;y++)g[y][p](t,n,s,o,l,u,h,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const n=this.items.indexOf(t);return n!==-1&&this.items.splice(n,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const iC=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],gx=class yx extends On{constructor(t){super(),this.tick=0,this.uid=fe("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const n=[...iC,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(t={}){const n=t.skipExtensionImports===!0?!0:t.manageImports===!1;await LS(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...yx.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,n){this.tick++;let s=t;if(s instanceof Le&&(s={container:s},n&&(kt(qt,"passing a second argument is deprecated, please use render options instead"),s.target=n.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:ve.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(t,n,s){const o=this.view.resolution;this.view.resize(t,n,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(t={}){const n=this;t.target||(t.target=n.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=mx.ALL);const{clear:s,clearColor:o,target:l}=t;ve.shared.setValue(o??this.background.colorRgba),n.renderTarget.clear(l,s,ve.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(n=>{this.runners[n]=new nC(n)})}_addSystems(t){let n;for(n in t){const s=t[n];this._addSystem(s.value,s.name)}}_addSystem(t,n){const s=new t(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=s,this._systemsHash[n]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(t,n){const s=n.reduce((o,l)=>(o[l.name]=l.value,o),{});t.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&qa.release(),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!PS())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};gx.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let xx=gx,Al;function sC(r){return Al!==void 0||(Al=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:r??xx.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Jt.get().getWebGLRenderingContext())return!1;let s=Jt.get().createCanvas().getContext("webgl",t);const o=!!s?.getContextAttributes()?.stencil;if(s){const l=s.getExtension("WEBGL_lose_context");l&&l.loseContext()}return s=null,o}catch{return!1}})()),Al}let Tl;async function rC(r={}){return Tl!==void 0||(Tl=await(async()=>{const t=Jt.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),Tl}const v0=["webgl","webgpu","canvas"];async function aC(r){let t=[];r.preference?(t.push(r.preference),v0.forEach(l=>{l!==r.preference&&t.push(l)})):t=v0.slice();let n,s={};for(let l=0;l<t.length;l++){const u=t[l];if(u==="webgpu"&&await rC()){const{WebGPURenderer:h}=await Pl(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-IB93M1Rh.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]),import.meta.url);n=h,s={...r,...r.webgpu};break}else if(u==="webgl"&&sC(r.failIfMajorPerformanceCaveat??xx.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Pl(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-BtTuq_GR.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]),import.meta.url);n=h,s={...r,...r.webgl};break}else if(u==="canvas")throw s={...r},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!n)throw new Error("No available renderer for the current environment");const o=new n;return await o.init(s),o}const _x="8.15.0";class bx{static init(){globalThis.__PIXI_APP_INIT__?.(this,_x)}static destroy(){}}bx.extension=_t.Application;class oC{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,_x)}destroy(){this._renderer=null}}oC.extension={type:[_t.WebGLSystem,_t.WebGPUSystem],name:"initHook",priority:-10};const vx=class lf{constructor(...t){this.stage=new Le,t[0]!==void 0&&kt(qt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new Le),this.renderer=await aC(t),lf._plugins.forEach(n=>{n.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return kt(qt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){const s=lf._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};vx._plugins=[];let Sx=vx;Ue.handleByList(_t.Application,Sx._plugins);Ue.add(bx);class Cx extends On{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return kt(qt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return kt(qt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return kt(qt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return kt(qt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return kt(qt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)this.chars[n].texture?.destroy();this.chars=null,t&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}class lC{constructor(t=0,n=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=s,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const n=this.items[t];delete this.items[t],this.size--,n.prev!==null&&(n.prev.next=n.next),n.next!==null&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++){const o=t[s];n[s]=[o,this.get(o)]}return n}evict(t=!1){if(t||this.size>0){const n=this.first;delete this.items[n.key],--this.size===0?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(t){let n;return this.has(t)&&(n=this.items[t].expiry),n}get(t){const n=this.items[t];if(n!==void 0){if(this.ttl>0&&n.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(n),n.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=new Array(this.size);let n=this.first,s=0;for(;n!==null;)t[s++]=n.key,n=n.next;return t}setWithEvicted(t,n,s=this.resetTtl){let o=null;if(this.has(t))this.set(t,n,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(t,n,s=!1,o=this.resetTtl){let l=this.items[t];return s||l!==void 0?(l.value=n,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=this.get(t[s]);return n}}function Ax(r=1e3,t=0,n=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof n!="boolean")throw new TypeError("Invalid resetTtl value");return new lC(r,t,n)}const cC=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Gl(r){const t=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let n=r.fontFamily;Array.isArray(r.fontFamily)||(n=r.fontFamily.split(","));for(let s=n.length-1;s>=0;s--){let o=n[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!cC.includes(o)&&(o=`"${o}"`),n[s]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${t} ${n.join(",")}`}const Oh={willReadFrequently:!0},Un=class mt{static get experimentalLetterSpacingSupported(){let t=mt._experimentalLetterSpacingSupported;if(t===void 0){const n=Jt.get().getCanvasRenderingContext2D().prototype;t=mt._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(t,n,s,o,l,u,h,d,p){this.text=t,this.style=n,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=p}static measureText(t=" ",n,s=mt._canvas,o=n.wordWrap){const l=`${t}-${n.styleKey}-wordWrap-${o}`;if(mt._measurementCache.has(l))return mt._measurementCache.get(l);const u=Gl(n),h=mt.measureFont(u);h.fontSize===0&&(h.fontSize=n.fontSize,h.ascent=n.fontSize);const d=mt.__context;d.font=u;const g=(o?mt._wordWrap(t,n,s):t).split(/(?:\r\n|\r|\n)/),y=new Array(g.length);let S=0;for(let U=0;U<g.length;U++){const M=mt._measureText(g[U],n.letterSpacing,d);y[U]=M,S=Math.max(S,M)}const b=n._stroke?.width||0;let C=S+b;n.dropShadow&&(C+=n.dropShadow.distance);const E=n.lineHeight||h.fontSize;let w=Math.max(E,h.fontSize+b)+(g.length-1)*(E+n.leading);n.dropShadow&&(w+=n.dropShadow.distance);const k=new mt(t,n,C,w,g,y,E+n.leading,S,h);return mt._measurementCache.set(l,k),k}static _measureText(t,n,s){let o=!1;mt.experimentalLetterSpacingSupported&&(mt.experimentalLetterSpacing?(s.letterSpacing=`${n}px`,s.textLetterSpacing=`${n}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(t);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=n,p-=n;else{const g=(mt.graphemeSegmenter(t).length-1)*n;u+=g,p+=g}return Math.max(u,p)}static _wordWrap(t,n,s=mt._canvas){const o=s.getContext("2d",Oh);let l=0,u="",h="";const d=Object.create(null),{letterSpacing:p,whiteSpace:g}=n,y=mt._collapseSpaces(g),S=mt._collapseNewlines(g);let b=!y;const C=n.wordWrapWidth+p,E=mt._tokenize(t);for(let w=0;w<E.length;w++){let k=E[w];if(mt._isNewline(k)){if(!S){h+=mt._addLine(u),b=!y,u="",l=0;continue}k=" "}if(y){const M=mt.isBreakingSpace(k),O=mt.isBreakingSpace(u[u.length-1]);if(M&&O)continue}const U=mt._getFromCache(k,p,d,o);if(U>C)if(u!==""&&(h+=mt._addLine(u),u="",l=0),mt.canBreakWords(k,n.breakWords)){const M=mt.wordWrapSplit(k);for(let O=0;O<M.length;O++){let I=M[O],Q=I,H=1;for(;M[O+H];){const K=M[O+H];if(!mt.canBreakChars(Q,K,k,O,n.breakWords))I+=K;else break;Q=K,H++}O+=H-1;const st=mt._getFromCache(I,p,d,o);st+l>C&&(h+=mt._addLine(u),b=!1,u="",l=0),u+=I,l+=st}}else{u.length>0&&(h+=mt._addLine(u),u="",l=0);const M=w===E.length-1;h+=mt._addLine(k,!M),b=!1,u="",l=0}else U+l>C&&(b=!1,h+=mt._addLine(u),u="",l=0),(u.length>0||!mt.isBreakingSpace(k)||b)&&(u+=k,l+=U)}return h+=mt._addLine(u,!1),h}static _addLine(t,n=!0){return t=mt._trimRight(t),t=n?`${t}
`:t,t}static _getFromCache(t,n,s,o){let l=s[t];return typeof l!="number"&&(l=mt._measureText(t,n,o)+n,s[t]=l),l}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let n=t.length-1;n>=0;n--){const s=t[n];if(!mt.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:mt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return typeof t!="string"?!1:mt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const n=[];let s="";if(typeof t!="string")return n;for(let o=0;o<t.length;o++){const l=t[o],u=t[o+1];if(mt.isBreakingSpace(l,u)||mt._isNewline(l)){s!==""&&(n.push(s),s=""),l==="\r"&&u===`
`?(n.push(`\r
`),o++):n.push(l);continue}s+=l}return s!==""&&n.push(s),n}static canBreakWords(t,n){return n}static canBreakChars(t,n,s,o,l){return!0}static wordWrapSplit(t){return mt.graphemeSegmenter(t)}static measureFont(t){if(mt._fonts[t])return mt._fonts[t];const n=mt._context;n.font=t;const s=n.measureText(mt.METRICS_STRING+mt.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return mt._fonts[t]=o,o}static clearMetrics(t=""){t?delete mt._fonts[t]:mt._fonts={}}static get _canvas(){if(!mt.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if(n.getContext("2d",Oh)?.measureText)return mt.__canvas=n,n;t=Jt.get().createCanvas()}catch{t=Jt.get().createCanvas()}t.width=t.height=10,mt.__canvas=t}return mt.__canvas}static get _context(){return mt.__context||(mt.__context=mt._canvas.getContext("2d",Oh)),mt.__context}};Un.METRICS_STRING="|q";Un.BASELINE_SYMBOL="M";Un.BASELINE_MULTIPLIER=1.4;Un.HEIGHT_MULTIPLIER=2;Un.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const r=new Intl.Segmenter;return t=>{const n=r.segment(t),s=[];let o=0;for(const l of n)s[o++]=l.segment;return s}}return r=>[...r]})();Un.experimentalLetterSpacing=!1;Un._fonts={};Un._newlines=[10,13];Un._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Un._measurementCache=Ax(1e3);let Yn=Un;const S0=[{offset:0,color:"white"},{offset:1,color:"black"}],wf=class cf{constructor(...t){this.uid=fe("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let n=uC(t);n={...n.type==="radial"?cf.defaultRadialOptions:cf.defaultLinearOptions,...My(n)},this._textureSize=n.textureSize,this._wrapMode=n.wrapMode,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(t,n){return this.colorStops.push({offset:t,color:ve.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:n}=this.start,{x:s,y:o}=this.end,l=s-t,u=o-n;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=t;t=s,s=w,l*=-1}if(u<0){const w=n;n=o,o=w,u*=-1}}const d=this.colorStops.length?this.colorStops:S0,p=this._textureSize,{canvas:g,context:y}=A0(p,1),S=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);C0(S,d),y.fillStyle=S,y.fillRect(0,0,p,1),this.texture=new Pt({source:new gs({resource:g,addressMode:this._wrapMode})});const b=Math.sqrt(l*l+u*u),C=Math.atan2(u,l),E=new Nt;E.scale(b/p,1),E.rotate(C),E.translate(t,n),this.textureSpace==="local"&&E.scale(p,p),this.transform=E}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:S0,n=this._textureSize,{canvas:s,context:o}=A0(n,n),{x:l,y:u}=this.center,{x:h,y:d}=this.outerCenter,p=this.innerRadius,g=this.outerRadius,y=h-g,S=d-g,b=n/(g*2),C=(l-y)*b,E=(u-S)*b,w=o.createRadialGradient(C,E,p*b,(h-y)*b,(d-S)*b,g*b);C0(w,t),o.fillStyle=t[t.length-1].color,o.fillRect(0,0,n,n),o.fillStyle=w,o.translate(C,E),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-C,-E),o.fillRect(0,0,n,n),this.texture=new Pt({source:new gs({resource:s,addressMode:this._wrapMode})});const k=new Nt;k.scale(1/b,1/b),k.translate(y,S),this.textureSpace==="local"&&k.scale(n,n),this.transform=k}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};wf.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};wf.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let di=wf;function C0(r,t){for(let n=0;n<t.length;n++){const s=t[n];r.addColorStop(s.offset,s.color)}}function A0(r,t){const n=Jt.get().createCanvas(r,t),s=n.getContext("2d");return{canvas:n,context:s}}function uC(r){let t=r[0]??{};return(typeof t=="number"||r[1])&&(kt("8.5.2","use options object instead"),t={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??di.defaultLinearOptions.textureSize}),t}const T0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class $l{constructor(t,n){this.uid=fe("fillPattern"),this._tick=0,this.transform=new Nt,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),n&&(t.source.style.addressModeU=T0[n].addressModeU,t.source.style.addressModeV=T0[n].addressModeV)}setTransform(t){const n=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var zh,E0;function hC(){if(E0)return zh;E0=1,zh=n;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(l){var u=[];return l.replace(t,function(h,d,p){var g=d.toLowerCase();for(p=o(p),g=="m"&&p.length>2&&(u.push([d].concat(p.splice(0,2))),g="l",d=d=="m"?"l":"L");;){if(p.length==r[g])return p.unshift(d),u.push(p);if(p.length<r[g])throw new Error("malformed path data");u.push([d].concat(p.splice(0,r[g])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return zh}var fC=hC();const dC=Va(fC);function pC(r,t){const n=dC(r),s=[];let o=null,l=0,u=0;for(let h=0;h<n.length;h++){const d=n[h],p=d[0],g=d;switch(p){case"M":l=g[1],u=g[2],t.moveTo(l,u);break;case"m":l+=g[1],u+=g[2],t.moveTo(l,u);break;case"H":l=g[1],t.lineTo(l,u);break;case"h":l+=g[1],t.lineTo(l,u);break;case"V":u=g[1],t.lineTo(l,u);break;case"v":u+=g[1],t.lineTo(l,u);break;case"L":l=g[1],u=g[2],t.lineTo(l,u);break;case"l":l+=g[1],u+=g[2],t.lineTo(l,u);break;case"C":l=g[5],u=g[6],t.bezierCurveTo(g[1],g[2],g[3],g[4],l,u);break;case"c":t.bezierCurveTo(l+g[1],u+g[2],l+g[3],u+g[4],l+g[5],u+g[6]),l+=g[5],u+=g[6];break;case"S":l=g[3],u=g[4],t.bezierCurveToShort(g[1],g[2],l,u);break;case"s":t.bezierCurveToShort(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"Q":l=g[3],u=g[4],t.quadraticCurveTo(g[1],g[2],l,u);break;case"q":t.quadraticCurveTo(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"T":l=g[1],u=g[2],t.quadraticCurveToShort(l,u);break;case"t":l+=g[1],u+=g[2],t.quadraticCurveToShort(l,u);break;case"A":l=g[6],u=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"a":l+=g[6],u+=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"Z":case"z":t.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:se(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return t}class Mf{constructor(t=0,n=0,s=0){this.type="circle",this.x=t,this.y=n,this.radius=s}clone(){return new Mf(this.x,this.y,this.radius)}contains(t,n){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-t,l=this.y-n;return o*=o,l*=l,o+l<=s}strokeContains(t,n,s,o=.5){if(this.radius===0)return!1;const l=this.x-t,u=this.y-n,h=this.radius,d=(1-o)*s,p=Math.sqrt(l*l+u*u);return p<=h+d&&p>h-(s-d)}getBounds(t){return t||(t=new oe),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Rf{constructor(t=0,n=0,s=0,o=0){this.type="ellipse",this.x=t,this.y=n,this.halfWidth=s,this.halfHeight=o}clone(){return new Rf(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,o=(n-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(t,n,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),d=s-h,p=l-d,g=u-d,y=l+h,S=u+h,b=t-this.x,C=n-this.y,E=b*b/(p*p)+C*C/(g*g),w=b*b/(y*y)+C*C/(S*S);return E>1&&w<=1}getBounds(t){return t||(t=new oe),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function mC(r,t,n,s,o,l){const u=r-n,h=t-s,d=o-n,p=l-s,g=u*d+h*p,y=d*d+p*p;let S=-1;y!==0&&(S=g/y);let b,C;S<0?(b=n,C=s):S>1?(b=o,C=l):(b=n+S*d,C=s+S*p);const E=r-b,w=t-C;return E*E+w*w}let gC,yC;class Na{constructor(...t){this.type="polygon";let n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){const s=[];for(let o=0,l=n.length;o<l;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.closePath=!0}isClockwise(){let t=0;const n=this.points,s=n.length;for(let o=0;o<s;o+=2){const l=n[o],u=n[o+1],h=n[(o+2)%s],d=n[(o+3)%s];t+=(h-l)*(d+u)}return t<0}containsPolygon(t){const n=this.getBounds(gC),s=t.getBounds(yC);if(!n.containsRect(s))return!1;const o=t.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const t=this.points.slice(),n=new Na(t);return n.closePath=this.closePath,n}contains(t,n){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],d=this.points[l*2+1],p=this.points[u*2],g=this.points[u*2+1];d>n!=g>n&&t<(p-h)*((n-d)/(g-d))+h&&(s=!s)}return s}strokeContains(t,n,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:d}=this,p=d.length-(this.closePath?0:2);for(let g=0;g<p;g+=2){const y=d[g],S=d[g+1],b=d[(g+2)%d.length],C=d[(g+3)%d.length],E=mC(t,n,y,S,b,C),w=Math.sign((b-y)*(n-S)-(C-S)*(t-y));if(E<=(w<0?h:u))return!0}return!1}getBounds(t){t||(t=new oe);const n=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,d=n.length;h<d;h+=2){const p=n[h],g=n[h+1];s=p<s?p:s,o=p>o?p:o,l=g<l?g:l,u=g>u?g:u}return t.x=s,t.width=o-s,t.y=l,t.height=u-l,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,n)=>`${t}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return kt("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return kt("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const El=(r,t,n,s,o,l,u)=>{const h=r-n,d=t-s,p=Math.sqrt(h*h+d*d);return p>=o-l&&p<=o+u};class kf{constructor(t=0,n=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=t,this.y=n,this.width=s,this.height=o,this.radius=l}getBounds(t){return t||(t=new oe),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new kf(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+s&&n<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let o=t-(this.x+s),l=n-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=t-(this.x+this.width-s),o*o+l*l<=u)||(l=n-(this.y+this.height-s),o*o+l*l<=u)||(o=t-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(t,n,s,o=.5){const{x:l,y:u,width:h,height:d,radius:p}=this,g=s*(1-o),y=s-g,S=l+p,b=u+p,C=h-p*2,E=d-p*2,w=l+h,k=u+d;return(t>=l-g&&t<=l+y||t>=w-y&&t<=w+g)&&n>=b&&n<=b+E||(n>=u-g&&n<=u+y||n>=k-y&&n<=k+g)&&t>=S&&t<=S+C?!0:t<S&&n<b&&El(t,n,S,b,p,y,g)||t>w-p&&n<b&&El(t,n,w-p,b,p,y,g)||t>w-p&&n>k-p&&El(t,n,w-p,k-p,p,y,g)||t<S&&n>k-p&&El(t,n,S,k-p,p,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Tx={};function xC(r,t,n){let s=2166136261;for(let o=0;o<t;o++)s^=r[o].uid,s=Math.imul(s,16777619),s>>>=0;return Tx[s]||_C(r,t,s,n)}function _C(r,t,n,s){const o={};let l=0;for(let h=0;h<s;h++){const d=h<t?r[h]:Pt.EMPTY.source;o[l++]=d.source,o[l++]=d.style}const u=new kl(o);return Tx[n]=u,u}class w0{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function M0(r,t){const n=r.byteLength/8|0,s=new Float64Array(r,0,n);new Float64Array(t,0,n).set(s);const l=r.byteLength-n*8;if(l>0){const u=new Uint8Array(r,n*8,l);new Uint8Array(t,n*8,l).set(u)}}const bC={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var vC=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(vC||{});function R0(r,t){return t.alphaMode==="no-premultiply-alpha"&&bC[r]||r}const SC=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function CC(r){let t="";for(let n=0;n<r;++n)n>0&&(t+=`
else `),n<r-1&&(t+=`if(test == ${n}.0){}`);return t}function AC(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=SC.replace(/%forloop%/gi,CC(r));if(t.shaderSource(n,s),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))r=r/2|0;else break}}finally{t.deleteShader(n)}return r}let lr=null;function TC(){if(lr)return lr;const r=sx();return lr=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),lr=AC(lr,r),r.getExtension("WEBGL_lose_context")?.loseContext(),lr}class EC{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const n=this.textures[t];this.textures[t]=null,this.ids[n.uid]=null}this.count=0}}class wC{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new EC,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const La=[];let Il=0;qa.register({clear:()=>{if(La.length>0)for(const r of La)r&&r.destroy();La.length=0,Il=0}});function k0(){return Il>0?La[--Il]:new wC}function B0(r){La[Il++]=r}let Sa=0;const Ex=class wx{constructor(t){this.uid=fe("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...wx.defaultOptions,...t},t.maxTextures||(kt("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=TC());const{maxTextures:n,attributesInitialSize:s,indicesInitialSize:o}=t;this.attributeBuffer=new w0(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)B0(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,n){const s=t._batch.textures.ids[n._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=n,!0)}updateElement(t){this.dirty=!0;const n=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId)}break(t){const n=this._elements;if(!n[this.elementStart])return;let s=k0(),o=s.textures;o.clear();const l=n[this.elementStart];let u=R0(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,S=this._batchIndexStart,b="startBatch";const C=this.maxTextures;for(let E=this.elementStart;E<this.elementSize;++E){const w=n[E];n[E]=null;const U=w.texture._source,M=R0(w.blendMode,U),O=u!==M||h!==w.topology;if(U._batchTick===Sa&&!O){w._textureId=U._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(g,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,g,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}U._batchTick=Sa,(o.count>=C||O)&&(this._finishBatch(s,S,y-S,o,u,h,t,b),b="renderBatch",S=y,u=M,h=w.topology,s=k0(),o=s.textures,o.clear(),++Sa),w._textureId=U._textureBindLocation=o.count,o.ids[U.uid]=o.count,o.textures[o.count++]=U,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(g,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,g,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,S,y-S,o,u,h,t,b),S=y,++Sa),this.elementStart=this.elementSize,this._batchIndexStart=S,this._batchIndexSize=y}_finishBatch(t,n,s,o,l,u,h,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=o,t.blendMode=l,t.topology=u,t.start=n,t.size=s,++Sa,this.batches[this.batchIndex++]=t,h.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const n=Math.max(t,this.attributeBuffer.size*2),s=new w0(n);M0(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const n=this.indexBuffer;let s=Math.max(t,n.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let l=0;l<n.length;l++)o[l]=n[l];else M0(n.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,n,s){t[n]=s+0,t[n+1]=s+1,t[n+2]=s+2,t[n+3]=s+0,t[n+4]=s+2,t[n+5]=s+3}packIndex(t,n,s,o){const l=t.indices,u=t.indexSize,h=t.indexOffset,d=t.attributeOffset;for(let p=0;p<u;p++)n[s++]=o+l[p+h]-d}destroy(t={}){if(this.batches!==null){for(let n=0;n<this.batchIndex;n++)B0(this.batches[n]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&(this.shader?.destroy(),this.shader=null);for(let n=0;n<this._elements.length;n++)this._elements[n]&&(this._elements[n]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};Ex.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let MC=Ex;var tn=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(tn||{});class Ha extends On{constructor(t){let{data:n,size:s}=t;const{usage:o,label:l,shrinkToFit:u}=t;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=fe("buffer"),this._resourceType="buffer",this._resourceId=fe("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,s??(s=n?.byteLength);const h=!!n;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&tn.STATIC)}set static(t){t?this.descriptor.usage|=tn.STATIC:this.descriptor.usage&=~tn.STATIC}setDataWithSize(t,n,s){if(this._updateID++,this._updateSize=n*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=fe("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Mx(r,t){if(!(r instanceof Ha)){let n=t?tn.INDEX:tn.VERTEX;r instanceof Array&&(t?(r=new Uint32Array(r),n=tn.INDEX|tn.COPY_DST):(r=new Float32Array(r),n=tn.VERTEX|tn.COPY_DST)),r=new Ha({data:r,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return r}function RC(r,t,n){const s=r.getAttribute(t);if(!s)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,d=-1/0;const p=o.BYTES_PER_ELEMENT,g=(s.offset||0)/p,y=(s.stride||8)/p;for(let S=g;S<o.length;S+=y){const b=o[S],C=o[S+1];b>h&&(h=b),C>d&&(d=C),b<l&&(l=b),C<u&&(u=C)}return n.minX=l,n.minY=u,n.maxX=h,n.maxY=d,n}function kC(r){return(r instanceof Ha||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=Mx(r.buffer,!1),r}class BC extends On{constructor(t={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=fe("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Dn,this._boundsDirty=!0;const{attributes:n,indexBuffer:s,topology:o}=t;if(this.buffers=[],this.attributes={},n)for(const l in n)this.addAttribute(l,n[l]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const n=this.attributes[t];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(t,n){const s=kC(n);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=Mx(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,RC(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(n=>n.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const DC=new Float32Array(1),OC=new Uint32Array(1);class zC extends BC{constructor(){const n=new Ha({data:DC,label:"attribute-batch-buffer",usage:tn.VERTEX|tn.COPY_DST,shrinkToFit:!1}),s=new Ha({data:OC,label:"index-batch-buffer",usage:tn.INDEX|tn.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:o,offset:0},aUV:{buffer:n,format:"float32x2",stride:o,offset:8},aColor:{buffer:n,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function D0(r,t,n){if(r)for(const s in r){const o=s.toLocaleLowerCase(),l=t[o];if(l){let u=r[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&l.push(`//----${n}----//`),l.push(u)}else se(`${s} placement hook does not exist in shader`)}}const UC=/\{\{(.*?)\}\}/g;function O0(r){const t={};return(r.match(UC)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{t[s]=[]}),t}function z0(r,t){let n;const s=/@in\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function U0(r,t,n=!1){const s=[];z0(t,s),r.forEach(h=>{h.header&&z0(h.header,s)});const o=s;n&&o.sort();const l=o.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let u=t.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function N0(r,t){let n;const s=/@out\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function NC(r){const n=/\b(\w+)\s*:/g.exec(r);return n?n[1]:""}function LC(r){const t=/@.*?\s+/g;return r.replace(t,"")}function PC(r,t){const n=[];N0(t,n),r.forEach(d=>{d.header&&N0(d.header,n)});let s=0;const o=n.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),l=n.sort().map(d=>`       var ${LC(d)};`).join(`
`),u=`return VSOutput(
            ${n.sort().map(d=>` ${NC(d)}`).join(`,
`)});`;let h=t.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function L0(r,t){let n=r;for(const s in t){const o=t[s];o.join(`
`).length?n=n.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):n=n.replace(`{{${s}}}`,"")}return n}const Gi=Object.create(null),Uh=new Map;let jC=0;function GC({template:r,bits:t}){const n=Rx(r,t);if(Gi[n])return Gi[n];const{vertex:s,fragment:o}=HC(r,t);return Gi[n]=kx(s,o,t),Gi[n]}function IC({template:r,bits:t}){const n=Rx(r,t);return Gi[n]||(Gi[n]=kx(r.vertex,r.fragment,t)),Gi[n]}function HC(r,t){const n=t.map(u=>u.vertex).filter(u=>!!u),s=t.map(u=>u.fragment).filter(u=>!!u);let o=U0(n,r.vertex,!0);o=PC(n,o);const l=U0(s,r.fragment,!0);return{vertex:o,fragment:l}}function Rx(r,t){return t.map(n=>(Uh.has(n)||Uh.set(n,jC++),Uh.get(n))).sort((n,s)=>n-s).join("-")+r.vertex+r.fragment}function kx(r,t,n){const s=O0(r),o=O0(t);return n.forEach(l=>{D0(l.vertex,s,l.name),D0(l.fragment,o,l.name)}),{vertex:L0(r,s),fragment:L0(t,o)}}const FC=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,YC=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,XC=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,VC=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,qC={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},$C={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function QC({bits:r,name:t}){const n=GC({template:{fragment:YC,vertex:FC},bits:[qC,...r]});return ql.from({name:t,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function WC({bits:r,name:t}){return new ax({name:t,...IC({template:{vertex:XC,fragment:VC},bits:[$C,...r]})})}const ZC={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},KC={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Nh={};function JC(r){const t=[];if(r===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let s=0;s<r;s++)t.push(`@group(1) @binding(${n++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${n++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function tA(r){const t=[];if(r===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let n=0;n<r;n++)n===r-1?t.push("  default:{"):t.push(`  case ${n}:{`),t.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function eA(r){return Nh[r]||(Nh[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${JC(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${tA(r)}
            `}}),Nh[r]}const Lh={};function nA(r){const t=[];for(let n=0;n<r;n++)n>0&&t.push("else"),n<r-1&&t.push(`if(vTextureId < ${n}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${n}], vUV);`),t.push("}");return t.join(`
`)}function iA(r){return Lh[r]||(Lh[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${nA(r)}
            `}}),Lh[r]}const sA={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},rA={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},P0={};function aA(r){let t=P0[r];if(t)return t;const n=new Int32Array(r);for(let s=0;s<r;s++)n[s]=s;return t=P0[r]=new ux({uTextures:{value:n,type:"i32",size:r}},{isStatic:!0}),t}class j0 extends Ef{constructor(t){const n=WC({name:"batch",bits:[KC,iA(t),rA]}),s=QC({name:"batch",bits:[ZC,eA(t),sA]});super({glProgram:n,gpuProgram:s,resources:{batchSamplers:aA(t)}}),this.maxTextures=t}}let Ca=null;const Bx=class Dx extends MC{constructor(t){super(t),this.geometry=new zC,this.name=Dx.extension.name,this.vertexSize=6,Ca??(Ca=new j0(t.maxTextures)),this.shader=Ca}packAttributes(t,n,s,o,l){const u=l<<16|t.roundPixels&65535,h=t.transform,d=h.a,p=h.b,g=h.c,y=h.d,S=h.tx,b=h.ty,{positions:C,uvs:E}=t,w=t.color,k=t.attributeOffset,U=k+t.attributeSize;for(let M=k;M<U;M++){const O=M*2,I=C[O],Q=C[O+1];n[o++]=d*I+g*Q+S,n[o++]=y*Q+p*I+b,n[o++]=E[O],n[o++]=E[O+1],s[o++]=w,s[o++]=u}}packQuadAttributes(t,n,s,o,l){const u=t.texture,h=t.transform,d=h.a,p=h.b,g=h.c,y=h.d,S=h.tx,b=h.ty,C=t.bounds,E=C.maxX,w=C.minX,k=C.maxY,U=C.minY,M=u.uvs,O=t.color,I=l<<16|t.roundPixels&65535;n[o+0]=d*w+g*U+S,n[o+1]=y*U+p*w+b,n[o+2]=M.x0,n[o+3]=M.y0,s[o+4]=O,s[o+5]=I,n[o+6]=d*E+g*U+S,n[o+7]=y*U+p*E+b,n[o+8]=M.x1,n[o+9]=M.y1,s[o+10]=O,s[o+11]=I,n[o+12]=d*E+g*k+S,n[o+13]=y*k+p*E+b,n[o+14]=M.x2,n[o+15]=M.y2,s[o+16]=O,s[o+17]=I,n[o+18]=d*w+g*k+S,n[o+19]=y*k+p*w+b,n[o+20]=M.x3,n[o+21]=M.y3,s[o+22]=O,s[o+23]=I}_updateMaxTextures(t){this.shader.maxTextures!==t&&(Ca=new j0(t),this.shader=Ca)}destroy(){this.shader=null,super.destroy()}};Bx.extension={type:[_t.Batcher],name:"default"};let oA=Bx;class lA{constructor(t){this.items=Object.create(null);const{renderer:n,type:s,onUnload:o,priority:l,name:u}=t;this._renderer=n,n.gc.addResourceHash(this,"items",s,l??0),this._onUnload=o,this.name=u}add(t){return this.items[t.uid]?!1:(this.items[t.uid]=t,t.once("unload",this.remove,this),t._gcLastUsed=this._renderer.gc.now,!0)}remove(t,...n){if(!this.items[t.uid])return;const s=t._gpuData[this._renderer.uid];s&&(this._onUnload?.(t,...n),s.destroy(),t._gpuData[this._renderer.uid]=null,this.items[t.uid]=null)}removeAll(...t){Object.values(this.items).forEach(n=>n&&this.remove(n,...t))}destroy(...t){this.removeAll(...t),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function cA(r,t,n,s,o,l,u,h=null){let d=0;n*=t,o*=l;const p=h.a,g=h.b,y=h.c,S=h.d,b=h.tx,C=h.ty;for(;d<u;){const E=r[n],w=r[n+1];s[o]=p*E+y*w+b,s[o+1]=g*E+S*w+C,o+=l,n+=t,d++}}function uA(r,t,n,s){let o=0;for(t*=n;o<s;)r[t]=0,r[t+1]=0,t+=n,o++}function Ox(r,t,n,s,o){const l=t.a,u=t.b,h=t.c,d=t.d,p=t.tx,g=t.ty;n||(n=0),s||(s=2),o||(o=r.length/s-n);let y=n*s;for(let S=0;S<o;S++){const b=r[y],C=r[y+1];r[y]=l*b+h*C+p,r[y+1]=u*b+d*C+g,y+=s}}const hA=new Nt;class zx{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,n=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?Py(n,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||hA}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Fa={extension:{type:_t.ShapeBuilder,name:"circle"},build(r,t){let n,s,o,l,u,h;if(r.type==="circle"){const O=r;if(u=h=O.radius,u<=0)return!1;n=O.x,s=O.y,o=l=0}else if(r.type==="ellipse"){const O=r;if(u=O.halfWidth,h=O.halfHeight,u<=0||h<=0)return!1;n=O.x,s=O.y,o=l=0}else{const O=r,I=O.width/2,Q=O.height/2;n=O.x+I,s=O.y+Q,u=h=Math.max(0,Math.min(O.radius,Math.min(I,Q))),o=I-u,l=Q-h}if(o<0||l<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+h)),p=d*8+(o?4:0)+(l?4:0);if(p===0)return!1;if(d===0)return t[0]=t[6]=n+o,t[1]=t[3]=s+l,t[2]=t[4]=n-o,t[5]=t[7]=s-l,!0;let g=0,y=d*4+(o?2:0)+2,S=y,b=p,C=o+u,E=l,w=n+C,k=n-C,U=s+E;if(t[g++]=w,t[g++]=U,t[--y]=U,t[--y]=k,l){const O=s-E;t[S++]=k,t[S++]=O,t[--b]=O,t[--b]=w}for(let O=1;O<d;O++){const I=Math.PI/2*(O/d),Q=o+Math.cos(I)*u,H=l+Math.sin(I)*h,st=n+Q,K=n-Q,J=s+H,it=s-H;t[g++]=st,t[g++]=J,t[--y]=J,t[--y]=K,t[S++]=K,t[S++]=it,t[--b]=it,t[--b]=st}C=o,E=l+h,w=n+C,k=n-C,U=s+E;const M=s-E;return t[g++]=w,t[g++]=U,t[--b]=M,t[--b]=w,o&&(t[g++]=k,t[g++]=U,t[--b]=M,t[--b]=k),!0},triangulate(r,t,n,s,o,l){if(r.length===0)return;let u=0,h=0;for(let g=0;g<r.length;g+=2)u+=r[g],h+=r[g+1];u/=r.length/2,h/=r.length/2;let d=s;t[d*n]=u,t[d*n+1]=h;const p=d++;for(let g=0;g<r.length;g+=2)t[d*n]=r[g],t[d*n+1]=r[g+1],g>0&&(o[l++]=d,o[l++]=p,o[l++]=d-1),d++;o[l++]=p+1,o[l++]=p,o[l++]=d-1}},fA={...Fa,extension:{...Fa.extension,name:"ellipse"}},dA={...Fa,extension:{...Fa.extension,name:"roundedRectangle"}},Ux=1e-4,G0=1e-4;function pA(r){const t=r.length;if(t<6)return 1;let n=0;for(let s=0,o=r[t-2],l=r[t-1];s<t;s+=2){const u=r[s],h=r[s+1];n+=(u-o)*(h+l),o=u,l=h}return n<0?-1:1}function I0(r,t,n,s,o,l,u,h){const d=r-n*o,p=t-s*o,g=r+n*l,y=t+s*l;let S,b;u?(S=s,b=-n):(S=-s,b=n);const C=d+S,E=p+b,w=g+S,k=y+b;return h.push(C,E),h.push(w,k),2}function cs(r,t,n,s,o,l,u,h){const d=n-r,p=s-t;let g=Math.atan2(d,p),y=Math.atan2(o-r,l-t);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let S=g;const b=y-g,C=Math.abs(b),E=Math.sqrt(d*d+p*p),w=(15*C*Math.sqrt(E)/Math.PI>>0)+1,k=b/w;if(S+=k,h){u.push(r,t),u.push(n,s);for(let U=1,M=S;U<w;U++,M+=k)u.push(r,t),u.push(r+Math.sin(M)*E,t+Math.cos(M)*E);u.push(r,t),u.push(o,l)}else{u.push(n,s),u.push(r,t);for(let U=1,M=S;U<w;U++,M+=k)u.push(r+Math.sin(M)*E,t+Math.cos(M)*E),u.push(r,t);u.push(o,l),u.push(r,t)}return w*2}function mA(r,t,n,s,o,l){const u=Ux;if(r.length===0)return;const h=t;let d=h.alignment;if(t.alignment!==.5){let lt=pA(r);d=(d-.5)*lt+.5}const p=new je(r[0],r[1]),g=new je(r[r.length-2],r[r.length-1]),y=s,S=Math.abs(p.x-g.x)<u&&Math.abs(p.y-g.y)<u;if(y){r=r.slice(),S&&(r.pop(),r.pop(),g.set(r[r.length-2],r[r.length-1]));const lt=(p.x+g.x)*.5,ct=(g.y+p.y)*.5;r.unshift(lt,ct),r.push(lt,ct)}const b=o,C=r.length/2;let E=r.length;const w=b.length/2,k=h.width/2,U=k*k,M=h.miterLimit*h.miterLimit;let O=r[0],I=r[1],Q=r[2],H=r[3],st=0,K=0,J=-(I-H),it=O-Q,rt=0,yt=0,ht=Math.sqrt(J*J+it*it);J/=ht,it/=ht,J*=k,it*=k;const St=d,B=(1-St)*2,L=St*2;y||(h.cap==="round"?E+=cs(O-J*(B-L)*.5,I-it*(B-L)*.5,O-J*B,I-it*B,O+J*L,I+it*L,b,!0)+2:h.cap==="square"&&(E+=I0(O,I,J,it,B,L,!0,b))),b.push(O-J*B,I-it*B),b.push(O+J*L,I+it*L);for(let lt=1;lt<C-1;++lt){O=r[(lt-1)*2],I=r[(lt-1)*2+1],Q=r[lt*2],H=r[lt*2+1],st=r[(lt+1)*2],K=r[(lt+1)*2+1],J=-(I-H),it=O-Q,ht=Math.sqrt(J*J+it*it),J/=ht,it/=ht,J*=k,it*=k,rt=-(H-K),yt=Q-st,ht=Math.sqrt(rt*rt+yt*yt),rt/=ht,yt/=ht,rt*=k,yt*=k;const ct=Q-O,D=I-H,V=Q-st,ot=K-H,ut=ct*V+D*ot,gt=D*V-ot*ct,Ct=gt<0;if(Math.abs(gt)<.001*Math.abs(ut)){b.push(Q-J*B,H-it*B),b.push(Q+J*L,H+it*L),ut>=0&&(h.join==="round"?E+=cs(Q,H,Q-J*B,H-it*B,Q-rt*B,H-yt*B,b,!1)+4:E+=2,b.push(Q-rt*L,H-yt*L),b.push(Q+rt*B,H+yt*B));continue}const Ot=(-J+O)*(-it+H)-(-J+Q)*(-it+I),te=(-rt+st)*(-yt+H)-(-rt+Q)*(-yt+K),Ft=(ct*te-V*Ot)/gt,en=(ot*Ot-D*te)/gt,Nn=(Ft-Q)*(Ft-Q)+(en-H)*(en-H),Xe=Q+(Ft-Q)*B,we=H+(en-H)*B,de=Q-(Ft-Q)*L,nn=H-(en-H)*L,Yi=Math.min(ct*ct+D*D,V*V+ot*ot),pi=Ct?B:L,vs=Yi+pi*pi*U;Nn<=vs?h.join==="bevel"||Nn/U>M?(Ct?(b.push(Xe,we),b.push(Q+J*L,H+it*L),b.push(Xe,we),b.push(Q+rt*L,H+yt*L)):(b.push(Q-J*B,H-it*B),b.push(de,nn),b.push(Q-rt*B,H-yt*B),b.push(de,nn)),E+=2):h.join==="round"?Ct?(b.push(Xe,we),b.push(Q+J*L,H+it*L),E+=cs(Q,H,Q+J*L,H+it*L,Q+rt*L,H+yt*L,b,!0)+4,b.push(Xe,we),b.push(Q+rt*L,H+yt*L)):(b.push(Q-J*B,H-it*B),b.push(de,nn),E+=cs(Q,H,Q-J*B,H-it*B,Q-rt*B,H-yt*B,b,!1)+4,b.push(Q-rt*B,H-yt*B),b.push(de,nn)):(b.push(Xe,we),b.push(de,nn)):(b.push(Q-J*B,H-it*B),b.push(Q+J*L,H+it*L),h.join==="round"?Ct?E+=cs(Q,H,Q+J*L,H+it*L,Q+rt*L,H+yt*L,b,!0)+2:E+=cs(Q,H,Q-J*B,H-it*B,Q-rt*B,H-yt*B,b,!1)+2:h.join==="miter"&&Nn/U<=M&&(Ct?(b.push(de,nn),b.push(de,nn)):(b.push(Xe,we),b.push(Xe,we)),E+=2),b.push(Q-rt*B,H-yt*B),b.push(Q+rt*L,H+yt*L),E+=2)}O=r[(C-2)*2],I=r[(C-2)*2+1],Q=r[(C-1)*2],H=r[(C-1)*2+1],J=-(I-H),it=O-Q,ht=Math.sqrt(J*J+it*it),J/=ht,it/=ht,J*=k,it*=k,b.push(Q-J*B,H-it*B),b.push(Q+J*L,H+it*L),y||(h.cap==="round"?E+=cs(Q-J*(B-L)*.5,H-it*(B-L)*.5,Q-J*B,H-it*B,Q+J*L,H+it*L,b,!1)+2:h.cap==="square"&&(E+=I0(Q,H,J,it,B,L,!1,b)));const at=G0*G0;for(let lt=w;lt<E+w-2;++lt)O=b[lt*2],I=b[lt*2+1],Q=b[(lt+1)*2],H=b[(lt+1)*2+1],st=b[(lt+2)*2],K=b[(lt+2)*2+1],!(Math.abs(O*(H-K)+Q*(K-I)+st*(I-H))<at)&&l.push(lt,lt+1,lt+2)}function gA(r,t,n,s){const o=Ux;if(r.length===0)return;const l=r[0],u=r[1],h=r[r.length-2],d=r[r.length-1],p=t||Math.abs(l-h)<o&&Math.abs(u-d)<o,g=n,y=r.length/2,S=g.length/2;for(let b=0;b<y;b++)g.push(r[b*2]),g.push(r[b*2+1]);for(let b=0;b<y-1;b++)s.push(S+b,S+b+1);p&&s.push(S+y-1,S)}function Nx(r,t,n,s,o,l,u){const h=eC(r,t,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+o,l[u++]=h[p+1]+o,l[u++]=h[p+2]+o;let d=o*s;for(let p=0;p<r.length;p+=2)n[d]=r[p],n[d+1]=r[p+1],d+=s}const yA=[],xA={extension:{type:_t.ShapeBuilder,name:"polygon"},build(r,t){for(let n=0;n<r.points.length;n++)t[n]=r.points[n];return!0},triangulate(r,t,n,s,o,l){Nx(r,yA,t,n,s,o,l)}},_A={extension:{type:_t.ShapeBuilder,name:"rectangle"},build(r,t){const n=r,s=n.x,o=n.y,l=n.width,u=n.height;return l>0&&u>0?(t[0]=s,t[1]=o,t[2]=s+l,t[3]=o,t[4]=s+l,t[5]=o+u,t[6]=s,t[7]=o+u,!0):!1},triangulate(r,t,n,s,o,l){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[6],t[s+u+1]=r[7],u+=n,t[s+u]=r[4],t[s+u+1]=r[5],u+=n;const h=s/n;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},bA={extension:{type:_t.ShapeBuilder,name:"triangle"},build(r,t){return t[0]=r.x,t[1]=r.y,t[2]=r.x2,t[3]=r.y2,t[4]=r.x3,t[5]=r.y3,!0},triangulate(r,t,n,s,o,l){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[4],t[s+u+1]=r[5];const h=s/n;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},vA=new Nt,SA=new oe;function CA(r,t,n,s){const o=t.matrix?r.copyFrom(t.matrix).invert():r.identity();if(t.textureSpace==="local"){const u=n.getBounds(SA);t.width&&u.pad(t.width);const{x:h,y:d}=u,p=1/u.width,g=1/u.height,y=-h*p,S=-d*g,b=o.a,C=o.b,E=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=g,o.d*=g,o.tx=y*b+S*E+o.tx,o.ty=y*C+S*w+o.ty}else o.translate(t.texture.frame.x,t.texture.frame.y),o.scale(1/t.texture.source.width,1/t.texture.source.height);const l=t.texture.source.style;return!(t.fill instanceof di)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(vA.copyFrom(s).invert()),o}const Ql={};Ue.handleByMap(_t.ShapeBuilder,Ql);Ue.add(_A,xA,bA,Fa,fA,dA);const AA=new oe,TA=new Nt;function EA(r,t){const{geometryData:n,batches:s}=t;s.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let o=0;o<r.instructions.length;o++){const l=r.instructions[o];if(l.action==="texture")wA(l.data,s,n);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,d=l.data.style,p=l.data.hole;u&&p&&H0(p.shapePath,d,!0,s,n),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),H0(h,d,u,s,n)}}}function wA(r,t,n){const s=[],o=Ql.rectangle,l=AA;l.x=r.dx,l.y=r.dy,l.width=r.dw,l.height=r.dh;const u=r.transform;if(!o.build(l,s))return;const{vertices:h,uvs:d,indices:p}=n,g=p.length,y=h.length/2;u&&Ox(s,u),o.triangulate(s,h,2,y,p,g);const S=r.image,b=S.uvs;d.push(b.x0,b.y0,b.x1,b.y1,b.x3,b.y3,b.x2,b.y2);const C=En.get(zx);C.indexOffset=g,C.indexSize=p.length-g,C.attributeOffset=y,C.attributeSize=h.length/2-y,C.baseColor=r.style,C.alpha=r.alpha,C.texture=S,C.geometryData=n,t.push(C)}function H0(r,t,n,s,o){const{vertices:l,uvs:u,indices:h}=o;r.shapePrimitives.forEach(({shape:d,transform:p,holes:g})=>{const y=[],S=Ql[d.type];if(!S.build(d,y))return;const b=h.length,C=l.length/2;let E="triangle-list";if(p&&Ox(y,p),n){const M=d.closePath??!0,O=t;O.pixelLine?(gA(y,M,l,h),E="line-list"):mA(y,O,!1,M,l,h)}else if(g){const M=[],O=y.slice();MA(g).forEach(Q=>{M.push(O.length/2),O.push(...Q)}),Nx(O,M,l,2,C,h,b)}else S.triangulate(y,l,2,C,h,b);const w=u.length/2,k=t.texture;if(k!==Pt.WHITE){const M=CA(TA,t,d,p);cA(l,2,C,u,w,2,l.length/2-C,M)}else uA(u,w,2,l.length/2-C);const U=En.get(zx);U.indexOffset=b,U.indexSize=h.length-b,U.attributeOffset=C,U.attributeSize=l.length/2-C,U.baseColor=t.color,U.alpha=t.alpha,U.texture=k,U.geometryData=o,U.topology=E,s.push(U)})}function MA(r){const t=[];for(let n=0;n<r.length;n++){const s=r[n].shape,o=[];Ql[s.type].build(s,o)&&t.push(o)}return t}class RA{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(t=>{En.return(t)}),this.graphicsData&&En.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class kA{constructor(){this.instructions=new Hy}init(t){const n=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(n):this.batcher=new oA({maxTextures:n}),this.instructions.reset()}get geometry(){return kt(Ev,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Bf=class uf{constructor(t){this._renderer=t,this._managedContexts=new lA({renderer:t,type:"resource",name:"graphicsContext"})}init(t){uf.defaultOptions.bezierSmoothness=t?.bezierSmoothness??uf.defaultOptions.bezierSmoothness}getContextRenderData(t){return t._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(t)}updateGpuContext(t){const n=!!t._gpuData[this._renderer.uid],s=t._gpuData[this._renderer.uid]||this._initContext(t);if(t.dirty||!n){n&&s.reset(),EA(t,s);const o=t.batchMode;t.customShader||o==="no-batch"?s.isBatchable=!1:o==="auto"?s.isBatchable=s.geometryData.vertices.length<400:s.isBatchable=!0,t.dirty=!1}return s}getGpuContext(t){return t._gpuData[this._renderer.uid]||this._initContext(t)}_initContextRenderData(t){const n=En.get(kA,{maxTextures:this._renderer.limits.maxBatchableTextures}),s=t._gpuData[this._renderer.uid],{batches:o,geometryData:l}=s;s.graphicsData=n;const u=l.vertices.length,h=l.indices.length;for(let y=0;y<o.length;y++)o[y].applyTransform=!1;const d=n.batcher;d.ensureAttributeBuffer(u),d.ensureIndexBuffer(h),d.begin();for(let y=0;y<o.length;y++){const S=o[y];d.add(S)}d.finish(n.instructions);const p=d.geometry;p.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),p.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);const g=d.batches;for(let y=0;y<g.length;y++){const S=g[y];S.bindGroup=xC(S.textures.textures,S.textures.count,this._renderer.limits.maxBatchableTextures)}return n}_initContext(t){const n=new RA;return n.context=t,t._gpuData[this._renderer.uid]=n,this._managedContexts.add(t),n}destroy(){this._managedContexts.destroy(),this._renderer=null}};Bf.extension={type:[_t.WebGLSystem,_t.WebGPUSystem,_t.CanvasSystem],name:"graphicsContext"};Bf.defaultOptions={bezierSmoothness:.5};let Lx=Bf;const BA=8,wl=11920929e-14,DA=1;function Px(r,t,n,s,o,l,u,h,d,p){const y=Math.min(.99,Math.max(0,p??Lx.defaultOptions.bezierSmoothness));let S=(DA-y)/1;return S*=S,OA(t,n,s,o,l,u,h,d,r,S),r}function OA(r,t,n,s,o,l,u,h,d,p){hf(r,t,n,s,o,l,u,h,d,p,0),d.push(u,h)}function hf(r,t,n,s,o,l,u,h,d,p,g){if(g>BA)return;const y=(r+n)/2,S=(t+s)/2,b=(n+o)/2,C=(s+l)/2,E=(o+u)/2,w=(l+h)/2,k=(y+b)/2,U=(S+C)/2,M=(b+E)/2,O=(C+w)/2,I=(k+M)/2,Q=(U+O)/2;if(g>0){let H=u-r,st=h-t;const K=Math.abs((n-u)*st-(s-h)*H),J=Math.abs((o-u)*st-(l-h)*H);if(K>wl&&J>wl){if((K+J)*(K+J)<=p*(H*H+st*st)){d.push(I,Q);return}}else if(K>wl){if(K*K<=p*(H*H+st*st)){d.push(I,Q);return}}else if(J>wl){if(J*J<=p*(H*H+st*st)){d.push(I,Q);return}}else if(H=I-(r+u)/2,st=Q-(t+h)/2,H*H+st*st<=p){d.push(I,Q);return}}hf(r,t,y,S,k,U,I,Q,d,p,g+1),hf(I,Q,M,O,E,w,u,h,d,p,g+1)}const zA=8,UA=11920929e-14,NA=1;function LA(r,t,n,s,o,l,u,h){const p=Math.min(.99,Math.max(0,h??Lx.defaultOptions.bezierSmoothness));let g=(NA-p)/1;return g*=g,PA(t,n,s,o,l,u,r,g),r}function PA(r,t,n,s,o,l,u,h){ff(u,r,t,n,s,o,l,h,0),u.push(o,l)}function ff(r,t,n,s,o,l,u,h,d){if(d>zA)return;const p=(t+s)/2,g=(n+o)/2,y=(s+l)/2,S=(o+u)/2,b=(p+y)/2,C=(g+S)/2;let E=l-t,w=u-n;const k=Math.abs((s-l)*w-(o-u)*E);if(k>UA){if(k*k<=h*(E*E+w*w)){r.push(b,C);return}}else if(E=b-(t+l)/2,w=C-(n+u)/2,E*E+w*w<=h){r.push(b,C);return}ff(r,t,n,p,g,b,C,h,d+1),ff(r,b,C,y,S,l,u,h,d+1)}function jx(r,t,n,s,o,l,u,h){let d=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),h=Math.max(h,3);let p=d/h,g=o;p*=u?-1:1;for(let y=0;y<h+1;y++){const S=Math.cos(g),b=Math.sin(g),C=t+S*s,E=n+b*s;r.push(C,E),g+=p}}function jA(r,t,n,s,o,l){const u=r[r.length-2],d=r[r.length-1]-n,p=u-t,g=o-n,y=s-t,S=Math.abs(d*y-p*g);if(S<1e-8||l===0){(r[r.length-2]!==t||r[r.length-1]!==n)&&r.push(t,n);return}const b=d*d+p*p,C=g*g+y*y,E=d*g+p*y,w=l*Math.sqrt(b)/S,k=l*Math.sqrt(C)/S,U=w*E/b,M=k*E/C,O=w*y+k*p,I=w*g+k*d,Q=p*(k+U),H=d*(k+U),st=y*(w+M),K=g*(w+M),J=Math.atan2(H-I,Q-O),it=Math.atan2(K-I,st-O);jx(r,O+t,I+n,l,J,it,p*g>y*d)}const Pa=Math.PI*2,Ph={centerX:0,centerY:0,ang1:0,ang2:0},jh=({x:r,y:t},n,s,o,l,u,h,d)=>{r*=n,t*=s;const p=o*r-l*t,g=l*r+o*t;return d.x=p+u,d.y=g+h,d};function GA(r,t){const n=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:n,o=Math.cos(r),l=Math.sin(r),u=Math.cos(r+t),h=Math.sin(r+t);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const F0=(r,t,n,s)=>{const o=r*s-t*n<0?-1:1;let l=r*n+t*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},IA=(r,t,n,s,o,l,u,h,d,p,g,y,S)=>{const b=Math.pow(o,2),C=Math.pow(l,2),E=Math.pow(g,2),w=Math.pow(y,2);let k=b*C-b*w-C*E;k<0&&(k=0),k/=b*w+C*E,k=Math.sqrt(k)*(u===h?-1:1);const U=k*o/l*y,M=k*-l/o*g,O=p*U-d*M+(r+n)/2,I=d*U+p*M+(t+s)/2,Q=(g-U)/o,H=(y-M)/l,st=(-g-U)/o,K=(-y-M)/l,J=F0(1,0,Q,H);let it=F0(Q,H,st,K);h===0&&it>0&&(it-=Pa),h===1&&it<0&&(it+=Pa),S.centerX=O,S.centerY=I,S.ang1=J,S.ang2=it};function HA(r,t,n,s,o,l,u,h=0,d=0,p=0){if(l===0||u===0)return;const g=Math.sin(h*Pa/360),y=Math.cos(h*Pa/360),S=y*(t-s)/2+g*(n-o)/2,b=-g*(t-s)/2+y*(n-o)/2;if(S===0&&b===0)return;l=Math.abs(l),u=Math.abs(u);const C=Math.pow(S,2)/Math.pow(l,2)+Math.pow(b,2)/Math.pow(u,2);C>1&&(l*=Math.sqrt(C),u*=Math.sqrt(C)),IA(t,n,s,o,l,u,d,p,g,y,S,b,Ph);let{ang1:E,ang2:w}=Ph;const{centerX:k,centerY:U}=Ph;let M=Math.abs(w)/(Pa/4);Math.abs(1-M)<1e-7&&(M=1);const O=Math.max(Math.ceil(M),1);w/=O;let I=r[r.length-2],Q=r[r.length-1];const H={x:0,y:0};for(let st=0;st<O;st++){const K=GA(E,w),{x:J,y:it}=jh(K[0],l,u,y,g,k,U,H),{x:rt,y:yt}=jh(K[1],l,u,y,g,k,U,H),{x:ht,y:St}=jh(K[2],l,u,y,g,k,U,H);Px(r,I,Q,J,it,rt,yt,ht,St),I=ht,Q=St,E+=w}}function FA(r,t,n){const s=(u,h)=>{const d=h.x-u.x,p=h.y-u.y,g=Math.sqrt(d*d+p*p),y=d/g,S=p/g;return{len:g,nx:y,ny:S}},o=(u,h)=>{u===0?r.moveTo(h.x,h.y):r.lineTo(h.x,h.y)};let l=t[t.length-1];for(let u=0;u<t.length;u++){const h=t[u%t.length],d=h.radius??n;if(d<=0){o(u,h),l=h;continue}const p=t[(u+1)%t.length],g=s(h,l),y=s(h,p);if(g.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let S=Math.asin(g.nx*y.ny-g.ny*y.nx),b=1,C=!1;g.nx*y.nx-g.ny*-y.ny<0?S<0?S=Math.PI+S:(S=Math.PI-S,b=-1,C=!0):S>0&&(b=-1,C=!0);const E=S/2;let w,k=Math.abs(Math.cos(E)*d/Math.sin(E));k>Math.min(g.len/2,y.len/2)?(k=Math.min(g.len/2,y.len/2),w=Math.abs(k*Math.sin(E)/Math.cos(E))):w=d;const U=h.x+y.nx*k+-y.ny*w*b,M=h.y+y.ny*k+y.nx*w*b,O=Math.atan2(g.ny,g.nx)+Math.PI/2*b,I=Math.atan2(y.ny,y.nx)-Math.PI/2*b;u===0&&r.moveTo(U+Math.cos(O)*w,M+Math.sin(O)*w),r.arc(U,M,w,O,I,C),l=h}}function YA(r,t,n,s){const o=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),l=(h,d,p)=>({x:h.x+(d.x-h.x)*p,y:h.y+(d.y-h.y)*p}),u=t.length;for(let h=0;h<u;h++){const d=t[(h+1)%u],p=d.radius??n;if(p<=0){h===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const g=t[h],y=t[(h+2)%u],S=o(g,d);let b;if(S<1e-4)b=d;else{const w=Math.min(S/2,p);b=l(d,g,w/S)}const C=o(y,d);let E;if(C<1e-4)E=d;else{const w=Math.min(C/2,p);E=l(d,y,w/C)}h===0?r.moveTo(b.x,b.y):r.lineTo(b.x,b.y),r.quadraticCurveTo(d.x,d.y,E.x,E.y,s)}}const XA=new oe;class VA{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Dn,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,n){return this.startPoly(t,n),this}lineTo(t,n){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==t||l!==n)&&s.push(t,n),this}arc(t,n,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return jx(h,t,n,s,o,l,u),this}arcTo(t,n,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return jA(u,t,n,s,o,l),this}arcToSvg(t,n,s,o,l,u,h){const d=this._currentPoly.points;return HA(d,this._currentPoly.lastX,this._currentPoly.lastY,u,h,t,n,s,o,l),this}bezierCurveTo(t,n,s,o,l,u,h){this._ensurePoly();const d=this._currentPoly;return Px(this._currentPoly.points,d.lastX,d.lastY,t,n,s,o,l,u,h),this}quadraticCurveTo(t,n,s,o,l){this._ensurePoly();const u=this._currentPoly;return LA(this._currentPoly.points,u.lastX,u.lastY,t,n,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(t,n){this.endPoly(),n&&!n.isIdentity()&&(t=t.clone(!0),t.transform(n));const s=this.shapePrimitives,o=s.length;for(let l=0;l<t.instructions.length;l++){const u=t.instructions[l];this[u.action](...u.data)}if(t.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const d=h.shape,p=l?.shape;p&&p.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(t=!1){this.endPoly(t)}rect(t,n,s,o,l){return this.drawShape(new oe(t,n,s,o),l),this}circle(t,n,s,o){return this.drawShape(new Mf(t,n,s),o),this}poly(t,n,s){const o=new Na(t);return o.closePath=n,this.drawShape(o,s),this}regularPoly(t,n,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,d=Math.PI*2/o,p=[];for(let g=0;g<o;g++){const y=h-g*d;p.push(t+s*Math.cos(y),n+s*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(t,n,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(t,n,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,d);const p=-1*Math.PI/2+u,g=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let S=0;S<o;S++){const b=S*g+p,C=t+s*Math.cos(b),E=n+s*Math.sin(b),w=b+Math.PI+y,k=b-Math.PI-y,U=C+l*Math.cos(w),M=E+l*Math.sin(w),O=C+l*Math.cos(k),I=E+l*Math.sin(k);S===0?this.moveTo(U,M):this.lineTo(U,M),this.quadraticCurveTo(C,E,O,I,h)}return this.closePath()}roundShape(t,n,s=!1,o){return t.length<3?this:(s?YA(this,t,n,o):FA(this,t,n),this.closePath())}filletRect(t,n,s,o,l){if(l===0)return this.rect(t,n,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),d=t+s,p=n+o,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(t,n+y).arcTo(t+g,n+g,t+y,n,y).lineTo(d-y,n).arcTo(d-g,n+g,d,n+y,y).lineTo(d,p-y).arcTo(d-g,p-g,t+s-y,p,y).lineTo(t+y,p).arcTo(t+g,p-g,t,p-y,y).closePath()}chamferRect(t,n,s,o,l,u){if(l<=0)return this.rect(t,n,s,o);const h=Math.min(l,Math.min(s,o)/2),d=t+s,p=n+o,g=[t+h,n,d-h,n,d,n+h,d,p-h,d-h,p,t+h,p,t,p-h,t,n+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,u)}ellipse(t,n,s,o,l){return this.drawShape(new Rf(t,n,s,o),l),this}roundRect(t,n,s,o,l,u){return this.drawShape(new kf(t,n,s,o,l),u),this}drawShape(t,n){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:n}),this}startPoly(t,n){let s=this._currentPoly;return s&&this.endPoly(),s=new Na,s.points.push(t,n),this._currentPoly=s,this}endPoly(t=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=t,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Na,t)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let s=n.shape.x,o=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const l=n.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const n=this.shapePrimitives;for(let s=0;s<n.length;s++){const o=n[s],l=o.shape.getBounds(XA);o.transform?t.addRect(l,o.transform):t.addRect(l)}return t}}class fi{constructor(t,n=!1){this.instructions=[],this.uid=fe("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof t=="string"?pC(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new VA(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,n){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,n]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,n,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(je.shared);let d=0,p=0;if(!u||u.action!=="bezierCurveTo")d=h.x,p=h.y;else{d=u.data[2],p=u.data[3];const g=h.x,y=h.y;d=g+(g-d),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[d,p,t,n,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,n,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(je.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const d=l.x,p=l.y;u=d+(d-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,t,n,s]}),this._dirty=!0,this}rect(t,n,s,o,l){return this.instructions.push({action:"rect",data:[t,n,s,o,l]}),this._dirty=!0,this}circle(t,n,s,o){return this.instructions.push({action:"circle",data:[t,n,s,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,n,s,o,l,u,h){l||(l=o/2);const d=-1*Math.PI/2+u,p=s*2,g=Math.PI*2/p,y=[];for(let S=0;S<p;S++){const b=S%2?l:o,C=S*g+d;y.push(t+b*Math.cos(C),n+b*Math.sin(C))}return this.poly(y,!0,h),this}clone(t=!1){const n=new fi;if(n.checkForHoles=this.checkForHoles,!t)n.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];n.instructions.push({action:o.action,data:o.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const n=t.a,s=t.b,o=t.c,l=t.d,u=t.tx,h=t.ty;let d=0,p=0,g=0,y=0,S=0,b=0,C=0,E=0;for(let w=0;w<this.instructions.length;w++){const k=this.instructions[w],U=k.data;switch(k.action){case"moveTo":case"lineTo":d=U[0],p=U[1],U[0]=n*d+o*p+u,U[1]=s*d+l*p+h;break;case"bezierCurveTo":g=U[0],y=U[1],S=U[2],b=U[3],d=U[4],p=U[5],U[0]=n*g+o*y+u,U[1]=s*g+l*y+h,U[2]=n*S+o*b+u,U[3]=s*S+l*b+h,U[4]=n*d+o*p+u,U[5]=s*d+l*p+h;break;case"quadraticCurveTo":g=U[0],y=U[1],d=U[2],p=U[3],U[0]=n*g+o*y+u,U[1]=s*g+l*y+h,U[2]=n*d+o*p+u,U[3]=s*d+l*p+h;break;case"arcToSvg":d=U[5],p=U[6],C=U[0],E=U[1],U[0]=n*C+o*E,U[1]=s*C+l*E,U[5]=n*d+o*p+u,U[6]=s*d+l*p+h;break;case"circle":U[4]=Aa(U[3],t);break;case"rect":U[4]=Aa(U[4],t);break;case"ellipse":U[8]=Aa(U[8],t);break;case"roundRect":U[5]=Aa(U[5],t);break;case"addPath":U[0].transform(t);break;case"poly":U[2]=Aa(U[2],t);break;default:se("unknown transform action",k.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let n=this.instructions.length-1,s=this.instructions[n];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(n--,n<0)return t.x=0,t.y=0,t;s=this.instructions[n]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function Aa(r,t){return r?r.prepend(t):t.clone()}function he(r,t,n){const s=r.getAttribute(t);return s?Number(s):n}function qA(r,t){const n=r.querySelectorAll("defs");for(let s=0;s<n.length;s++){const o=n[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":t.defs[u.id]=$A(u);break;case"radialgradient":t.defs[u.id]=QA();break}}}}function $A(r){const t=he(r,"x1",0),n=he(r,"y1",0),s=he(r,"x2",1),o=he(r,"y2",0),l=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new di(t,n,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<r.children.length;h++){const d=r.children[h],p=he(d,"offset",0),g=ve.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(p,g)}return u}function QA(r){return se("[SVG Parser] Radial gradients are not yet supported"),new di(0,0,1,0)}function Y0(r){const t=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const X0={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Gx(r,t){const n=r.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in X0){const h=r.getAttribute(u);h&&V0(t,l,u,h.trim())}if(n){const u=n.split(";");for(let h=0;h<u.length;h++){const d=u[h].trim(),[p,g]=d.split(":");X0[p]&&V0(t,l,p,g.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function V0(r,t,n,s){switch(n){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=Y0(s);t.strokeStyle.fill=r.defs[o]}else t.strokeStyle.color=ve.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=Y0(s);t.fillStyle.fill=r.defs[o]}else t.fillStyle.color=ve.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function WA(r){if(r.length<=2)return!0;const t=r.map(h=>h.area).sort((h,d)=>d-h),[n,s]=t,o=t[t.length-1],l=n/s,u=s/o;return!(l>3&&u<2)}function ZA(r){return r.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function KA(r){const t=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const n=t.map(Number),s=[],o=[];for(let g=0;g<n.length;g+=2)g+1<n.length&&(s.push(n[g]),o.push(n[g+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),d=Math.max(...o);return(u-l)*(d-h)}function q0(r,t){const n=new fi(r,!1);for(const s of n.instructions)t.instructions.push(s)}function JA(r,t){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const n={context:t,defs:{},path:new fi};qA(r,n);const s=r.children,{fillStyle:o,strokeStyle:l}=Gx(r,n);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&Ix(h,n,o,l)}return t}function Ix(r,t,n,s){const o=r.children,{fillStyle:l,strokeStyle:u}=Gx(r,t);l&&n?n={...n,...l}:l&&(n=l),u&&s?s={...s,...u}:u&&(s=u);const h=!n&&!s;h&&(n={color:0});let d,p,g,y,S,b,C,E,w,k,U,M,O,I,Q,H,st;switch(r.nodeName.toLowerCase()){case"path":{I=r.getAttribute("d");const K=r.getAttribute("fill-rule"),J=ZA(I),it=K==="evenodd",rt=J.length>1;if(it&&rt){const ht=J.map(B=>({path:B,area:KA(B)}));if(ht.sort((B,L)=>L.area-B.area),J.length>3||!WA(ht))for(let B=0;B<ht.length;B++){const L=ht[B],at=B===0;t.context.beginPath();const lt=new fi(void 0,!0);q0(L.path,lt),t.context.path(lt),at?(n&&t.context.fill(n),s&&t.context.stroke(s)):t.context.cut()}else for(let B=0;B<ht.length;B++){const L=ht[B],at=B%2===1;t.context.beginPath();const lt=new fi(void 0,!0);q0(L.path,lt),t.context.path(lt),at?t.context.cut():(n&&t.context.fill(n),s&&t.context.stroke(s))}}else{const ht=K?K==="evenodd":!0;Q=new fi(I,ht),t.context.path(Q),n&&t.context.fill(n),s&&t.context.stroke(s)}break}case"circle":C=he(r,"cx",0),E=he(r,"cy",0),w=he(r,"r",0),t.context.ellipse(C,E,w,w),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"rect":d=he(r,"x",0),p=he(r,"y",0),H=he(r,"width",0),st=he(r,"height",0),k=he(r,"rx",0),U=he(r,"ry",0),k||U?t.context.roundRect(d,p,H,st,k||U):t.context.rect(d,p,H,st),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"ellipse":C=he(r,"cx",0),E=he(r,"cy",0),k=he(r,"rx",0),U=he(r,"ry",0),t.context.beginPath(),t.context.ellipse(C,E,k,U),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"line":g=he(r,"x1",0),y=he(r,"y1",0),S=he(r,"x2",0),b=he(r,"y2",0),t.context.beginPath(),t.context.moveTo(g,y),t.context.lineTo(S,b),s&&t.context.stroke(s);break;case"polygon":O=r.getAttribute("points"),M=O.match(/-?\d+/g).map(K=>parseInt(K,10)),t.context.poly(M,!0),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"polyline":O=r.getAttribute("points"),M=O.match(/-?\d+/g).map(K=>parseInt(K,10)),t.context.poly(M,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{se(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}h&&(n=null);for(let K=0;K<o.length;K++)Ix(o[K],t,n,s)}function tT(r){return ve.isColorLike(r)}function $0(r){return r instanceof $l}function Q0(r){return r instanceof di}function eT(r){return r instanceof Pt}function nT(r,t,n){const s=ve.shared.setValue(t??0);return r.color=s.toNumber(),r.alpha=s.alpha===1?n.alpha:s.alpha,r.texture=Pt.WHITE,{...n,...r}}function iT(r,t,n){return r.texture=t,{...n,...r}}function W0(r,t,n){return r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...n,...r}}function Z0(r,t,n){return t.buildGradient(),r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,r.textureSpace=t.textureSpace,{...n,...r}}function sT(r,t){const n={...t,...r},s=ve.shared.setValue(n.color);return n.alpha*=s.alpha,n.color=s.toNumber(),n}function ms(r,t){if(r==null)return null;const n={},s=r;return tT(r)?nT(n,r,t):eT(r)?iT(n,r,t):$0(r)?W0(n,r,t):Q0(r)?Z0(n,r,t):s.fill&&$0(s.fill)?W0(s,s.fill,t):s.fill&&Q0(s.fill)?Z0(s,s.fill,t):sT(s,t)}function Hl(r,t){const{width:n,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...d}=t,p=ms(r,d);return p?{width:n,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...p}:null}const rT=new je,K0=new Nt,Df=class Fn extends On{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=fe("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new fi,this._transform=new Nt,this._fillStyle={...Fn.defaultFillStyle},this._strokeStyle={...Fn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Dn,this._boundsDirty=!0}clone(){const t=new Fn;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=ms(t,Fn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Hl(t,Fn.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=ms(t,Fn.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=ms(t,Fn.defaultStrokeStyle),this}texture(t,n,s,o,l,u){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:o||0,dw:l||t.frame.width,dh:u||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?ve.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new fi,this}fill(t,n){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o?.action==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(t!=null&&(n!==void 0&&typeof t=="number"&&(kt(qt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:n}),this._fillStyle=ms(t,Fn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:n}=this._activePath.getLastPoint(je.shared);this._activePath.clear(),this._activePath.moveTo(t,n)}stroke(t){let n;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?n=s.data.path:n=this._activePath.clone(),n?(t!=null&&(this._strokeStyle=Hl(t,Fn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const n=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(s);else{n.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,n,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*t+h.c*n+h.tx,h.b*t+h.d*n+h.ty,s,o,l,u),this}arcTo(t,n,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(t,n,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,n,s,o,l,d.a*u+d.c*h+d.tx,d.b*u+d.d*h+d.ty),this}bezierCurveTo(t,n,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*n+d.tx,d.b*t+d.d*n+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,n,s,o){return this._tick++,this._activePath.ellipse(t,n,s,o,this._transform.clone()),this}circle(t,n,s){return this._tick++,this._activePath.circle(t,n,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,n){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*n+s.tx,s.b*t+s.d*n+s.ty),this}moveTo(t,n){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*t+s.c*n+s.tx,u=s.b*t+s.d*n+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(t,n,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(t,n,s,o){return this._tick++,this._activePath.rect(t,n,s,o,this._transform.clone()),this}roundRect(t,n,s,o,l){return this._tick++,this._activePath.roundRect(t,n,s,o,l,this._transform.clone()),this}poly(t,n){return this._tick++,this._activePath.poly(t,n,this._transform.clone()),this}regularPoly(t,n,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(t,n,s,o,l,u),this}roundPoly(t,n,s,o,l,u){return this._tick++,this._activePath.roundPoly(t,n,s,o,l,u),this}roundShape(t,n,s,o){return this._tick++,this._activePath.roundShape(t,n,s,o),this}filletRect(t,n,s,o,l){return this._tick++,this._activePath.filletRect(t,n,s,o,l),this}chamferRect(t,n,s,o,l,u){return this._tick++,this._activePath.chamferRect(t,n,s,o,l,u),this}star(t,n,s,o,l=0,u=0){return this._tick++,this._activePath.star(t,n,s,o,l,u,this._transform.clone()),this}svg(t){return this._tick++,JA(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,n=t){return this._transform.scale(t,n),this}setTransform(t,n,s,o,l,u){return t instanceof Nt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,n,s,o,l,u),this)}transform(t,n,s,o,l,u){return t instanceof Nt?(this._transform.append(t),this):(K0.set(t,n,s,o,l,u),this._transform.append(K0),this)}translate(t,n=t){return this._transform.translate(t,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let n=0;n<this.instructions.length;n++){const s=this.instructions[n],o=s.action;if(o==="fill"){const l=s.data;t.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;t.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),d=l.path.bounds;t.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const n=this.instructions;let s=!1;for(let o=0;o<n.length;o++){const l=n[o],u=l.data,h=u.path;if(!l.action||!h)continue;const d=u.style,p=h.shapePath.shapePrimitives;for(let g=0;g<p.length;g++){const y=p[g].shape;if(!d||!y)continue;const S=p[g].transform,b=S?S.applyInverse(t,rT):t;if(l.action==="fill")s=y.contains(b.x,b.y);else{const E=d;s=y.strokeContains(b.x,b.y,E.width,E.alignment)}const C=u.hole;if(C){const E=C.shapePath?.shapePrimitives;if(E)for(let w=0;w<E.length;w++)E[w].shape.contains(b.x,b.y)&&(s=!1)}if(s)return!0}}return s}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Df.defaultFillStyle={color:16777215,alpha:1,texture:Pt.WHITE,matrix:null,fill:null,textureSpace:"local"};Df.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Pt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let An=Df;const Of=class cr extends On{constructor(t={}){super(),this.uid=fe("textStyle"),this._tick=0,aT(t);const n={...cr.defaultTextStyle,...t};for(const s in n){const o=s;this[o]=n[s]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...cr.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...cr.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...An.defaultFillStyle,...t},()=>{this._fill=ms({...this._originalFill},An.defaultFillStyle)})),this._fill=ms(t===0?"black":t,An.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...An.defaultStrokeStyle,...t},()=>{this._stroke=Hl({...this._originalStroke},An.defaultStrokeStyle)})),this._stroke=Hl(t,An.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=cr.defaultTextStyle;for(const n in t)this[n]=t[n]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new cr({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let n=0;n<this._filters.length;n++)t+=this._filters[n].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,n){return new Proxy(t,{set:(s,o,l)=>(s[o]===l||(s[o]=l,n?.(o,l),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(ve.isColorLike(t)||t instanceof di||t instanceof $l)}};Of.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Of.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let _r=Of;function aT(r){const t=r;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const n=_r.defaultDropShadow;r.dropShadow={alpha:t.dropShadowAlpha??n.alpha,angle:t.dropShadowAngle??n.angle,blur:t.dropShadowBlur??n.blur,color:t.dropShadowColor??n.color,distance:t.dropShadowDistance??n.distance}}if(t.strokeThickness!==void 0){kt(qt,"strokeThickness is now a part of stroke");const n=t.stroke;let s={};if(ve.isColorLike(n))s.color=n;else if(n instanceof di||n instanceof $l)s.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))s=n;else throw new Error("Invalid stroke value.");r.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(kt(qt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&se("The number of fill colors must match the number of fill gradient stops.");const n=new di({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=t.fillGradientStops.slice(),o=t.fill.map(l=>ve.shared.setValue(l).toNumber());s.forEach((l,u)=>{n.addColorStop(l,o[u])}),r.fill={fill:n}}}class oT{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,n){const s=Jt.get().createCanvas();s.width=t,s.height=n;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(t,n,s=1){t=Math.ceil(t*s-1e-6),n=Math.ceil(n*s-1e-6),t=pr(t),n=pr(n);const o=(t<<17)+(n<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(t,n)),l}returnCanvasAndContext(t){const n=t.canvas,{width:s,height:o}=n,l=(s<<17)+(o<<1);t.context.resetTransform(),t.context.clearRect(0,0,s,o),this._canvasPool[l].push(t)}clear(){this._canvasPool={}}}const Ya=new oT;qa.register(Ya);const J0=1e5;function Fl(r,t,n,s=0){if(r.texture===Pt.WHITE&&!r.fill)return ve.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof $l){const o=r.fill,l=t.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Nt.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(r.fill instanceof di){const o=r.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,d=1;u&&n&&(h=n.width+s,d=n.height+s);let p,g=!1;if(l){const{start:y,end:S}=o;p=t.createLinearGradient(y.x*h,y.y*d,S.x*h,S.y*d),g=Math.abs(S.x-y.x)<Math.abs((S.y-y.y)*.1)}else{const{center:y,innerRadius:S,outerCenter:b,outerRadius:C}=o;p=t.createRadialGradient(y.x*h,y.y*d,S*h,b.x*h,b.y*d,C*h)}if(g&&u&&n){const y=n.lineHeight/d;for(let S=0;S<n.lines.length;S++){const b=(S*n.lineHeight+s/2)/d;o.colorStops.forEach(C=>{const E=b+C.offset*y;p.addColorStop(Math.floor(E*J0)/J0,ve.shared.setValue(C.color).toHex())})}}else o.colorStops.forEach(y=>{p.addColorStop(y.offset,ve.shared.setValue(y.color).toHex())});return p}}else{const o=t.createPattern(r.texture.source.resource,"repeat"),l=r.matrix.copyTo(Nt.shared);return l.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(l),o}return se("FillStyle not recognised",r),"red"}const Hx=class Fx extends Cx{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...Fx.defaultOptions,...t};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const s=n.style.clone();n.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Pt.WHITE,s._fill.fill=null),this.applyFillAsTint=n.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=Gl(s);n.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,n.textureStyle&&(this._textureStyle=n.textureStyle instanceof mr?n.textureStyle:new mr(n.textureStyle)),this.fontMetrics=Yn.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){const n=Yn.graphemeSegmenter(t).filter(w=>!this._currentChars.includes(w)).filter((w,k,U)=>U.indexOf(w)===k);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let d=this._currentX,p=this._currentY,g=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,S=this._padding*y;let b=!1;const C=o.width/this.resolution,E=o.height/this.resolution;for(let w=0;w<n.length;w++){const k=n[w],U=Yn.measureText(k,h,o,!1);U.lineHeight=U.height;const M=U.width*y,O=Math.ceil((h.fontStyle==="italic"?2:1)*M),I=U.height*y,Q=O+S*2,H=I+S*2;if(b=!1,k!==`
`&&k!=="\r"&&k!=="	"&&k!==" "&&(b=!0,g=Math.ceil(Math.max(H,g))),d+Q>C&&(p+=g,g=H,d=0,p+g>E)){u.update();const K=this._nextPage();o=K.canvasAndContext.canvas,l=K.canvasAndContext.context,u=K.texture.source,d=0,p=0,g=0}const st=M/y-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[k]={id:k.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:st,kerning:{}},b){this._drawGlyph(l,U,d+S,p+S,y,h);const K=u.width*y,J=u.height*y,it=new oe(d/K*u.width,p/J*u.height,Q/K*u.width,H/J*u.height);this.chars[k].texture=new Pt({source:u,frame:it}),d+=Math.ceil(Q)}}u.update(),this._currentX=d,this._currentY=p,this._currentMaxCharHeight=g,this._skipKerning&&this._applyKerning(n,l)}get pageTextures(){return kt(qt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,n){const s=this._measureCache;for(let o=0;o<t.length;o++){const l=t[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let d=s[l];d||(d=s[l]=n.measureText(l).width);let p=s[h];p||(p=s[h]=n.measureText(h).width);let g=n.measureText(l+h).width,y=g-(d+p);y&&(this.chars[l].kerning[h]=y),g=n.measureText(l+h).width,y=g-(d+p),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,n=Ya.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(n.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Pt({source:new gs({resource:n.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:n,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(t,n,s){n.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=Gl(n),n.fontSize=this.baseMeasurementFontSize,t.textBaseline=n.textBaseline;const o=n._stroke,l=o?.width??0;if(o&&(t.lineWidth=l,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=Fl(o,t)),n._fill&&(t.fillStyle=Fl(n._fill,t)),n.dropShadow){const u=n.dropShadow,h=ve.shared.setValue(u.color).toArray(),d=u.blur*s,p=u.distance*s;t.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(u.angle)*p,t.shadowOffsetY=Math.sin(u.angle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,n,s,o,l,u){const h=n.text,d=n.fontProperties,g=(u._stroke?.width??0)*l,y=s+g/2,S=o-g/2,b=d.descent*l,C=n.lineHeight*l;let E=!1;u.stroke&&g&&(E=!0,t.strokeText(h,y,S+C-b));const{shadowBlur:w,shadowOffsetX:k,shadowOffsetY:U}=t;u._fill&&(E&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(h,y,S+C-b)),E&&(t.shadowBlur=w,t.shadowOffsetX=k,t.shadowOffsetY=U)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:n,texture:s}=this.pages[t];Ya.returnCanvasAndContext(n),s.destroy(!0)}this.pages=null}};Hx.defaultOptions={textureSize:512,style:new _r,mipmap:!0};let ty=Hx;function lT(r,t,n,s){const o={width:0,height:0,offsetY:0,scale:t.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=n.baseLineOffset;let l=o.lines[0],u=null,h=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},p=n.baseMeasurementFontSize/t.fontSize,g=t.letterSpacing*p,y=t.wordWrapWidth*p,S=t.lineHeight?t.lineHeight*p:n.lineHeight,b=t.wordWrap&&t.breakWords,C=k=>{const U=l.width;for(let M=0;M<d.index;M++){const O=k.positions[M];l.chars.push(k.chars[M]),l.charPositions.push(O+U)}l.width+=k.width,h=!1,d.width=0,d.index=0,d.chars.length=0},E=()=>{let k=l.chars.length-1;if(s){let U=l.chars[k];for(;U===" ";)l.width-=n.chars[U].xAdvance,U=l.chars[--k]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=S},w=k=>k-g>y;for(let k=0;k<r.length+1;k++){let U;const M=k===r.length;M||(U=r[k]);const O=n.chars[U]||n.chars[" "];if(/(?:\s)/.test(U)||U==="\r"||U===`
`||M){if(!h&&t.wordWrap&&w(l.width+d.width)?(E(),C(d),M||l.charPositions.push(0)):(d.start=l.width,C(d),M||l.charPositions.push(0)),U==="\r"||U===`
`)E();else if(!M){const st=O.xAdvance+(O.kerning[u]||0)+g;l.width+=st,l.spaceWidth=st,l.spacesIndex.push(l.charPositions.length),l.chars.push(U)}}else{const H=O.kerning[u]||0,st=O.xAdvance+H+g;b&&w(l.width+d.width+st)&&(C(d),E()),d.positions[d.index++]=d.width+H,d.chars.push(U),d.width+=st}u=U}return E(),t.align==="center"?cT(o):t.align==="right"?uT(o):t.align==="justify"&&hT(o),o}function cT(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width/2-n.width/2;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function uT(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width-n.width;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function hT(r){const t=r.width;for(let n=0;n<r.lines.length;n++){const s=r.lines[n];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,p=(t-s.width)/h;for(let g=0;g<s.charPositions.length;g++)g===l&&(l=s.spacesIndex[o++],u+=p),s.charPositions[g]+=u}}function fT(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const t=[];for(let n=0,s=r.length;n<s;n++){const o=r[n];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,d=u;h<=d;h++)t.push(String.fromCharCode(h))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let Ml=0;class dT{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=Ax(1e3)}getFont(t,n){let s=`${n.fontFamily}-bitmap`,o=!0;if(n._fill.fill&&!n._stroke?(s+=n._fill.fill.styleKey,o=!1):(n._stroke||n.dropShadow)&&(s=`${n.styleKey}-bitmap`,o=!1),!ie.has(s)){const u=Object.create(n);u.lineHeight=0;const h=new ty({style:u,overrideFill:o,overrideSize:!0,...this.defaultOptions});Ml++,Ml>50&&se("BitmapText",`You have dynamically created ${Ml} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),h.once("destroy",()=>{Ml--,ie.remove(s)}),ie.set(s,h)}const l=ie.get(s);return l.ensureCharacters?.(t),l}getLayout(t,n,s=!0){const o=this.getFont(t,n),l=`${t}-${n.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=Yn.graphemeSegmenter(t),h=lT(u,n,o,s);return this.measureCache.set(l,h),h}measureText(t,n,s=!0){return this.getLayout(t,n,s)}install(...t){let n=t[0];typeof n=="string"&&(n={name:n,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},kt(qt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=n?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const o=n.style,l=o instanceof _r?o:new _r(o),u=n.dynamicFill??this._canUseTintForStyle(l),h=new ty({style:l,overrideFill:u,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1,textureStyle:n.textureStyle}),d=fT(n.chars);return h.ensureCharacters(d.join("")),ie.set(`${s}-bitmap`,h),h.once("destroy",()=>ie.remove(`${s}-bitmap`)),h}uninstall(t){const n=`${t}-bitmap`,s=ie.get(n);s&&s.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}}const ey=new dT;class Yx extends Cx{constructor(t,n){super();const{textures:s,data:o}=t;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:d,rotate:p}=s[u.page],g=Zt.transformRectCoords(u,h,p,new oe),y=new Pt({frame:g,orig:new oe(0,0,u.width,u.height),source:d,rotate:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:n}=this.pages[t];n.destroy(!0)}this.pages=null}static install(t){ey.install(t)}static uninstall(t){ey.uninstall(t)}}const Gh={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const t=r.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const S=t[y].match(/^[a-z]+/gm)[0],b=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),C={};for(const E in b){const w=b[E].split("="),k=w[0],U=w[1].replace(/"/gm,""),M=parseFloat(U),O=isNaN(M)?U:M;C[k]=O}n[S].push(C)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=n.info,[l]=n.common,[u]=n.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=n.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const p=n.char;for(let y=0;y<p.length;y++){const S=p[y],b=parseInt(S.id,10);let C=S.letter??S.char??String.fromCharCode(b);C==="space"&&(C=" "),d[b]=C,s.chars[C]={id:b,page:parseInt(S.page,10)||0,x:parseInt(S.x,10),y:parseInt(S.y,10),width:parseInt(S.width,10),height:parseInt(S.height,10),xOffset:parseInt(S.xoffset,10),yOffset:parseInt(S.yoffset,10),xAdvance:parseInt(S.xadvance,10),kerning:{}}}const g=n.kerning||[];for(let y=0;y<g.length;y++){const S=parseInt(g[y].first,10),b=parseInt(g[y].second,10),C=parseInt(g[y].amount,10);s.chars[d[b]].kerning[d[S]]=C}return s}},ny={test(r){const t=r;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=r.getElementsByTagName("info")[0],s=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=r.getElementsByTagName("page"),u=r.getElementsByTagName("char"),h=r.getElementsByTagName("kerning");t.fontSize=parseInt(n.getAttribute("size"),10),t.fontFamily=n.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)t.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<u.length;p++){const g=u[p],y=parseInt(g.getAttribute("id"),10);let S=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(y);S==="space"&&(S=" "),d[y]=S,t.chars[S]={id:y,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<h.length;p++){const g=parseInt(h[p].getAttribute("first"),10),y=parseInt(h[p].getAttribute("second"),10),S=parseInt(h[p].getAttribute("amount"),10);t.chars[d[y]].kerning[d[g]]=S}return t}},iy={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?ny.test(Jt.get().parseXML(r)):!1},parse(r){return ny.parse(Jt.get().parseXML(r))}},pT=[".xml",".fnt"],mT={extension:{type:_t.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof Yx,getCacheableAssets(r,t){const n={};return r.forEach(s=>{n[s]=t,n[`${s}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},gT={extension:{type:_t.LoadParser,priority:Fi.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return pT.includes(fn.extname(r).toLowerCase())},async testParse(r){return Gh.test(r)||iy.test(r)},async parse(r,t,n){const s=Gh.test(r)?Gh.parse(r):iy.parse(r),{src:o}=t,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const S=l[y].file;let b=fn.join(fn.dirname(o),S);b=ef(b,o),u.push({src:b,data:h})}const d=await n.load(u),p=u.map(y=>d[y.src]);return new Yx({data:s,textures:p},o)},async load(r,t){return await(await Jt.get().fetch(r)).text()},async unload(r,t,n){await Promise.all(r.pages.map(s=>n.unload(s.texture.source._sourceOrigin))),r.destroy()}};class yT{constructor(t,n=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(t){t.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<n;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const xT={extension:{type:_t.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(t=>t instanceof Pt),getCacheableAssets:(r,t)=>{const n={};return r.forEach(s=>{t.forEach((o,l)=>{n[s+(l===0?"":l+1)]=o})}),n}};async function Xx(r){if("Image"in globalThis)return new Promise(t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const _T={extension:{type:_t.DetectionParser,priority:1},test:async()=>Xx("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")},sy=["png","jpg","jpeg"],bT={extension:{type:_t.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...sy],remove:async r=>r.filter(t=>!sy.includes(t))},vT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Wl(r){return vT?!1:document.createElement("video").canPlayType(r)!==""}const ST={extension:{type:_t.DetectionParser,priority:0},test:async()=>Wl("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")},CT={extension:{type:_t.DetectionParser,priority:0},test:async()=>Wl("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")},AT={extension:{type:_t.DetectionParser,priority:0},test:async()=>Wl("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")},TT={extension:{type:_t.DetectionParser,priority:0},test:async()=>Xx("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")},Vx=class Bl{constructor(){this.loadOptions={...Bl.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,n,s)=>(this._parsersValidated=!1,t[n]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,n){const s={promise:null,parser:null};return s.promise=(async()=>{let o=null,l=null;if((n.parser||n.loadParser)&&(l=this._parserHash[n.parser||n.loadParser],n.loadParser&&se(`[Assets] "loadParser" is deprecated, use "parser" instead for ${t}`),l||se(`[Assets] specified load parser "${n.parser||n.loadParser}" not found while loading ${t}`)),!l){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&h.test?.(t,n,this)){l=h;break}}if(!l)return se(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(t,n,this),s.parser=l;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await h.testParse?.(o,n,this)&&(o=await h.parse(o,n,this)||o,s.parser=h)}return o})(),s}async load(t,n){this._parsersValidated||this._validateParsers();const s=typeof n=="function"?{...Bl.defaultOptions,...this.loadOptions,onProgress:n}:{...Bl.defaultOptions,...this.loadOptions,...n||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d}=s;let p=0;const g={},y=jl(t),S=Bn(t,E=>({alias:[E],src:E,data:{}})),b=S.reduce((E,w)=>E+(w.progressSize||1),0),C=S.map(async E=>{const w=fn.toAbsolute(E.src);g[E.src]||(await this._loadAssetWithRetry(w,E,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d},g),p+=E.progressSize||1,o&&o(p/b))});return await Promise.all(C),y?g[S[0].src]:g}async unload(t){const s=Bn(t,o=>({alias:[o],src:o})).map(async o=>{const l=fn.toAbsolute(o.src),u=this.promiseCache[l];if(u){const h=await u.promise;delete this.promiseCache[l],await u.parser?.unload?.(h,o,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name||t.id).reduce((t,n)=>(!n.name&&!n.id?se("[Assets] parser should have an id"):(t[n.name]||t[n.id])&&se(`[Assets] parser id conflict "${n.id}"`),t[n.name]=n,n.id&&(t[n.id]=n),t),{})}async _loadAssetWithRetry(t,n,s,o){let l=0;const{onError:u,strategy:h,retryCount:d,retryDelay:p}=s,g=y=>new Promise(S=>setTimeout(S,y));for(;;)try{this.promiseCache[t]||(this.promiseCache[t]=this._getLoadPromiseAndParser(t,n)),o[n.src]=await this.promiseCache[t].promise;return}catch(y){delete this.promiseCache[t],delete o[n.src],l++;const S=h!=="retry"||l>d;if(h==="retry"&&!S){u&&u(y,n),await g(p);continue}if(h==="skip"){u&&u(y,n);return}u&&u(y,n);const b=new Error(`[Loader.load] Failed to load ${t}.
${y}`);throw y instanceof Error&&y.stack&&(b.stack=y.stack),b}}};Vx.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let ET=Vx;function vr(r,t){if(Array.isArray(t)){for(const n of t)if(r.startsWith(`data:${n}`))return!0;return!1}return r.startsWith(`data:${t}`)}function Sr(r,t){const n=r.split("?")[0],s=fn.extname(n).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const wT=".json",MT="application/json",RT={extension:{type:_t.LoadParser,priority:Fi.Low},name:"loadJson",id:"json",test(r){return vr(r,MT)||Sr(r,wT)},async load(r){return await(await Jt.get().fetch(r)).json()}},kT=".txt",BT="text/plain",DT={name:"loadTxt",id:"text",extension:{type:_t.LoadParser,priority:Fi.Low,name:"loadTxt"},test(r){return vr(r,BT)||Sr(r,kT)},async load(r){return await(await Jt.get().fetch(r)).text()}},OT=["normal","bold","100","200","300","400","500","600","700","800","900"],zT=[".ttf",".otf",".woff",".woff2"],UT=["font/ttf","font/otf","font/woff","font/woff2"],NT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function LT(r){const t=fn.extname(r),o=fn.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(NT)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const PT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function jT(r){return PT.test(r)?r:encodeURI(r)}const GT={extension:{type:_t.LoadParser,priority:Fi.Low},name:"loadWebFont",id:"web-font",test(r){return vr(r,UT)||Sr(r,zT)},async load(r,t){const n=Jt.get().getFontFaceSet();if(n){const s=[],o=t.data?.family??LT(r),l=t.data?.weights?.filter(h=>OT.includes(h))??["normal"],u=t.data??{};for(let h=0;h<l.length;h++){const d=l[h],p=new FontFace(o,`url(${jT(r)})`,{...u,weight:d});await p.load(),n.add(p),s.push(p)}return ie.has(`${o}-and-url`)?ie.get(`${o}-and-url`).entries.push({url:r,faces:s}):ie.set(`${o}-and-url`,{entries:[{url:r,faces:s}]}),s.length===1?s[0]:s}return se("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const t=Array.isArray(r)?r:[r],n=t[0].family,s=ie.get(`${n}-and-url`),o=s.entries.find(l=>l.faces.some(u=>t.indexOf(u)!==-1));o.faces=o.faces.filter(l=>t.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),t.forEach(l=>{Jt.get().getFontFaceSet().delete(l)}),s.entries.length===0&&ie.remove(`${n}-and-url`)}};function zf(r,t=1){const n=br.RETINA_PREFIX?.exec(r);return n?parseFloat(n[1]):t}function Uf(r,t,n){r.label=n,r._sourceOrigin=n;const s=new Pt({source:r,label:n}),o=()=>{delete t.promiseCache[n],ie.has(n)&&ie.remove(n)};return s.source.once("destroy",()=>{t.promiseCache[n]&&(se("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{r.destroyed||(se("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const IT=".svg",HT="image/svg+xml",FT={extension:{type:_t.LoadParser,priority:Fi.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return vr(r,HT)||Sr(r,IT)},async load(r,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?XT(r):YT(r,t,n,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function YT(r,t,n,s){const o=await Jt.get().fetch(r),l=Jt.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=t.data?.width??l.width,h=t.data?.height??l.height,d=t.data?.resolution||zf(r),p=Math.ceil(u*d),g=Math.ceil(h*d),y=Jt.get().createCanvas(p,g),S=y.getContext("2d");S.imageSmoothingEnabled=!0,S.imageSmoothingQuality="high",S.drawImage(l,0,0,u*d,h*d);const{parseAsGraphicsContext:b,...C}=t.data??{},E=new gs({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...C});return Uf(E,n,r)}async function XT(r){const n=await(await Jt.get().fetch(r)).text(),s=new An;return s.svg(n),s}const VT=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let hr=null,df=class{constructor(){hr||(hr=URL.createObjectURL(new Blob([VT],{type:"application/javascript"}))),this.worker=new Worker(hr)}};df.revokeObjectURL=function(){hr&&(URL.revokeObjectURL(hr),hr=null)};const qT=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let fr=null;class qx{constructor(){fr||(fr=URL.createObjectURL(new Blob([qT],{type:"application/javascript"}))),this.worker=new Worker(fr)}}qx.revokeObjectURL=function(){fr&&(URL.revokeObjectURL(fr),fr=null)};let ry=0,Ih;class $T{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:n}=new df;n.addEventListener("message",s=>{n.terminate(),df.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,n){return this._run("loadImageBitmap",[t,n?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Ih===void 0&&(Ih=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Ih&&(this._createdWorkers++,t=new qx().worker,t.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){this._resolveHash[t.uuid]&&(t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),delete this._resolveHash[t.uuid])}async _run(t,n){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:t,arguments:n,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const n=this._queue.pop(),s=n.id;this._resolveHash[ry]={resolve:n.resolve,reject:n.reject},t.postMessage({data:n.arguments,uuid:ry++,id:s})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const ay=new $T,QT=[".jpeg",".jpg",".png",".webp",".avif"],WT=["image/jpeg","image/png","image/webp","image/avif"];async function ZT(r,t){const n=await Jt.get().fetch(r);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${n.status} ${n.statusText}`);const s=await n.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const $x={name:"loadTextures",id:"texture",extension:{type:_t.LoadParser,priority:Fi.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return vr(r,WT)||Sr(r,QT)},async load(r,t,n){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ay.isImageBitmapSupported()?s=await ay.loadImageBitmap(r,t):s=await ZT(r,t):s=await new Promise((l,u)=>{s=Jt.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=r,s.complete?l(s):(s.onload=()=>{l(s)},s.onerror=u)});const o=new gs({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||zf(r),...t.data});return Uf(o,n,r)},unload(r){r.destroy(!0)}},KT=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Hh,Fh;function JT(r,t,n){n===void 0&&!t.startsWith("data:")?r.crossOrigin=eE(t):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")}function tE(r){return new Promise((t,n)=>{r.addEventListener("canplaythrough",s),r.addEventListener("error",o),r.load();function s(){l(),t()}function o(u){l(),n(u)}function l(){r.removeEventListener("canplaythrough",s),r.removeEventListener("error",o)}})}function eE(r,t=globalThis.location){if(r.startsWith("data:"))return"";t||(t=globalThis.location);const n=new URL(r,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}function nE(){const r=[],t=[];for(const n of KT){const s=Ua.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;Wl(s)&&(r.push(n),t.includes(s)||t.push(s))}return{validVideoExtensions:r,validVideoMime:t}}const iE={name:"loadVideo",id:"video",extension:{type:_t.LoadParser,name:"loadVideo"},test(r){if(!Hh||!Fh){const{validVideoExtensions:s,validVideoMime:o}=nE();Hh=s,Fh=o}const t=vr(r,Fh),n=Sr(r,Hh);return t||n},async load(r,t,n){const s={...Ua.defaultOptions,resolution:t.data?.resolution||zf(r),alphaMode:t.data?.alphaMode||await Ky(),...t.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(d=>{const p=l[d];p!==void 0&&o.setAttribute(d,p)}),s.muted===!0&&(o.muted=!0),JT(o,r,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(r.startsWith("data:"))h=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const d=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();h=Ua.MIME_TYPES[d]||`video/${d}`}return u.src=r,h&&(u.type=h),new Promise(d=>{const p=async()=>{const g=new Ua({...s,resource:o});o.removeEventListener("canplay",p),t.data.preload&&await tE(o),d(Uf(g,n,r))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",p),o.appendChild(u)})},unload(r){r.destroy(!0)}},Qx={extension:{type:_t.ResolveParser,name:"resolveTexture"},test:$x.test,parse:r=>({resolution:parseFloat(br.RETINA_PREFIX.exec(r)?.[1]??"1"),format:r.split(".").pop(),src:r})},sE={extension:{type:_t.ResolveParser,priority:-2,name:"resolveJson"},test:r=>br.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:Qx.parse};class rE{constructor(){this._detections=[],this._initialized=!1,this.resolver=new br,this.loader=new ET,this.cache=ie,this._backgroundLoader=new yT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){se("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const n=t.texturePreference?.resolution??1,s=typeof n=="number"?[n]:n,o=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,n){this._initialized||await this.init();const s=jl(t),o=Bn(t).map(h=>{if(typeof h!="string"){const d=this.resolver.getAlias(h);return d.some(p=>!this.resolver.hasKey(p))&&this.add(h),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,n);return s?u[o[0]]:u}addBundle(t,n){this.resolver.addBundle(t,n)}async loadBundle(t,n){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const o=this.resolver.resolveBundle(t),l={},u=Object.keys(o);let h=0;const d=[],p=()=>{n?.(d.reduce((y,S)=>y+S,0)/h)},g=u.map((y,S)=>{const b=o[y],C=Object.values(b),w=[...new Set(C.flat())].reduce((k,U)=>k+(U.progressSize||1),0);return d.push(0),h+=w,this._mapLoadToResolve(b,k=>{d[S]=k*w,p()}).then(k=>{l[y]=k})});return await Promise.all(g),s?l[t[0]]:l}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolveBundle(t);Object.values(n).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return ie.get(t);const n={};for(let s=0;s<t.length;s++)n[s]=ie.get(t[s]);return n}async _mapLoadToResolve(t,n){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,n);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(p=>{l[p]=h}),ie.set(d,h)}),l}async unload(t){this._initialized||await this.init();const n=Bn(t).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(n);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Bn(t);const n=this.resolver.resolveBundle(t),s=Object.keys(n).map(o=>this._unloadFromResolved(n[o]));await Promise.all(s)}async _unloadFromResolved(t){const n=Object.values(t);n.forEach(s=>{ie.remove(s.src)}),await this.loader.unload(n)}async _detectFormats(t){let n=[];t.preferredFormats&&(n=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?n=await s.add(n):t.skipDetections||(n=await s.remove(n));return n=n.filter((s,o)=>n.indexOf(s)===o),n}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(s=>s in t).forEach(s=>{n.config[s]=t[s]})})}}const Ba=new rE;Ue.handleByList(_t.LoadParser,Ba.loader.parsers).handleByList(_t.ResolveParser,Ba.resolver.parsers).handleByList(_t.CacheParser,Ba.cache.parsers).handleByList(_t.DetectionParser,Ba.detections);Ue.add(xT,bT,_T,TT,ST,CT,AT,RT,DT,GT,FT,$x,iE,gT,mT,Qx,sE);const oy={loader:_t.LoadParser,resolver:_t.ResolveParser,cache:_t.CacheParser,detection:_t.DetectionParser};Ue.handle(_t.Asset,r=>{const t=r.ref;Object.entries(oy).filter(([n])=>!!t[n]).forEach(([n,s])=>Ue.add(Object.assign(t[n],{extension:t[n].extension??s})))},r=>{const t=r.ref;Object.keys(oy).filter(n=>!!t[n]).forEach(n=>Ue.remove(t[n]))});class Te extends Af{constructor(t){t instanceof An&&(t={context:t});const{context:n,roundPixels:s,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",n?this.context=n:(this.context=this._ownedContext=new An,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=t,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_onTouch(t){this._gcLastUsed=t,this._context._gcLastUsed=t}_callContextMethod(t,n){return this.context[t](...n),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Te(this._context.clone()):(this._ownedContext=null,new Te(this._context))}lineStyle(t,n,s){kt(qt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),n&&(o.color=n),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(t,n){kt(qt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t!==void 0&&(s.color=t),n!==void 0&&(s.alpha=n),this.context.fillStyle=s,this}endFill(){kt(qt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==An.defaultStrokeStyle.width||t.color!==An.defaultStrokeStyle.color||t.alpha!==An.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return kt(qt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return kt(qt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return kt(qt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return kt(qt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return kt(qt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return kt(qt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class aE extends Af{constructor(t,n){const{text:s,resolution:o,style:l,anchor:u,width:h,height:d,roundPixels:p,...g}=t;super({...g}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=n,this.text=s??"",this.style=l,this.resolution=o??null,this.allowChildren=!1,this._anchor=new ze({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=p??!1,h!==void 0&&(this.width=h),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){t||(t={}),this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this.bounds.width),n!==void 0&&this._setHeight(n,this.bounds.height)}containsPoint(t){const n=this.bounds.width,s=this.bounds.height,o=-n*this.anchor.x;let l=0;return t.x>=o&&t.x<=o+n&&(l=-s*this.anchor.y,t.y>=l&&t.y<=l+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function oE(r,t){let n=r[0]??{};return(typeof n=="string"||r[1])&&(kt(qt,`use new ${t}({ text: "hi!", style }) instead`),n={text:n,style:r[1]}),n}let us=null,ui=null;function lE(r,t){us||(us=Jt.get().createCanvas(256,128),ui=us.getContext("2d",{willReadFrequently:!0}),ui.globalCompositeOperation="copy",ui.globalAlpha=1),(us.width<r||us.height<t)&&(us.width=pr(r),us.height=pr(t))}function ly(r,t,n){for(let s=0,o=4*n*t;s<t;++s,o+=4)if(r[o+3]!==0)return!1;return!0}function cy(r,t,n,s,o){const l=4*t;for(let u=s,h=s*l+4*n;u<=o;++u,h+=l)if(r[h+3]!==0)return!1;return!0}function cE(...r){let t=r[0];t.canvas||(t={canvas:r[0],resolution:r[1]});const{canvas:n}=t,s=Math.min(t.resolution??1,1),o=t.width??n.width,l=t.height??n.height;let u=t.output;if(lE(o,l),!ui)throw new TypeError("Failed to get canvas 2D context");ui.drawImage(n,0,0,o,l,0,0,o*s,l*s);const d=ui.getImageData(0,0,o,l).data;let p=0,g=0,y=o-1,S=l-1;for(;g<l&&ly(d,o,g);)++g;if(g===l)return oe.EMPTY;for(;ly(d,o,S);)--S;for(;cy(d,o,p,g,S);)++p;for(;cy(d,o,y,g,S);)--y;return++y,++S,ui.globalCompositeOperation="source-over",ui.strokeRect(p,g,y-p,S-g),ui.globalCompositeOperation="copy",u??(u=new oe),u.set(p/s,g/s,(y-p)/s,(S-g)/s),u}const uy=new oe;class uE{getCanvasAndContext(t){const{text:n,style:s,resolution:o=1}=t,l=s._getFinalPadding(),u=Yn.measureText(n||" ",s),h=Math.ceil(Math.ceil(Math.max(1,u.width)+l*2)*o),d=Math.ceil(Math.ceil(Math.max(1,u.height)+l*2)*o),p=Ya.getOptimalCanvasAndContext(h,d);this._renderTextToCanvas(n,s,l,o,p);const g=s.trim?cE({canvas:p.canvas,width:h,height:d,resolution:1,output:uy}):uy.set(0,0,h,d);return{canvasAndContext:p,frame:g}}returnCanvasAndContext(t){Ya.returnCanvasAndContext(t)}_renderTextToCanvas(t,n,s,o,l){const{canvas:u,context:h}=l,d=Gl(n),p=Yn.measureText(t||" ",n),g=p.lines,y=p.lineHeight,S=p.lineWidths,b=p.maxLineWidth,C=p.fontProperties,E=u.height;if(h.resetTransform(),h.scale(o,o),h.textBaseline=n.textBaseline,n._stroke?.width){const M=n._stroke;h.lineWidth=M.width,h.miterLimit=M.miterLimit,h.lineJoin=M.join,h.lineCap=M.cap}h.font=d;let w,k;const U=n.dropShadow?2:1;for(let M=0;M<U;++M){const O=n.dropShadow&&M===0,I=O?Math.ceil(Math.max(1,E)+s*2):0,Q=I*o;if(O){h.fillStyle="black",h.strokeStyle="black";const K=n.dropShadow,J=K.color,it=K.alpha;h.shadowColor=ve.shared.setValue(J).setAlpha(it).toRgbaString();const rt=K.blur*o,yt=K.distance*o;h.shadowBlur=rt,h.shadowOffsetX=Math.cos(K.angle)*yt,h.shadowOffsetY=Math.sin(K.angle)*yt+Q}else{if(h.fillStyle=n._fill?Fl(n._fill,h,p,s*2):null,n._stroke?.width){const K=n._stroke.width*.5+s*2;h.strokeStyle=Fl(n._stroke,h,p,K)}h.shadowColor="black"}let H=(y-C.fontSize)/2;y-C.fontSize<0&&(H=0);const st=n._stroke?.width??0;for(let K=0;K<g.length;K++)w=st/2,k=st/2+K*y+C.ascent+H,n.align==="right"?w+=b-S[K]:n.align==="center"&&(w+=(b-S[K])/2),n._stroke?.width&&this._drawLetterSpacing(g[K],n,l,w+s,k+s-I,!0),n._fill!==void 0&&this._drawLetterSpacing(g[K],n,l,w+s,k+s-I)}}_drawLetterSpacing(t,n,s,o,l,u=!1){const{context:h}=s,d=n.letterSpacing;let p=!1;if(Yn.experimentalLetterSpacingSupported&&(Yn.experimentalLetterSpacing?(h.letterSpacing=`${d}px`,h.textLetterSpacing=`${d}px`,p=!0):(h.letterSpacing="0px",h.textLetterSpacing="0px")),d===0||p){u?h.strokeText(t,o,l):h.fillText(t,o,l);return}let g=o;const y=Yn.graphemeSegmenter(t);let S=h.measureText(t).width,b=0;for(let C=0;C<y.length;++C){const E=y[C];u?h.strokeText(E,g,l):h.fillText(E,g,l);let w="";for(let k=C+1;k<y.length;++k)w+=y[k];b=h.measureText(w).width,g+=S-b+d,S=b}}}const hy=new uE;class hE extends aE{constructor(...t){const n=oE(t,"Text");super(n,_r),this.renderPipeId="text",n.textureStyle&&(this.textureStyle=n.textureStyle instanceof mr?n.textureStyle:new mr(n.textureStyle))}updateBounds(){const t=this._bounds,n=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:l,canvasAndContext:u}=hy.getCanvasAndContext({text:this.text,style:this._style,resolution:1});hy.returnCanvasAndContext(u),s=l.width,o=l.height}else{const l=Yn.measureText(this._text,this._style);s=l.width,o=l.height}t.minX=-n._x*s,t.maxX=t.minX+s,t.minY=-n._y*o,t.maxY=t.minY+o}}Ue.add(gv,yv);const fy=r=>{let t;const n=new Set,s=(p,g)=>{const y=typeof p=="function"?p(t):p;if(!Object.is(y,t)){const S=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(b=>b(t,S))}},o=()=>t,h={setState:s,getState:o,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p))},d=t=r(s,o,h);return h},fE=(r=>r?fy(r):fy),dE=r=>r;function pE(r,t=dE){const n=Ea.useSyncExternalStore(r.subscribe,Ea.useCallback(()=>t(r.getState()),[r,t]),Ea.useCallback(()=>t(r.getInitialState()),[r,t]));return Ea.useDebugValue(n),n}const dy=r=>{const t=fE(r),n=s=>pE(t,s);return Object.assign(n,t),n},mE=(r=>r?dy(r):dy),W=mE(r=>({myId:"",isHost:!1,username:`Player ${Math.floor(Math.random()*1e3)}`,activeTool:"pan",toolColor:"#ff0000",toolThickness:3,tokens:[],map:{url:null,scale:50,offsetX:0,offsetY:0,gridType:"square",fogEnabled:!1,revealedAreas:[],dynamicLightingEnabled:!1},chat:[],turnOrder:[],macros:[],audio:{url:null,isPlaying:!1},handout:null,drawings:[],walls:[],pings:[],scenes:[],activeSceneId:"default",savedAssets:[],setIdentity:(t,n)=>r({myId:t,isHost:n}),setUsername:t=>r({username:t}),setActiveTool:t=>r({activeTool:t}),setToolColor:t=>r({toolColor:t}),setToolThickness:t=>r({toolThickness:t}),addToken:t=>r(n=>({tokens:[...n.tokens,t]})),updateToken:(t,n)=>r(s=>({tokens:s.tokens.map(o=>o.id===t?{...o,...n}:o)})),removeToken:t=>r(n=>({tokens:n.tokens.filter(s=>s.id!==t)})),updateMap:t=>r(n=>({map:{...n.map,...t}})),toggleFog:t=>r(n=>({map:{...n.map,fogEnabled:t}})),revealArea:(t,n,s)=>r(o=>({map:{...o.map,revealedAreas:[...o.map.revealedAreas,{x:t,y:n,radius:s}]}})),resetFog:()=>r(t=>({map:{...t.map,revealedAreas:[]}})),addChatMessage:t=>r(n=>({chat:[...n.chat,t]})),addPing:t=>r(n=>({pings:[...n.pings,t]})),removePing:t=>r(n=>({pings:n.pings.filter(s=>s.id!==t)})),setTurnOrder:t=>r({turnOrder:t}),addToInitiative:(t,n)=>r(s=>{const o={id:Date.now().toString(),name:t,initiative:n};return{turnOrder:[...s.turnOrder,o].sort((u,h)=>h.initiative-u.initiative)}}),nextTurn:()=>r(t=>{if(t.turnOrder.length<=1)return t;const[n,...s]=t.turnOrder;return{turnOrder:[...s,n]}}),clearInitiative:()=>r({turnOrder:[]}),removeFromInitiative:t=>r(n=>({turnOrder:n.turnOrder.filter(s=>s.id!==t)})),addMacro:t=>r(n=>({macros:[...n.macros,t]})),removeMacro:t=>r(n=>({macros:n.macros.filter(s=>s.id!==t)})),setAudio:(t,n)=>r({audio:{url:t,isPlaying:n}}),setHandout:t=>r({handout:t}),addDrawing:t=>r(n=>({drawings:[...n.drawings,t]})),removeDrawing:t=>r(n=>({drawings:n.drawings.filter(s=>s.id!==t)})),clearDrawings:()=>r({drawings:[]}),addWall:t=>r(n=>({walls:[...n.walls,t]})),removeWall:t=>r(n=>({walls:n.walls.filter(s=>s.id!==t)})),clearWalls:()=>r({walls:[]}),toggleWallDoor:t=>r(n=>({walls:n.walls.map(s=>s.id===t?{...s,isOpen:!s.isOpen}:s)})),toggleDynamicLighting:t=>r(n=>({map:{...n.map,dynamicLightingEnabled:t}})),saveScene:t=>r(n=>{const s=Date.now().toString(),o={id:s,name:t,map:n.map,tokens:n.tokens,drawings:n.drawings,walls:n.walls};return{scenes:[...n.scenes,o],activeSceneId:s}}),loadScene:t=>r(n=>{const s=n.scenes.find(o=>o.id===t);return s?{activeSceneId:t,map:s.map,tokens:s.tokens,drawings:s.drawings,walls:s.walls}:n}),addSavedAsset:t=>r(n=>({savedAssets:[...n.savedAssets,t]})),removeSavedAsset:t=>r(n=>({savedAssets:n.savedAssets.filter(s=>s.id!==t)})),syncState:t=>r(n=>({...n,...t}))}));class gE{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return yE(t).buffer}}function yE(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r){const l=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(l,s),s+=o.byteLength}return n}function Wx(r){return new xE(r).unpack()}function Zx(r){const t=new _E,n=t.pack(r);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class xE{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let s=0,o="",l,u;for(;s<t;)l=n[s],l<160?(u=l,s++):(l^192)<32?(u=(l&31)<<6|n[s+1]&63,s+=2):(l^224)<16?(u=(l&15)<<12|(n[s+1]&63)<<6|n[s+2]&63,s+=3):(u=(l&7)<<18|(n[s+1]&63)<<12|(n[s+2]&63)<<6|n[s+3]&63,s+=4),o+=String.fromCodePoint(u);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let s=0;s<t;s++)n[s]=this.unpack();return n}unpack_map(t){const n={};for(let s=0;s<t;s++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,s=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(s-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),s=t>>31,o=(t>>20&2047)-1023,u=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(s===0?1:-1)*u}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class _E{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const s=this.pack_array(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const s=t;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const s=this.pack_object(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),s=n.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const s=o=>{if(o<n){const l=this.pack(t[o]);return l instanceof Promise?l.then(()=>s(o+1)):s(o+1)}};return s(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const s=Math.floor(Math.log(t)/Math.LN2),o=t/2**s-1,l=Math.floor(o*2**52),u=2**32,h=n<<31|s+1023<<20|l/u&1048575,d=l%u;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),s=n.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const o=l=>{if(l<n.length){const u=n[l];if(t.hasOwnProperty(u)){this.pack(u);const h=this.pack(t[u]);if(h instanceof Promise)return h.then(()=>o(l+1))}return o(l+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new gE,this._textEncoder=new TextEncoder}}let Kx=!0,Jx=!0;function Da(r,t,n){const s=r.match(t);return s&&s.length>=n&&parseFloat(s[n],10)}function xs(r,t,n){if(!r.RTCPeerConnection)return;const s=r.RTCPeerConnection.prototype,o=s.addEventListener;s.addEventListener=function(u,h){if(u!==t)return o.apply(this,arguments);const d=p=>{const g=n(p);g&&(h.handleEvent?h.handleEvent(g):h(g))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(h,d),o.apply(this,[u,d])};const l=s.removeEventListener;s.removeEventListener=function(u,h){if(u!==t||!this._eventMap||!this._eventMap[t])return l.apply(this,arguments);if(!this._eventMap[t].has(h))return l.apply(this,arguments);const d=this._eventMap[t].get(h);return this._eventMap[t].delete(h),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[u,d])},Object.defineProperty(s,"on"+t,{get(){return this["_on"+t]},set(u){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),u&&this.addEventListener(t,this["_on"+t]=u)},enumerable:!0,configurable:!0})}function bE(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Kx=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function vE(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Jx=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function t_(){if(typeof window=="object"){if(Kx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Nf(r,t){Jx&&console.warn(r+" is deprecated, please use "+t+" instead.")}function SE(r){const t={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=r;if(n.userAgentData&&n.userAgentData.brands){const s=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Da(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Da(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Da(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,t._safariVersion=Da(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function py(r){return Object.prototype.toString.call(r)==="[object Object]"}function e_(r){return py(r)?Object.keys(r).reduce(function(t,n){const s=py(r[n]),o=s?e_(r[n]):r[n],l=s&&!Object.keys(o).length;return o===void 0||l?t:Object.assign(t,{[n]:o})},{}):r}function pf(r,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(s=>{s.endsWith("Id")?pf(r,r.get(t[s]),n):s.endsWith("Ids")&&t[s].forEach(o=>{pf(r,r.get(o),n)})}))}function my(r,t,n){const s=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const l=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===t.id&&l.push(u)}),l.forEach(u=>{r.forEach(h=>{h.type===s&&h.trackId===u.id&&pf(r,h,o)})}),o}const gy=t_;function n_(r,t){const n=r&&r.navigator;if(!n.mediaDevices)return;const s=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const d={};return Object.keys(h).forEach(p=>{if(p==="require"||p==="advanced"||p==="mediaSource")return;const g=typeof h[p]=="object"?h[p]:{ideal:h[p]};g.exact!==void 0&&typeof g.exact=="number"&&(g.min=g.max=g.exact);const y=function(S,b){return S?S+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(g.ideal!==void 0){d.optional=d.optional||[];let S={};typeof g.ideal=="number"?(S[y("min",p)]=g.ideal,d.optional.push(S),S={},S[y("max",p)]=g.ideal,d.optional.push(S)):(S[y("",p)]=g.ideal,d.optional.push(S))}g.exact!==void 0&&typeof g.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[y("",p)]=g.exact):["min","max"].forEach(S=>{g[S]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[y(S,p)]=g[S])})}),h.advanced&&(d.optional=(d.optional||[]).concat(h.advanced)),d},o=function(h,d){if(t.version>=61)return d(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const p=function(g,y,S){y in g&&!(S in g)&&(g[S]=g[y],delete g[y])};h=JSON.parse(JSON.stringify(h)),p(h.audio,"autoGainControl","googAutoGainControl"),p(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=s(h.audio)}if(h&&typeof h.video=="object"){let p=h.video.facingMode;p=p&&(typeof p=="object"?p:{ideal:p});const g=t.version<66;if(p&&(p.exact==="user"||p.exact==="environment"||p.ideal==="user"||p.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!g)){delete h.video.facingMode;let y;if(p.exact==="environment"||p.ideal==="environment"?y=["back","rear"]:(p.exact==="user"||p.ideal==="user")&&(y=["front"]),y)return n.mediaDevices.enumerateDevices().then(S=>{S=S.filter(C=>C.kind==="videoinput");let b=S.find(C=>y.some(E=>C.label.toLowerCase().includes(E)));return!b&&S.length&&y.includes("back")&&(b=S[S.length-1]),b&&(h.video.deviceId=p.exact?{exact:b.deviceId}:{ideal:b.deviceId}),h.video=s(h.video),gy("chrome: "+JSON.stringify(h)),d(h)})}h.video=s(h.video)}return gy("chrome: "+JSON.stringify(h)),d(h)},l=function(h){return t.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,d,p){o(h,g=>{n.webkitGetUserMedia(g,d,y=>{p&&p(l(y))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return o(d,p=>h(p).then(g=>{if(p.audio&&!g.getAudioTracks().length||p.video&&!g.getVideoTracks().length)throw g.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return g},g=>Promise.reject(l(g))))}}}function i_(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function s_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",o=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===o.track.id):l={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)}),s.stream.getTracks().forEach(o=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===o.id):l={track:o};const u=new Event("track");u.track=o,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else xs(r,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function r_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const t=function(o,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=o.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:o}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(h,d){let p=o.apply(this,arguments);return p||(p=t(this,h),this._senders.push(p)),p};const l=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const d=this._senders.indexOf(h);d!==-1&&this._senders.splice(d,1)}}const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(t(this,u))})};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(u=>{const h=this._senders.find(d=>d.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function a_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const n=r.RTCPeerConnection.prototype.getSenders;n&&(r.RTCPeerConnection.prototype.getSenders=function(){const l=n.apply(this,[]);return l.forEach(u=>u._pc=this),l});const s=r.RTCPeerConnection.prototype.addTrack;s&&(r.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),r.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>my(u,l.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const n=r.RTCPeerConnection.prototype.getReceivers;n&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o}),xs(r,"track",s=>(s.receiver._pc=s.srcElement,s)),r.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>my(l,o.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const s=arguments[0];let o,l,u;return this.getSenders().forEach(h=>{h.track===s&&(o?u=!0:o=h)}),this.getReceivers().forEach(h=>(h.track===s&&(l?u=!0:l=h),h.track===s)),u||o&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function o_(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(d)===-1&&this._shimmedLocalStreams[h.id].push(d):this._shimmedLocalStreams[h.id]=[h,d],d};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(p=>{if(this.getSenders().find(y=>y.track===p))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(p=>h.indexOf(p)===-1);this._shimmedLocalStreams[u.id]=[u].concat(d)};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],s.apply(this,arguments)};const o=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const d=this._shimmedLocalStreams[h].indexOf(u);d!==-1&&this._shimmedLocalStreams[h].splice(d,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),o.apply(this,arguments)}}function l_(r,t){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&t.version>=65)return o_(r);const n=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const g=n.apply(this);return this._reverseStreams=this._reverseStreams||{},g.map(y=>this._reverseStreams[y.id])};const s=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(g){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},g.getTracks().forEach(y=>{if(this.getSenders().find(b=>b.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[g.id]){const y=new r.MediaStream(g.getTracks());this._streams[g.id]=y,this._reverseStreams[y.id]=g,g=y}s.apply(this,[g])};const o=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(g){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[g.id]||g]),delete this._reverseStreams[this._streams[g.id]?this._streams[g.id].id:g.id],delete this._streams[g.id]},r.RTCPeerConnection.prototype.addTrack=function(g,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const S=[].slice.call(arguments,1);if(S.length!==1||!S[0].getTracks().find(E=>E===g))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(E=>E.track===g))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const C=this._streams[y.id];if(C)C.addTrack(g),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const E=new r.MediaStream([g]);this._streams[y.id]=E,this._reverseStreams[E.id]=y,this.addStream(E)}return this.getSenders().find(E=>E.track===g)};function l(p,g){let y=g.sdp;return Object.keys(p._reverseStreams||[]).forEach(S=>{const b=p._reverseStreams[S],C=p._streams[b.id];y=y.replace(new RegExp(C.id,"g"),b.id)}),new RTCSessionDescription({type:g.type,sdp:y})}function u(p,g){let y=g.sdp;return Object.keys(p._reverseStreams||[]).forEach(S=>{const b=p._reverseStreams[S],C=p._streams[b.id];y=y.replace(new RegExp(b.id,"g"),C.id)}),new RTCSessionDescription({type:g.type,sdp:y})}["createOffer","createAnswer"].forEach(function(p){const g=r.RTCPeerConnection.prototype[p],y={[p](){const S=arguments;return arguments.length&&typeof arguments[0]=="function"?g.apply(this,[C=>{const E=l(this,C);S[0].apply(null,[E])},C=>{S[1]&&S[1].apply(null,C)},arguments[2]]):g.apply(this,arguments).then(C=>l(this,C))}};r.RTCPeerConnection.prototype[p]=y[p]});const h=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const p=d.get.apply(this);return p.type===""?p:l(this,p)}}),r.RTCPeerConnection.prototype.removeTrack=function(g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!g._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(g._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let S;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(E=>g.track===E)&&(S=this._streams[b])}),S&&(S.getTracks().length===1?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(g.track),this.dispatchEvent(new Event("negotiationneeded")))}}function mf(r,t){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=r.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=o[n]})}function c_(r,t){xs(r,"negotiationneeded",n=>{const s=n.target;if(!((t.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return n})}const yy=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:c_,shimAddTrackRemoveTrack:l_,shimAddTrackRemoveTrackWithNative:o_,shimGetSendersWithDtmf:r_,shimGetUserMedia:n_,shimMediaStream:i_,shimOnTrack:s_,shimPeerConnection:mf,shimSenderReceiverGetStats:a_},Symbol.toStringTag,{value:"Module"}));function u_(r,t){const n=r&&r.navigator,s=r&&r.MediaStreamTrack;if(n.getUserMedia=function(o,l,u){Nf("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(l,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(u,h,d){h in u&&!(d in u)&&(u[d]=u[h],delete u[h])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),l(u)},s&&s.prototype.getSettings){const u=s.prototype.getSettings;s.prototype.getSettings=function(){const h=u.apply(this,arguments);return o(h,"mozAutoGainControl","autoGainControl"),o(h,"mozNoiseSuppression","noiseSuppression"),h}}if(s&&s.prototype.applyConstraints){const u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),o(h,"autoGainControl","mozAutoGainControl"),o(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function CE(r,t){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return s.video===!0?s.video={mediaSource:t}:s.video.mediaSource=t,r.navigator.mediaDevices.getUserMedia(s)})}function h_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function gf(r,t){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const l=r.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=u[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[l,u,h]=arguments;return s.apply(this,[l||null]).then(d=>{if(t.version<53&&!u)try{d.forEach(p=>{p.type=n[p.type]||p.type})}catch(p){if(p.name!=="TypeError")throw p;d.forEach((g,y)=>{d.set(y,Object.assign({},g,{type:n[g.type]||g.type}))})}return d}).then(u,h)}}function f_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(l=>l._pc=this),o});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function d_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s}),xs(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function p_(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){Nf("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&n.getTracks().includes(s.track)&&this.removeTrack(s)})})}function m_(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function g_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.addTransceiver;t&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const o=s.length>0;o&&s.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=t.apply(this,arguments);if(o){const{sender:u}=l,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=s,u.sendEncodings=s,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function y_(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const t=r.RTCRtpSender.prototype.getParameters;t&&(r.RTCRtpSender.prototype.getParameters=function(){const s=t.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function x_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function __(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const xy=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:g_,shimCreateAnswer:__,shimCreateOffer:x_,shimGetDisplayMedia:CE,shimGetParameters:y_,shimGetUserMedia:u_,shimOnTrack:h_,shimPeerConnection:gf,shimRTCDataChannel:m_,shimReceiverGetStats:d_,shimRemoveStream:p_,shimSenderGetStats:f_},Symbol.toStringTag,{value:"Module"}));function b_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(o=>t.call(this,o,s)),s.getVideoTracks().forEach(o=>t.call(this,o,s))},r.RTCPeerConnection.prototype.addTrack=function(s,...o){return o&&o.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),t.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(n);if(s===-1)return;this._localStreams.splice(s,1);const o=n.getTracks();this.getSenders().forEach(l=>{o.includes(l.track)&&this.removeTrack(l)})})}}function v_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,this.dispatchEvent(l)})})}});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(l=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(l)>=0)return;s._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,s.dispatchEvent(u)})}),t.apply(s,arguments)}}}function S_(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,n=t.createOffer,s=t.createAnswer,o=t.setLocalDescription,l=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(p,g){const y=arguments.length>=2?arguments[2]:arguments[0],S=n.apply(this,[y]);return g?(S.then(p,g),Promise.resolve()):S},t.createAnswer=function(p,g){const y=arguments.length>=2?arguments[2]:arguments[0],S=s.apply(this,[y]);return g?(S.then(p,g),Promise.resolve()):S};let h=function(d,p,g){const y=o.apply(this,[d]);return g?(y.then(p,g),Promise.resolve()):y};t.setLocalDescription=h,h=function(d,p,g){const y=l.apply(this,[d]);return g?(y.then(p,g),Promise.resolve()):y},t.setRemoteDescription=h,h=function(d,p,g){const y=u.apply(this,[d]);return g?(y.then(p,g),Promise.resolve()):y},t.addIceCandidate=h}function C_(r){const t=r&&r.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,s=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>s(A_(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(s,o,l){t.mediaDevices.getUserMedia(s).then(o,l)}).bind(t))}function A_(r){return r&&r.video!==void 0?Object.assign({},r,{video:e_(r.video)}):r}function T_(r){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection;r.RTCPeerConnection=function(s,o){if(s&&s.iceServers){const l=[];for(let u=0;u<s.iceServers.length;u++){let h=s.iceServers[u];h.urls===void 0&&h.url?(Nf("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(s.iceServers[u])}s.iceServers=l}return new t(s,o)},r.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function E_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function w_(r){const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):s.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):s.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function M_(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const _y=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:M_,shimCallbacksAPI:S_,shimConstraints:A_,shimCreateOfferLegacy:w_,shimGetUserMedia:C_,shimLocalStreamsAPI:b_,shimRTCIceServerUrls:T_,shimRemoteStreamsAPI:v_,shimTrackEventTransceiver:E_},Symbol.toStringTag,{value:"Module"}));var Yh={exports:{}},by;function AE(){return by||(by=1,(function(r){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(s=>s.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,l)=>(l>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const s=t.splitSections(n);return s&&s[0]},t.getMediaSections=function(n){const s=t.splitSections(n);return s.shift(),s},t.matchPrefix=function(n,s){return t.splitLines(n).filter(o=>o.indexOf(s)===0)},t.parseCandidate=function(n){let s;n.indexOf("a=candidate:")===0?s=n.substring(12).split(" "):s=n.substring(10).split(" ");const o={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let l=8;l<s.length;l+=2)switch(s[l]){case"raddr":o.relatedAddress=s[l+1];break;case"rport":o.relatedPort=parseInt(s[l+1],10);break;case"tcptype":o.tcpType=s[l+1];break;case"ufrag":o.ufrag=s[l+1],o.usernameFragment=s[l+1];break;default:o[s[l]]===void 0&&(o[s[l]]=s[l+1]);break}return o},t.writeCandidate=function(n){const s=[];s.push(n.foundation);const o=n.component;o==="rtp"?s.push(1):o==="rtcp"?s.push(2):s.push(o),s.push(n.protocol.toUpperCase()),s.push(n.priority),s.push(n.address||n.ip),s.push(n.port);const l=n.type;return s.push("typ"),s.push(l),l!=="host"&&n.relatedAddress&&n.relatedPort&&(s.push("raddr"),s.push(n.relatedAddress),s.push("rport"),s.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(s.push("ufrag"),s.push(n.usernameFragment||n.ufrag)),"candidate:"+s.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let s=n.substring(9).split(" ");const o={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),o.name=s[0],o.clockRate=parseInt(s[1],10),o.channels=s.length===3?parseInt(s[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let s=n.payloadType;n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+s+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const s=n.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const s={};let o;const l=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<l.length;u++)o=l[u].trim().split("="),s[o[0].trim()]=o[1];return s},t.writeFmtp=function(n){let s="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const l=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?l.push(u+"="+n.parameters[u]):l.push(u)}),s+="a=fmtp:"+o+" "+l.join(";")+`\r
`}return s},t.parseRtcpFb=function(n){const s=n.substring(n.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},t.writeRtcpFb=function(n){let s="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(l=>{s+="a=rtcp-fb:"+o+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),s},t.parseSsrcMedia=function(n){const s=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,s),10)},l=n.indexOf(":",s);return l>-1?(o.attribute=n.substring(s+1,l),o.value=n.substring(l+1)):o.attribute=n.substring(s+1),o},t.parseSsrcGroup=function(n){const s=n.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(o=>parseInt(o,10))}},t.getMid=function(n){const s=t.matchPrefix(n,"a=mid:")[0];if(s)return s.substring(6)},t.parseFingerprint=function(n){const s=n.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},t.getDtlsParameters=function(n,s){return{role:"auto",fingerprints:t.matchPrefix(n+s,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,s){let o="a=setup:"+s+`\r
`;return n.fingerprints.forEach(l=>{o+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),o},t.parseCryptoLine=function(n){const s=n.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const s=n.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,s){return t.matchPrefix(n+s,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,s){const o=t.matchPrefix(n+s,"a=ice-ufrag:")[0],l=t.matchPrefix(n+s,"a=ice-pwd:")[0];return o&&l?{usernameFragment:o.substring(12),password:l.substring(10)}:null},t.writeIceParameters=function(n){let s="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(s+=`a=ice-lite\r
`),s},t.parseRtpParameters=function(n){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=t.splitLines(n)[0].split(" ");s.profile=l[2];for(let h=3;h<l.length;h++){const d=l[h],p=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(p){const g=t.parseRtpMap(p),y=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(g.parameters=y.length?t.parseFmtp(y[0]):{},g.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),s.codecs.push(g),g.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(g.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(h=>{s.headerExtensions.push(t.parseExtmap(h))});const u=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return s.codecs.forEach(h=>{u.forEach(d=>{h.rtcpFeedback.find(g=>g.type===d.type&&g.parameter===d.parameter)||h.rtcpFeedback.push(d)})}),s},t.writeRtpDescription=function(n,s){let o="";o+="m="+n+" ",o+=s.codecs.length>0?"9":"0",o+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=s.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(u=>{o+=t.writeRtpMap(u),o+=t.writeFmtp(u),o+=t.writeRtcpFb(u)});let l=0;return s.codecs.forEach(u=>{u.maxptime>l&&(l=u.maxptime)}),l>0&&(o+="a=maxptime:"+l+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(u=>{o+=t.writeExtmap(u)}),o},t.parseRtpEncodingParameters=function(n){const s=[],o=t.parseRtpParameters(n),l=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,h=t.matchPrefix(n,"a=ssrc:").map(S=>t.parseSsrcMedia(S)).filter(S=>S.attribute==="cname"),d=h.length>0&&h[0].ssrc;let p;const g=t.matchPrefix(n,"a=ssrc-group:FID").map(S=>S.substring(17).split(" ").map(C=>parseInt(C,10)));g.length>0&&g[0].length>1&&g[0][0]===d&&(p=g[0][1]),o.codecs.forEach(S=>{if(S.name.toUpperCase()==="RTX"&&S.parameters.apt){let b={ssrc:d,codecPayloadType:parseInt(S.parameters.apt,10)};d&&p&&(b.rtx={ssrc:p}),s.push(b),l&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:d,mechanism:u?"red+ulpfec":"red"},s.push(b))}}),s.length===0&&d&&s.push({ssrc:d});let y=t.matchPrefix(n,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substring(5),10)*1e3*.95-2e3*8:y=void 0,s.forEach(S=>{S.maxBitrate=y})),s},t.parseRtcpParameters=function(n){const s={},o=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];o&&(s.cname=o.value,s.ssrc=o.ssrc);const l=t.matchPrefix(n,"a=rtcp-rsize");s.reducedSize=l.length>0,s.compound=l.length===0;const u=t.matchPrefix(n,"a=rtcp-mux");return s.mux=u.length>0,s},t.writeRtcpParameters=function(n){let s="";return n.reducedSize&&(s+=`a=rtcp-rsize\r
`),n.mux&&(s+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(s+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),s},t.parseMsid=function(n){let s;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return s=o[0].substring(7).split(" "),{stream:s[0],track:s[1]};const l=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(l.length>0)return s=l[0].value.split(" "),{stream:s[0],track:s[1]}},t.parseSctpDescription=function(n){const s=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let l;o.length>0&&(l=parseInt(o[0].substring(19),10)),isNaN(l)&&(l=65536);const u=t.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:s.fmt,maxMessageSize:l};const h=t.matchPrefix(n,"a=sctpmap:");if(h.length>0){const d=h[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:l}}},t.writeSctpDescription=function(n,s){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&o.push("a=max-message-size:"+s.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,s,o){let l;const u=s!==void 0?s:2;return n?l=n:l=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+l+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,s){const o=t.splitLines(n);for(let l=0;l<o.length;l++)switch(o[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[l].substring(2)}return s?t.getDirection(s):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const s=t.splitLines(n);for(let o=0;o<s.length;o++)if(s[o].length<2||s[o].charAt(1)!=="=")return!1;return!0},r.exports=t})(Yh)),Yh.exports}var R_=AE();const dr=Va(R_),TE=K1({__proto__:null,default:dr},[R_]);function Dl(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const t=r.RTCIceCandidate;r.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const o=new t(s),l=dr.parseCandidate(s.candidate);for(const u in l)u in o||Object.defineProperty(o,u,{value:l[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(s)},r.RTCIceCandidate.prototype=t.prototype,xs(r,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new r.RTCIceCandidate(n.candidate),writable:"false"}),n))}function yf(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||xs(r,"icecandidate",t=>{if(t.candidate){const n=dr.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Ol(r,t){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const d=dr.splitSections(h.sdp);return d.shift(),d.some(p=>{const g=dr.parseMLine(p);return g&&g.kind==="application"&&g.protocol.indexOf("SCTP")!==-1})},s=function(h){const d=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const p=parseInt(d[1],10);return p!==p?-1:p},o=function(h){let d=65536;return t.browser==="firefox"&&(t.version<57?h===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},l=function(h,d){let p=65536;t.browser==="firefox"&&t.version===57&&(p=65535);const g=dr.matchPrefix(h.sdp,"a=max-message-size:");return g.length>0?p=parseInt(g[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(p=2147483637),p},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=s(arguments[0]),p=o(d),g=l(arguments[0],d);let y;p===0&&g===0?y=Number.POSITIVE_INFINITY:p===0||g===0?y=Math.max(p,g):y=Math.min(p,g);const S={};Object.defineProperty(S,"maxMessageSize",{get(){return y}}),this._sctp=S}return u.apply(this,arguments)}}function zl(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function t(s,o){const l=s.send;s.send=function(){const h=arguments[0],d=h.length||h.size||h.byteLength;if(s.readyState==="open"&&o.sctp&&d>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return l.apply(s,arguments)}}const n=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},xs(r,"datachannel",s=>(t(s.channel,s.target),s))}function xf(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const t=r.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const s=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const l=o.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const u=new Event("connectionstatechange",o);l.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function _f(r,t){if(!r.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&o instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:o.type,sdp:l}):o.sdp=l}return n.apply(this,arguments)}}function Ul(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Nl(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const EE=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:_f,shimAddIceCandidateNullOrEmpty:Ul,shimConnectionState:xf,shimMaxMessageSize:Ol,shimParameterlessSetLocalDescription:Nl,shimRTCIceCandidate:Dl,shimRTCIceCandidateRelayProtocol:yf,shimSendThrowTypeError:zl},Symbol.toStringTag,{value:"Module"}));function wE({window:r}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=t_,s=SE(r),o={browserDetails:s,commonShim:EE,extractVersion:Da,disableLog:bE,disableWarnings:vE,sdp:TE};switch(s.browser){case"chrome":if(!yy||!mf||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(s.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=yy,Ul(r,s),Nl(r),n_(r,s),i_(r),mf(r,s),s_(r),l_(r,s),r_(r),a_(r),c_(r,s),Dl(r),yf(r),xf(r),Ol(r,s),zl(r),_f(r,s);break;case"firefox":if(!xy||!gf||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=xy,Ul(r,s),Nl(r),u_(r,s),gf(r,s),h_(r),p_(r),f_(r),d_(r),m_(r),g_(r),y_(r),x_(r),__(r),Dl(r),xf(r),Ol(r,s),zl(r);break;case"safari":if(!_y||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=_y,Ul(r,s),Nl(r),T_(r),w_(r),S_(r),b_(r),v_(r),E_(r),C_(r),M_(r),Dl(r),yf(r),Ol(r,s),zl(r),_f(r,s);break;default:n("Unsupported browser!");break}return o}const vy=wE({window:typeof window>"u"?void 0:window});function _s(r,t,n,s){Object.defineProperty(r,t,{get:n,set:s,enumerable:!0,configurable:!0})}class k_{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],s=t.byteLength,o=Math.ceil(s/this.chunkedMTU);let l=0,u=0;for(;u<s;){const h=Math.min(s,u+this.chunkedMTU),d=t.slice(u,h),p={__peerData:this._dataCount,n:l,data:d,total:o};n.push(p),u=h,l++}return this._dataCount++,n}}}function ME(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r)n.set(o,s),s+=o.byteLength;return n}const Xh=vy.default||vy,Ta=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Xh.browserDetails.browser}getVersion(){return Xh.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),t=Xh.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,s=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),s=!0}catch{}finally{n&&n.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},RE=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),B_=()=>Math.random().toString(36).slice(2),Sy={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class kE extends k_{noop(){}blobToArrayBuffer(t,n){const s=new FileReader;return s.onload=function(o){o.target&&n(o.target.result)},s.readAsArrayBuffer(t),s}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Sy,this.browser=Ta.getBrowser(),this.browserVersion=Ta.getVersion(),this.pack=Zx,this.unpack=Wx,this.supports=(function(){const n={browser:Ta.isBrowserSupported(),webRTC:Ta.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let s;try{s=new RTCPeerConnection(Sy),n.audioVideo=!0;let o;try{o=s.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!Ta.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{s&&s.close()}return n})(),this.validateId=RE,this.randomToken=B_}}const Je=new kE,BE="PeerJS: ";class DE{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const s=[BE,...n];for(const o in s)s[o]instanceof Error&&(s[o]="("+s[o].name+") "+s[o].message);t>=3?console.log(...s):t>=2?console.warn("WARNING",...s):t>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var dt=new DE,Lf={},OE=Object.prototype.hasOwnProperty,Ye="~";function Xa(){}Object.create&&(Xa.prototype=Object.create(null),new Xa().__proto__||(Ye=!1));function zE(r,t,n){this.fn=r,this.context=t,this.once=n||!1}function D_(r,t,n,s,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var l=new zE(n,s||r,o),u=Ye?Ye+t:t;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],l]:r._events[u].push(l):(r._events[u]=l,r._eventsCount++),r}function Ll(r,t){--r._eventsCount===0?r._events=new Xa:delete r._events[t]}function Ge(){this._events=new Xa,this._eventsCount=0}Ge.prototype.eventNames=function(){var t=[],n,s;if(this._eventsCount===0)return t;for(s in n=this._events)OE.call(n,s)&&t.push(Ye?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Ge.prototype.listeners=function(t){var n=Ye?Ye+t:t,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var o=0,l=s.length,u=new Array(l);o<l;o++)u[o]=s[o].fn;return u};Ge.prototype.listenerCount=function(t){var n=Ye?Ye+t:t,s=this._events[n];return s?s.fn?1:s.length:0};Ge.prototype.emit=function(t,n,s,o,l,u){var h=Ye?Ye+t:t;if(!this._events[h])return!1;var d=this._events[h],p=arguments.length,g,y;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),p){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,s),!0;case 4:return d.fn.call(d.context,n,s,o),!0;case 5:return d.fn.call(d.context,n,s,o,l),!0;case 6:return d.fn.call(d.context,n,s,o,l,u),!0}for(y=1,g=new Array(p-1);y<p;y++)g[y-1]=arguments[y];d.fn.apply(d.context,g)}else{var S=d.length,b;for(y=0;y<S;y++)switch(d[y].once&&this.removeListener(t,d[y].fn,void 0,!0),p){case 1:d[y].fn.call(d[y].context);break;case 2:d[y].fn.call(d[y].context,n);break;case 3:d[y].fn.call(d[y].context,n,s);break;case 4:d[y].fn.call(d[y].context,n,s,o);break;default:if(!g)for(b=1,g=new Array(p-1);b<p;b++)g[b-1]=arguments[b];d[y].fn.apply(d[y].context,g)}}return!0};Ge.prototype.on=function(t,n,s){return D_(this,t,n,s,!1)};Ge.prototype.once=function(t,n,s){return D_(this,t,n,s,!0)};Ge.prototype.removeListener=function(t,n,s,o){var l=Ye?Ye+t:t;if(!this._events[l])return this;if(!n)return Ll(this,l),this;var u=this._events[l];if(u.fn)u.fn===n&&(!o||u.once)&&(!s||u.context===s)&&Ll(this,l);else{for(var h=0,d=[],p=u.length;h<p;h++)(u[h].fn!==n||o&&!u[h].once||s&&u[h].context!==s)&&d.push(u[h]);d.length?this._events[l]=d.length===1?d[0]:d:Ll(this,l)}return this};Ge.prototype.removeAllListeners=function(t){var n;return t?(n=Ye?Ye+t:t,this._events[n]&&Ll(this,n)):(this._events=new Xa,this._eventsCount=0),this};Ge.prototype.off=Ge.prototype.removeListener;Ge.prototype.addListener=Ge.prototype.on;Ge.prefixed=Ye;Ge.EventEmitter=Ge;Lf=Ge;var bs={};_s(bs,"ConnectionType",()=>Hi);_s(bs,"PeerErrorType",()=>be);_s(bs,"BaseConnectionErrorType",()=>bf);_s(bs,"DataConnectionErrorType",()=>Pf);_s(bs,"SerializationType",()=>Zl);_s(bs,"SocketEventType",()=>Ii);_s(bs,"ServerMessageType",()=>Pe);var Hi=(function(r){return r.Data="data",r.Media="media",r})({}),be=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),bf=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),Pf=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Zl=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),Ii=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),Pe=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const O_="1.5.5";class UE extends Lf.EventEmitter{constructor(t,n,s,o,l,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const h=t?"wss://":"ws://";this._baseUrl=h+n+":"+s+o+"peerjs?key="+l}start(t,n){this._id=t;const s=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+O_),this._disconnected=!1,this._socket.onmessage=o=>{let l;try{l=JSON.parse(o.data),dt.log("Server message received:",l)}catch{dt.log("Invalid server message",o.data);return}this.emit(Ii.Message,l)},this._socket.onclose=o=>{this._disconnected||(dt.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Ii.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),dt.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){dt.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Pe.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ii.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class z_{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Hi.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const s=this.connection,o={ordered:!!t.reliable},l=n.createDataChannel(s.label,o);s._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){dt.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,s=this.connection.connectionId,o=this.connection.type,l=this.connection.provider;dt.log("Listening for ICE candidates."),t.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(dt.log(`Received ICE candidates for ${n}:`,u.candidate),l.socket.send({type:Pe.Candidate,payload:{candidate:u.candidate,type:o,connectionId:s},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":dt.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(bf.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":dt.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(bf.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":dt.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},dt.log("Listening for data channel"),t.ondatachannel=u=>{dt.log("Received data channel");const h=u.channel;l.getConnection(n,s)._initializeDataChannel(h)},dt.log("Listening for remote stream"),t.ontrack=u=>{dt.log("Received remote stream");const h=u.streams[0],d=l.getConnection(n,s);if(d.type===Hi.Media){const p=d;this._addStreamToMediaConnection(h,p)}}}cleanup(){dt.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let s=!1;const o=this.connection.dataChannel;o&&(s=!!o.readyState&&o.readyState!=="closed"),(n||s)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createOffer(this.connection.options.constraints);dt.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),dt.log("Set localDescription:",s,`for:${this.connection.peer}`);let o={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Hi.Data){const l=this.connection;o={...o,label:l.label,reliable:l.reliable,serialization:l.serialization}}n.socket.send({type:Pe.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(be.WebRTC,o),dt.log("Failed to setLocalDescription, ",o))}}catch(s){n.emitError(be.WebRTC,s),dt.log("Failed to createOffer, ",s)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createAnswer();dt.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),dt.log("Set localDescription:",s,`for:${this.connection.peer}`),n.socket.send({type:Pe.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(be.WebRTC,o),dt.log("Failed to setLocalDescription, ",o)}}catch(s){n.emitError(be.WebRTC,s),dt.log("Failed to create answer, ",s)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const s=this.connection.peerConnection,o=this.connection.provider;dt.log("Setting remote description",n);const l=this;try{await s.setRemoteDescription(n),dt.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await l._makeAnswer()}catch(u){o.emitError(be.WebRTC,u),dt.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(t){dt.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),dt.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(be.WebRTC,n),dt.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(dt.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return dt.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(s=>{n.addTrack(s,t)})}_addStreamToMediaConnection(t,n){dt.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class U_ extends Lf.EventEmitter{emitError(t,n){dt.error("Error:",n),this.emit("error",new NE(`${t}`,n))}}class NE extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class N_ extends U_{get open(){return this._open}constructor(t,n,s){super(),this.peer=t,this.provider=n,this.options=s,this._open=!1,this.metadata=s.metadata}}class Yl extends N_{static#t=this.ID_PREFIX="mc_";get type(){return Hi.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,s){super(t,n,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Yl.ID_PREFIX+Je.randomToken(),this._negotiator=new z_(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{dt.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{dt.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){dt.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,s=t.payload;switch(t.type){case Pe.Answer:this._negotiator.handleSDP(n,s.sdp),this._open=!0;break;case Pe.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:dt.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){dt.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const s=this.provider._getMessages(this.connectionId);for(const o of s)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class LE{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:s,port:o,path:l,key:u}=this._options,h=new URL(`${n}://${s}:${o}${l}${u}/${t}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",O_),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){dt.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Je.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Je.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw dt.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Xl extends N_{static#t=this.ID_PREFIX="dc_";static#e=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Hi.Data}constructor(t,n,s){super(t,n,s),this.connectionId=this.options.connectionId||Xl.ID_PREFIX+B_(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new z_(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{dt.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{dt.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{dt.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Pf.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Pe.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Pe.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:dt.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class jf extends Xl{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Xl.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return dt.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Vh extends jf{close(t){super.close(t),this._chunkedData={}}constructor(t,n,s){super(t,n,s),this.chunker=new k_,this.serialization=Zl.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=Wx(t),s=n.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,s=this._chunkedData[n]||{data:[],count:0,total:t.total};if(s.data[t.n]=new Uint8Array(t.data),s.count++,this._chunkedData[n]=s,s.total===s.count){delete this._chunkedData[n];const o=ME(s.data);this._handleDataMessage({data:o})}}_send(t,n){const s=Zx(t);if(s instanceof Promise)return this._send_blob(s);if(!n&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);dt.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const s of n)this.send(s,!0)}}class PE extends jf{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Zl.None}}class jE extends jf{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),s=n.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const s=this.encoder.encode(this.stringify(t));if(s.byteLength>=Je.chunkedMTU){this.emitError(Pf.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...t){super(...t),this.serialization=Zl.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Gf extends U_{static#t=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,s]of this._connections)t[n]=s;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:PE,json:jE,binary:Vh,"binary-utf8":Vh,default:Vh},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(t&&t.constructor==Object?n=t:t&&(s=t.toString()),n={debug:0,host:Je.CLOUD_HOST,port:Je.CLOUD_PORT,path:"/",key:Gf.DEFAULT_KEY,token:Je.randomToken(),config:Je.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Je.CLOUD_HOST?this._options.secure=Je.isSecure():this._options.host==Je.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&dt.setLogFunction(this._options.logFunction),dt.logLevel=this._options.debug||0,this._api=new LE(n),this._socket=this._createServerConnection(),!Je.supports.audioVideo&&!Je.supports.data){this._delayedAbort(be.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!Je.validateId(s)){this._delayedAbort(be.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(be.ServerError,o))}_createServerConnection(){const t=new UE(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ii.Message,n=>{this._handleMessage(n)}),t.on(Ii.Error,n=>{this._abort(be.SocketError,n)}),t.on(Ii.Disconnected,()=>{this.disconnected||(this.emitError(be.Network,"Lost connection to server."),this.disconnect())}),t.on(Ii.Close,()=>{this.disconnected||this._abort(be.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,s=t.payload,o=t.src;switch(n){case Pe.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Pe.Error:this._abort(be.ServerError,s.msg);break;case Pe.IdTaken:this._abort(be.UnavailableID,`ID "${this.id}" is taken`);break;case Pe.InvalidKey:this._abort(be.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Pe.Leave:dt.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case Pe.Expire:this.emitError(be.PeerUnavailable,`Could not connect to peer ${o}`);break;case Pe.Offer:{const l=s.connectionId;let u=this.getConnection(o,l);if(u&&(u.close(),dt.warn(`Offer received for existing Connection ID:${l}`)),s.type===Hi.Media){const d=new Yl(o,this,{connectionId:l,_payload:s,metadata:s.metadata});u=d,this._addConnection(o,u),this.emit("call",d)}else if(s.type===Hi.Data){const d=new this._serializers[s.serialization](o,this,{connectionId:l,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});u=d,this._addConnection(o,u),this.emit("connection",d)}else{dt.warn(`Received malformed connection type:${s.type}`);return}const h=this._getMessages(l);for(const d of h)u.handleMessage(d);break}default:{if(!s){dt.warn(`You received a malformed message from ${o} of type ${n}`);return}const l=s.connectionId,u=this.getConnection(o,l);u&&u.peerConnection?u.handleMessage(t):l?this._storeMessage(l,t):dt.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){dt.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(be.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,s),s}call(t,n,s={}){if(this.disconnected){dt.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(be.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){dt.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Yl(t,this,{...s,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){dt.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const s=this._connections.get(t);if(!s)return null;for(const o of s)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){dt.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(dt.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const s of n)s.close()}disconnect(){if(this.disconnected)return;const t=this.id;dt.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)dt.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)dt.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(be.ServerError,n))}}class GE{peer=null;connections=[];hostConnection=null;constructor(){}initialize(t){return new Promise((n,s)=>{this.peer=new Gf(t),this.peer.on("open",o=>{console.log("My Peer ID is: "+o),n(o)}),this.peer.on("connection",o=>{this.handleConnection(o)}),this.peer.on("error",o=>{console.error(o),s(o)})})}connectToHost(t){if(!this.peer)return;const n=this.peer.connect(t);this.hostConnection=n,n.on("open",()=>{console.log("Connected to host"),n.send({type:"REQUEST_STATE"})}),n.on("data",s=>{this.handleData(s,n)})}handleConnection(t){this.connections.push(t),t.on("data",n=>{this.handleData(n,t)}),t.on("close",()=>{this.connections=this.connections.filter(n=>n!==t)})}handleData(t,n){const s=W.getState();switch(console.log("Received data:",t),t.type){case"SYNC_STATE":s.syncState(t.payload);break;case"REQUEST_STATE":s.isHost&&n.send({type:"SYNC_STATE",payload:{tokens:s.tokens,map:s.map,chat:s.chat}});break;case"ACTION":this.applyAction(t.action,t.payload),s.isHost&&this.broadcast({type:"ACTION",action:t.action,payload:t.payload},n.peer);break}}applyAction(t,n){const s=W.getState();switch(t){case"ADD_TOKEN":s.addToken(n);break;case"UPDATE_TOKEN":s.updateToken(n.id,n.data);break;case"ADD_CHAT":s.addChatMessage(n);break;case"UPDATE_MAP":s.updateMap({url:n.url});break}}broadcast(t,n){this.connections.forEach(s=>{s.peer!==n&&s.send(t)})}sendAction(t,n){this.applyAction(t,n);const s={type:"ACTION",action:t,payload:n};this.hostConnection?this.hostConnection.send(s):this.broadcast(s)}}const Mt=new GE;function IE(r,t,n,s){const o=r.x,l=r.y,u=t.x-r.x,h=t.y-r.y,d=n.x,p=n.y,g=s.x-n.x,y=s.y-n.y,S=u*y-h*g;if(S===0)return null;const C=((d-o)*y-(p-l)*g)/S,w=((d-o)*h-(p-l)*u)/S;return C>0&&w>=0&&w<=1?{x:o+u*C,y:l+h*C,param:C}:null}const HE=({onEditToken:r})=>{const t=Tt.useRef(null),n=Tt.useRef(null),s=W(M=>M.map),o=W(M=>M.drawings),l=W(M=>M.walls),u=W(M=>M.tokens),h=W(M=>M.pings),d=W(M=>M.myId),p=W(M=>M.isHost),g=Tt.useRef(new Le),y=Tt.useRef(new Le),S=Tt.useRef(new Le),b=Tt.useRef(new Le),C=Tt.useRef(new Le),E=Tt.useRef(new Le),w=Tt.useRef(new Le),k=Tt.useRef(new Le),U=Tt.useRef(null);return Tt.useEffect(()=>t.current?((async()=>{const O=new Sx;await O.init({resizeTo:t.current,backgroundColor:1710618,antialias:!0}),t.current.appendChild(O.canvas),n.current=O,O.stage.addChild(g.current),g.current.addChild(y.current),g.current.addChild(E.current),g.current.addChild(b.current),g.current.addChild(S.current),g.current.addChild(C.current),g.current.addChild(w.current),g.current.addChild(k.current);let I=!1,Q=!1,H=!1,st={x:0,y:0},K={x:0,y:0},J=[],it=[];O.canvas.addEventListener("mousedown",rt=>{const yt=O.canvas.getBoundingClientRect(),ht=rt.clientX-yt.left,St=rt.clientY-yt.top,B=(ht-g.current.position.x)/g.current.scale.x,L=(St-g.current.position.y)/g.current.scale.y;if(rt.shiftKey&&W.getState().isHost)Q=!0,K={x:B,y:L};else if(rt.altKey)rt.button===0?it=[{x:B,y:L},{x:B,y:L}]:rt.button===2&&it.length>0&&(it[it.length-1]={x:B,y:L},it.push({x:B,y:L}));else if(rt.button===1||rt.button===0&&rt.ctrlKey){const at=Date.now().toString(),lt={id:at,x:B,y:L,color:W.getState().toolColor||"#ffff00"};W.getState().addPing(lt),Mt.sendAction("SYNC_STATE",{pings:W.getState().pings}),setTimeout(()=>{W.getState().removePing(at),Mt.sendAction("SYNC_STATE",{pings:W.getState().pings})},3e3),I=!0,st={x:rt.clientX,y:rt.clientY}}else if(rt.button===0&&W.getState().activeTool==="draw")H=!0,J=[{x:B,y:L}];else if(rt.button===0&&["circle","cone","cube"].includes(W.getState().activeTool)){H=!0;const at=Math.round(B/W.getState().map.scale)*W.getState().map.scale,lt=Math.round(L/W.getState().map.scale)*W.getState().map.scale;J=[{x:at,y:lt},{x:B,y:L}]}else if(rt.button===0&&(W.getState().activeTool==="wall"||W.getState().activeTool==="door"))H=!0,J=[{x:B,y:L},{x:B,y:L}];else if(rt.button===0&&W.getState().activeTool==="pan"&&W.getState().isHost){let at=!1;const lt=W.getState().walls;for(const ct of lt)if(ct.isDoor){const D=Math.pow(ct.p1.x-ct.p2.x,2)+Math.pow(ct.p1.y-ct.p2.y,2);if(D===0)continue;const V=Math.max(0,Math.min(1,((B-ct.p1.x)*(ct.p2.x-ct.p1.x)+(L-ct.p1.y)*(ct.p2.y-ct.p1.y))/D)),ot={x:ct.p1.x+V*(ct.p2.x-ct.p1.x),y:ct.p1.y+V*(ct.p2.y-ct.p1.y)};if(Math.sqrt(Math.pow(B-ot.x,2)+Math.pow(L-ot.y,2))<15/W.getState().map.scale){W.getState().toggleWallDoor(ct.id),Mt.sendAction("SYNC_STATE",{walls:W.getState().walls}),at=!0;break}}at||(I=!0,st={x:rt.clientX,y:rt.clientY})}else rt.button===0&&W.getState().activeTool==="pan"&&(I=!0,st={x:rt.clientX,y:rt.clientY})}),window.addEventListener("mouseup",rt=>{I=!1;const yt=O.canvas.getBoundingClientRect(),ht=(rt.clientX-yt.left-g.current.position.x)/g.current.scale.x,St=(rt.clientY-yt.top-g.current.position.y)/g.current.scale.y;if(Q){Q=!1,k.current.removeChildren();const B=ht-K.x,L=St-K.y,at=Math.sqrt(B*B+L*L);at>5&&(Mt.sendAction("SYNC_STATE",{map:{...W.getState().map,revealedAreas:[...W.getState().map.revealedAreas,{x:K.x,y:K.y,radius:at}]}}),W.getState().revealArea(K.x,K.y,at))}else if(it.length>0&&!rt.altKey)it=[],k.current.removeChildren();else if(H){H=!1;const B=W.getState().activeTool;if((B==="wall"||B==="door")&&J.length>1){const L=J[0],at=J[1];if(Math.sqrt(Math.pow(at.x-L.x,2)+Math.pow(at.y-L.y,2))>5){const ct={id:Date.now().toString(),p1:L,p2:at,isDoor:B==="door",isOpen:!1};W.getState().addWall(ct),Mt.sendAction("SYNC_STATE",{walls:W.getState().walls})}}else if(J.length>1){const L={id:Date.now().toString(),type:B==="draw"?"freehand":B,color:W.getState().toolColor||"#ffffff",thickness:W.getState().toolThickness||3,points:J};W.getState().addDrawing(L),Mt.sendAction("SYNC_STATE",{drawings:W.getState().drawings})}J=[]}}),window.addEventListener("mousemove",rt=>{const yt=O.canvas.getBoundingClientRect(),ht=(rt.clientX-yt.left-g.current.position.x)/g.current.scale.x,St=(rt.clientY-yt.top-g.current.position.y)/g.current.scale.y;if(I){const B=rt.clientX-st.x,L=rt.clientY-st.y;g.current.position.x+=B,g.current.position.y+=L,st={x:rt.clientX,y:rt.clientY}}else if(Q){const B=ht-K.x,L=St-K.y,at=Math.sqrt(B*B+L*L);k.current.removeChildren();const lt=new Te;lt.circle(K.x,K.y,at),lt.fill({color:16777215,alpha:.3}),lt.stroke({width:2,color:16776960}),k.current.addChild(lt)}else if(it.length>0){it[it.length-1]={x:ht,y:St},k.current.removeChildren();const B=new Te;B.stroke({width:4,color:16755200,alpha:.8});let L=0;B.moveTo(it[0].x,it[0].y);for(let at=1;at<it.length;at++){const lt=it[at-1],ct=it[at];B.lineTo(ct.x,ct.y);const D=ct.x-lt.x,V=ct.y-lt.y,ot=Math.sqrt(D*D+V*V),ut=Math.round(ot/W.getState().map.scale*5);if(L+=ut,at===it.length-1){const gt=new hE({text:`${L} ft`,style:new _r({fontFamily:"Arial",fontSize:24,fill:16777215,stroke:{color:0,width:4}})});gt.anchor.set(.5),gt.x=ct.x+20,gt.y=ct.y-20,k.current.addChild(gt)}else B.circle(ct.x,ct.y,4).fill(16777215)}k.current.addChild(B)}else if(H&&J.length>0){const B=W.getState().activeTool;if(B==="draw"){J.push({x:ht,y:St});const L=new Te;L.moveTo(J[0].x,J[0].y);for(let at=1;at<J.length;at++)L.lineTo(J[at].x,J[at].y);L.stroke({width:W.getState().toolThickness||3,color:W.getState().toolColor||"#ffffff"}),k.current.removeChildren(),k.current.addChild(L)}else if(["circle","cone","cube"].includes(B)){J[1]={x:ht,y:St};const L=J[0],at=ht-L.x,lt=St-L.y,ct=Math.sqrt(at*at+lt*lt),D=new Te;if(D.fill({color:W.getState().toolColor,alpha:.3}),D.stroke({width:W.getState().toolThickness,color:W.getState().toolColor}),B==="circle")D.circle(L.x,L.y,ct);else if(B==="cube")D.rect(L.x-ct,L.y-ct,ct*2,ct*2);else if(B==="cone"){const V=Math.atan2(lt,at),ot=53.1/2*(Math.PI/180),ut={x:L.x+Math.cos(V-ot)*ct,y:L.y+Math.sin(V-ot)*ct},gt={x:L.x+Math.cos(V+ot)*ct,y:L.y+Math.sin(V+ot)*ct};D.moveTo(L.x,L.y),D.lineTo(ut.x,ut.y),D.lineTo(gt.x,gt.y),D.lineTo(L.x,L.y)}k.current.removeChildren(),k.current.addChild(D)}else if(B==="wall"||B==="door"){J[1]={x:ht,y:St};const L=new Te;L.moveTo(J[0].x,J[0].y),L.lineTo(J[1].x,J[1].y),L.stroke({width:5,color:B==="door"?16755200:65535,alpha:.8}),k.current.removeChildren(),k.current.addChild(L)}}}),O.canvas.addEventListener("contextmenu",rt=>{rt.preventDefault()}),window.addEventListener("keyup",rt=>{rt.key==="Alt"&&it.length>0&&(it=[],k.current.removeChildren())}),O.canvas.addEventListener("wheel",rt=>{rt.preventDefault();const yt=1.1,ht=rt.deltaY<0?g.current.scale.x*yt:g.current.scale.x/yt;ht>.1&&ht<5&&g.current.scale.set(ht)})})(),()=>{n.current?.destroy({removeView:!0})}):void 0,[]),Tt.useEffect(()=>{(async()=>{if(!(!s.url||!n.current))try{const O=await Ba.load(s.url);U.current&&g.current.removeChild(U.current);const I=new yr(O);U.current=I,g.current.addChildAt(I,0)}catch(O){console.error("Failed to load map bg",O)}})()},[s.url]),Tt.useEffect(()=>{y.current.removeChildren(),u.forEach(M=>{if(M.hidden&&!p)return;const O=new Te;if(O.circle(0,0,s.scale/2-2),O.fill(16711680),O.stroke({width:2,color:16777215}),M.hidden&&(O.alpha=.5),O.position.set(M.x*s.scale+s.scale/2,M.y*s.scale+s.scale/2),M.stats&&M.stats.maxHp>0){const st=s.scale*.8,K=4,J=Math.max(0,Math.min(1,M.stats.hp/M.stats.maxHp)),it=new Te;it.rect(-st/2,-s.scale/2-8,st,K),it.fill(16711680);const rt=new Te;rt.rect(-st/2,-s.scale/2-8,st*J,K),rt.fill(65280),O.addChild(it),O.addChild(rt)}if(M.conditions&&M.conditions.length>0){const K=-Math.PI/4,J={poisoned:65280,prone:16776960,stunned:65535,invisible:11189196};M.conditions.forEach((it,rt)=>{const yt=K+rt*Math.PI/4,ht=s.scale/2-2,St=Math.cos(yt)*ht,B=Math.sin(yt)*ht,L=new Te;L.circle(St,B,4),L.fill(J[it.toLowerCase()]||16777215),L.stroke({width:1,color:0}),O.addChild(L)})}O.eventMode="static",O.cursor="pointer";let I=null,Q={x:0,y:0},H=0;(p||M.ownerId===d)&&(O.on("pointerdown",st=>{if(st.button===0){const K=Date.now();K-H<300&&r&&r(M.id),H=K,I=st,O.alpha=M.hidden?.3:.5,Q={x:O.x,y:O.y},st.stopPropagation()}}),O.on("rightclick",st=>{p&&(st.stopPropagation(),setTimeout(()=>{confirm(`Manage Token?
OK: Toggle Visibility (Current: ${M.hidden?"Hidden":"Visible"})
Cancel: Delete Token`)&&Mt.sendAction("UPDATE_TOKEN",{id:M.id,data:{hidden:!M.hidden}})},10))}),O.on("rightclick",st=>{p&&(st.stopPropagation(),st.preventDefault(),Mt.sendAction("UPDATE_TOKEN",{id:M.id,data:{hidden:!M.hidden}}))}),O.on("pointermove",st=>{if(I){const K=st.getLocalPosition(O.parent);O.position.set(K.x,K.y)}}),O.on("pointerup",()=>{if(I){I=null,O.alpha=M.hidden?.5:1;const st=Math.floor(O.x/s.scale),K=Math.floor(O.y/s.scale);Mt.sendAction("UPDATE_TOKEN",{id:M.id,data:{x:st,y:K}})}}),O.on("pointerupoutside",()=>{I=null,O.alpha=M.hidden?.5:1,O.position.set(Q.x,Q.y)})),y.current.addChild(O)})},[u,s.scale,p,d,s.url]),Tt.useEffect(()=>{if(S.current.removeChildren(),!s.fogEnabled){S.current.visible=!1;return}S.current.visible=!0;const M=new Te;M.rect(-1e4,-1e4,2e4,2e4),s.revealedAreas.forEach(O=>{M.circle(O.x,O.y,O.radius),M.cut()}),M.fill({color:0,alpha:.95}),S.current.addChild(M)},[s.fogEnabled,s.revealedAreas]),Tt.useEffect(()=>{C.current.removeChildren(),p&&l.forEach(M=>{const O=new Te;O.moveTo(M.p1.x,M.p1.y),O.lineTo(M.p2.x,M.p2.y);let I=65535;const Q=.5;let H=4;M.isDoor&&(I=M.isOpen?65280:16755200,H=M.isOpen?2:6),O.stroke({width:H,color:I,alpha:Q}),C.current.addChild(O)})},[l,p]),Tt.useEffect(()=>{if(b.current.removeChildren(),!s.dynamicLightingEnabled){b.current.visible=!1;return}b.current.visible=!0;const M=new Te;M.rect(-1e4,-1e4,2e4,2e4);const O=p?u:u.filter(I=>I.ownerId===d);if(O.length>0){const I={minX:-5e3,minY:-5e3,maxX:5e3,maxY:5e3},Q=[{id:"b1",p1:{x:I.minX,y:I.minY},p2:{x:I.maxX,y:I.minY}},{id:"b2",p1:{x:I.maxX,y:I.minY},p2:{x:I.maxX,y:I.maxY}},{id:"b3",p1:{x:I.maxX,y:I.maxY},p2:{x:I.minX,y:I.maxY}},{id:"b4",p1:{x:I.minX,y:I.maxY},p2:{x:I.minX,y:I.minY}}],st=[...l.filter(J=>!J.isDoor||!J.isOpen),...Q],K=[];st.forEach(J=>{K.push(J.p1,J.p2)}),O.forEach(J=>{const it=J.x*s.scale+s.scale/2,rt=J.y*s.scale+s.scale/2,yt=[];K.forEach(St=>{const B=Math.atan2(St.y-rt,St.x-it);yt.push(B-1e-5,B,B+1e-5)});const ht=[];if(yt.forEach(St=>{const B=Math.cos(St),L=Math.sin(St),at={p1:{x:it,y:rt},p2:{x:it+B*1e4,y:rt+L*1e4}};let lt=null,ct=1/0;st.forEach(D=>{const V=IE(at.p1,at.p2,D.p1,D.p2);V&&V.param<ct&&(ct=V.param,lt=V)}),lt&&ht.push({x:lt.x,y:lt.y,angle:St})}),ht.sort((St,B)=>St.angle-B.angle),ht.length>0){M.moveTo(ht[0].x,ht[0].y);for(let St=1;St<ht.length;St++)M.lineTo(ht[St].x,ht[St].y);M.lineTo(ht[0].x,ht[0].y),M.cut()}})}M.fill({color:0,alpha:.95}),b.current.addChild(M)},[u,l,s.dynamicLightingEnabled,s.scale,p,d]),Tt.useEffect(()=>{E.current.removeChildren(),o.forEach(M=>{if(M.points.length<2)return;const O=new Te;if(M.type==="freehand"){O.moveTo(M.points[0].x,M.points[0].y);for(let I=1;I<M.points.length;I++)O.lineTo(M.points[I].x,M.points[I].y);O.stroke({color:M.color,width:M.thickness})}else{const I=M.points[0],Q=M.points[1],H=Q.x-I.x,st=Q.y-I.y,K=Math.sqrt(H*H+st*st);if(O.fill({color:M.color,alpha:.3}),O.stroke({width:M.thickness,color:M.color}),M.type==="circle")O.circle(I.x,I.y,K);else if(M.type==="cube")O.rect(I.x-K,I.y-K,K*2,K*2);else if(M.type==="cone"){const J=Math.atan2(st,H),it=53.1/2*(Math.PI/180),rt={x:I.x+Math.cos(J-it)*K,y:I.y+Math.sin(J-it)*K},yt={x:I.x+Math.cos(J+it)*K,y:I.y+Math.sin(J+it)*K};O.moveTo(I.x,I.y),O.lineTo(rt.x,rt.y),O.lineTo(yt.x,yt.y),O.lineTo(I.x,I.y)}}E.current.addChild(O)})},[o]),Tt.useEffect(()=>{w.current.removeChildren(),h.forEach(M=>{const O=new Te;O.circle(M.x,M.y,10),O.fill({color:M.color,alpha:.8}),O.stroke({width:3,color:16777215});const I=new Te;if(I.circle(M.x,M.y,s.scale),I.stroke({width:2,color:M.color,alpha:.5}),w.current.addChild(O),w.current.addChild(I),n.current){let Q=1,H=1;const st=K=>{Q+=.05*K.deltaTime,H-=.02*K.deltaTime,H<=0&&(H=0,n.current&&n.current.ticker.remove(st)),I.scale.set(Q),I.alpha=H};return n.current.ticker.add(st),()=>{n.current&&n.current.ticker.remove(st)}}})},[h,s.scale]),j.jsx("div",{ref:t,className:"w-full h-full"})},Oe=[];for(let r=0;r<256;++r)Oe.push((r+256).toString(16).slice(1));function FE(r,t=0){return(Oe[r[t+0]]+Oe[r[t+1]]+Oe[r[t+2]]+Oe[r[t+3]]+"-"+Oe[r[t+4]]+Oe[r[t+5]]+"-"+Oe[r[t+6]]+Oe[r[t+7]]+"-"+Oe[r[t+8]]+Oe[r[t+9]]+"-"+Oe[r[t+10]]+Oe[r[t+11]]+Oe[r[t+12]]+Oe[r[t+13]]+Oe[r[t+14]]+Oe[r[t+15]]).toLowerCase()}let qh;const YE=new Uint8Array(16);function XE(){if(!qh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");qh=crypto.getRandomValues.bind(crypto)}return qh(YE)}const VE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cy={randomUUID:VE};function qE(r,t,n){r=r||{};const s=r.random??r.rng?.()??XE();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,FE(s)}function Oa(r,t,n){return Cy.randomUUID&&!r?Cy.randomUUID():qE(r)}const L_=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();const $E=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const QE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase());const Ay=r=>{const t=QE(r);return t.charAt(0).toUpperCase()+t.slice(1)};var WE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZE=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const KE=Tt.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:u,...h},d)=>Tt.createElement("svg",{ref:d,...WE,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:L_("lucide",o),...!l&&!ZE(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,g])=>Tt.createElement(p,g)),...Array.isArray(l)?l:[l]]));const Kl=(r,t)=>{const n=Tt.forwardRef(({className:s,...o},l)=>Tt.createElement(KE,{ref:l,iconNode:t,className:L_(`lucide-${$E(Ay(r))}`,`lucide-${r}`,s),...o}));return n.displayName=Ay(r),n};const JE=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],tw=Kl("scroll",JE);const ew=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nw=Kl("send",ew);const iw=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sw=Kl("trash",iw);const rw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aw=Kl("x",rw),Ty=r=>{const t=r.match(/(\d+)d(\d+)([+-]\d+)?/);if(!t)return null;const n=parseInt(t[1]),s=parseInt(t[2]),o=t[3]?parseInt(t[3]):0;let l=0;const u=[];for(let h=0;h<n;h++){const d=Math.floor(Math.random()*s)+1;u.push(d),l+=d}return l+=o,{total:l,rolls:u,mod:o}},ow=()=>{const[r,t]=Tt.useState(""),n=W(p=>p.chat),s=W(p=>p.username),o=W(p=>p.myId),l=Tt.useRef(null),u=()=>{l.current?.scrollIntoView({behavior:"smooth"})};Tt.useEffect(u,[n]);const h=()=>{if(!r.trim())return;let p={id:Oa(),senderId:o,senderName:s,timestamp:Date.now(),content:r,type:"text"};if(r.startsWith("/roll ")){const g=r.replace("/roll ","").trim(),y=Ty(g);y?(p.type="roll",p.rollData={formula:g,result:y.total,details:`[${y.rolls.join(", ")}] ${y.mod?y.mod>0?"+"+y.mod:y.mod:""}`},p.content=`rolled ${g} = ${y.total}`):(p.type="system",p.content="Invalid dice formula. Use format like 1d20+5")}else if(r.startsWith("/init ")){const g=r.replace("/init ","").trim(),y=Ty(g);y?(p.type="roll",p.rollData={formula:g,result:y.total,details:`[${y.rolls.join(", ")}] ${y.mod?y.mod>0?"+"+y.mod:y.mod:""}`},p.content=`rolled initiative ${g} = ${y.total}`,W.getState().addToInitiative(s,y.total),Mt.sendAction("SYNC_STATE",{turnOrder:W.getState().turnOrder})):(p.type="system",p.content="Invalid init formula. Use format /init 1d20+2")}Mt.sendAction("ADD_CHAT",p),t("")},d=p=>{p.key==="Enter"&&h()};return j.jsxs("div",{className:"flex flex-col h-full bg-gray-900 border-l border-gray-700 w-80",children:[j.jsxs("div",{className:"p-3 border-b border-gray-700 bg-gray-800 font-bold text-gray-200 flex items-center gap-2",children:[j.jsx(tw,{size:18})," Chat & Logs"]}),j.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[n.map(p=>j.jsxs("div",{className:`text-sm ${p.type==="system"?"text-yellow-400 italic":""}`,children:[j.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[j.jsx("span",{className:"font-bold text-blue-400",children:p.senderName}),j.jsx("span",{children:new Date(p.timestamp).toLocaleTimeString()})]}),p.type==="roll"?j.jsxs("div",{className:"bg-gray-800 p-2 rounded border border-gray-700",children:[j.jsx("div",{className:"font-mono text-lg font-bold text-green-400",children:p.rollData?.result}),j.jsxs("div",{className:"text-xs text-gray-400",children:[p.rollData?.formula," (",p.rollData?.details,")"]})]}):j.jsx("div",{className:"text-gray-300 break-words",children:p.content})]},p.id)),j.jsx("div",{ref:l})]}),j.jsxs("div",{className:"p-3 bg-gray-800 border-t border-gray-700 flex gap-2",children:[j.jsx("input",{className:"flex-1 bg-gray-900 border border-gray-600 rounded px-2 py-1 text-sm text-white focus:border-blue-500 outline-none",value:r,onChange:p=>t(p.target.value),onKeyDown:d,placeholder:"/roll 1d20 or message..."}),j.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-500 rounded px-3 py-1 flex items-center justify-center text-white",children:j.jsx(nw,{size:16})})]}),j.jsx("div",{className:"grid grid-cols-4 gap-1 p-2 bg-gray-800 border-t border-gray-700",children:["d4","d6","d8","d10","d12","d20","d100"].map(p=>j.jsx("button",{onClick:()=>{t(`/roll 1${p}`),h()},className:"bg-gray-700 hover:bg-gray-600 text-xs py-1 rounded text-gray-300",children:p},p))})]})},lw=()=>{const r=W(l=>l.turnOrder),t=W(l=>l.isHost),n=()=>{W.getState().nextTurn(),Mt.sendAction("SYNC_STATE",{turnOrder:W.getState().turnOrder})},s=()=>{W.getState().clearInitiative(),Mt.sendAction("SYNC_STATE",{turnOrder:[]})},o=l=>{W.getState().removeFromInitiative(l),Mt.sendAction("SYNC_STATE",{turnOrder:W.getState().turnOrder})};return r.length===0?null:j.jsxs("div",{className:"bg-gray-900/90 border border-gray-700 rounded-lg p-3 text-white w-64 shadow-2xl backdrop-blur-sm pointer-events-auto",children:[j.jsxs("h3",{className:"text-sm font-bold border-b border-gray-700 pb-2 mb-2 flex justify-between items-center",children:["Initiative",j.jsxs("div",{className:"flex gap-2",children:[t&&j.jsx("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300",children:"Clear"}),t&&j.jsx("button",{onClick:n,className:"text-xs bg-blue-600 px-2 py-0.5 rounded hover:bg-blue-500",children:"Next"})]})]}),j.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:r.map((l,u)=>j.jsxs("div",{className:`flex items-center gap-2 p-2 rounded text-sm ${u===0?"bg-blue-900/50 border border-blue-500":"bg-gray-800"}`,children:[j.jsx("span",{className:"font-mono text-gray-500 text-xs text-center w-4",children:u+1}),j.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-500 border border-white flex-shrink-0 flex items-center justify-center font-bold text-xs",children:l.name.charAt(0).toUpperCase()}),j.jsx("span",{className:"flex-1 truncate font-bold",children:l.name}),j.jsx("div",{className:"text-xs font-bold text-green-400 bg-gray-900 px-1.5 py-0.5 rounded",children:l.initiative}),t&&j.jsx("button",{onClick:()=>o(l.id),className:"text-gray-500 hover:text-red-400",children:j.jsx(sw,{size:14})})]},l.id))})]})},cw=({tokenId:r,onClose:t})=>{const n=W(E=>E.tokens.find(w=>w.id===r)),[s,o]=Tt.useState(""),[l,u]=Tt.useState(0),[h,d]=Tt.useState(0),[p,g]=Tt.useState(0),[y,S]=Tt.useState([]),b=["Poisoned","Prone","Stunned","Invisible"];Tt.useEffect(()=>{n&&(o(n.label||"Unknown"),u(n.stats?.hp||0),d(n.stats?.maxHp||0),g(n.stats?.ac||10),S(n.conditions||[]))},[n]);const C=()=>{n&&(Mt.sendAction("UPDATE_TOKEN",{id:n.id,data:{label:s,stats:{hp:l,maxHp:h,ac:p},conditions:y}}),t())};return n?j.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:j.jsxs("div",{className:"bg-gray-800 border border-gray-600 p-6 rounded-lg w-96 shadow-2xl",children:[j.jsxs("h2",{className:"text-xl font-bold mb-4 text-purple-400",children:["Edit Token: ",s]}),j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs text-gray-400",children:"Name / Label"}),j.jsx("input",{type:"text",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:s,onChange:E=>o(E.target.value)})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs text-gray-400",children:"Current HP"}),j.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:l,onChange:E=>u(Number(E.target.value))})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs text-gray-400",children:"Max HP"}),j.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:h,onChange:E=>d(Number(E.target.value))})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs text-gray-400",children:"Armour Class (AC)"}),j.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:p,onChange:E=>g(Number(E.target.value))})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Conditions"}),j.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(E=>j.jsxs("label",{className:"flex items-center gap-1 bg-gray-900 px-2 py-1 rounded text-xs select-none cursor-pointer border border-gray-700 hover:border-gray-500",children:[j.jsx("input",{type:"checkbox",checked:y.includes(E),onChange:w=>{w.target.checked?S([...y,E]):S(y.filter(k=>k!==E))},className:"accent-purple-500"}),E]},E))})]})]}),j.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[j.jsx("button",{onClick:t,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"}),j.jsx("button",{onClick:C,className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded font-bold",children:"Save"})]})]})}):null},uw=()=>{const r=W(b=>b.macros),t=W(b=>b.addMacro),n=W(b=>b.removeMacro),s=W(b=>b.myId),o=W(b=>b.username),[l,u]=Tt.useState(!1),[h,d]=Tt.useState(""),[p,g]=Tt.useState(""),y=b=>{if(b.command.startsWith("/roll ")){const C=b.command.replace("/roll ","").trim(),E=C.match(/(\d+)d(\d+)(.*?)([\+\-]\d+)?$/);if(E){const w=parseInt(E[1])||1,k=parseInt(E[2])||20,U=E[4]||"",M=parseInt(U)||0;let O=0;const I=[];for(let K=0;K<w;K++){const J=Math.floor(Math.random()*k)+1;I.push(J),O+=J}const Q=O+M,H={formula:C,result:Q,details:`[${I.join(", ")}] ${U}`},st={id:Oa(),senderId:s,senderName:o,timestamp:Date.now(),content:`${b.label} (${C})`,type:"roll",rollData:H};Mt.sendAction("CHAT_MESSAGE",st),W.getState().addChatMessage(st)}else{const w={id:Oa(),senderId:s,senderName:o,timestamp:Date.now(),content:`[Macro: ${b.label}] ${b.command}`,type:"text"};Mt.sendAction("CHAT_MESSAGE",w),W.getState().addChatMessage(w)}}else{const C={id:Oa(),senderId:s,senderName:o,timestamp:Date.now(),content:`[Macro: ${b.label}] ${b.command}`,type:"text"};Mt.sendAction("CHAT_MESSAGE",C),W.getState().addChatMessage(C)}},S=()=>{!h||!p||(t({id:Oa(),label:h,command:p}),d(""),g(""),u(!1))};return j.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-900 border-t border-gray-700 pointer-events-auto",children:[j.jsx("span",{className:"text-gray-500 text-xs font-bold uppercase mr-2",children:"Macros"}),r.map(b=>j.jsxs("div",{className:"group relative flex items-center",children:[j.jsx("button",{onClick:()=>y(b),className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 text-purple-300 font-mono text-sm rounded border border-gray-600 transition-colors",title:b.command,children:b.label}),j.jsx("button",{onClick:()=>n(b.id),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},b.id)),l?j.jsxs("div",{className:"flex gap-2 items-center bg-gray-800 p-1 rounded border border-gray-600 ml-2",children:[j.jsx("input",{type:"text",placeholder:"Label (e.g. Attack)",className:"bg-gray-900 px-2 py-1 text-xs rounded w-24 text-white",value:h,onChange:b=>d(b.target.value)}),j.jsx("input",{type:"text",placeholder:"Cmd (e.g. /roll 1d20+5)",className:"bg-gray-900 px-2 py-1 text-xs rounded w-32 text-white",value:p,onChange:b=>g(b.target.value)}),j.jsx("button",{onClick:S,className:"text-green-400 hover:text-green-300 px-2 text-xs font-bold",children:""}),j.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-300 px-2 text-xs",children:""})]}):j.jsx("button",{onClick:()=>u(!0),className:"ml-2 w-7 h-7 flex items-center justify-center bg-gray-800 hover:bg-gray-700 border border-gray-600 border-dashed rounded text-gray-400",title:"Add Macro",children:"+"})]})},hw=()=>{const r=W(h=>h.audio),t=W(h=>h.isHost),[n,s]=Tt.useState(""),o=Tt.useRef(null);Tt.useEffect(()=>{if(!o.current)return;const h=o.current;r.url&&r.isPlaying?(h.src!==r.url&&(h.src=r.url),h.play().catch(d=>console.error("Auto-play prevented",d))):(h.pause(),r.url||(h.src=""))},[r]);const l=()=>{n&&(Mt.sendAction("PLAY_AUDIO",{url:n,isPlaying:!0}),W.getState().setAudio(n,!0),s(""))},u=()=>{Mt.sendAction("PLAY_AUDIO",{url:null,isPlaying:!1}),W.getState().setAudio(null,!1)};return t?j.jsxs("div",{className:"mt-4 p-3 bg-gray-900 border border-gray-700 rounded-lg",children:[j.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-2 flex items-center gap-2",children:" Jukebox (Host Controls)"}),j.jsxs("div",{className:"flex flex-col gap-2",children:[j.jsx("input",{type:"text",placeholder:"Audio URL (mp3/wav)",className:"w-full bg-gray-800 border border-gray-600 px-2 py-1 rounded text-xs text-white",value:n,onChange:h=>s(h.target.value)}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("button",{onClick:l,disabled:!n,className:"flex-1 bg-green-700 hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs py-1 rounded font-bold",children:"Play"}),j.jsx("button",{onClick:u,disabled:!r.isPlaying,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs py-1 rounded font-bold",children:"Stop"})]}),j.jsxs("div",{className:"text-[10px] text-gray-500 mt-1 truncate",children:["Now playing: ",r.isPlaying&&r.url?r.url.split("/").pop():"None"]})]}),j.jsx("audio",{ref:o,loop:!0,hidden:!0})]}):j.jsxs("div",{className:"mt-4 p-3 bg-gray-900 border border-gray-700 rounded-lg",children:[j.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-2 flex items-center gap-2",children:" Jukebox"}),j.jsx("div",{className:"text-xs text-gray-400",children:r.isPlaying?"Playing track...":"Stopped"}),j.jsx("audio",{ref:o,loop:!0,hidden:!0})]})},fw=()=>{const r=W(s=>s.handout),t=W(s=>s.isHost);if(!r)return null;const n=()=>{t?(W.getState().setHandout(null),Mt.sendAction("SYNC_STATE",{handout:null})):W.getState().setHandout(null)};return j.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-8 backdrop-blur-sm",children:j.jsxs("div",{className:"relative max-w-full max-h-full",children:[j.jsxs("button",{onClick:n,className:"absolute -top-12 right-0 bg-red-600 hover:bg-red-500 text-white p-2 rounded-full shadow-lg flex items-center gap-2",children:[j.jsx(aw,{size:24})," ",t?"Close for Everyone":"Close"]}),j.jsx("img",{src:r,alt:"Handout",className:"max-w-full max-h-[85vh] object-contain rounded-lg border-4 border-gray-700 shadow-2xl"})]})})};function dw(){const[r,t]=Tt.useState(""),[n,s]=Tt.useState(null),[o,l]=Tt.useState(""),u=W(g=>g.myId),h=W(g=>g.setIdentity);Tt.useEffect(()=>{Mt.initialize().then(g=>{h(g,!0)}).catch(console.error)},[]);const d=()=>{r&&(h(u,!1),Mt.connectToHost(r))},p=()=>{const g={id:Date.now().toString(),x:3,y:3,size:1,image:"",label:"Hero",stats:{hp:20,maxHp:20,ac:14}};Mt.sendAction("ADD_TOKEN",g)};return j.jsxs("div",{className:"flex h-screen w-screen bg-gray-900 text-white overflow-hidden font-sans",children:[j.jsxs("div",{className:"w-64 bg-gray-800 flex flex-col border-r border-gray-700 z-10 shadow-xl",children:[j.jsxs("div",{className:"p-4 border-b border-gray-700",children:[j.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent mb-4",children:"VTT RPG"}),j.jsxs("div",{className:"p-3 bg-gray-700 rounded-lg text-sm",children:[j.jsxs("div",{className:"mb-2",children:[j.jsx("span",{className:"text-gray-400",children:"My ID:"}),j.jsx("code",{className:"block mt-1 p-1 bg-black rounded select-all text-xs break-all cursor-pointer hover:bg-gray-900",title:"Click to Copy",onClick:()=>navigator.clipboard.writeText(u),children:u})]}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("input",{type:"text",placeholder:"Host ID to join...",className:"flex-1 px-2 py-1 bg-gray-900 rounded border border-gray-600 text-xs text-white",value:r,onChange:g=>t(g.target.value)}),j.jsx("button",{onClick:d,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-xs font-bold",children:"Join"})]})]})]}),j.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[j.jsx("h2",{className:"text-xs font-bold uppercase text-gray-500 mb-2",children:"Tools"}),j.jsxs("div",{className:"flex flex-col gap-2",children:[j.jsxs("label",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors cursor-pointer block",children:[j.jsx("span",{children:"Upload Map"}),j.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g=>{const y=g.target.files?.[0];if(y){const S=new FileReader;S.onload=b=>{const C=b.target?.result;Mt.sendAction("UPDATE_MAP",{url:C})},S.readAsDataURL(y)}}})]}),j.jsxs("label",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors cursor-pointer block",children:[j.jsx("span",{children:"Add Token (Image)"}),j.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g=>{const y=g.target.files?.[0];if(y){const S=new FileReader;S.onload=b=>{const C=b.target?.result,E={id:Date.now().toString(),x:3,y:3,size:1,image:C,label:"Token",stats:{hp:10,maxHp:10,ac:10}};Mt.sendAction("ADD_TOKEN",E)},S.readAsDataURL(y)}}})]}),j.jsx("button",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors",onClick:p,children:"Add Basic Token"}),j.jsxs("div",{className:"mt-4 p-2 bg-gray-900 border border-gray-700 rounded-lg space-y-2",children:[j.jsxs("h3",{className:"text-xs font-bold uppercase text-gray-500 flex items-center justify-between",children:[" Drawing Tools",j.jsx("button",{onClick:()=>{W.getState().clearDrawings(),Mt.sendAction("SYNC_STATE",{drawings:[]})},className:"text-[10px] bg-red-900 text-red-200 px-1.5 py-0.5 rounded hover:bg-red-800",children:"Clear All"})]}),j.jsxs("div",{className:"flex gap-2 mb-2",children:[j.jsx("button",{onClick:()=>W.getState().setActiveTool("pan"),className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().activeTool==="pan"?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:" Pan"}),j.jsx("button",{onClick:()=>W.getState().setActiveTool("draw"),className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().activeTool==="draw"?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:" Draw"})]}),j.jsx("h4",{className:"text-[10px] font-bold text-gray-400 mt-2 mb-1 uppercase",children:"AoE Templates"}),j.jsxs("div",{className:"flex gap-1",children:[j.jsx("button",{onClick:()=>W.getState().setActiveTool("circle"),className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().activeTool==="circle"?"bg-orange-600":"bg-gray-700 hover:bg-gray-600"}`,children:" Circle"}),j.jsx("button",{onClick:()=>W.getState().setActiveTool("cone"),className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().activeTool==="cone"?"bg-orange-600":"bg-gray-700 hover:bg-gray-600"}`,children:" Cone"}),j.jsx("button",{onClick:()=>W.getState().setActiveTool("cube"),className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().activeTool==="cube"?"bg-orange-600":"bg-gray-700 hover:bg-gray-600"}`,children:" Cube"})]}),W.getState().activeTool!=="pan"&&j.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[j.jsx("input",{type:"color",value:W.getState().toolColor,onChange:g=>W.getState().setToolColor(g.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none p-0"}),j.jsx("input",{type:"range",min:"1",max:"10",value:W.getState().toolThickness,onChange:g=>W.getState().setToolThickness(parseInt(g.target.value)),className:"flex-1"})]}),j.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Hold ",j.jsx("kbd",{className:"bg-gray-800 px-1 rounded",children:"Alt"})," and drag for Ruler."]})]}),W.getState().isHost&&j.jsxs("label",{className:"text-left px-3 py-2 bg-indigo-900/50 hover:bg-indigo-800 rounded text-sm transition-colors cursor-pointer block border border-indigo-700 font-bold",children:[j.jsx("span",{children:" Share Handout"}),j.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g=>{const y=g.target.files?.[0];if(y){const S=new FileReader;S.onload=b=>{const C=b.target?.result;W.getState().setHandout(C),Mt.sendAction("SYNC_STATE",{handout:C})},S.readAsDataURL(y)}}})]}),W.getState().isHost&&j.jsxs("div",{className:"mt-4 p-2 bg-gray-900 border border-gray-700 rounded-lg space-y-2",children:[j.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 flex items-center gap-2",children:" Fog of War"}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("button",{onClick:()=>{const g=!W.getState().map.fogEnabled;W.getState().toggleFog(g),Mt.sendAction("SYNC_STATE",{map:W.getState().map})},className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().map.fogEnabled?"bg-red-700 hover:bg-red-600":"bg-green-700 hover:bg-green-600"}`,children:W.getState().map.fogEnabled?"Disable Fog":"Enable Fog"}),j.jsx("button",{onClick:()=>{W.getState().resetFog(),Mt.sendAction("SYNC_STATE",{map:W.getState().map})},className:"flex-1 text-xs py-1 rounded font-bold bg-gray-700 hover:bg-gray-600 text-white",children:"Reset Vision"})]}),j.jsxs("p",{className:"text-[10px] text-gray-500",children:["Hold ",j.jsx("kbd",{className:"bg-gray-800 px-1 rounded",children:"Shift"})," and drag on map to reveal areas."]})]}),W.getState().isHost&&j.jsxs("div",{className:"mt-4 p-2 bg-gray-900 border border-yellow-700 rounded-lg space-y-2 flex flex-col",children:[j.jsxs("h3",{className:"text-xs font-bold uppercase text-yellow-500 flex items-center justify-between",children:[" Dynamic Lighting",j.jsx("button",{onClick:()=>{W.getState().clearWalls(),Mt.sendAction("SYNC_STATE",{walls:[]})},className:"text-[10px] bg-red-900 text-red-200 px-1.5 py-0.5 rounded hover:bg-red-800",children:"Clear Walls"})]}),j.jsx("div",{className:"flex gap-2",children:j.jsx("button",{onClick:()=>{const g=!W.getState().map.dynamicLightingEnabled;W.getState().toggleDynamicLighting(g),Mt.sendAction("SYNC_STATE",{map:W.getState().map})},className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().map.dynamicLightingEnabled?"bg-red-700 hover:bg-red-600 text-white":"bg-green-700 hover:bg-green-600 text-white"}`,children:W.getState().map.dynamicLightingEnabled?"Disable Lighting":"Enable Lighting"})}),j.jsxs("div",{className:"flex gap-2 mt-1",children:[j.jsx("button",{onClick:()=>W.getState().setActiveTool("wall"),className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().activeTool==="wall"?"bg-yellow-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:" Draw Walls"}),j.jsx("button",{onClick:()=>W.getState().setActiveTool("door"),className:`flex-1 text-xs py-1 rounded font-bold ${W.getState().activeTool==="door"?"bg-amber-500 text-black":"bg-gray-700 hover:bg-gray-600"}`,children:" Draw Door"})]}),j.jsx("p",{className:"text-[10px] text-gray-400",children:"Lines drawn will block vision for all tokens."})]}),W.getState().isHost&&j.jsxs("div",{className:"mt-4 p-2 bg-gray-900 border border-purple-700 rounded-lg space-y-2",children:[j.jsx("h3",{className:"text-xs font-bold uppercase text-purple-400",children:" Scene Manager"}),j.jsxs("div",{className:"flex gap-1",children:[j.jsx("input",{type:"text",placeholder:"New Scene Name...",className:"flex-1 px-2 py-1 bg-gray-800 border border-gray-600 rounded text-xs text-white",value:o,onChange:g=>l(g.target.value)}),j.jsx("button",{onClick:()=>{if(!o.trim())return;W.getState().saveScene(o.trim()),l("");const g=W.getState();Mt.sendAction("SYNC_STATE",{scenes:g.scenes,activeSceneId:g.activeSceneId})},className:"px-2 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-bold",children:"Save"})]}),j.jsx("div",{className:"flex flex-col gap-1 max-h-32 overflow-y-auto pr-1",children:W.getState().scenes.map(g=>j.jsx("button",{onClick:()=>{W.getState().loadScene(g.id);const y=W.getState();Mt.sendAction("SYNC_STATE",{activeSceneId:y.activeSceneId,map:y.map,tokens:y.tokens,drawings:y.drawings,walls:y.walls})},className:`text-left px-2 py-1 text-xs rounded transition-colors truncate ${W.getState().activeSceneId===g.id?"bg-purple-800 font-bold":"bg-gray-700 hover:bg-gray-600"}`,children:g.name},g.id))})]}),W.getState().isHost&&j.jsxs("div",{className:"mt-4 p-2 bg-gray-900 border border-emerald-700 rounded-lg space-y-2",children:[j.jsxs("h3",{className:"text-xs font-bold uppercase text-emerald-400 flex justify-between items-center",children:[" Asset Library",j.jsxs("label",{className:"text-[10px] bg-emerald-700 text-white px-1.5 py-0.5 rounded hover:bg-emerald-600 cursor-pointer",children:["+ Upload",j.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g=>{const y=g.target.files?.[0];if(y){const S=new FileReader;S.onload=b=>{const C=b.target?.result,E={id:Date.now().toString(),name:y.name.split(".")[0],imageUrl:C,defaultSize:1};W.getState().addSavedAsset(E),Mt.sendAction("SYNC_STATE",{savedAssets:W.getState().savedAssets})},S.readAsDataURL(y)}}})]})]}),W.getState().savedAssets.length===0?j.jsx("p",{className:"text-[10px] text-gray-500 italic",children:"No saved assets. Upload images to create a quick-drop library."}):j.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-40 overflow-y-auto p-1",children:W.getState().savedAssets.map(g=>j.jsxs("div",{className:"relative group cursor-pointer",children:[j.jsx("img",{src:g.imageUrl,alt:g.name,className:"w-full aspect-square object-cover rounded hover:ring-2 ring-emerald-500 transition-all",title:`Click to drop ${g.name}`,onClick:()=>{const y={id:Date.now().toString(),x:Math.floor(W.getState().map.offsetX/-50)+3,y:Math.floor(W.getState().map.offsetY/-50)+3,size:g.defaultSize,image:g.imageUrl,label:g.name,stats:{hp:10,maxHp:10,ac:10}};Mt.sendAction("ADD_TOKEN",y)}}),j.jsx("button",{className:"absolute -top-1 -right-1 bg-red-600 text-white rounded-full w-4 h-4 text-[10px] items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity flex",onClick:y=>{y.stopPropagation(),W.getState().removeSavedAsset(g.id),Mt.sendAction("SYNC_STATE",{savedAssets:W.getState().savedAssets})},children:""})]},g.id))})]}),j.jsxs("div",{className:"mt-4 p-2 bg-yellow-900/30 border border-yellow-700/50 rounded text-xs text-yellow-200",children:[j.jsx("p",{children:"Debug Info:"}),j.jsxs("p",{children:["Connected: ",Mt.hostConnection?"Yes":"No"]})]}),j.jsx(hw,{}),j.jsxs("div",{className:"border-t border-gray-700 my-2 pt-2 space-y-2",children:[j.jsx("button",{className:"w-full text-left px-3 py-2 bg-green-900/50 hover:bg-green-800 rounded text-sm transition-colors text-green-100 flex items-center gap-2",onClick:()=>{const g=W.getState(),y={tokens:g.tokens,map:g.map,chat:g.chat,turnOrder:g.turnOrder,version:1},S=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),b=URL.createObjectURL(S),C=document.createElement("a");C.href=b,C.download=`vtt-save-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(b)},children:" Save Campaign"}),j.jsxs("label",{className:"w-full text-left px-3 py-2 bg-blue-900/50 hover:bg-blue-800 rounded text-sm transition-colors text-blue-100 flex items-center gap-2 cursor-pointer block",children:[j.jsx("span",{children:" Load Campaign"}),j.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:g=>{const y=g.target.files?.[0];if(!y)return;const S=new FileReader;S.onload=b=>{try{const C=JSON.parse(b.target?.result);C.version===1&&(Mt.sendAction("SYNC_STATE",C),alert("Campaign loaded successfully!"))}catch(C){console.error(C),alert("Failed to load save file.")}},S.readAsText(y)}})]})]})]})]})]}),j.jsxs("div",{className:"flex-1 relative bg-black overflow-hidden flex flex-col",children:[j.jsxs("div",{className:"flex-1 relative",children:[j.jsx(HE,{onEditToken:s}),j.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:j.jsx("div",{className:"pointer-events-auto p-4 flex flex-col items-start gap-4",children:j.jsx(lw,{})})})]}),j.jsx(uw,{})]}),j.jsx(ow,{}),j.jsx(fw,{}),n&&j.jsx(cw,{tokenId:n,onClose:()=>s(null)})]})}dv.createRoot(document.getElementById("root")).render(j.jsx(Ea.StrictMode,{children:j.jsx(dw,{})}));export{ve as $,xx as A,tn as B,Le as C,Jt as D,_t as E,Ny as F,ql as G,Dn as H,Fy as I,h0 as J,yr as K,RS as L,Nt as M,PS as N,qa as O,je as P,oe as Q,sf as R,Ef as S,_l as T,Jh as U,nC as V,d0 as W,wh as X,p0 as Y,lS as Z,mr as _,ax as a,aS as a0,jy as a1,_x as a2,kt as a3,qt as a4,oC as a5,BC as a6,AC as a7,WC as a8,KC as a9,rA as aa,iA as ab,aA as ac,zx as ad,R0 as ae,w0 as af,ey as ag,Yn as ah,lT as ai,ie as aj,Te as ak,Rv as al,_r as am,hy as an,Lx as ao,On as b,lA as c,vC as d,Ue as e,M0 as f,xC as g,Ha as h,kl as i,Tf as j,mx as k,Wy as l,zn as m,ux as n,Ya as o,QC as p,ZC as q,Fv as r,sA as s,eA as t,fe as u,Pt as v,se as w,Mv as x,oA as y,En as z};
