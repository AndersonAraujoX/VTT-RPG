const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browserAll-RXquCu6G.js","./webworkerAll-C2613sYQ.js","./colorToUniform-DZJ4JQo-.js","./WebGPURenderer-DGeO5Lvw.js","./SharedSystems-DvejnDol.js","./WebGLRenderer-CgrIBoJe.js"])))=>i.map(i=>d[i]);
function V1(r,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Pa(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var sh={exports:{}},la={};var kg;function X1(){if(kg)return la;kg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var h in o)h!=="key"&&(l[h]=o[h])}else l=o;return o=l.ref,{$$typeof:r,type:s,key:u,ref:o!==void 0?o:null,props:l}}return la.Fragment=t,la.jsx=n,la.jsxs=n,la}var Dg;function q1(){return Dg||(Dg=1,sh.exports=X1()),sh.exports}var J=q1(),rh={},ca={},Og;function $1(){if(Og)return ca;Og=1,ca.byteLength=h,ca.toByteArray=m,ca.fromByteArray=v;for(var r=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],t[s.charCodeAt(o)]=o;t[45]=62,t[95]=63;function u(S){var T=S.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=S.indexOf("=");M===-1&&(M=T);var E=M===T?0:4-M%4;return[M,E]}function h(S){var T=u(S),M=T[0],E=T[1];return(M+E)*3/4-E}function d(S,T,M){return(T+M)*3/4-M}function m(S){var T,M=u(S),E=M[0],B=M[1],D=new n(d(S,E,B)),z=0,G=B>0?E-4:E,W;for(W=0;W<G;W+=4)T=t[S.charCodeAt(W)]<<18|t[S.charCodeAt(W+1)]<<12|t[S.charCodeAt(W+2)]<<6|t[S.charCodeAt(W+3)],D[z++]=T>>16&255,D[z++]=T>>8&255,D[z++]=T&255;return B===2&&(T=t[S.charCodeAt(W)]<<2|t[S.charCodeAt(W+1)]>>4,D[z++]=T&255),B===1&&(T=t[S.charCodeAt(W)]<<10|t[S.charCodeAt(W+1)]<<4|t[S.charCodeAt(W+2)]>>2,D[z++]=T>>8&255,D[z++]=T&255),D}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function y(S,T,M){for(var E,B=[],D=T;D<M;D+=3)E=(S[D]<<16&16711680)+(S[D+1]<<8&65280)+(S[D+2]&255),B.push(g(E));return B.join("")}function v(S){for(var T,M=S.length,E=M%3,B=[],D=16383,z=0,G=M-E;z<G;z+=D)B.push(y(S,z,z+D>G?G:z+D));return E===1?(T=S[M-1],B.push(r[T>>2]+r[T<<4&63]+"==")):E===2&&(T=(S[M-2]<<8)+S[M-1],B.push(r[T>>10]+r[T>>4&63]+r[T<<2&63]+"=")),B.join("")}return ca}var il={};var zg;function Q1(){return zg||(zg=1,il.read=function(r,t,n,s,o){var l,u,h=o*8-s-1,d=(1<<h)-1,m=d>>1,g=-7,y=n?o-1:0,v=n?-1:1,S=r[t+y];for(y+=v,l=S&(1<<-g)-1,S>>=-g,g+=h;g>0;l=l*256+r[t+y],y+=v,g-=8);for(u=l&(1<<-g)-1,l>>=-g,g+=s;g>0;u=u*256+r[t+y],y+=v,g-=8);if(l===0)l=1-m;else{if(l===d)return u?NaN:(S?-1:1)*(1/0);u=u+Math.pow(2,s),l=l-m}return(S?-1:1)*u*Math.pow(2,l-s)},il.write=function(r,t,n,s,o,l){var u,h,d,m=l*8-o-1,g=(1<<m)-1,y=g>>1,v=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=s?0:l-1,T=s?1:-1,M=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,u=g):(u=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+y>=1?t+=v/d:t+=v*Math.pow(2,1-y),t*d>=2&&(u++,d/=2),u+y>=g?(h=0,u=g):u+y>=1?(h=(t*d-1)*Math.pow(2,o),u=u+y):(h=t*Math.pow(2,y-1)*Math.pow(2,o),u=0));o>=8;r[n+S]=h&255,S+=T,h/=256,o-=8);for(u=u<<o|h,m+=o;m>0;r[n+S]=u&255,S+=T,u/=256,m-=8);r[n+S-T]|=M*128}),il}var Ug;function Z1(){return Ug||(Ug=1,(function(r){const t=$1(),n=Q1(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const A=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(A,_),A.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function u(A){if(A>o)throw new RangeError('The value "'+A+'" is invalid for option "size"');const _=new Uint8Array(A);return Object.setPrototypeOf(_,h.prototype),_}function h(A,_,x){if(typeof A=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(A)}return d(A,_,x)}h.poolSize=8192;function d(A,_,x){if(typeof A=="string")return v(A,_);if(ArrayBuffer.isView(A))return T(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(un(A,ArrayBuffer)||A&&un(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(un(A,SharedArrayBuffer)||A&&un(A.buffer,SharedArrayBuffer)))return M(A,_,x);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const R=A.valueOf&&A.valueOf();if(R!=null&&R!==A)return h.from(R,_,x);const U=E(A);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return h.from(A[Symbol.toPrimitive]("string"),_,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}h.from=function(A,_,x){return d(A,_,x)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function m(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function g(A,_,x){return m(A),A<=0?u(A):_!==void 0?typeof x=="string"?u(A).fill(_,x):u(A).fill(_):u(A)}h.alloc=function(A,_,x){return g(A,_,x)};function y(A){return m(A),u(A<0?0:B(A)|0)}h.allocUnsafe=function(A){return y(A)},h.allocUnsafeSlow=function(A){return y(A)};function v(A,_){if((typeof _!="string"||_==="")&&(_="utf8"),!h.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const x=z(A,_)|0;let R=u(x);const U=R.write(A,_);return U!==x&&(R=R.slice(0,U)),R}function S(A){const _=A.length<0?0:B(A.length)|0,x=u(_);for(let R=0;R<_;R+=1)x[R]=A[R]&255;return x}function T(A){if(un(A,Uint8Array)){const _=new Uint8Array(A);return M(_.buffer,_.byteOffset,_.byteLength)}return S(A)}function M(A,_,x){if(_<0||A.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<_+(x||0))throw new RangeError('"length" is outside of buffer bounds');let R;return _===void 0&&x===void 0?R=new Uint8Array(A):x===void 0?R=new Uint8Array(A,_):R=new Uint8Array(A,_,x),Object.setPrototypeOf(R,h.prototype),R}function E(A){if(h.isBuffer(A)){const _=B(A.length)|0,x=u(_);return x.length===0||A.copy(x,0,0,_),x}if(A.length!==void 0)return typeof A.length!="number"||gr(A.length)?u(0):S(A);if(A.type==="Buffer"&&Array.isArray(A.data))return S(A.data)}function B(A){if(A>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return A|0}function D(A){return+A!=A&&(A=0),h.alloc(+A)}h.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==h.prototype},h.compare=function(_,x){if(un(_,Uint8Array)&&(_=h.from(_,_.offset,_.byteLength)),un(x,Uint8Array)&&(x=h.from(x,x.offset,x.byteLength)),!h.isBuffer(_)||!h.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===x)return 0;let R=_.length,U=x.length;for(let H=0,$=Math.min(R,U);H<$;++H)if(_[H]!==x[H]){R=_[H],U=x[H];break}return R<U?-1:U<R?1:0},h.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(_,x){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return h.alloc(0);let R;if(x===void 0)for(x=0,R=0;R<_.length;++R)x+=_[R].length;const U=h.allocUnsafe(x);let H=0;for(R=0;R<_.length;++R){let $=_[R];if(un($,Uint8Array))H+$.length>U.length?(h.isBuffer($)||($=h.from($)),$.copy(U,H)):Uint8Array.prototype.set.call(U,$,H);else if(h.isBuffer($))$.copy(U,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=$.length}return U};function z(A,_){if(h.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||un(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const x=A.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&x===0)return 0;let U=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return hi(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return xs(A).length;default:if(U)return R?-1:hi(A).length;_=(""+_).toLowerCase(),U=!0}}h.byteLength=z;function G(A,_,x){let R=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,_>>>=0,x<=_))return"";for(A||(A="utf8");;)switch(A){case"hex":return lt(this,_,x);case"utf8":case"utf-8":return Mt(this,_,x);case"ascii":return q(this,_,x);case"latin1":case"binary":return ht(this,_,x);case"base64":return zt(this,_,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return St(this,_,x);default:if(R)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),R=!0}}h.prototype._isBuffer=!0;function W(A,_,x){const R=A[_];A[_]=A[x],A[x]=R}h.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<_;x+=2)W(this,x,x+1);return this},h.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<_;x+=4)W(this,x,x+3),W(this,x+1,x+2);return this},h.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<_;x+=8)W(this,x,x+7),W(this,x+1,x+6),W(this,x+2,x+5),W(this,x+3,x+4);return this},h.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?Mt(this,0,_):G.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(_){if(!h.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:h.compare(this,_)===0},h.prototype.inspect=function(){let _="";const x=r.INSPECT_MAX_BYTES;return _=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(_+=" ... "),"<Buffer "+_+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(_,x,R,U,H){if(un(_,Uint8Array)&&(_=h.from(_,_.offset,_.byteLength)),!h.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(x===void 0&&(x=0),R===void 0&&(R=_?_.length:0),U===void 0&&(U=0),H===void 0&&(H=this.length),x<0||R>_.length||U<0||H>this.length)throw new RangeError("out of range index");if(U>=H&&x>=R)return 0;if(U>=H)return-1;if(x>=R)return 1;if(x>>>=0,R>>>=0,U>>>=0,H>>>=0,this===_)return 0;let $=H-U,pt=R-x;const Pt=Math.min($,pt),Ct=this.slice(U,H),ne=_.slice(x,R);for(let jt=0;jt<Pt;++jt)if(Ct[jt]!==ne[jt]){$=Ct[jt],pt=ne[jt];break}return $<pt?-1:pt<$?1:0};function Z(A,_,x,R,U){if(A.length===0)return-1;if(typeof x=="string"?(R=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,gr(x)&&(x=U?0:A.length-1),x<0&&(x=A.length+x),x>=A.length){if(U)return-1;x=A.length-1}else if(x<0)if(U)x=0;else return-1;if(typeof _=="string"&&(_=h.from(_,R)),h.isBuffer(_))return _.length===0?-1:Y(A,_,x,R,U);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(A,_,x):Uint8Array.prototype.lastIndexOf.call(A,_,x):Y(A,[_],x,R,U);throw new TypeError("val must be string, number or Buffer")}function Y(A,_,x,R,U){let H=1,$=A.length,pt=_.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(A.length<2||_.length<2)return-1;H=2,$/=2,pt/=2,x/=2}function Pt(ne,jt){return H===1?ne[jt]:ne.readUInt16BE(jt*H)}let Ct;if(U){let ne=-1;for(Ct=x;Ct<$;Ct++)if(Pt(A,Ct)===Pt(_,ne===-1?0:Ct-ne)){if(ne===-1&&(ne=Ct),Ct-ne+1===pt)return ne*H}else ne!==-1&&(Ct-=Ct-ne),ne=-1}else for(x+pt>$&&(x=$-pt),Ct=x;Ct>=0;Ct--){let ne=!0;for(let jt=0;jt<pt;jt++)if(Pt(A,Ct+jt)!==Pt(_,jt)){ne=!1;break}if(ne)return Ct}return-1}h.prototype.includes=function(_,x,R){return this.indexOf(_,x,R)!==-1},h.prototype.indexOf=function(_,x,R){return Z(this,_,x,R,!0)},h.prototype.lastIndexOf=function(_,x,R){return Z(this,_,x,R,!1)};function ot(A,_,x,R){x=Number(x)||0;const U=A.length-x;R?(R=Number(R),R>U&&(R=U)):R=U;const H=_.length;R>H/2&&(R=H/2);let $;for($=0;$<R;++$){const pt=parseInt(_.substr($*2,2),16);if(gr(pt))return $;A[x+$]=pt}return $}function rt(A,_,x,R){return fi(hi(_,A.length-x),A,x,R)}function et(A,_,x,R){return fi(ys(_),A,x,R)}function nt(A,_,x,R){return fi(xs(_),A,x,R)}function bt(A,_,x,R){return fi(_s(_,A.length-x),A,x,R)}h.prototype.write=function(_,x,R,U){if(x===void 0)U="utf8",R=this.length,x=0;else if(R===void 0&&typeof x=="string")U=x,R=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(R)?(R=R>>>0,U===void 0&&(U="utf8")):(U=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-x;if((R===void 0||R>H)&&(R=H),_.length>0&&(R<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let $=!1;for(;;)switch(U){case"hex":return ot(this,_,x,R);case"utf8":case"utf-8":return rt(this,_,x,R);case"ascii":case"latin1":case"binary":return et(this,_,x,R);case"base64":return nt(this,_,x,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bt(this,_,x,R);default:if($)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),$=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function zt(A,_,x){return _===0&&x===A.length?t.fromByteArray(A):t.fromByteArray(A.slice(_,x))}function Mt(A,_,x){x=Math.min(A.length,x);const R=[];let U=_;for(;U<x;){const H=A[U];let $=null,pt=H>239?4:H>223?3:H>191?2:1;if(U+pt<=x){let Pt,Ct,ne,jt;switch(pt){case 1:H<128&&($=H);break;case 2:Pt=A[U+1],(Pt&192)===128&&(jt=(H&31)<<6|Pt&63,jt>127&&($=jt));break;case 3:Pt=A[U+1],Ct=A[U+2],(Pt&192)===128&&(Ct&192)===128&&(jt=(H&15)<<12|(Pt&63)<<6|Ct&63,jt>2047&&(jt<55296||jt>57343)&&($=jt));break;case 4:Pt=A[U+1],Ct=A[U+2],ne=A[U+3],(Pt&192)===128&&(Ct&192)===128&&(ne&192)===128&&(jt=(H&15)<<18|(Pt&63)<<12|(Ct&63)<<6|ne&63,jt>65535&&jt<1114112&&($=jt))}}$===null?($=65533,pt=1):$>65535&&($-=65536,R.push($>>>10&1023|55296),$=56320|$&1023),R.push($),U+=pt}return L(R)}const ce=4096;function L(A){const _=A.length;if(_<=ce)return String.fromCharCode.apply(String,A);let x="",R=0;for(;R<_;)x+=String.fromCharCode.apply(String,A.slice(R,R+=ce));return x}function q(A,_,x){let R="";x=Math.min(A.length,x);for(let U=_;U<x;++U)R+=String.fromCharCode(A[U]&127);return R}function ht(A,_,x){let R="";x=Math.min(A.length,x);for(let U=_;U<x;++U)R+=String.fromCharCode(A[U]);return R}function lt(A,_,x){const R=A.length;(!_||_<0)&&(_=0),(!x||x<0||x>R)&&(x=R);let U="";for(let H=_;H<x;++H)U+=Ne[A[H]];return U}function St(A,_,x){const R=A.slice(_,x);let U="";for(let H=0;H<R.length-1;H+=2)U+=String.fromCharCode(R[H]+R[H+1]*256);return U}h.prototype.slice=function(_,x){const R=this.length;_=~~_,x=x===void 0?R:~~x,_<0?(_+=R,_<0&&(_=0)):_>R&&(_=R),x<0?(x+=R,x<0&&(x=0)):x>R&&(x=R),x<_&&(x=_);const U=this.subarray(_,x);return Object.setPrototypeOf(U,h.prototype),U};function k(A,_,x){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+_>x)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(_,x,R){_=_>>>0,x=x>>>0,R||k(_,x,this.length);let U=this[_],H=1,$=0;for(;++$<x&&(H*=256);)U+=this[_+$]*H;return U},h.prototype.readUintBE=h.prototype.readUIntBE=function(_,x,R){_=_>>>0,x=x>>>0,R||k(_,x,this.length);let U=this[_+--x],H=1;for(;x>0&&(H*=256);)U+=this[_+--x]*H;return U},h.prototype.readUint8=h.prototype.readUInt8=function(_,x){return _=_>>>0,x||k(_,1,this.length),this[_]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(_,x){return _=_>>>0,x||k(_,2,this.length),this[_]|this[_+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(_,x){return _=_>>>0,x||k(_,2,this.length),this[_]<<8|this[_+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(_,x){return _=_>>>0,x||k(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(_,x){return _=_>>>0,x||k(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},h.prototype.readBigUInt64LE=Un(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],R=this[_+7];(x===void 0||R===void 0)&&ue(_,this.length-8);const U=x+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,H=this[++_]+this[++_]*2**8+this[++_]*2**16+R*2**24;return BigInt(U)+(BigInt(H)<<BigInt(32))}),h.prototype.readBigUInt64BE=Un(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],R=this[_+7];(x===void 0||R===void 0)&&ue(_,this.length-8);const U=x*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],H=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+R;return(BigInt(U)<<BigInt(32))+BigInt(H)}),h.prototype.readIntLE=function(_,x,R){_=_>>>0,x=x>>>0,R||k(_,x,this.length);let U=this[_],H=1,$=0;for(;++$<x&&(H*=256);)U+=this[_+$]*H;return H*=128,U>=H&&(U-=Math.pow(2,8*x)),U},h.prototype.readIntBE=function(_,x,R){_=_>>>0,x=x>>>0,R||k(_,x,this.length);let U=x,H=1,$=this[_+--U];for(;U>0&&(H*=256);)$+=this[_+--U]*H;return H*=128,$>=H&&($-=Math.pow(2,8*x)),$},h.prototype.readInt8=function(_,x){return _=_>>>0,x||k(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},h.prototype.readInt16LE=function(_,x){_=_>>>0,x||k(_,2,this.length);const R=this[_]|this[_+1]<<8;return R&32768?R|4294901760:R},h.prototype.readInt16BE=function(_,x){_=_>>>0,x||k(_,2,this.length);const R=this[_+1]|this[_]<<8;return R&32768?R|4294901760:R},h.prototype.readInt32LE=function(_,x){return _=_>>>0,x||k(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},h.prototype.readInt32BE=function(_,x){return _=_>>>0,x||k(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},h.prototype.readBigInt64LE=Un(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],R=this[_+7];(x===void 0||R===void 0)&&ue(_,this.length-8);const U=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(R<<24);return(BigInt(U)<<BigInt(32))+BigInt(x+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),h.prototype.readBigInt64BE=Un(function(_){_=_>>>0,Ae(_,"offset");const x=this[_],R=this[_+7];(x===void 0||R===void 0)&&ue(_,this.length-8);const U=(x<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt(U)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+R)}),h.prototype.readFloatLE=function(_,x){return _=_>>>0,x||k(_,4,this.length),n.read(this,_,!0,23,4)},h.prototype.readFloatBE=function(_,x){return _=_>>>0,x||k(_,4,this.length),n.read(this,_,!1,23,4)},h.prototype.readDoubleLE=function(_,x){return _=_>>>0,x||k(_,8,this.length),n.read(this,_,!0,52,8)},h.prototype.readDoubleBE=function(_,x){return _=_>>>0,x||k(_,8,this.length),n.read(this,_,!1,52,8)};function V(A,_,x,R,U,H){if(!h.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>U||_<H)throw new RangeError('"value" argument is out of bounds');if(x+R>A.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(_,x,R,U){if(_=+_,x=x>>>0,R=R>>>0,!U){const pt=Math.pow(2,8*R)-1;V(this,_,x,R,pt,0)}let H=1,$=0;for(this[x]=_&255;++$<R&&(H*=256);)this[x+$]=_/H&255;return x+R},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(_,x,R,U){if(_=+_,x=x>>>0,R=R>>>0,!U){const pt=Math.pow(2,8*R)-1;V(this,_,x,R,pt,0)}let H=R-1,$=1;for(this[x+H]=_&255;--H>=0&&($*=256);)this[x+H]=_/$&255;return x+R},h.prototype.writeUint8=h.prototype.writeUInt8=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,1,255,0),this[x]=_&255,x+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,2,65535,0),this[x]=_&255,this[x+1]=_>>>8,x+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,2,65535,0),this[x]=_>>>8,this[x+1]=_&255,x+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,4,4294967295,0),this[x+3]=_>>>24,this[x+2]=_>>>16,this[x+1]=_>>>8,this[x]=_&255,x+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,4,4294967295,0),this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255,x+4};function tt(A,_,x,R,U){He(_,R,U,A,x,7);let H=Number(_&BigInt(4294967295));A[x++]=H,H=H>>8,A[x++]=H,H=H>>8,A[x++]=H,H=H>>8,A[x++]=H;let $=Number(_>>BigInt(32)&BigInt(4294967295));return A[x++]=$,$=$>>8,A[x++]=$,$=$>>8,A[x++]=$,$=$>>8,A[x++]=$,x}function it(A,_,x,R,U){He(_,R,U,A,x,7);let H=Number(_&BigInt(4294967295));A[x+7]=H,H=H>>8,A[x+6]=H,H=H>>8,A[x+5]=H,H=H>>8,A[x+4]=H;let $=Number(_>>BigInt(32)&BigInt(4294967295));return A[x+3]=$,$=$>>8,A[x+2]=$,$=$>>8,A[x+1]=$,$=$>>8,A[x]=$,x+8}h.prototype.writeBigUInt64LE=Un(function(_,x=0){return tt(this,_,x,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Un(function(_,x=0){return it(this,_,x,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(_,x,R,U){if(_=+_,x=x>>>0,!U){const Pt=Math.pow(2,8*R-1);V(this,_,x,R,Pt-1,-Pt)}let H=0,$=1,pt=0;for(this[x]=_&255;++H<R&&($*=256);)_<0&&pt===0&&this[x+H-1]!==0&&(pt=1),this[x+H]=(_/$>>0)-pt&255;return x+R},h.prototype.writeIntBE=function(_,x,R,U){if(_=+_,x=x>>>0,!U){const Pt=Math.pow(2,8*R-1);V(this,_,x,R,Pt-1,-Pt)}let H=R-1,$=1,pt=0;for(this[x+H]=_&255;--H>=0&&($*=256);)_<0&&pt===0&&this[x+H+1]!==0&&(pt=1),this[x+H]=(_/$>>0)-pt&255;return x+R},h.prototype.writeInt8=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,1,127,-128),_<0&&(_=255+_+1),this[x]=_&255,x+1},h.prototype.writeInt16LE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,2,32767,-32768),this[x]=_&255,this[x+1]=_>>>8,x+2},h.prototype.writeInt16BE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,2,32767,-32768),this[x]=_>>>8,this[x+1]=_&255,x+2},h.prototype.writeInt32LE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,4,2147483647,-2147483648),this[x]=_&255,this[x+1]=_>>>8,this[x+2]=_>>>16,this[x+3]=_>>>24,x+4},h.prototype.writeInt32BE=function(_,x,R){return _=+_,x=x>>>0,R||V(this,_,x,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255,x+4},h.prototype.writeBigInt64LE=Un(function(_,x=0){return tt(this,_,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Un(function(_,x=0){return it(this,_,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(A,_,x,R,U,H){if(x+R>A.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function yt(A,_,x,R,U){return _=+_,x=x>>>0,U||gt(A,_,x,4),n.write(A,_,x,R,23,4),x+4}h.prototype.writeFloatLE=function(_,x,R){return yt(this,_,x,!0,R)},h.prototype.writeFloatBE=function(_,x,R){return yt(this,_,x,!1,R)};function Rt(A,_,x,R,U){return _=+_,x=x>>>0,U||gt(A,_,x,8),n.write(A,_,x,R,52,8),x+8}h.prototype.writeDoubleLE=function(_,x,R){return Rt(this,_,x,!0,R)},h.prototype.writeDoubleBE=function(_,x,R){return Rt(this,_,x,!1,R)},h.prototype.copy=function(_,x,R,U){if(!h.isBuffer(_))throw new TypeError("argument should be a Buffer");if(R||(R=0),!U&&U!==0&&(U=this.length),x>=_.length&&(x=_.length),x||(x=0),U>0&&U<R&&(U=R),U===R||_.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),_.length-x<U-R&&(U=_.length-x+R);const H=U-R;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,R,U):Uint8Array.prototype.set.call(_,this.subarray(R,U),x),H},h.prototype.fill=function(_,x,R,U){if(typeof _=="string"){if(typeof x=="string"?(U=x,x=0,R=this.length):typeof R=="string"&&(U=R,R=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!h.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(_.length===1){const $=_.charCodeAt(0);(U==="utf8"&&$<128||U==="latin1")&&(_=$)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(x<0||this.length<x||this.length<R)throw new RangeError("Out of range index");if(R<=x)return this;x=x>>>0,R=R===void 0?this.length:R>>>0,_||(_=0);let H;if(typeof _=="number")for(H=x;H<R;++H)this[H]=_;else{const $=h.isBuffer(_)?_:h.from(_,U),pt=$.length;if(pt===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(H=0;H<R-x;++H)this[H+x]=$[H%pt]}return this};const Zt={};function Gt(A,_,x){Zt[A]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}Gt("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Gt("ERR_INVALID_ARG_TYPE",function(A,_){return`The "${A}" argument must be of type number. Received type ${typeof _}`},TypeError),Gt("ERR_OUT_OF_RANGE",function(A,_,x){let R=`The value of "${A}" is out of range.`,U=x;return Number.isInteger(x)&&Math.abs(x)>2**32?U=We(String(x)):typeof x=="bigint"&&(U=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(U=We(U)),U+="n"),R+=` It must be ${_}. Received ${U}`,R},RangeError);function We(A){let _="",x=A.length;const R=A[0]==="-"?1:0;for(;x>=R+4;x-=3)_=`_${A.slice(x-3,x)}${_}`;return`${A.slice(0,x)}${_}`}function zn(A,_,x){Ae(_,"offset"),(A[_]===void 0||A[_+x]===void 0)&&ue(_,A.length-(x+1))}function He(A,_,x,R,U,H){if(A>x||A<_){const $=typeof _=="bigint"?"n":"";let pt;throw _===0||_===BigInt(0)?pt=`>= 0${$} and < 2${$} ** ${(H+1)*8}${$}`:pt=`>= -(2${$} ** ${(H+1)*8-1}${$}) and < 2 ** ${(H+1)*8-1}${$}`,new Zt.ERR_OUT_OF_RANGE("value",pt,A)}zn(R,U,H)}function Ae(A,_){if(typeof A!="number")throw new Zt.ERR_INVALID_ARG_TYPE(_,"number",A)}function ue(A,_,x){throw Math.floor(A)!==A?(Ae(A,x),new Zt.ERR_OUT_OF_RANGE("offset","an integer",A)):_<0?new Zt.ERR_BUFFER_OUT_OF_BOUNDS:new Zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${_}`,A)}const Je=/[^+/0-9A-Za-z-_]/g;function Ii(A){if(A=A.split("=")[0],A=A.trim().replace(Je,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function hi(A,_){_=_||1/0;let x;const R=A.length;let U=null;const H=[];for(let $=0;$<R;++$){if(x=A.charCodeAt($),x>55295&&x<57344){if(!U){if(x>56319){(_-=3)>-1&&H.push(239,191,189);continue}else if($+1===R){(_-=3)>-1&&H.push(239,191,189);continue}U=x;continue}if(x<56320){(_-=3)>-1&&H.push(239,191,189),U=x;continue}x=(U-55296<<10|x-56320)+65536}else U&&(_-=3)>-1&&H.push(239,191,189);if(U=null,x<128){if((_-=1)<0)break;H.push(x)}else if(x<2048){if((_-=2)<0)break;H.push(x>>6|192,x&63|128)}else if(x<65536){if((_-=3)<0)break;H.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((_-=4)<0)break;H.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return H}function ys(A){const _=[];for(let x=0;x<A.length;++x)_.push(A.charCodeAt(x)&255);return _}function _s(A,_){let x,R,U;const H=[];for(let $=0;$<A.length&&!((_-=2)<0);++$)x=A.charCodeAt($),R=x>>8,U=x%256,H.push(U),H.push(R);return H}function xs(A){return t.toByteArray(Ii(A))}function fi(A,_,x,R){let U;for(U=0;U<R&&!(U+x>=_.length||U>=A.length);++U)_[U+x]=A[U];return U}function un(A,_){return A instanceof _||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===_.name}function gr(A){return A!==A}const Ne=(function(){const A="0123456789abcdef",_=new Array(256);for(let x=0;x<16;++x){const R=x*16;for(let U=0;U<16;++U)_[R+U]=A[x]+A[U]}return _})();function Un(A){return typeof BigInt>"u"?Ga:A}function Ga(){throw new Error("BigInt not supported")}})(rh)),rh}var K1=Z1();window.global=window;window.Buffer=K1.Buffer;window.process={env:{}};var ah={exports:{}},_t={};var Lg;function W1(){if(Lg)return _t;Lg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function S(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,E={};function B(k,V,tt){this.props=k,this.context=V,this.refs=E,this.updater=tt||T}B.prototype.isReactComponent={},B.prototype.setState=function(k,V){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,V,"setState")},B.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function D(){}D.prototype=B.prototype;function z(k,V,tt){this.props=k,this.context=V,this.refs=E,this.updater=tt||T}var G=z.prototype=new D;G.constructor=z,M(G,B.prototype),G.isPureReactComponent=!0;var W=Array.isArray;function Z(){}var Y={H:null,A:null,T:null,S:null},ot=Object.prototype.hasOwnProperty;function rt(k,V,tt){var it=tt.ref;return{$$typeof:r,type:k,key:V,ref:it!==void 0?it:null,props:tt}}function et(k,V){return rt(k.type,V,k.props)}function nt(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function bt(k){var V={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(tt){return V[tt]})}var zt=/\/+/g;function Mt(k,V){return typeof k=="object"&&k!==null&&k.key!=null?bt(""+k.key):V.toString(36)}function ce(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Z,Z):(k.status="pending",k.then(function(V){k.status==="pending"&&(k.status="fulfilled",k.value=V)},function(V){k.status==="pending"&&(k.status="rejected",k.reason=V)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function L(k,V,tt,it,gt){var yt=typeof k;(yt==="undefined"||yt==="boolean")&&(k=null);var Rt=!1;if(k===null)Rt=!0;else switch(yt){case"bigint":case"string":case"number":Rt=!0;break;case"object":switch(k.$$typeof){case r:case t:Rt=!0;break;case g:return Rt=k._init,L(Rt(k._payload),V,tt,it,gt)}}if(Rt)return gt=gt(k),Rt=it===""?"."+Mt(k,0):it,W(gt)?(tt="",Rt!=null&&(tt=Rt.replace(zt,"$&/")+"/"),L(gt,V,tt,"",function(We){return We})):gt!=null&&(nt(gt)&&(gt=et(gt,tt+(gt.key==null||k&&k.key===gt.key?"":(""+gt.key).replace(zt,"$&/")+"/")+Rt)),V.push(gt)),1;Rt=0;var Zt=it===""?".":it+":";if(W(k))for(var Gt=0;Gt<k.length;Gt++)it=k[Gt],yt=Zt+Mt(it,Gt),Rt+=L(it,V,tt,yt,gt);else if(Gt=S(k),typeof Gt=="function")for(k=Gt.call(k),Gt=0;!(it=k.next()).done;)it=it.value,yt=Zt+Mt(it,Gt++),Rt+=L(it,V,tt,yt,gt);else if(yt==="object"){if(typeof k.then=="function")return L(ce(k),V,tt,it,gt);throw V=String(k),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Rt}function q(k,V,tt){if(k==null)return k;var it=[],gt=0;return L(k,it,"","",function(yt){return V.call(tt,yt,gt++)}),it}function ht(k){if(k._status===-1){var V=k._result;V=V(),V.then(function(tt){(k._status===0||k._status===-1)&&(k._status=1,k._result=tt)},function(tt){(k._status===0||k._status===-1)&&(k._status=2,k._result=tt)}),k._status===-1&&(k._status=0,k._result=V)}if(k._status===1)return k._result.default;throw k._result}var lt=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},St={map:q,forEach:function(k,V,tt){q(k,function(){V.apply(this,arguments)},tt)},count:function(k){var V=0;return q(k,function(){V++}),V},toArray:function(k){return q(k,function(V){return V})||[]},only:function(k){if(!nt(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return _t.Activity=y,_t.Children=St,_t.Component=B,_t.Fragment=n,_t.Profiler=o,_t.PureComponent=z,_t.StrictMode=s,_t.Suspense=d,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,_t.__COMPILER_RUNTIME={__proto__:null,c:function(k){return Y.H.useMemoCache(k)}},_t.cache=function(k){return function(){return k.apply(null,arguments)}},_t.cacheSignal=function(){return null},_t.cloneElement=function(k,V,tt){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var it=M({},k.props),gt=k.key;if(V!=null)for(yt in V.key!==void 0&&(gt=""+V.key),V)!ot.call(V,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&V.ref===void 0||(it[yt]=V[yt]);var yt=arguments.length-2;if(yt===1)it.children=tt;else if(1<yt){for(var Rt=Array(yt),Zt=0;Zt<yt;Zt++)Rt[Zt]=arguments[Zt+2];it.children=Rt}return rt(k.type,gt,it)},_t.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},_t.createElement=function(k,V,tt){var it,gt={},yt=null;if(V!=null)for(it in V.key!==void 0&&(yt=""+V.key),V)ot.call(V,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(gt[it]=V[it]);var Rt=arguments.length-2;if(Rt===1)gt.children=tt;else if(1<Rt){for(var Zt=Array(Rt),Gt=0;Gt<Rt;Gt++)Zt[Gt]=arguments[Gt+2];gt.children=Zt}if(k&&k.defaultProps)for(it in Rt=k.defaultProps,Rt)gt[it]===void 0&&(gt[it]=Rt[it]);return rt(k,yt,gt)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(k){return{$$typeof:h,render:k}},_t.isValidElement=nt,_t.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:ht}},_t.memo=function(k,V){return{$$typeof:m,type:k,compare:V===void 0?null:V}},_t.startTransition=function(k){var V=Y.T,tt={};Y.T=tt;try{var it=k(),gt=Y.S;gt!==null&&gt(tt,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Z,lt)}catch(yt){lt(yt)}finally{V!==null&&tt.types!==null&&(V.types=tt.types),Y.T=V}},_t.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},_t.use=function(k){return Y.H.use(k)},_t.useActionState=function(k,V,tt){return Y.H.useActionState(k,V,tt)},_t.useCallback=function(k,V){return Y.H.useCallback(k,V)},_t.useContext=function(k){return Y.H.useContext(k)},_t.useDebugValue=function(){},_t.useDeferredValue=function(k,V){return Y.H.useDeferredValue(k,V)},_t.useEffect=function(k,V){return Y.H.useEffect(k,V)},_t.useEffectEvent=function(k){return Y.H.useEffectEvent(k)},_t.useId=function(){return Y.H.useId()},_t.useImperativeHandle=function(k,V,tt){return Y.H.useImperativeHandle(k,V,tt)},_t.useInsertionEffect=function(k,V){return Y.H.useInsertionEffect(k,V)},_t.useLayoutEffect=function(k,V){return Y.H.useLayoutEffect(k,V)},_t.useMemo=function(k,V){return Y.H.useMemo(k,V)},_t.useOptimistic=function(k,V){return Y.H.useOptimistic(k,V)},_t.useReducer=function(k,V,tt){return Y.H.useReducer(k,V,tt)},_t.useRef=function(k){return Y.H.useRef(k)},_t.useState=function(k){return Y.H.useState(k)},_t.useSyncExternalStore=function(k,V,tt){return Y.H.useSyncExternalStore(k,V,tt)},_t.useTransition=function(){return Y.H.useTransition()},_t.version="19.2.4",_t}var Pg;function gf(){return Pg||(Pg=1,ah.exports=W1()),ah.exports}var Qt=gf();const xa=Pa(Qt);var oh={exports:{}},ua={},lh={exports:{}},ch={};var Ng;function J1(){return Ng||(Ng=1,(function(r){function t(L,q){var ht=L.length;L.push(q);t:for(;0<ht;){var lt=ht-1>>>1,St=L[lt];if(0<o(St,q))L[lt]=q,L[ht]=St,ht=lt;else break t}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var q=L[0],ht=L.pop();if(ht!==q){L[0]=ht;t:for(var lt=0,St=L.length,k=St>>>1;lt<k;){var V=2*(lt+1)-1,tt=L[V],it=V+1,gt=L[it];if(0>o(tt,ht))it<St&&0>o(gt,tt)?(L[lt]=gt,L[it]=ht,lt=it):(L[lt]=tt,L[V]=ht,lt=V);else if(it<St&&0>o(gt,ht))L[lt]=gt,L[it]=ht,lt=it;else break t}}return q}function o(L,q){var ht=L.sortIndex-q.sortIndex;return ht!==0?ht:L.id-q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],m=[],g=1,y=null,v=3,S=!1,T=!1,M=!1,E=!1,B=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function G(L){for(var q=n(m);q!==null;){if(q.callback===null)s(m);else if(q.startTime<=L)s(m),q.sortIndex=q.expirationTime,t(d,q);else break;q=n(m)}}function W(L){if(M=!1,G(L),!T)if(n(d)!==null)T=!0,Z||(Z=!0,bt());else{var q=n(m);q!==null&&ce(W,q.startTime-L)}}var Z=!1,Y=-1,ot=5,rt=-1;function et(){return E?!0:!(r.unstable_now()-rt<ot)}function nt(){if(E=!1,Z){var L=r.unstable_now();rt=L;var q=!0;try{t:{T=!1,M&&(M=!1,D(Y),Y=-1),S=!0;var ht=v;try{e:{for(G(L),y=n(d);y!==null&&!(y.expirationTime>L&&et());){var lt=y.callback;if(typeof lt=="function"){y.callback=null,v=y.priorityLevel;var St=lt(y.expirationTime<=L);if(L=r.unstable_now(),typeof St=="function"){y.callback=St,G(L),q=!0;break e}y===n(d)&&s(d),G(L)}else s(d);y=n(d)}if(y!==null)q=!0;else{var k=n(m);k!==null&&ce(W,k.startTime-L),q=!1}}break t}finally{y=null,v=ht,S=!1}q=void 0}}finally{q?bt():Z=!1}}}var bt;if(typeof z=="function")bt=function(){z(nt)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,Mt=zt.port2;zt.port1.onmessage=nt,bt=function(){Mt.postMessage(null)}}else bt=function(){B(nt,0)};function ce(L,q){Y=B(function(){L(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(L){L.callback=null},r.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<L?Math.floor(1e3/L):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(L){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var ht=v;v=q;try{return L()}finally{v=ht}},r.unstable_requestPaint=function(){E=!0},r.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ht=v;v=L;try{return q()}finally{v=ht}},r.unstable_scheduleCallback=function(L,q,ht){var lt=r.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?lt+ht:lt):ht=lt,L){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=ht+St,L={id:g++,callback:q,priorityLevel:L,startTime:ht,expirationTime:St,sortIndex:-1},ht>lt?(L.sortIndex=ht,t(m,L),n(d)===null&&L===n(m)&&(M?(D(Y),Y=-1):M=!0,ce(W,ht-lt))):(L.sortIndex=St,t(d,L),T||S||(T=!0,Z||(Z=!0,bt()))),L},r.unstable_shouldYield=et,r.unstable_wrapCallback=function(L){var q=v;return function(){var ht=v;v=q;try{return L.apply(this,arguments)}finally{v=ht}}}})(ch)),ch}var Gg;function tv(){return Gg||(Gg=1,lh.exports=J1()),lh.exports}var uh={exports:{}},De={};var jg;function ev(){if(jg)return De;jg=1;var r=gf();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:d,containerInfo:m,implementation:g}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,De.createPortal=function(d,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(d,m,null,g)},De.flushSync=function(d){var m=u.T,g=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=m,s.p=g,s.d.f()}},De.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(d,m))},De.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},De.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var g=m.as,y=h(g,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?s.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},De.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=h(m.as,m.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(d)},De.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=h(g,m.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},De.preloadModule=function(d,m){if(typeof d=="string")if(m){var g=h(m.as,m.crossOrigin);s.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(d)},De.requestFormReset=function(d){s.d.r(d)},De.unstable_batchedUpdates=function(d,m){return d(m)},De.useFormState=function(d,m,g){return u.H.useFormState(d,m,g)},De.useFormStatus=function(){return u.H.useHostTransitionStatus()},De.version="19.2.4",De}var Ig;function nv(){if(Ig)return uh.exports;Ig=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),uh.exports=ev(),uh.exports}var Hg;function iv(){if(Hg)return ua;Hg=1;var r=tv(),t=gf(),n=nv();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function u(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=l(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,c=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return d(f),e;if(p===c)return d(f),i;p=p.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=p;else{for(var b=!1,C=f.child;C;){if(C===a){b=!0,a=f,c=p;break}if(C===c){b=!0,c=f,a=p;break}C=C.sibling}if(!b){for(C=p.child;C;){if(C===a){b=!0,a=p,c=f;break}if(C===c){b=!0,c=p,a=f;break}C=C.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),rt=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function bt(e){return e===null||typeof e!="object"?null:(e=nt&&e[nt]||e["@@iterator"],typeof e=="function"?e:null)}var zt=Symbol.for("react.client.reference");function Mt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===zt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case B:return"Profiler";case E:return"StrictMode";case W:return"Suspense";case Z:return"SuspenseList";case rt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case z:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case G:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return i=e.displayName||null,i!==null?i:Mt(e.type)||"Memo";case ot:i=e._payload,e=e._init;try{return Mt(e(i))}catch{}}return null}var ce=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},lt=[],St=-1;function k(e){return{current:e}}function V(e){0>St||(e.current=lt[St],lt[St]=null,St--)}function tt(e,i){St++,lt[St]=e.current,e.current=i}var it=k(null),gt=k(null),yt=k(null),Rt=k(null);function Zt(e,i){switch(tt(yt,i),tt(gt,e),tt(it,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?tg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=tg(i),e=eg(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(it),tt(it,e)}function Gt(){V(it),V(gt),V(yt)}function We(e){e.memoizedState!==null&&tt(Rt,e);var i=it.current,a=eg(i,e.type);i!==a&&(tt(gt,e),tt(it,a))}function zn(e){gt.current===e&&(V(it),V(gt)),Rt.current===e&&(V(Rt),sa._currentValue=ht)}var He,Ae;function ue(e){if(He===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);He=i&&i[1]||"",Ae=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+He+e+Ae}var Je=!1;function Ii(e,i){if(!e||Je)return"";Je=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(F){var I=F}Reflect.construct(e,[],K)}else{try{K.call()}catch(F){I=F}e.call(K.prototype)}}else{try{throw Error()}catch(F){I=F}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(F){if(F&&I&&typeof F.stack=="string")return[F.stack,I.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),b=p[0],C=p[1];if(b&&C){var w=b.split(`
`),j=C.split(`
`);for(f=c=0;c<w.length&&!w[c].includes("DetermineComponentFrameRoot");)c++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(c===w.length||f===j.length)for(c=w.length-1,f=j.length-1;1<=c&&0<=f&&w[c]!==j[f];)f--;for(;1<=c&&0<=f;c--,f--)if(w[c]!==j[f]){if(c!==1||f!==1)do if(c--,f--,0>f||w[c]!==j[f]){var X=`
`+w[c].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=c&&0<=f);break}}}finally{Je=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ue(a):""}function hi(e,i){switch(e.tag){case 26:case 27:case 5:return ue(e.type);case 16:return ue("Lazy");case 13:return e.child!==i&&i!==null?ue("Suspense Fallback"):ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return Ii(e.type,!1);case 11:return Ii(e.type.render,!1);case 1:return Ii(e.type,!0);case 31:return ue("Activity");default:return""}}function ys(e){try{var i="",a=null;do i+=hi(e,a),a=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var _s=Object.prototype.hasOwnProperty,xs=r.unstable_scheduleCallback,fi=r.unstable_cancelCallback,un=r.unstable_shouldYield,gr=r.unstable_requestPaint,Ne=r.unstable_now,Un=r.unstable_getCurrentPriorityLevel,Ga=r.unstable_ImmediatePriority,A=r.unstable_UserBlockingPriority,_=r.unstable_NormalPriority,x=r.unstable_LowPriority,R=r.unstable_IdlePriority,U=r.log,H=r.unstable_setDisableYieldValue,$=null,pt=null;function Pt(e){if(typeof U=="function"&&H(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode($,e)}catch{}}var Ct=Math.clz32?Math.clz32:kx,ne=Math.log,jt=Math.LN2;function kx(e){return e>>>=0,e===0?32:31-(ne(e)/jt|0)|0}var ja=256,Ia=262144,Ha=4194304;function Hi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fa(e,i,a){var c=e.pendingLanes;if(c===0)return 0;var f=0,p=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var C=c&134217727;return C!==0?(c=C&~p,c!==0?f=Hi(c):(b&=C,b!==0?f=Hi(b):a||(a=C&~e,a!==0&&(f=Hi(a))))):(C=c&~p,C!==0?f=Hi(C):b!==0?f=Hi(b):a||(a=c&~e,a!==0&&(f=Hi(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function yr(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Dx(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uf(){var e=Ha;return Ha<<=1,(Ha&62914560)===0&&(Ha=4194304),e}function Xl(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function _r(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ox(e,i,a,c,f,p){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var C=e.entanglements,w=e.expirationTimes,j=e.hiddenUpdates;for(a=b&~a;0<a;){var X=31-Ct(a),K=1<<X;C[X]=0,w[X]=-1;var I=j[X];if(I!==null)for(j[X]=null,X=0;X<I.length;X++){var F=I[X];F!==null&&(F.lane&=-536870913)}a&=~K}c!==0&&Lf(e,c,0),p!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=p&~(b&~i))}function Lf(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-Ct(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function Pf(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var c=31-Ct(a),f=1<<c;f&i|e[c]&i&&(e[c]|=i),a&=~f}}function Nf(e,i){var a=i&-i;return a=(a&42)!==0?1:ql(a),(a&(e.suspendedLanes|i))!==0?0:a}function ql(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $l(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gf(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:Ag(e.type))}function jf(e,i){var a=q.p;try{return q.p=e,i()}finally{q.p=a}}var di=Math.random().toString(36).slice(2),Te="__reactFiber$"+di,Fe="__reactProps$"+di,bs="__reactContainer$"+di,Ql="__reactEvents$"+di,zx="__reactListeners$"+di,Ux="__reactHandles$"+di,If="__reactResources$"+di,xr="__reactMarker$"+di;function Zl(e){delete e[Te],delete e[Fe],delete e[Ql],delete e[zx],delete e[Ux]}function vs(e){var i=e[Te];if(i)return i;for(var a=e.parentNode;a;){if(i=a[bs]||a[Te]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=lg(e);e!==null;){if(a=e[Te])return a;e=lg(e)}return i}e=a,a=e.parentNode}return null}function Ss(e){if(e=e[Te]||e[bs]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function br(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Cs(e){var i=e[If];return i||(i=e[If]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ve(e){e[xr]=!0}var Hf=new Set,Ff={};function Fi(e,i){As(e,i),As(e+"Capture",i)}function As(e,i){for(Ff[e]=i,e=0;e<i.length;e++)Hf.add(i[e])}var Lx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yf={},Vf={};function Px(e){return _s.call(Vf,e)?!0:_s.call(Yf,e)?!1:Lx.test(e)?Vf[e]=!0:(Yf[e]=!0,!1)}function Ya(e,i,a){if(Px(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Va(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Fn(e,i,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+c)}}function hn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xf(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Nx(e,i,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,p.call(this,b)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Kl(e){if(!e._valueTracker){var i=Xf(e)?"checked":"value";e._valueTracker=Nx(e,i,""+e[i])}}function qf(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return e&&(c=Xf(e)?e.checked?"true":"false":e.value),e=c,e!==a?(i.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gx=/[\n"\\]/g;function fn(e){return e.replace(Gx,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Wl(e,i,a,c,f,p,b,C){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+hn(i)):e.value!==""+hn(i)&&(e.value=""+hn(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?Jl(e,b,hn(i)):a!=null?Jl(e,b,hn(a)):c!=null&&e.removeAttribute("value"),f==null&&p!=null&&(e.defaultChecked=!!p),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+hn(C):e.removeAttribute("name")}function $f(e,i,a,c,f,p,b,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Kl(e);return}a=a!=null?""+hn(a):"",i=i!=null?""+hn(i):a,C||i===e.value||(e.value=i),e.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=C?e.checked:!!c,e.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),Kl(e)}function Jl(e,i,a){i==="number"&&Xa(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ts(e,i,a,c){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&c&&(e[a].defaultSelected=!0)}else{for(a=""+hn(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Qf(e,i,a){if(i!=null&&(i=""+hn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+hn(a):""}function Zf(e,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(s(92));if(ce(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=hn(i),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),Kl(e)}function Es(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var jx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kf(e,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,a):typeof a!="number"||a===0||jx.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Wf(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&a[f]!==c&&Kf(e,f,c)}else for(var p in i)i.hasOwnProperty(p)&&Kf(e,p,i[p])}function tc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ix=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qa(e){return Hx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yn(){}var ec=null;function nc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ms=null,Rs=null;function Jf(e){var i=Ss(e);if(i&&(e=i.stateNode)){var a=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(Wl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==e&&c.form===e.form){var f=c[Fe]||null;if(!f)throw Error(s(90));Wl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===e.form&&qf(c)}break t;case"textarea":Qf(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ts(e,!!a.multiple,i,!1)}}}var ic=!1;function td(e,i,a){if(ic)return e(i,a);ic=!0;try{var c=e(i);return c}finally{if(ic=!1,(Ms!==null||Rs!==null)&&(Uo(),Ms&&(i=Ms,e=Rs,Rs=Ms=null,Jf(i),e)))for(i=0;i<e.length;i++)Jf(e[i])}}function vr(e,i){var a=e.stateNode;if(a===null)return null;var c=a[Fe]||null;if(c===null)return null;a=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=!1;if(Vn)try{var Sr={};Object.defineProperty(Sr,"passive",{get:function(){sc=!0}}),window.addEventListener("test",Sr,Sr),window.removeEventListener("test",Sr,Sr)}catch{sc=!1}var pi=null,rc=null,$a=null;function ed(){if($a)return $a;var e,i=rc,a=i.length,c,f="value"in pi?pi.value:pi.textContent,p=f.length;for(e=0;e<a&&i[e]===f[e];e++);var b=a-e;for(c=1;c<=b&&i[a-c]===f[p-c];c++);return $a=f.slice(e,1<c?1-c:void 0)}function Qa(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Za(){return!0}function nd(){return!1}function Ye(e){function i(a,c,f,p,b){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(a=e[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Za:nd,this.isPropagationStopped=nd,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),i}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=Ye(Yi),Cr=y({},Yi,{view:0,detail:0}),Fx=Ye(Cr),ac,oc,Ar,Wa=y({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ar&&(Ar&&e.type==="mousemove"?(ac=e.screenX-Ar.screenX,oc=e.screenY-Ar.screenY):oc=ac=0,Ar=e),ac)},movementY:function(e){return"movementY"in e?e.movementY:oc}}),id=Ye(Wa),Yx=y({},Wa,{dataTransfer:0}),Vx=Ye(Yx),Xx=y({},Cr,{relatedTarget:0}),lc=Ye(Xx),qx=y({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=Ye(qx),Qx=y({},Yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zx=Ye(Qx),Kx=y({},Yi,{data:0}),sd=Ye(Kx),Wx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eb(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=tb[e])?!!i[e]:!1}function cc(){return eb}var nb=y({},Cr,{key:function(e){if(e.key){var i=Wx[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Qa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(e){return e.type==="keypress"?Qa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ib=Ye(nb),sb=y({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rd=Ye(sb),rb=y({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),ab=Ye(rb),ob=y({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),lb=Ye(ob),cb=y({},Wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ub=Ye(cb),hb=y({},Yi,{newState:0,oldState:0}),fb=Ye(hb),db=[9,13,27,32],uc=Vn&&"CompositionEvent"in window,Tr=null;Vn&&"documentMode"in document&&(Tr=document.documentMode);var pb=Vn&&"TextEvent"in window&&!Tr,ad=Vn&&(!uc||Tr&&8<Tr&&11>=Tr),od=" ",ld=!1;function cd(e,i){switch(e){case"keyup":return db.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ws=!1;function mb(e,i){switch(e){case"compositionend":return ud(i);case"keypress":return i.which!==32?null:(ld=!0,od);case"textInput":return e=i.data,e===od&&ld?null:e;default:return null}}function gb(e,i){if(ws)return e==="compositionend"||!uc&&cd(e,i)?(e=ed(),$a=rc=pi=null,ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ad&&i.locale!=="ko"?null:i.data;default:return null}}var yb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!yb[e.type]:i==="textarea"}function fd(e,i,a,c){Ms?Rs?Rs.push(c):Rs=[c]:Ms=c,i=Ho(i,"onChange"),0<i.length&&(a=new Ka("onChange","change",null,a,c),e.push({event:a,listeners:i}))}var Er=null,Mr=null;function _b(e){$m(e,0)}function Ja(e){var i=br(e);if(qf(i))return e}function dd(e,i){if(e==="change")return i}var pd=!1;if(Vn){var hc;if(Vn){var fc="oninput"in document;if(!fc){var md=document.createElement("div");md.setAttribute("oninput","return;"),fc=typeof md.oninput=="function"}hc=fc}else hc=!1;pd=hc&&(!document.documentMode||9<document.documentMode)}function gd(){Er&&(Er.detachEvent("onpropertychange",yd),Mr=Er=null)}function yd(e){if(e.propertyName==="value"&&Ja(Mr)){var i=[];fd(i,Mr,e,nc(e)),td(_b,i)}}function xb(e,i,a){e==="focusin"?(gd(),Er=i,Mr=a,Er.attachEvent("onpropertychange",yd)):e==="focusout"&&gd()}function bb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ja(Mr)}function vb(e,i){if(e==="click")return Ja(i)}function Sb(e,i){if(e==="input"||e==="change")return Ja(i)}function Cb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var tn=typeof Object.is=="function"?Object.is:Cb;function Rr(e,i){if(tn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!_s.call(i,f)||!tn(e[f],i[f]))return!1}return!0}function _d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xd(e,i){var a=_d(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=i&&c>=i)return{node:a,offset:i-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=_d(a)}}function bd(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?bd(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function vd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Xa(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Xa(e.document)}return i}function dc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Ab=Vn&&"documentMode"in document&&11>=document.documentMode,Bs=null,pc=null,wr=null,mc=!1;function Sd(e,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mc||Bs==null||Bs!==Xa(c)||(c=Bs,"selectionStart"in c&&dc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wr&&Rr(wr,c)||(wr=c,c=Ho(pc,"onSelect"),0<c.length&&(i=new Ka("onSelect","select",null,i,a),e.push({event:i,listeners:c}),i.target=Bs)))}function Vi(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ks={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},gc={},Cd={};Vn&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Xi(e){if(gc[e])return gc[e];if(!ks[e])return e;var i=ks[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Cd)return gc[e]=i[a];return e}var Ad=Xi("animationend"),Td=Xi("animationiteration"),Ed=Xi("animationstart"),Tb=Xi("transitionrun"),Eb=Xi("transitionstart"),Mb=Xi("transitioncancel"),Md=Xi("transitionend"),Rd=new Map,yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yc.push("scrollEnd");function Tn(e,i){Rd.set(e,i),Fi(i,[e])}var to=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},dn=[],Ds=0,_c=0;function eo(){for(var e=Ds,i=_c=Ds=0;i<e;){var a=dn[i];dn[i++]=null;var c=dn[i];dn[i++]=null;var f=dn[i];dn[i++]=null;var p=dn[i];if(dn[i++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}p!==0&&wd(a,f,p)}}function no(e,i,a,c){dn[Ds++]=e,dn[Ds++]=i,dn[Ds++]=a,dn[Ds++]=c,_c|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function xc(e,i,a,c){return no(e,i,a,c),io(e)}function qi(e,i){return no(e,null,null,i),io(e)}function wd(e,i,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var f=!1,p=e.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(f=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,f&&i!==null&&(f=31-Ct(a),e=p.hiddenUpdates,c=e[f],c===null?e[f]=[i]:c.push(i),i.lane=a|536870912),p):null}function io(e){if(50<Kr)throw Kr=0,Ru=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Os={};function Rb(e,i,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,i,a,c){return new Rb(e,i,a,c)}function bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xn(e,i){var a=e.alternate;return a===null?(a=en(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Bd(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function so(e,i,a,c,f,p){var b=0;if(c=e,typeof e=="function")bc(e)&&(b=1);else if(typeof e=="string")b=O1(e,a,it.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case rt:return e=en(31,a,i,f),e.elementType=rt,e.lanes=p,e;case M:return $i(a.children,f,p,i);case E:b=8,f|=24;break;case B:return e=en(12,a,i,f|2),e.elementType=B,e.lanes=p,e;case W:return e=en(13,a,i,f),e.elementType=W,e.lanes=p,e;case Z:return e=en(19,a,i,f),e.elementType=Z,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:b=10;break t;case D:b=9;break t;case G:b=11;break t;case Y:b=14;break t;case ot:b=16,c=null;break t}b=29,a=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=en(b,a,i,f),i.elementType=e,i.type=c,i.lanes=p,i}function $i(e,i,a,c){return e=en(7,e,c,i),e.lanes=a,e}function vc(e,i,a){return e=en(6,e,null,i),e.lanes=a,e}function kd(e){var i=en(18,null,null,0);return i.stateNode=e,i}function Sc(e,i,a){return i=en(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Dd=new WeakMap;function pn(e,i){if(typeof e=="object"&&e!==null){var a=Dd.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ys(i)},Dd.set(e,i),i)}return{value:e,source:i,stack:ys(i)}}var zs=[],Us=0,ro=null,Br=0,mn=[],gn=0,mi=null,Ln=1,Pn="";function qn(e,i){zs[Us++]=Br,zs[Us++]=ro,ro=e,Br=i}function Od(e,i,a){mn[gn++]=Ln,mn[gn++]=Pn,mn[gn++]=mi,mi=e;var c=Ln;e=Pn;var f=32-Ct(c)-1;c&=~(1<<f),a+=1;var p=32-Ct(i)+f;if(30<p){var b=f-f%5;p=(c&(1<<b)-1).toString(32),c>>=b,f-=b,Ln=1<<32-Ct(i)+f|a<<f|c,Pn=p+e}else Ln=1<<p|a<<f|c,Pn=e}function Cc(e){e.return!==null&&(qn(e,1),Od(e,1,0))}function Ac(e){for(;e===ro;)ro=zs[--Us],zs[Us]=null,Br=zs[--Us],zs[Us]=null;for(;e===mi;)mi=mn[--gn],mn[gn]=null,Pn=mn[--gn],mn[gn]=null,Ln=mn[--gn],mn[gn]=null}function zd(e,i){mn[gn++]=Ln,mn[gn++]=Pn,mn[gn++]=mi,Ln=i.id,Pn=i.overflow,mi=e}var Ee=null,Kt=null,Dt=!1,gi=null,yn=!1,Tc=Error(s(519));function yi(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kr(pn(i,e)),Tc}function Ud(e){var i=e.stateNode,a=e.type,c=e.memoizedProps;switch(i[Te]=e,i[Fe]=c,a){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(a=0;a<Jr.length;a++)Tt(Jr[a],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":Tt("invalid",i),$f(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Tt("invalid",i);break;case"textarea":Tt("invalid",i),Zf(i,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||Wm(i.textContent,a)?(c.popover!=null&&(Tt("beforetoggle",i),Tt("toggle",i)),c.onScroll!=null&&Tt("scroll",i),c.onScrollEnd!=null&&Tt("scrollend",i),c.onClick!=null&&(i.onclick=Yn),i=!0):i=!1,i||yi(e,!0)}function Ld(e){for(Ee=e.return;Ee;)switch(Ee.tag){case 5:case 31:case 13:yn=!1;return;case 27:case 3:yn=!0;return;default:Ee=Ee.return}}function Ls(e){if(e!==Ee)return!1;if(!Dt)return Ld(e),Dt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Fu(e.type,e.memoizedProps)),a=!a),a&&Kt&&yi(e),Ld(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Kt=og(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Kt=og(e)}else i===27?(i=Kt,ki(e.type)?(e=$u,$u=null,Kt=e):Kt=i):Kt=Ee?xn(e.stateNode.nextSibling):null;return!0}function Qi(){Kt=Ee=null,Dt=!1}function Ec(){var e=gi;return e!==null&&($e===null?$e=e:$e.push.apply($e,e),gi=null),e}function kr(e){gi===null?gi=[e]:gi.push(e)}var Mc=k(null),Zi=null,$n=null;function _i(e,i,a){tt(Mc,i._currentValue),i._currentValue=a}function Qn(e){e._currentValue=Mc.current,V(Mc)}function Rc(e,i,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===a)break;e=e.return}}function wc(e,i,a,c){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;t:for(;p!==null;){var C=p;p=f;for(var w=0;w<i.length;w++)if(C.context===i[w]){p.lanes|=a,C=p.alternate,C!==null&&(C.lanes|=a),Rc(p.return,a,e),c||(b=null);break t}p=C.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,p=b.alternate,p!==null&&(p.lanes|=a),Rc(b,a,e),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===e){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Ps(e,i,a,c){e=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var C=f.type;tn(f.pendingProps.value,b.value)||(e!==null?e.push(C):e=[C])}}else if(f===Rt.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(sa):e=[sa])}f=f.return}e!==null&&wc(i,e,a,c),i.flags|=262144}function ao(e){for(e=e.firstContext;e!==null;){if(!tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ki(e){Zi=e,$n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Me(e){return Pd(Zi,e)}function oo(e,i){return Zi===null&&Ki(e),Pd(e,i)}function Pd(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$n===null){if(e===null)throw Error(s(308));$n=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else $n=$n.next=i;return a}var wb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Bb=r.unstable_scheduleCallback,kb=r.unstable_NormalPriority,pe={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bc(){return{controller:new wb,data:new Map,refCount:0}}function Dr(e){e.refCount--,e.refCount===0&&Bb(kb,function(){e.controller.abort()})}var Or=null,kc=0,Ns=0,Gs=null;function Db(e,i){if(Or===null){var a=Or=[];kc=0,Ns=zu(),Gs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return kc++,i.then(Nd,Nd),i}function Nd(){if(--kc===0&&Or!==null){Gs!==null&&(Gs.status="fulfilled");var e=Or;Or=null,Ns=0,Gs=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Ob(e,i){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Gd=L.S;L.S=function(e,i){Sm=Ne(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Db(e,i),Gd!==null&&Gd(e,i)};var Wi=k(null);function Dc(){var e=Wi.current;return e!==null?e:$t.pooledCache}function lo(e,i){i===null?tt(Wi,Wi.current):tt(Wi,i.pool)}function jd(){var e=Dc();return e===null?null:{parent:pe._currentValue,pool:e}}var js=Error(s(460)),Oc=Error(s(474)),co=Error(s(542)),uo={then:function(){}};function Id(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hd(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Yn,Yn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Yd(e),e;default:if(typeof i.status=="string")i.then(Yn,Yn);else{if(e=$t,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Yd(e),e}throw ts=i,js}}function Ji(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ts=a,js):a}}var ts=null;function Fd(){if(ts===null)throw Error(s(459));var e=ts;return ts=null,e}function Yd(e){if(e===js||e===co)throw Error(s(483))}var Is=null,zr=0;function ho(e){var i=zr;return zr+=1,Is===null&&(Is=[]),Hd(Is,e,i)}function Ur(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function fo(e,i){throw i.$$typeof===v?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Vd(e){function i(P,O){if(e){var N=P.deletions;N===null?(P.deletions=[O],P.flags|=16):N.push(O)}}function a(P,O){if(!e)return null;for(;O!==null;)i(P,O),O=O.sibling;return null}function c(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function f(P,O){return P=Xn(P,O),P.index=0,P.sibling=null,P}function p(P,O,N){return P.index=N,e?(N=P.alternate,N!==null?(N=N.index,N<O?(P.flags|=67108866,O):N):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function b(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function C(P,O,N,Q){return O===null||O.tag!==6?(O=vc(N,P.mode,Q),O.return=P,O):(O=f(O,N),O.return=P,O)}function w(P,O,N,Q){var ft=N.type;return ft===M?X(P,O,N.props.children,Q,N.key):O!==null&&(O.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ot&&Ji(ft)===O.type)?(O=f(O,N.props),Ur(O,N),O.return=P,O):(O=so(N.type,N.key,N.props,null,P.mode,Q),Ur(O,N),O.return=P,O)}function j(P,O,N,Q){return O===null||O.tag!==4||O.stateNode.containerInfo!==N.containerInfo||O.stateNode.implementation!==N.implementation?(O=Sc(N,P.mode,Q),O.return=P,O):(O=f(O,N.children||[]),O.return=P,O)}function X(P,O,N,Q,ft){return O===null||O.tag!==7?(O=$i(N,P.mode,Q,ft),O.return=P,O):(O=f(O,N),O.return=P,O)}function K(P,O,N){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=vc(""+O,P.mode,N),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case S:return N=so(O.type,O.key,O.props,null,P.mode,N),Ur(N,O),N.return=P,N;case T:return O=Sc(O,P.mode,N),O.return=P,O;case ot:return O=Ji(O),K(P,O,N)}if(ce(O)||bt(O))return O=$i(O,P.mode,N,null),O.return=P,O;if(typeof O.then=="function")return K(P,ho(O),N);if(O.$$typeof===z)return K(P,oo(P,O),N);fo(P,O)}return null}function I(P,O,N,Q){var ft=O!==null?O.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return ft!==null?null:C(P,O,""+N,Q);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case S:return N.key===ft?w(P,O,N,Q):null;case T:return N.key===ft?j(P,O,N,Q):null;case ot:return N=Ji(N),I(P,O,N,Q)}if(ce(N)||bt(N))return ft!==null?null:X(P,O,N,Q,null);if(typeof N.then=="function")return I(P,O,ho(N),Q);if(N.$$typeof===z)return I(P,O,oo(P,N),Q);fo(P,N)}return null}function F(P,O,N,Q,ft){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(N)||null,C(O,P,""+Q,ft);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return P=P.get(Q.key===null?N:Q.key)||null,w(O,P,Q,ft);case T:return P=P.get(Q.key===null?N:Q.key)||null,j(O,P,Q,ft);case ot:return Q=Ji(Q),F(P,O,N,Q,ft)}if(ce(Q)||bt(Q))return P=P.get(N)||null,X(O,P,Q,ft,null);if(typeof Q.then=="function")return F(P,O,N,ho(Q),ft);if(Q.$$typeof===z)return F(P,O,N,oo(O,Q),ft);fo(O,Q)}return null}function st(P,O,N,Q){for(var ft=null,Ut=null,ct=O,vt=O=0,Bt=null;ct!==null&&vt<N.length;vt++){ct.index>vt?(Bt=ct,ct=null):Bt=ct.sibling;var Lt=I(P,ct,N[vt],Q);if(Lt===null){ct===null&&(ct=Bt);break}e&&ct&&Lt.alternate===null&&i(P,ct),O=p(Lt,O,vt),Ut===null?ft=Lt:Ut.sibling=Lt,Ut=Lt,ct=Bt}if(vt===N.length)return a(P,ct),Dt&&qn(P,vt),ft;if(ct===null){for(;vt<N.length;vt++)ct=K(P,N[vt],Q),ct!==null&&(O=p(ct,O,vt),Ut===null?ft=ct:Ut.sibling=ct,Ut=ct);return Dt&&qn(P,vt),ft}for(ct=c(ct);vt<N.length;vt++)Bt=F(ct,P,vt,N[vt],Q),Bt!==null&&(e&&Bt.alternate!==null&&ct.delete(Bt.key===null?vt:Bt.key),O=p(Bt,O,vt),Ut===null?ft=Bt:Ut.sibling=Bt,Ut=Bt);return e&&ct.forEach(function(Li){return i(P,Li)}),Dt&&qn(P,vt),ft}function mt(P,O,N,Q){if(N==null)throw Error(s(151));for(var ft=null,Ut=null,ct=O,vt=O=0,Bt=null,Lt=N.next();ct!==null&&!Lt.done;vt++,Lt=N.next()){ct.index>vt?(Bt=ct,ct=null):Bt=ct.sibling;var Li=I(P,ct,Lt.value,Q);if(Li===null){ct===null&&(ct=Bt);break}e&&ct&&Li.alternate===null&&i(P,ct),O=p(Li,O,vt),Ut===null?ft=Li:Ut.sibling=Li,Ut=Li,ct=Bt}if(Lt.done)return a(P,ct),Dt&&qn(P,vt),ft;if(ct===null){for(;!Lt.done;vt++,Lt=N.next())Lt=K(P,Lt.value,Q),Lt!==null&&(O=p(Lt,O,vt),Ut===null?ft=Lt:Ut.sibling=Lt,Ut=Lt);return Dt&&qn(P,vt),ft}for(ct=c(ct);!Lt.done;vt++,Lt=N.next())Lt=F(ct,P,vt,Lt.value,Q),Lt!==null&&(e&&Lt.alternate!==null&&ct.delete(Lt.key===null?vt:Lt.key),O=p(Lt,O,vt),Ut===null?ft=Lt:Ut.sibling=Lt,Ut=Lt);return e&&ct.forEach(function(Y1){return i(P,Y1)}),Dt&&qn(P,vt),ft}function Vt(P,O,N,Q){if(typeof N=="object"&&N!==null&&N.type===M&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case S:t:{for(var ft=N.key;O!==null;){if(O.key===ft){if(ft=N.type,ft===M){if(O.tag===7){a(P,O.sibling),Q=f(O,N.props.children),Q.return=P,P=Q;break t}}else if(O.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ot&&Ji(ft)===O.type){a(P,O.sibling),Q=f(O,N.props),Ur(Q,N),Q.return=P,P=Q;break t}a(P,O);break}else i(P,O);O=O.sibling}N.type===M?(Q=$i(N.props.children,P.mode,Q,N.key),Q.return=P,P=Q):(Q=so(N.type,N.key,N.props,null,P.mode,Q),Ur(Q,N),Q.return=P,P=Q)}return b(P);case T:t:{for(ft=N.key;O!==null;){if(O.key===ft)if(O.tag===4&&O.stateNode.containerInfo===N.containerInfo&&O.stateNode.implementation===N.implementation){a(P,O.sibling),Q=f(O,N.children||[]),Q.return=P,P=Q;break t}else{a(P,O);break}else i(P,O);O=O.sibling}Q=Sc(N,P.mode,Q),Q.return=P,P=Q}return b(P);case ot:return N=Ji(N),Vt(P,O,N,Q)}if(ce(N))return st(P,O,N,Q);if(bt(N)){if(ft=bt(N),typeof ft!="function")throw Error(s(150));return N=ft.call(N),mt(P,O,N,Q)}if(typeof N.then=="function")return Vt(P,O,ho(N),Q);if(N.$$typeof===z)return Vt(P,O,oo(P,N),Q);fo(P,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,O!==null&&O.tag===6?(a(P,O.sibling),Q=f(O,N),Q.return=P,P=Q):(a(P,O),Q=vc(N,P.mode,Q),Q.return=P,P=Q),b(P)):a(P,O)}return function(P,O,N,Q){try{zr=0;var ft=Vt(P,O,N,Q);return Is=null,ft}catch(ct){if(ct===js||ct===co)throw ct;var Ut=en(29,ct,null,P.mode);return Ut.lanes=Q,Ut.return=P,Ut}}}var es=Vd(!0),Xd=Vd(!1),xi=!1;function zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vi(e,i,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Nt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=io(e),wd(e,null,a),i}return no(e,c,i,a),io(e)}function Lr(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Pf(e,a)}}function Lc(e,i){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Pc=!1;function Pr(){if(Pc){var e=Gs;if(e!==null)throw e}}function Nr(e,i,a,c){Pc=!1;var f=e.updateQueue;xi=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var w=C,j=w.next;w.next=null,b===null?p=j:b.next=j,b=w;var X=e.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==b&&(C===null?X.firstBaseUpdate=j:C.next=j,X.lastBaseUpdate=w))}if(p!==null){var K=f.baseState;b=0,X=j=w=null,C=p;do{var I=C.lane&-536870913,F=I!==C.lane;if(F?(wt&I)===I:(c&I)===I){I!==0&&I===Ns&&(Pc=!0),X!==null&&(X=X.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var st=e,mt=C;I=i;var Vt=a;switch(mt.tag){case 1:if(st=mt.payload,typeof st=="function"){K=st.call(Vt,K,I);break t}K=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=mt.payload,I=typeof st=="function"?st.call(Vt,K,I):st,I==null)break t;K=y({},K,I);break t;case 2:xi=!0}}I=C.callback,I!==null&&(e.flags|=64,F&&(e.flags|=8192),F=f.callbacks,F===null?f.callbacks=[I]:F.push(I))}else F={lane:I,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(j=X=F,w=K):X=X.next=F,b|=I;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;F=C,C=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);X===null&&(w=K),f.baseState=w,f.firstBaseUpdate=j,f.lastBaseUpdate=X,p===null&&(f.shared.lanes=0),Ei|=b,e.lanes=b,e.memoizedState=K}}function qd(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function $d(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)qd(a[e],i)}var Hs=k(null),po=k(0);function Qd(e,i){e=si,tt(po,e),tt(Hs,i),si=e|i.baseLanes}function Nc(){tt(po,si),tt(Hs,Hs.current)}function Gc(){si=po.current,V(Hs),V(po)}var nn=k(null),_n=null;function Si(e){var i=e.alternate;tt(he,he.current&1),tt(nn,e),_n===null&&(i===null||Hs.current!==null||i.memoizedState!==null)&&(_n=e)}function jc(e){tt(he,he.current),tt(nn,e),_n===null&&(_n=e)}function Zd(e){e.tag===22?(tt(he,he.current),tt(nn,e),_n===null&&(_n=e)):Ci()}function Ci(){tt(he,he.current),tt(nn,nn.current)}function sn(e){V(nn),_n===e&&(_n=null),V(he)}var he=k(0);function mo(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xu(a)||qu(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zn=0,xt=null,Ft=null,me=null,go=!1,Fs=!1,ns=!1,yo=0,Gr=0,Ys=null,zb=0;function re(){throw Error(s(321))}function Ic(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!tn(e[a],i[a]))return!1;return!0}function Hc(e,i,a,c,f,p){return Zn=p,xt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,L.H=e===null||e.memoizedState===null?Op:iu,ns=!1,p=a(c,f),ns=!1,Fs&&(p=Wd(i,a,c,f)),Kd(e),p}function Kd(e){L.H=Hr;var i=Ft!==null&&Ft.next!==null;if(Zn=0,me=Ft=xt=null,go=!1,Gr=0,Ys=null,i)throw Error(s(300));e===null||ge||(e=e.dependencies,e!==null&&ao(e)&&(ge=!0))}function Wd(e,i,a,c){xt=e;var f=0;do{if(Fs&&(Ys=null),Gr=0,Fs=!1,25<=f)throw Error(s(301));if(f+=1,me=Ft=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}L.H=zp,p=i(a,c)}while(Fs);return p}function Ub(){var e=L.H,i=e.useState()[0];return i=typeof i.then=="function"?jr(i):i,e=e.useState()[0],(Ft!==null?Ft.memoizedState:null)!==e&&(xt.flags|=1024),i}function Fc(){var e=yo!==0;return yo=0,e}function Yc(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Vc(e){if(go){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}go=!1}Zn=0,me=Ft=xt=null,Fs=!1,Gr=yo=0,Ys=null}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?xt.memoizedState=me=e:me=me.next=e,me}function fe(){if(Ft===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var i=me===null?xt.memoizedState:me.next;if(i!==null)me=i,Ft=e;else{if(e===null)throw xt.alternate===null?Error(s(467)):Error(s(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},me===null?xt.memoizedState=me=e:me=me.next=e}return me}function _o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jr(e){var i=Gr;return Gr+=1,Ys===null&&(Ys=[]),e=Hd(Ys,e,i),i=xt,(me===null?i.memoizedState:me.next)===null&&(i=i.alternate,L.H=i===null||i.memoizedState===null?Op:iu),e}function xo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jr(e);if(e.$$typeof===z)return Me(e)}throw Error(s(438,String(e)))}function Xc(e){var i=null,a=xt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=xt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=_o(),xt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),c=0;c<e;c++)a[c]=et;return i.index++,a}function Kn(e,i){return typeof i=="function"?i(e):i}function bo(e){var i=fe();return qc(i,Ft,e)}function qc(e,i,a){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=e.baseQueue,p=c.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}i.baseQueue=f=p,c.pending=null}if(p=e.baseState,f===null)e.memoizedState=p;else{i=f.next;var C=b=null,w=null,j=i,X=!1;do{var K=j.lane&-536870913;if(K!==j.lane?(wt&K)===K:(Zn&K)===K){var I=j.revertLane;if(I===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),K===Ns&&(X=!0);else if((Zn&I)===I){j=j.next,I===Ns&&(X=!0);continue}else K={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(C=w=K,b=p):w=w.next=K,xt.lanes|=I,Ei|=I;K=j.action,ns&&a(p,K),p=j.hasEagerState?j.eagerState:a(p,K)}else I={lane:K,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(C=w=I,b=p):w=w.next=I,xt.lanes|=K,Ei|=K;j=j.next}while(j!==null&&j!==i);if(w===null?b=p:w.next=C,!tn(p,e.memoizedState)&&(ge=!0,X&&(a=Gs,a!==null)))throw a;e.memoizedState=p,e.baseState=b,e.baseQueue=w,c.lastRenderedState=p}return f===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function $c(e){var i=fe(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var c=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do p=e(p,b.action),b=b.next;while(b!==f);tn(p,i.memoizedState)||(ge=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function Jd(e,i,a){var c=xt,f=fe(),p=Dt;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!tn((Ft||f).memoizedState,a);if(b&&(f.memoizedState=a,ge=!0),f=f.queue,Kc(np.bind(null,c,f,e),[e]),f.getSnapshot!==i||b||me!==null&&me.memoizedState.tag&1){if(c.flags|=2048,Vs(9,{destroy:void 0},ep.bind(null,c,f,a,i),null),$t===null)throw Error(s(349));p||(Zn&127)!==0||tp(c,i,a)}return a}function tp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=xt.updateQueue,i===null?(i=_o(),xt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function ep(e,i,a,c){i.value=a,i.getSnapshot=c,ip(i)&&sp(e)}function np(e,i,a){return a(function(){ip(i)&&sp(e)})}function ip(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!tn(e,a)}catch{return!0}}function sp(e){var i=qi(e,2);i!==null&&Qe(i,e,2)}function Qc(e){var i=Ge();if(typeof e=="function"){var a=e;if(e=a(),ns){Pt(!0);try{a()}finally{Pt(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:e},i}function rp(e,i,a,c){return e.baseState=a,qc(e,Ft,typeof c=="function"?c:Kn)}function Lb(e,i,a,c,f){if(Co(e))throw Error(s(485));if(e=i.action,e!==null){var p={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};L.T!==null?a(!0):p.isTransition=!1,c(p),a=i.pending,a===null?(p.next=i.pending=p,ap(i,p)):(p.next=a.next,i.pending=a.next=p)}}function ap(e,i){var a=i.action,c=i.payload,f=e.state;if(i.isTransition){var p=L.T,b={};L.T=b;try{var C=a(f,c),w=L.S;w!==null&&w(b,C),op(e,i,C)}catch(j){Zc(e,i,j)}finally{p!==null&&b.types!==null&&(p.types=b.types),L.T=p}}else try{p=a(f,c),op(e,i,p)}catch(j){Zc(e,i,j)}}function op(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){lp(e,i,c)},function(c){return Zc(e,i,c)}):lp(e,i,a)}function lp(e,i,a){i.status="fulfilled",i.value=a,cp(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,ap(e,a)))}function Zc(e,i,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,cp(i),i=i.next;while(i!==c)}e.action=null}function cp(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function up(e,i){return i}function hp(e,i){if(Dt){var a=$t.formState;if(a!==null){t:{var c=xt;if(Dt){if(Kt){e:{for(var f=Kt,p=yn;f.nodeType!==8;){if(!p){f=null;break e}if(f=xn(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Kt=xn(f.nextSibling),c=f.data==="F!";break t}}yi(c)}c=!1}c&&(i=a[0])}}return a=Ge(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:up,lastRenderedState:i},a.queue=c,a=Bp.bind(null,xt,c),c.dispatch=a,c=Qc(!1),p=nu.bind(null,xt,!1,c.queue),c=Ge(),f={state:i,dispatch:null,action:e,pending:null},c.queue=f,a=Lb.bind(null,xt,f,p,a),f.dispatch=a,c.memoizedState=e,[i,a,!1]}function fp(e){var i=fe();return dp(i,Ft,e)}function dp(e,i,a){if(i=qc(e,i,up)[0],e=bo(Kn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=jr(i)}catch(b){throw b===js?co:b}else c=i;i=fe();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(xt.flags|=2048,Vs(9,{destroy:void 0},Pb.bind(null,f,a),null)),[c,p,e]}function Pb(e,i){e.action=i}function pp(e){var i=fe(),a=Ft;if(a!==null)return dp(i,a,e);fe(),i=i.memoizedState,a=fe();var c=a.queue.dispatch;return a.memoizedState=e,[i,c,!1]}function Vs(e,i,a,c){return e={tag:e,create:a,deps:c,inst:i,next:null},i=xt.updateQueue,i===null&&(i=_o(),xt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,i.lastEffect=e),e}function mp(){return fe().memoizedState}function vo(e,i,a,c){var f=Ge();xt.flags|=e,f.memoizedState=Vs(1|i,{destroy:void 0},a,c===void 0?null:c)}function So(e,i,a,c){var f=fe();c=c===void 0?null:c;var p=f.memoizedState.inst;Ft!==null&&c!==null&&Ic(c,Ft.memoizedState.deps)?f.memoizedState=Vs(i,p,a,c):(xt.flags|=e,f.memoizedState=Vs(1|i,p,a,c))}function gp(e,i){vo(8390656,8,e,i)}function Kc(e,i){So(2048,8,e,i)}function Nb(e){xt.flags|=4;var i=xt.updateQueue;if(i===null)i=_o(),xt.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function yp(e){var i=fe().memoizedState;return Nb({ref:i,nextImpl:e}),function(){if((Nt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function _p(e,i){return So(4,2,e,i)}function xp(e,i){return So(4,4,e,i)}function bp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function vp(e,i,a){a=a!=null?a.concat([e]):null,So(4,4,bp.bind(null,i,e),a)}function Wc(){}function Sp(e,i){var a=fe();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&Ic(i,c[1])?c[0]:(a.memoizedState=[e,i],e)}function Cp(e,i){var a=fe();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&Ic(i,c[1]))return c[0];if(c=e(),ns){Pt(!0);try{e()}finally{Pt(!1)}}return a.memoizedState=[c,i],c}function Jc(e,i,a){return a===void 0||(Zn&1073741824)!==0&&(wt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Am(),xt.lanes|=e,Ei|=e,a)}function Ap(e,i,a,c){return tn(a,i)?a:Hs.current!==null?(e=Jc(e,a,c),tn(e,i)||(ge=!0),e):(Zn&42)===0||(Zn&1073741824)!==0&&(wt&261930)===0?(ge=!0,e.memoizedState=a):(e=Am(),xt.lanes|=e,Ei|=e,i)}function Tp(e,i,a,c,f){var p=q.p;q.p=p!==0&&8>p?p:8;var b=L.T,C={};L.T=C,nu(e,!1,i,a);try{var w=f(),j=L.S;if(j!==null&&j(C,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var X=Ob(w,c);Ir(e,i,X,on(e))}else Ir(e,i,c,on(e))}catch(K){Ir(e,i,{then:function(){},status:"rejected",reason:K},on())}finally{q.p=p,b!==null&&C.types!==null&&(b.types=C.types),L.T=b}}function Gb(){}function tu(e,i,a,c){if(e.tag!==5)throw Error(s(476));var f=Ep(e).queue;Tp(e,f,i,ht,a===null?Gb:function(){return Mp(e),a(c)})}function Ep(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:ht},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Mp(e){var i=Ep(e);i.next===null&&(i=e.alternate.memoizedState),Ir(e,i.next.queue,{},on())}function eu(){return Me(sa)}function Rp(){return fe().memoizedState}function wp(){return fe().memoizedState}function jb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=on();e=bi(a);var c=vi(i,e,a);c!==null&&(Qe(c,i,a),Lr(c,i,a)),i={cache:Bc()},e.payload=i;return}i=i.return}}function Ib(e,i,a){var c=on();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Co(e)?kp(i,a):(a=xc(e,i,a,c),a!==null&&(Qe(a,e,c),Dp(a,i,c)))}function Bp(e,i,a){var c=on();Ir(e,i,a,c)}function Ir(e,i,a,c){var f={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Co(e))kp(i,f);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var b=i.lastRenderedState,C=p(b,a);if(f.hasEagerState=!0,f.eagerState=C,tn(C,b))return no(e,i,f,0),$t===null&&eo(),!1}catch{}if(a=xc(e,i,f,c),a!==null)return Qe(a,e,c),Dp(a,i,c),!0}return!1}function nu(e,i,a,c){if(c={lane:2,revertLane:zu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Co(e)){if(i)throw Error(s(479))}else i=xc(e,a,c,2),i!==null&&Qe(i,e,2)}function Co(e){var i=e.alternate;return e===xt||i!==null&&i===xt}function kp(e,i){Fs=go=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Dp(e,i,a){if((a&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Pf(e,a)}}var Hr={readContext:Me,use:xo,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useLayoutEffect:re,useInsertionEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useSyncExternalStore:re,useId:re,useHostTransitionStatus:re,useFormState:re,useActionState:re,useOptimistic:re,useMemoCache:re,useCacheRefresh:re};Hr.useEffectEvent=re;var Op={readContext:Me,use:xo,useCallback:function(e,i){return Ge().memoizedState=[e,i===void 0?null:i],e},useContext:Me,useEffect:gp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,vo(4194308,4,bp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return vo(4194308,4,e,i)},useInsertionEffect:function(e,i){vo(4,2,e,i)},useMemo:function(e,i){var a=Ge();i=i===void 0?null:i;var c=e();if(ns){Pt(!0);try{e()}finally{Pt(!1)}}return a.memoizedState=[c,i],c},useReducer:function(e,i,a){var c=Ge();if(a!==void 0){var f=a(i);if(ns){Pt(!0);try{a(i)}finally{Pt(!1)}}}else f=i;return c.memoizedState=c.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},c.queue=e,e=e.dispatch=Ib.bind(null,xt,e),[c.memoizedState,e]},useRef:function(e){var i=Ge();return e={current:e},i.memoizedState=e},useState:function(e){e=Qc(e);var i=e.queue,a=Bp.bind(null,xt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Wc,useDeferredValue:function(e,i){var a=Ge();return Jc(a,e,i)},useTransition:function(){var e=Qc(!1);return e=Tp.bind(null,xt,e.queue,!0,!1),Ge().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var c=xt,f=Ge();if(Dt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),$t===null)throw Error(s(349));(wt&127)!==0||tp(c,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,gp(np.bind(null,c,p,e),[e]),c.flags|=2048,Vs(9,{destroy:void 0},ep.bind(null,c,p,a,i),null),a},useId:function(){var e=Ge(),i=$t.identifierPrefix;if(Dt){var a=Pn,c=Ln;a=(c&~(1<<32-Ct(c)-1)).toString(32)+a,i="_"+i+"R_"+a,a=yo++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=zb++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:eu,useFormState:hp,useActionState:hp,useOptimistic:function(e){var i=Ge();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=nu.bind(null,xt,!0,a),a.dispatch=i,[e,i]},useMemoCache:Xc,useCacheRefresh:function(){return Ge().memoizedState=jb.bind(null,xt)},useEffectEvent:function(e){var i=Ge(),a={impl:e};return i.memoizedState=a,function(){if((Nt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},iu={readContext:Me,use:xo,useCallback:Sp,useContext:Me,useEffect:Kc,useImperativeHandle:vp,useInsertionEffect:_p,useLayoutEffect:xp,useMemo:Cp,useReducer:bo,useRef:mp,useState:function(){return bo(Kn)},useDebugValue:Wc,useDeferredValue:function(e,i){var a=fe();return Ap(a,Ft.memoizedState,e,i)},useTransition:function(){var e=bo(Kn)[0],i=fe().memoizedState;return[typeof e=="boolean"?e:jr(e),i]},useSyncExternalStore:Jd,useId:Rp,useHostTransitionStatus:eu,useFormState:fp,useActionState:fp,useOptimistic:function(e,i){var a=fe();return rp(a,Ft,e,i)},useMemoCache:Xc,useCacheRefresh:wp};iu.useEffectEvent=yp;var zp={readContext:Me,use:xo,useCallback:Sp,useContext:Me,useEffect:Kc,useImperativeHandle:vp,useInsertionEffect:_p,useLayoutEffect:xp,useMemo:Cp,useReducer:$c,useRef:mp,useState:function(){return $c(Kn)},useDebugValue:Wc,useDeferredValue:function(e,i){var a=fe();return Ft===null?Jc(a,e,i):Ap(a,Ft.memoizedState,e,i)},useTransition:function(){var e=$c(Kn)[0],i=fe().memoizedState;return[typeof e=="boolean"?e:jr(e),i]},useSyncExternalStore:Jd,useId:Rp,useHostTransitionStatus:eu,useFormState:pp,useActionState:pp,useOptimistic:function(e,i){var a=fe();return Ft!==null?rp(a,Ft,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Xc,useCacheRefresh:wp};zp.useEffectEvent=yp;function su(e,i,a,c){i=e.memoizedState,a=a(c,i),a=a==null?i:y({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ru={enqueueSetState:function(e,i,a){e=e._reactInternals;var c=on(),f=bi(c);f.payload=i,a!=null&&(f.callback=a),i=vi(e,f,c),i!==null&&(Qe(i,e,c),Lr(i,e,c))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var c=on(),f=bi(c);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=vi(e,f,c),i!==null&&(Qe(i,e,c),Lr(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=on(),c=bi(a);c.tag=2,i!=null&&(c.callback=i),i=vi(e,c,a),i!==null&&(Qe(i,e,a),Lr(i,e,a))}};function Up(e,i,a,c,f,p,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,p,b):i.prototype&&i.prototype.isPureReactComponent?!Rr(a,c)||!Rr(f,p):!0}function Lp(e,i,a,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==e&&ru.enqueueReplaceState(i,i.state,null)}function is(e,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(e=e.defaultProps){a===i&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Pp(e){to(e)}function Np(e){console.error(e)}function Gp(e){to(e)}function Ao(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function jp(e,i,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function au(e,i,a){return a=bi(a),a.tag=3,a.payload={element:null},a.callback=function(){Ao(e,i)},a}function Ip(e){return e=bi(e),e.tag=3,e}function Hp(e,i,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;e.payload=function(){return f(p)},e.callback=function(){jp(i,a,c)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){jp(i,a,c),typeof f!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function Hb(e,i,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&Ps(i,a,f,!0),a=nn.current,a!==null){switch(a.tag){case 31:case 13:return _n===null?Lo():a.alternate===null&&ae===0&&(ae=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===uo?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),ku(e,c,f)),!1;case 22:return a.flags|=65536,c===uo?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),ku(e,c,f)),!1}throw Error(s(435,a.tag))}return ku(e,c,f),Lo(),!1}if(Dt)return i=nn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Tc&&(e=Error(s(422),{cause:c}),kr(pn(e,a)))):(c!==Tc&&(i=Error(s(423),{cause:c}),kr(pn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,c=pn(c,a),f=au(e.stateNode,c,f),Lc(e,f),ae!==4&&(ae=2)),!1;var p=Error(s(520),{cause:c});if(p=pn(p,a),Zr===null?Zr=[p]:Zr.push(p),ae!==4&&(ae=2),i===null)return!0;c=pn(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=au(a.stateNode,c,e),Lc(a,e),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Mi===null||!Mi.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ip(f),Hp(f,e,a,c),Lc(a,f),!1}a=a.return}while(a!==null);return!1}var ou=Error(s(461)),ge=!1;function Re(e,i,a,c){i.child=e===null?Xd(i,null,a,c):es(i,e.child,a,c)}function Fp(e,i,a,c,f){a=a.render;var p=i.ref;if("ref"in c){var b={};for(var C in c)C!=="ref"&&(b[C]=c[C])}else b=c;return Ki(i),c=Hc(e,i,a,b,p,f),C=Fc(),e!==null&&!ge?(Yc(e,i,f),Wn(e,i,f)):(Dt&&C&&Cc(i),i.flags|=1,Re(e,i,c,f),i.child)}function Yp(e,i,a,c,f){if(e===null){var p=a.type;return typeof p=="function"&&!bc(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,Vp(e,i,p,c,f)):(e=so(a.type,null,c,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(p=e.child,!mu(e,f)){var b=p.memoizedProps;if(a=a.compare,a=a!==null?a:Rr,a(b,c)&&e.ref===i.ref)return Wn(e,i,f)}return i.flags|=1,e=Xn(p,c),e.ref=i.ref,e.return=i,i.child=e}function Vp(e,i,a,c,f){if(e!==null){var p=e.memoizedProps;if(Rr(p,c)&&e.ref===i.ref)if(ge=!1,i.pendingProps=c=p,mu(e,f))(e.flags&131072)!==0&&(ge=!0);else return i.lanes=e.lanes,Wn(e,i,f)}return lu(e,i,a,c,f)}function Xp(e,i,a,c){var f=c.children,p=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(c=i.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,i.child=null;return qp(e,i,p,a,c)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&lo(i,p!==null?p.cachePool:null),p!==null?Qd(i,p):Nc(),Zd(i);else return c=i.lanes=536870912,qp(e,i,p!==null?p.baseLanes|a:a,a,c)}else p!==null?(lo(i,p.cachePool),Qd(i,p),Ci(),i.memoizedState=null):(e!==null&&lo(i,null),Nc(),Ci());return Re(e,i,f,a),i.child}function Fr(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function qp(e,i,a,c,f){var p=Dc();return p=p===null?null:{parent:pe._currentValue,pool:p},i.memoizedState={baseLanes:a,cachePool:p},e!==null&&lo(i,null),Nc(),Zd(i),e!==null&&Ps(e,i,c,!0),i.childLanes=f,null}function To(e,i){return i=Mo({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function $p(e,i,a){return es(i,e.child,null,a),e=To(i,i.pendingProps),e.flags|=2,sn(i),i.memoizedState=null,e}function Fb(e,i,a){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Dt){if(c.mode==="hidden")return e=To(i,c),i.lanes=536870912,Fr(null,e);if(jc(i),(e=Kt)?(e=ag(e,yn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:mi!==null?{id:Ln,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},a=kd(e),a.return=i,i.child=a,Ee=i,Kt=null)):e=null,e===null)throw yi(i);return i.lanes=536870912,null}return To(i,c)}var p=e.memoizedState;if(p!==null){var b=p.dehydrated;if(jc(i),f)if(i.flags&256)i.flags&=-257,i=$p(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(ge||Ps(e,i,a,!1),f=(a&e.childLanes)!==0,ge||f){if(c=$t,c!==null&&(b=Nf(c,a),b!==0&&b!==p.retryLane))throw p.retryLane=b,qi(e,b),Qe(c,e,b),ou;Lo(),i=$p(e,i,a)}else e=p.treeContext,Kt=xn(b.nextSibling),Ee=i,Dt=!0,gi=null,yn=!1,e!==null&&zd(i,e),i=To(i,c),i.flags|=4096;return i}return e=Xn(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Eo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function lu(e,i,a,c,f){return Ki(i),a=Hc(e,i,a,c,void 0,f),c=Fc(),e!==null&&!ge?(Yc(e,i,f),Wn(e,i,f)):(Dt&&c&&Cc(i),i.flags|=1,Re(e,i,a,f),i.child)}function Qp(e,i,a,c,f,p){return Ki(i),i.updateQueue=null,a=Wd(i,c,a,f),Kd(e),c=Fc(),e!==null&&!ge?(Yc(e,i,p),Wn(e,i,p)):(Dt&&c&&Cc(i),i.flags|=1,Re(e,i,a,p),i.child)}function Zp(e,i,a,c,f){if(Ki(i),i.stateNode===null){var p=Os,b=a.contextType;typeof b=="object"&&b!==null&&(p=Me(b)),p=new a(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ru,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},zc(i),b=a.contextType,p.context=typeof b=="object"&&b!==null?Me(b):Os,p.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(su(i,a,b,c),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&ru.enqueueReplaceState(p,p.state,null),Nr(i,c,p,f),Pr(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){p=i.stateNode;var C=i.memoizedProps,w=is(a,C);p.props=w;var j=p.context,X=a.contextType;b=Os,typeof X=="object"&&X!==null&&(b=Me(X));var K=a.getDerivedStateFromProps;X=typeof K=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||j!==b)&&Lp(i,p,c,b),xi=!1;var I=i.memoizedState;p.state=I,Nr(i,c,p,f),Pr(),j=i.memoizedState,C||I!==j||xi?(typeof K=="function"&&(su(i,a,K,c),j=i.memoizedState),(w=xi||Up(i,a,w,c,I,j,b))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=j),p.props=c,p.state=j,p.context=b,c=w):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Uc(e,i),b=i.memoizedProps,X=is(a,b),p.props=X,K=i.pendingProps,I=p.context,j=a.contextType,w=Os,typeof j=="object"&&j!==null&&(w=Me(j)),C=a.getDerivedStateFromProps,(j=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==K||I!==w)&&Lp(i,p,c,w),xi=!1,I=i.memoizedState,p.state=I,Nr(i,c,p,f),Pr();var F=i.memoizedState;b!==K||I!==F||xi||e!==null&&e.dependencies!==null&&ao(e.dependencies)?(typeof C=="function"&&(su(i,a,C,c),F=i.memoizedState),(X=xi||Up(i,a,X,c,I,F,w)||e!==null&&e.dependencies!==null&&ao(e.dependencies))?(j||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,F,w),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,F,w)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===e.memoizedProps&&I===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&I===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=F),p.props=c,p.state=F,p.context=w,c=X):(typeof p.componentDidUpdate!="function"||b===e.memoizedProps&&I===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&I===e.memoizedState||(i.flags|=1024),c=!1)}return p=c,Eo(e,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,e!==null&&c?(i.child=es(i,e.child,null,f),i.child=es(i,null,a,f)):Re(e,i,a,f),i.memoizedState=p.state,e=i.child):e=Wn(e,i,f),e}function Kp(e,i,a,c){return Qi(),i.flags|=256,Re(e,i,a,c),i.child}var cu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uu(e){return{baseLanes:e,cachePool:jd()}}function hu(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=an),e}function Wp(e,i,a){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,b;if((b=p)||(b=e!==null&&e.memoizedState===null?!1:(he.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(Dt){if(f?Si(i):Ci(),(e=Kt)?(e=ag(e,yn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:mi!==null?{id:Ln,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},a=kd(e),a.return=i,i.child=a,Ee=i,Kt=null)):e=null,e===null)throw yi(i);return qu(e)?i.lanes=32:i.lanes=536870912,null}var C=c.children;return c=c.fallback,f?(Ci(),f=i.mode,C=Mo({mode:"hidden",children:C},f),c=$i(c,f,a,null),C.return=i,c.return=i,C.sibling=c,i.child=C,c=i.child,c.memoizedState=uu(a),c.childLanes=hu(e,b,a),i.memoizedState=cu,Fr(null,c)):(Si(i),fu(i,C))}var w=e.memoizedState;if(w!==null&&(C=w.dehydrated,C!==null)){if(p)i.flags&256?(Si(i),i.flags&=-257,i=du(e,i,a)):i.memoizedState!==null?(Ci(),i.child=e.child,i.flags|=128,i=null):(Ci(),C=c.fallback,f=i.mode,c=Mo({mode:"visible",children:c.children},f),C=$i(C,f,a,null),C.flags|=2,c.return=i,C.return=i,c.sibling=C,i.child=c,es(i,e.child,null,a),c=i.child,c.memoizedState=uu(a),c.childLanes=hu(e,b,a),i.memoizedState=cu,i=Fr(null,c));else if(Si(i),qu(C)){if(b=C.nextSibling&&C.nextSibling.dataset,b)var j=b.dgst;b=j,c=Error(s(419)),c.stack="",c.digest=b,kr({value:c,source:null,stack:null}),i=du(e,i,a)}else if(ge||Ps(e,i,a,!1),b=(a&e.childLanes)!==0,ge||b){if(b=$t,b!==null&&(c=Nf(b,a),c!==0&&c!==w.retryLane))throw w.retryLane=c,qi(e,c),Qe(b,e,c),ou;Xu(C)||Lo(),i=du(e,i,a)}else Xu(C)?(i.flags|=192,i.child=e.child,i=null):(e=w.treeContext,Kt=xn(C.nextSibling),Ee=i,Dt=!0,gi=null,yn=!1,e!==null&&zd(i,e),i=fu(i,c.children),i.flags|=4096);return i}return f?(Ci(),C=c.fallback,f=i.mode,w=e.child,j=w.sibling,c=Xn(w,{mode:"hidden",children:c.children}),c.subtreeFlags=w.subtreeFlags&65011712,j!==null?C=Xn(j,C):(C=$i(C,f,a,null),C.flags|=2),C.return=i,c.return=i,c.sibling=C,i.child=c,Fr(null,c),c=i.child,C=e.child.memoizedState,C===null?C=uu(a):(f=C.cachePool,f!==null?(w=pe._currentValue,f=f.parent!==w?{parent:w,pool:w}:f):f=jd(),C={baseLanes:C.baseLanes|a,cachePool:f}),c.memoizedState=C,c.childLanes=hu(e,b,a),i.memoizedState=cu,Fr(e.child,c)):(Si(i),a=e.child,e=a.sibling,a=Xn(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=a,i.memoizedState=null,a)}function fu(e,i){return i=Mo({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Mo(e,i){return e=en(22,e,null,i),e.lanes=0,e}function du(e,i,a){return es(i,e.child,null,a),e=fu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Jp(e,i,a){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Rc(e.return,i,a)}function pu(e,i,a,c,f,p){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f,treeForkCount:p}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=a,b.tailMode=f,b.treeForkCount=p)}function tm(e,i,a){var c=i.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var b=he.current,C=(b&2)!==0;if(C?(b=b&1|2,i.flags|=128):b&=1,tt(he,b),Re(e,i,c,a),c=Dt?Br:0,!C&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jp(e,a,i);else if(e.tag===19)Jp(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&mo(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),pu(i,!1,f,a,p,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&mo(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}pu(i,!0,a,null,p,c);break;case"together":pu(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Wn(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ei|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ps(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Xn(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Xn(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function mu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ao(e)))}function Yb(e,i,a){switch(i.tag){case 3:Zt(i,i.stateNode.containerInfo),_i(i,pe,e.memoizedState.cache),Qi();break;case 27:case 5:We(i);break;case 4:Zt(i,i.stateNode.containerInfo);break;case 10:_i(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,jc(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Si(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Wp(e,i,a):(Si(i),e=Wn(e,i,a),e!==null?e.sibling:null);Si(i);break;case 19:var f=(e.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(Ps(e,i,a,!1),c=(a&i.childLanes)!==0),f){if(c)return tm(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(he,he.current),c)break;return null;case 22:return i.lanes=0,Xp(e,i,a,i.pendingProps);case 24:_i(i,pe,e.memoizedState.cache)}return Wn(e,i,a)}function em(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ge=!0;else{if(!mu(e,a)&&(i.flags&128)===0)return ge=!1,Yb(e,i,a);ge=(e.flags&131072)!==0}else ge=!1,Dt&&(i.flags&1048576)!==0&&Od(i,Br,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=Ji(i.elementType),i.type=e,typeof e=="function")bc(e)?(c=is(e,c),i.tag=1,i=Zp(null,i,e,c,a)):(i.tag=0,i=lu(null,i,e,c,a));else{if(e!=null){var f=e.$$typeof;if(f===G){i.tag=11,i=Fp(null,i,e,c,a);break t}else if(f===Y){i.tag=14,i=Yp(null,i,e,c,a);break t}}throw i=Mt(e)||e,Error(s(306,i,""))}}return i;case 0:return lu(e,i,i.type,i.pendingProps,a);case 1:return c=i.type,f=is(c,i.pendingProps),Zp(e,i,c,f,a);case 3:t:{if(Zt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Uc(e,i),Nr(i,c,null,a);var b=i.memoizedState;if(c=b.cache,_i(i,pe,c),c!==p.cache&&wc(i,[pe],a,!0),Pr(),c=b.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Kp(e,i,c,a);break t}else if(c!==f){f=pn(Error(s(424)),i),kr(f),i=Kp(e,i,c,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Kt=xn(e.firstChild),Ee=i,Dt=!0,gi=null,yn=!0,a=Xd(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qi(),c===f){i=Wn(e,i,a);break t}Re(e,i,c,a)}i=i.child}return i;case 26:return Eo(e,i),e===null?(a=fg(i.type,null,i.pendingProps,null))?i.memoizedState=a:Dt||(a=i.type,e=i.pendingProps,c=Fo(yt.current).createElement(a),c[Te]=i,c[Fe]=e,we(c,a,e),ve(c),i.stateNode=c):i.memoizedState=fg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return We(i),e===null&&Dt&&(c=i.stateNode=cg(i.type,i.pendingProps,yt.current),Ee=i,yn=!0,f=Kt,ki(i.type)?($u=f,Kt=xn(c.firstChild)):Kt=f),Re(e,i,i.pendingProps.children,a),Eo(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Dt&&((f=c=Kt)&&(c=b1(c,i.type,i.pendingProps,yn),c!==null?(i.stateNode=c,Ee=i,Kt=xn(c.firstChild),yn=!1,f=!0):f=!1),f||yi(i)),We(i),f=i.type,p=i.pendingProps,b=e!==null?e.memoizedProps:null,c=p.children,Fu(f,p)?c=null:b!==null&&Fu(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=Hc(e,i,Ub,null,null,a),sa._currentValue=f),Eo(e,i),Re(e,i,c,a),i.child;case 6:return e===null&&Dt&&((e=a=Kt)&&(a=v1(a,i.pendingProps,yn),a!==null?(i.stateNode=a,Ee=i,Kt=null,e=!0):e=!1),e||yi(i)),null;case 13:return Wp(e,i,a);case 4:return Zt(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=es(i,null,c,a):Re(e,i,c,a),i.child;case 11:return Fp(e,i,i.type,i.pendingProps,a);case 7:return Re(e,i,i.pendingProps,a),i.child;case 8:return Re(e,i,i.pendingProps.children,a),i.child;case 12:return Re(e,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,_i(i,i.type,c.value),Re(e,i,c.children,a),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Ki(i),f=Me(f),c=c(f),i.flags|=1,Re(e,i,c,a),i.child;case 14:return Yp(e,i,i.type,i.pendingProps,a);case 15:return Vp(e,i,i.type,i.pendingProps,a);case 19:return tm(e,i,a);case 31:return Fb(e,i,a);case 22:return Xp(e,i,a,i.pendingProps);case 24:return Ki(i),c=Me(pe),e===null?(f=Dc(),f===null&&(f=$t,p=Bc(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:c,cache:f},zc(i),_i(i,pe,f)):((e.lanes&a)!==0&&(Uc(e,i),Nr(i,null,null,a),Pr()),f=e.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),_i(i,pe,c)):(c=p.cache,_i(i,pe,c),c!==f.cache&&wc(i,[pe],a,!0))),Re(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Jn(e){e.flags|=4}function gu(e,i,a,c,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Rm())e.flags|=8192;else throw ts=uo,Oc}else e.flags&=-16777217}function nm(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!yg(i))if(Rm())e.flags|=8192;else throw ts=uo,Oc}function Ro(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Uf():536870912,e.lanes|=i,Qs|=i)}function Yr(e,i){if(!Dt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Wt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=a,i}function Vb(e,i,a){var c=i.pendingProps;switch(Ac(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(i),null;case 1:return Wt(i),null;case 3:return a=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Qn(pe),Gt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ls(i)?Jn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ec())),Wt(i),null;case 26:var f=i.type,p=i.memoizedState;return e===null?(Jn(i),p!==null?(Wt(i),nm(i,p)):(Wt(i),gu(i,f,null,c,a))):p?p!==e.memoizedState?(Jn(i),Wt(i),nm(i,p)):(Wt(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&Jn(i),Wt(i),gu(i,f,e,c,a)),null;case 27:if(zn(i),a=yt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Wt(i),null}e=it.current,Ls(i)?Ud(i):(e=cg(f,c,a),i.stateNode=e,Jn(i))}return Wt(i),null;case 5:if(zn(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Wt(i),null}if(p=it.current,Ls(i))Ud(i);else{var b=Fo(yt.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}p[Te]=i,p[Fe]=c;t:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break t;for(;b.sibling===null;){if(b.return===null||b.return===i)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=p;t:switch(we(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Jn(i)}}return Wt(i),gu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=yt.current,Ls(i)){if(e=i.stateNode,a=i.memoizedProps,c=null,f=Ee,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}e[Te]=i,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Wm(e.nodeValue,a)),e||yi(i,!0)}else e=Fo(e).createTextNode(c),e[Te]=i,i.stateNode=e}return Wt(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(c=Ls(i),a!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Te]=i}else Qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Wt(i),e=!1}else a=Ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(sn(i),i):(sn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Wt(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ls(i),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Te]=i}else Qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Wt(i),f=!1}else f=Ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(sn(i),i):(sn(i),null)}return sn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Ro(i,i.updateQueue),Wt(i),null);case 4:return Gt(),e===null&&Nu(i.stateNode.containerInfo),Wt(i),null;case 10:return Qn(i.type),Wt(i),null;case 19:if(V(he),c=i.memoizedState,c===null)return Wt(i),null;if(f=(i.flags&128)!==0,p=c.rendering,p===null)if(f)Yr(c,!1);else{if(ae!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(p=mo(e),p!==null){for(i.flags|=128,Yr(c,!1),e=p.updateQueue,i.updateQueue=e,Ro(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Bd(a,e),a=a.sibling;return tt(he,he.current&1|2),Dt&&qn(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&Ne()>Oo&&(i.flags|=128,f=!0,Yr(c,!1),i.lanes=4194304)}else{if(!f)if(e=mo(p),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Ro(i,e),Yr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!Dt)return Wt(i),null}else 2*Ne()-c.renderingStartTime>Oo&&a!==536870912&&(i.flags|=128,f=!0,Yr(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(e=c.last,e!==null?e.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Ne(),e.sibling=null,a=he.current,tt(he,f?a&1|2:a&1),Dt&&qn(i,c.treeForkCount),e):(Wt(i),null);case 22:case 23:return sn(i),Gc(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(Wt(i),i.subtreeFlags&6&&(i.flags|=8192)):Wt(i),a=i.updateQueue,a!==null&&Ro(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),e!==null&&V(Wi),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Qn(pe),Wt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Xb(e,i){switch(Ac(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Qn(pe),Gt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return zn(i),null;case 31:if(i.memoizedState!==null){if(sn(i),i.alternate===null)throw Error(s(340));Qi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(sn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Qi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return V(he),null;case 4:return Gt(),null;case 10:return Qn(i.type),null;case 22:case 23:return sn(i),Gc(),e!==null&&V(Wi),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Qn(pe),null;case 25:return null;default:return null}}function im(e,i){switch(Ac(i),i.tag){case 3:Qn(pe),Gt();break;case 26:case 27:case 5:zn(i);break;case 4:Gt();break;case 31:i.memoizedState!==null&&sn(i);break;case 13:sn(i);break;case 19:V(he);break;case 10:Qn(i.type);break;case 22:case 23:sn(i),Gc(),e!==null&&V(Wi);break;case 24:Qn(pe)}}function Vr(e,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){c=void 0;var p=a.create,b=a.inst;c=p(),b.destroy=c}a=a.next}while(a!==f)}}catch(C){Ht(i,i.return,C)}}function Ai(e,i,a){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&e)===e){var b=c.inst,C=b.destroy;if(C!==void 0){b.destroy=void 0,f=i;var w=a,j=C;try{j()}catch(X){Ht(f,w,X)}}}c=c.next}while(c!==p)}}catch(X){Ht(i,i.return,X)}}function sm(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{$d(i,a)}catch(c){Ht(e,e.return,c)}}}function rm(e,i,a){a.props=is(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){Ht(e,i,c)}}function Xr(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(f){Ht(e,i,f)}}function Nn(e,i){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){Ht(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ht(e,i,f)}else a.current=null}function am(e){var i=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){Ht(e,e.return,f)}}function yu(e,i,a){try{var c=e.stateNode;p1(c,e.type,a,i),c[Fe]=i}catch(f){Ht(e,e.return,f)}}function om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ki(e.type)||e.tag===4}function _u(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ki(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xu(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Yn));else if(c!==4&&(c===27&&ki(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(xu(e,i,a),e=e.sibling;e!==null;)xu(e,i,a),e=e.sibling}function wo(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(c!==4&&(c===27&&ki(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(wo(e,i,a),e=e.sibling;e!==null;)wo(e,i,a),e=e.sibling}function lm(e){var i=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);we(i,c,a),i[Te]=e,i[Fe]=a}catch(p){Ht(e,e.return,p)}}var ti=!1,ye=!1,bu=!1,cm=typeof WeakSet=="function"?WeakSet:Set,Se=null;function qb(e,i){if(e=e.containerInfo,Iu=Zo,e=vd(e),dc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var b=0,C=-1,w=-1,j=0,X=0,K=e,I=null;e:for(;;){for(var F;K!==a||f!==0&&K.nodeType!==3||(C=b+f),K!==p||c!==0&&K.nodeType!==3||(w=b+c),K.nodeType===3&&(b+=K.nodeValue.length),(F=K.firstChild)!==null;)I=K,K=F;for(;;){if(K===e)break e;if(I===a&&++j===f&&(C=b),I===p&&++X===c&&(w=b),(F=K.nextSibling)!==null)break;K=I,I=K.parentNode}K=F}a=C===-1||w===-1?null:{start:C,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hu={focusedElem:e,selectionRange:a},Zo=!1,Se=i;Se!==null;)if(i=Se,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Se=e;else for(;Se!==null;){switch(i=Se,p=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var st=is(a.type,f);e=c.getSnapshotBeforeUpdate(st,p),c.__reactInternalSnapshotBeforeUpdate=e}catch(mt){Ht(a,a.return,mt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Vu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Se=e;break}Se=i.return}}function um(e,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ni(e,a),c&4&&Vr(5,a);break;case 1:if(ni(e,a),c&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(b){Ht(a,a.return,b)}else{var f=is(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ht(a,a.return,b)}}c&64&&sm(a),c&512&&Xr(a,a.return);break;case 3:if(ni(e,a),c&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{$d(e,i)}catch(b){Ht(a,a.return,b)}}break;case 27:i===null&&c&4&&lm(a);case 26:case 5:ni(e,a),i===null&&c&4&&am(a),c&512&&Xr(a,a.return);break;case 12:ni(e,a);break;case 31:ni(e,a),c&4&&dm(e,a);break;case 13:ni(e,a),c&4&&pm(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=n1.bind(null,a),S1(e,a))));break;case 22:if(c=a.memoizedState!==null||ti,!c){i=i!==null&&i.memoizedState!==null||ye,f=ti;var p=ye;ti=c,(ye=i)&&!p?ii(e,a,(a.subtreeFlags&8772)!==0):ni(e,a),ti=f,ye=p}break;case 30:break;default:ni(e,a)}}function hm(e){var i=e.alternate;i!==null&&(e.alternate=null,hm(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Zl(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,Ve=!1;function ei(e,i,a){for(a=a.child;a!==null;)fm(e,i,a),a=a.sibling}function fm(e,i,a){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount($,a)}catch{}switch(a.tag){case 26:ye||Nn(a,i),ei(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ye||Nn(a,i);var c=ie,f=Ve;ki(a.type)&&(ie=a.stateNode,Ve=!1),ei(e,i,a),ea(a.stateNode),ie=c,Ve=f;break;case 5:ye||Nn(a,i);case 6:if(c=ie,f=Ve,ie=null,ei(e,i,a),ie=c,Ve=f,ie!==null)if(Ve)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(p){Ht(a,i,p)}else try{ie.removeChild(a.stateNode)}catch(p){Ht(a,i,p)}break;case 18:ie!==null&&(Ve?(e=ie,sg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ir(e)):sg(ie,a.stateNode));break;case 4:c=ie,f=Ve,ie=a.stateNode.containerInfo,Ve=!0,ei(e,i,a),ie=c,Ve=f;break;case 0:case 11:case 14:case 15:Ai(2,a,i),ye||Ai(4,a,i),ei(e,i,a);break;case 1:ye||(Nn(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&rm(a,i,c)),ei(e,i,a);break;case 21:ei(e,i,a);break;case 22:ye=(c=ye)||a.memoizedState!==null,ei(e,i,a),ye=c;break;default:ei(e,i,a)}}function dm(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ir(e)}catch(a){Ht(i,i.return,a)}}}function pm(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ir(e)}catch(a){Ht(i,i.return,a)}}function $b(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new cm),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new cm),i;default:throw Error(s(435,e.tag))}}function Bo(e,i){var a=$b(e);i.forEach(function(c){if(!a.has(c)){a.add(c);var f=i1.bind(null,e,c);c.then(f,f)}})}function Xe(e,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],p=e,b=i,C=b;t:for(;C!==null;){switch(C.tag){case 27:if(ki(C.type)){ie=C.stateNode,Ve=!1;break t}break;case 5:ie=C.stateNode,Ve=!1;break t;case 3:case 4:ie=C.stateNode.containerInfo,Ve=!0;break t}C=C.return}if(ie===null)throw Error(s(160));fm(p,b,f),ie=null,Ve=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)mm(i,e),i=i.sibling}var En=null;function mm(e,i){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xe(i,e),qe(e),c&4&&(Ai(3,e,e.return),Vr(3,e),Ai(5,e,e.return));break;case 1:Xe(i,e),qe(e),c&512&&(ye||a===null||Nn(a,a.return)),c&64&&ti&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=En;if(Xe(i,e),qe(e),c&512&&(ye||a===null||Nn(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[xr]||p[Te]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),we(p,c,a),p[Te]=e,ve(p),c=p;break t;case"link":var b=mg("link","href",f).get(c+(a.href||""));if(b){for(var C=0;C<b.length;C++)if(p=b[C],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(C,1);break e}}p=f.createElement(c),we(p,c,a),f.head.appendChild(p);break;case"meta":if(b=mg("meta","content",f).get(c+(a.content||""))){for(C=0;C<b.length;C++)if(p=b[C],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(C,1);break e}}p=f.createElement(c),we(p,c,a),f.head.appendChild(p);break;default:throw Error(s(468,c))}p[Te]=e,ve(p),c=p}e.stateNode=c}else gg(f,e.type,e.stateNode);else e.stateNode=pg(f,c,e.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?gg(f,e.type,e.stateNode):pg(f,c,e.memoizedProps)):c===null&&e.stateNode!==null&&yu(e,e.memoizedProps,a.memoizedProps)}break;case 27:Xe(i,e),qe(e),c&512&&(ye||a===null||Nn(a,a.return)),a!==null&&c&4&&yu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Xe(i,e),qe(e),c&512&&(ye||a===null||Nn(a,a.return)),e.flags&32){f=e.stateNode;try{Es(f,"")}catch(st){Ht(e,e.return,st)}}c&4&&e.stateNode!=null&&(f=e.memoizedProps,yu(e,f,a!==null?a.memoizedProps:f)),c&1024&&(bu=!0);break;case 6:if(Xe(i,e),qe(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(st){Ht(e,e.return,st)}}break;case 3:if(Xo=null,f=En,En=Yo(i.containerInfo),Xe(i,e),En=f,qe(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ir(i.containerInfo)}catch(st){Ht(e,e.return,st)}bu&&(bu=!1,gm(e));break;case 4:c=En,En=Yo(e.stateNode.containerInfo),Xe(i,e),qe(e),En=c;break;case 12:Xe(i,e),qe(e);break;case 31:Xe(i,e),qe(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Bo(e,c)));break;case 13:Xe(i,e),qe(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Do=Ne()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Bo(e,c)));break;case 22:f=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,j=ti,X=ye;if(ti=j||f,ye=X||w,Xe(i,e),ye=X,ti=j,qe(e),c&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||w||ti||ye||ss(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(p=w.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{C=w.stateNode;var K=w.memoizedProps.style,I=K!=null&&K.hasOwnProperty("display")?K.display:null;C.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(st){Ht(w,w.return,st)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=f?"":w.memoizedProps}catch(st){Ht(w,w.return,st)}}}else if(i.tag===18){if(a===null){w=i;try{var F=w.stateNode;f?rg(F,!0):rg(w.stateNode,!1)}catch(st){Ht(w,w.return,st)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Bo(e,a))));break;case 19:Xe(i,e),qe(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Bo(e,c)));break;case 30:break;case 21:break;default:Xe(i,e),qe(e)}}function qe(e){var i=e.flags;if(i&2){try{for(var a,c=e.return;c!==null;){if(om(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=_u(e);wo(e,p,f);break;case 5:var b=a.stateNode;a.flags&32&&(Es(b,""),a.flags&=-33);var C=_u(e);wo(e,C,b);break;case 3:case 4:var w=a.stateNode.containerInfo,j=_u(e);xu(e,j,w);break;default:throw Error(s(161))}}catch(X){Ht(e,e.return,X)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function gm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;gm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function ni(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)um(e,i.alternate,i),i=i.sibling}function ss(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ai(4,i,i.return),ss(i);break;case 1:Nn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&rm(i,i.return,a),ss(i);break;case 27:ea(i.stateNode);case 26:case 5:Nn(i,i.return),ss(i);break;case 22:i.memoizedState===null&&ss(i);break;case 30:ss(i);break;default:ss(i)}e=e.sibling}}function ii(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=e,p=i,b=p.flags;switch(p.tag){case 0:case 11:case 15:ii(f,p,a),Vr(4,p);break;case 1:if(ii(f,p,a),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){Ht(c,c.return,j)}if(c=p,f=c.updateQueue,f!==null){var C=c.stateNode;try{var w=f.shared.hiddenCallbacks;if(w!==null)for(f.shared.hiddenCallbacks=null,f=0;f<w.length;f++)qd(w[f],C)}catch(j){Ht(c,c.return,j)}}a&&b&64&&sm(p),Xr(p,p.return);break;case 27:lm(p);case 26:case 5:ii(f,p,a),a&&c===null&&b&4&&am(p),Xr(p,p.return);break;case 12:ii(f,p,a);break;case 31:ii(f,p,a),a&&b&4&&dm(f,p);break;case 13:ii(f,p,a),a&&b&4&&pm(f,p);break;case 22:p.memoizedState===null&&ii(f,p,a),Xr(p,p.return);break;case 30:break;default:ii(f,p,a)}i=i.sibling}}function vu(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Dr(a))}function Su(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Dr(e))}function Mn(e,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ym(e,i,a,c),i=i.sibling}function ym(e,i,a,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Mn(e,i,a,c),f&2048&&Vr(9,i);break;case 1:Mn(e,i,a,c);break;case 3:Mn(e,i,a,c),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Dr(e)));break;case 12:if(f&2048){Mn(e,i,a,c),e=i.stateNode;try{var p=i.memoizedProps,b=p.id,C=p.onPostCommit;typeof C=="function"&&C(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){Ht(i,i.return,w)}}else Mn(e,i,a,c);break;case 31:Mn(e,i,a,c);break;case 13:Mn(e,i,a,c);break;case 23:break;case 22:p=i.stateNode,b=i.alternate,i.memoizedState!==null?p._visibility&2?Mn(e,i,a,c):qr(e,i):p._visibility&2?Mn(e,i,a,c):(p._visibility|=2,Xs(e,i,a,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&vu(b,i);break;case 24:Mn(e,i,a,c),f&2048&&Su(i.alternate,i);break;default:Mn(e,i,a,c)}}function Xs(e,i,a,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=e,b=i,C=a,w=c,j=b.flags;switch(b.tag){case 0:case 11:case 15:Xs(p,b,C,w,f),Vr(8,b);break;case 23:break;case 22:var X=b.stateNode;b.memoizedState!==null?X._visibility&2?Xs(p,b,C,w,f):qr(p,b):(X._visibility|=2,Xs(p,b,C,w,f)),f&&j&2048&&vu(b.alternate,b);break;case 24:Xs(p,b,C,w,f),f&&j&2048&&Su(b.alternate,b);break;default:Xs(p,b,C,w,f)}i=i.sibling}}function qr(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,c=i,f=c.flags;switch(c.tag){case 22:qr(a,c),f&2048&&vu(c.alternate,c);break;case 24:qr(a,c),f&2048&&Su(c.alternate,c);break;default:qr(a,c)}i=i.sibling}}var $r=8192;function qs(e,i,a){if(e.subtreeFlags&$r)for(e=e.child;e!==null;)_m(e,i,a),e=e.sibling}function _m(e,i,a){switch(e.tag){case 26:qs(e,i,a),e.flags&$r&&e.memoizedState!==null&&z1(a,En,e.memoizedState,e.memoizedProps);break;case 5:qs(e,i,a);break;case 3:case 4:var c=En;En=Yo(e.stateNode.containerInfo),qs(e,i,a),En=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=$r,$r=16777216,qs(e,i,a),$r=c):qs(e,i,a));break;default:qs(e,i,a)}}function xm(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Qr(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Se=c,vm(c,e)}xm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bm(e),e=e.sibling}function bm(e){switch(e.tag){case 0:case 11:case 15:Qr(e),e.flags&2048&&Ai(9,e,e.return);break;case 3:Qr(e);break;case 12:Qr(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,ko(e)):Qr(e);break;default:Qr(e)}}function ko(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Se=c,vm(c,e)}xm(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ai(8,i,i.return),ko(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ko(i));break;default:ko(i)}e=e.sibling}}function vm(e,i){for(;Se!==null;){var a=Se;switch(a.tag){case 0:case 11:case 15:Ai(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Dr(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Se=c;else t:for(a=e;Se!==null;){c=Se;var f=c.sibling,p=c.return;if(hm(c),c===a){Se=null;break t}if(f!==null){f.return=p,Se=f;break t}Se=p}}}var Qb={getCacheForType:function(e){var i=Me(pe),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Me(pe).controller.signal}},Zb=typeof WeakMap=="function"?WeakMap:Map,Nt=0,$t=null,At=null,wt=0,It=0,rn=null,Ti=!1,$s=!1,Cu=!1,si=0,ae=0,Ei=0,rs=0,Au=0,an=0,Qs=0,Zr=null,$e=null,Tu=!1,Do=0,Sm=0,Oo=1/0,zo=null,Mi=null,xe=0,Ri=null,Zs=null,ri=0,Eu=0,Mu=null,Cm=null,Kr=0,Ru=null;function on(){return(Nt&2)!==0&&wt!==0?wt&-wt:L.T!==null?zu():Gf()}function Am(){if(an===0)if((wt&536870912)===0||Dt){var e=Ia;Ia<<=1,(Ia&3932160)===0&&(Ia=262144),an=e}else an=536870912;return e=nn.current,e!==null&&(e.flags|=32),an}function Qe(e,i,a){(e===$t&&(It===2||It===9)||e.cancelPendingCommit!==null)&&(Ks(e,0),wi(e,wt,an,!1)),_r(e,a),((Nt&2)===0||e!==$t)&&(e===$t&&((Nt&2)===0&&(rs|=a),ae===4&&wi(e,wt,an,!1)),Gn(e))}function Tm(e,i,a){if((Nt&6)!==0)throw Error(s(327));var c=!a&&(i&127)===0&&(i&e.expiredLanes)===0||yr(e,i),f=c?Jb(e,i):Bu(e,i,!0),p=c;do{if(f===0){$s&&!c&&wi(e,i,0,!1);break}else{if(a=e.current.alternate,p&&!Kb(a)){f=Bu(e,i,!1),p=!1;continue}if(f===2){if(p=i,e.errorRecoveryDisabledLanes&p)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;t:{var C=e;f=Zr;var w=C.current.memoizedState.isDehydrated;if(w&&(Ks(C,b).flags|=256),b=Bu(C,b,!1),b!==2){if(Cu&&!w){C.errorRecoveryDisabledLanes|=p,rs|=p,f=4;break t}p=$e,$e=f,p!==null&&($e===null?$e=p:$e.push.apply($e,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){Ks(e,0),wi(e,i,0,!0);break}t:{switch(c=e,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:wi(c,i,an,!Ti);break t;case 2:$e=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Do+300-Ne(),10<f)){if(wi(c,i,an,!Ti),Fa(c,0,!0)!==0)break t;ri=i,c.timeoutHandle=ng(Em.bind(null,c,a,$e,zo,Tu,i,an,rs,Qs,Ti,p,"Throttled",-0,0),f);break t}Em(c,a,$e,zo,Tu,i,an,rs,Qs,Ti,p,null,-0,0)}}break}while(!0);Gn(e)}function Em(e,i,a,c,f,p,b,C,w,j,X,K,I,F){if(e.timeoutHandle=-1,K=i.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},_m(i,p,K);var st=(p&62914560)===p?Do-Ne():(p&4194048)===p?Sm-Ne():0;if(st=U1(K,st),st!==null){ri=p,e.cancelPendingCommit=st(zm.bind(null,e,i,p,a,c,f,b,C,w,X,K,null,I,F)),wi(e,p,b,!j);return}}zm(e,i,p,a,c,f,b,C,w)}function Kb(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],p=f.getSnapshot;f=f.value;try{if(!tn(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function wi(e,i,a,c){i&=~Au,i&=~rs,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var f=i;0<f;){var p=31-Ct(f),b=1<<p;c[p]=-1,f&=~b}a!==0&&Lf(e,a,i)}function Uo(){return(Nt&6)===0?(Wr(0),!1):!0}function wu(){if(At!==null){if(It===0)var e=At.return;else e=At,$n=Zi=null,Vc(e),Is=null,zr=0,e=At;for(;e!==null;)im(e.alternate,e),e=e.return;At=null}}function Ks(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,y1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ri=0,wu(),$t=e,At=a=Xn(e.current,null),wt=i,It=0,rn=null,Ti=!1,$s=yr(e,i),Cu=!1,Qs=an=Au=rs=Ei=ae=0,$e=Zr=null,Tu=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var f=31-Ct(c),p=1<<f;i|=e[f],c&=~p}return si=i,eo(),a}function Mm(e,i){xt=null,L.H=Hr,i===js||i===co?(i=Fd(),It=3):i===Oc?(i=Fd(),It=4):It=i===ou?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,rn=i,At===null&&(ae=1,Ao(e,pn(i,e.current)))}function Rm(){var e=nn.current;return e===null?!0:(wt&4194048)===wt?_n===null:(wt&62914560)===wt||(wt&536870912)!==0?e===_n:!1}function wm(){var e=L.H;return L.H=Hr,e===null?Hr:e}function Bm(){var e=L.A;return L.A=Qb,e}function Lo(){ae=4,Ti||(wt&4194048)!==wt&&nn.current!==null||($s=!0),(Ei&134217727)===0&&(rs&134217727)===0||$t===null||wi($t,wt,an,!1)}function Bu(e,i,a){var c=Nt;Nt|=2;var f=wm(),p=Bm();($t!==e||wt!==i)&&(zo=null,Ks(e,i)),i=!1;var b=ae;t:do try{if(It!==0&&At!==null){var C=At,w=rn;switch(It){case 8:wu(),b=6;break t;case 3:case 2:case 9:case 6:nn.current===null&&(i=!0);var j=It;if(It=0,rn=null,Ws(e,C,w,j),a&&$s){b=0;break t}break;default:j=It,It=0,rn=null,Ws(e,C,w,j)}}Wb(),b=ae;break}catch(X){Mm(e,X)}while(!0);return i&&e.shellSuspendCounter++,$n=Zi=null,Nt=c,L.H=f,L.A=p,At===null&&($t=null,wt=0,eo()),b}function Wb(){for(;At!==null;)km(At)}function Jb(e,i){var a=Nt;Nt|=2;var c=wm(),f=Bm();$t!==e||wt!==i?(zo=null,Oo=Ne()+500,Ks(e,i)):$s=yr(e,i);t:do try{if(It!==0&&At!==null){i=At;var p=rn;e:switch(It){case 1:It=0,rn=null,Ws(e,i,p,1);break;case 2:case 9:if(Id(p)){It=0,rn=null,Dm(i);break}i=function(){It!==2&&It!==9||$t!==e||(It=7),Gn(e)},p.then(i,i);break t;case 3:It=7;break t;case 4:It=5;break t;case 7:Id(p)?(It=0,rn=null,Dm(i)):(It=0,rn=null,Ws(e,i,p,7));break;case 5:var b=null;switch(At.tag){case 26:b=At.memoizedState;case 5:case 27:var C=At;if(b?yg(b):C.stateNode.complete){It=0,rn=null;var w=C.sibling;if(w!==null)At=w;else{var j=C.return;j!==null?(At=j,Po(j)):At=null}break e}}It=0,rn=null,Ws(e,i,p,5);break;case 6:It=0,rn=null,Ws(e,i,p,6);break;case 8:wu(),ae=6;break t;default:throw Error(s(462))}}t1();break}catch(X){Mm(e,X)}while(!0);return $n=Zi=null,L.H=c,L.A=f,Nt=a,At!==null?0:($t=null,wt=0,eo(),ae)}function t1(){for(;At!==null&&!un();)km(At)}function km(e){var i=em(e.alternate,e,si);e.memoizedProps=e.pendingProps,i===null?Po(e):At=i}function Dm(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Qp(a,i,i.pendingProps,i.type,void 0,wt);break;case 11:i=Qp(a,i,i.pendingProps,i.type.render,i.ref,wt);break;case 5:Vc(i);default:im(a,i),i=At=Bd(i,si),i=em(a,i,si)}e.memoizedProps=e.pendingProps,i===null?Po(e):At=i}function Ws(e,i,a,c){$n=Zi=null,Vc(i),Is=null,zr=0;var f=i.return;try{if(Hb(e,f,i,a,wt)){ae=1,Ao(e,pn(a,e.current)),At=null;return}}catch(p){if(f!==null)throw At=f,p;ae=1,Ao(e,pn(a,e.current)),At=null;return}i.flags&32768?(Dt||c===1?e=!0:$s||(wt&536870912)!==0?e=!1:(Ti=e=!0,(c===2||c===9||c===3||c===6)&&(c=nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Om(i,e)):Po(i)}function Po(e){var i=e;do{if((i.flags&32768)!==0){Om(i,Ti);return}e=i.return;var a=Vb(i.alternate,i,si);if(a!==null){At=a;return}if(i=i.sibling,i!==null){At=i;return}At=i=e}while(i!==null);ae===0&&(ae=5)}function Om(e,i){do{var a=Xb(e.alternate,e);if(a!==null){a.flags&=32767,At=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){At=e;return}At=e=a}while(e!==null);ae=6,At=null}function zm(e,i,a,c,f,p,b,C,w){e.cancelPendingCommit=null;do No();while(xe!==0);if((Nt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=_c,Ox(e,a,p,b,C,w),e===$t&&(At=$t=null,wt=0),Zs=i,Ri=e,ri=a,Eu=p,Mu=f,Cm=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s1(_,function(){return Gm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=L.T,L.T=null,f=q.p,q.p=2,b=Nt,Nt|=4;try{qb(e,i,a)}finally{Nt=b,q.p=f,L.T=c}}xe=1,Um(),Lm(),Pm()}}function Um(){if(xe===1){xe=0;var e=Ri,i=Zs,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=L.T,L.T=null;var c=q.p;q.p=2;var f=Nt;Nt|=4;try{mm(i,e);var p=Hu,b=vd(e.containerInfo),C=p.focusedElem,w=p.selectionRange;if(b!==C&&C&&C.ownerDocument&&bd(C.ownerDocument.documentElement,C)){if(w!==null&&dc(C)){var j=w.start,X=w.end;if(X===void 0&&(X=j),"selectionStart"in C)C.selectionStart=j,C.selectionEnd=Math.min(X,C.value.length);else{var K=C.ownerDocument||document,I=K&&K.defaultView||window;if(I.getSelection){var F=I.getSelection(),st=C.textContent.length,mt=Math.min(w.start,st),Vt=w.end===void 0?mt:Math.min(w.end,st);!F.extend&&mt>Vt&&(b=Vt,Vt=mt,mt=b);var P=xd(C,mt),O=xd(C,Vt);if(P&&O&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var N=K.createRange();N.setStart(P.node,P.offset),F.removeAllRanges(),mt>Vt?(F.addRange(N),F.extend(O.node,O.offset)):(N.setEnd(O.node,O.offset),F.addRange(N))}}}}for(K=[],F=C;F=F.parentNode;)F.nodeType===1&&K.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<K.length;C++){var Q=K[C];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Zo=!!Iu,Hu=Iu=null}finally{Nt=f,q.p=c,L.T=a}}e.current=i,xe=2}}function Lm(){if(xe===2){xe=0;var e=Ri,i=Zs,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=L.T,L.T=null;var c=q.p;q.p=2;var f=Nt;Nt|=4;try{um(e,i.alternate,i)}finally{Nt=f,q.p=c,L.T=a}}xe=3}}function Pm(){if(xe===4||xe===3){xe=0,gr();var e=Ri,i=Zs,a=ri,c=Cm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?xe=5:(xe=0,Zs=Ri=null,Nm(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Mi=null),$l(a),i=i.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot($,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=L.T,f=q.p,q.p=2,L.T=null;try{for(var p=e.onRecoverableError,b=0;b<c.length;b++){var C=c[b];p(C.value,{componentStack:C.stack})}}finally{L.T=i,q.p=f}}(ri&3)!==0&&No(),Gn(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Ru?Kr++:(Kr=0,Ru=e):Kr=0,Wr(0)}}function Nm(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Dr(i)))}function No(){return Um(),Lm(),Pm(),Gm()}function Gm(){if(xe!==5)return!1;var e=Ri,i=Eu;Eu=0;var a=$l(ri),c=L.T,f=q.p;try{q.p=32>a?32:a,L.T=null,a=Mu,Mu=null;var p=Ri,b=ri;if(xe=0,Zs=Ri=null,ri=0,(Nt&6)!==0)throw Error(s(331));var C=Nt;if(Nt|=4,bm(p.current),ym(p,p.current,b,a),Nt=C,Wr(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot($,p)}catch{}return!0}finally{q.p=f,L.T=c,Nm(e,i)}}function jm(e,i,a){i=pn(a,i),i=au(e.stateNode,i,2),e=vi(e,i,2),e!==null&&(_r(e,2),Gn(e))}function Ht(e,i,a){if(e.tag===3)jm(e,e,a);else for(;i!==null;){if(i.tag===3){jm(i,e,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Mi===null||!Mi.has(c))){e=pn(a,e),a=Ip(2),c=vi(i,a,2),c!==null&&(Hp(a,c,i,e),_r(c,2),Gn(c));break}}i=i.return}}function ku(e,i,a){var c=e.pingCache;if(c===null){c=e.pingCache=new Zb;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(Cu=!0,f.add(a),e=e1.bind(null,e,i,a),i.then(e,e))}function e1(e,i,a){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,$t===e&&(wt&a)===a&&(ae===4||ae===3&&(wt&62914560)===wt&&300>Ne()-Do?(Nt&2)===0&&Ks(e,0):Au|=a,Qs===wt&&(Qs=0)),Gn(e)}function Im(e,i){i===0&&(i=Uf()),e=qi(e,i),e!==null&&(_r(e,i),Gn(e))}function n1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Im(e,a)}function i1(e,i){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Im(e,a)}function s1(e,i){return xs(e,i)}var Go=null,Js=null,Du=!1,jo=!1,Ou=!1,Bi=0;function Gn(e){e!==Js&&e.next===null&&(Js===null?Go=Js=e:Js=Js.next=e),jo=!0,Du||(Du=!0,a1())}function Wr(e,i){if(!Ou&&jo){Ou=!0;do for(var a=!1,c=Go;c!==null;){if(e!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var b=c.suspendedLanes,C=c.pingedLanes;p=(1<<31-Ct(42|e)+1)-1,p&=f&~(b&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Vm(c,p))}else p=wt,p=Fa(c,c===$t?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||yr(c,p)||(a=!0,Vm(c,p));c=c.next}while(a);Ou=!1}}function r1(){Hm()}function Hm(){jo=Du=!1;var e=0;Bi!==0&&g1()&&(e=Bi);for(var i=Ne(),a=null,c=Go;c!==null;){var f=c.next,p=Fm(c,i);p===0?(c.next=null,a===null?Go=f:a.next=f,f===null&&(Js=a)):(a=c,(e!==0||(p&3)!==0)&&(jo=!0)),c=f}xe!==0&&xe!==5||Wr(e),Bi!==0&&(Bi=0)}function Fm(e,i){for(var a=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var b=31-Ct(p),C=1<<b,w=f[b];w===-1?((C&a)===0||(C&c)!==0)&&(f[b]=Dx(C,i)):w<=i&&(e.expiredLanes|=C),p&=~C}if(i=$t,a=wt,a=Fa(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===i&&(It===2||It===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&fi(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||yr(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(c!==null&&fi(c),$l(a)){case 2:case 8:a=A;break;case 32:a=_;break;case 268435456:a=R;break;default:a=_}return c=Ym.bind(null,e),a=xs(a,c),e.callbackPriority=i,e.callbackNode=a,i}return c!==null&&c!==null&&fi(c),e.callbackPriority=2,e.callbackNode=null,2}function Ym(e,i){if(xe!==0&&xe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(No()&&e.callbackNode!==a)return null;var c=wt;return c=Fa(e,e===$t?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Tm(e,c,i),Fm(e,Ne()),e.callbackNode!=null&&e.callbackNode===a?Ym.bind(null,e):null)}function Vm(e,i){if(No())return null;Tm(e,i,!0)}function a1(){_1(function(){(Nt&6)!==0?xs(Ga,r1):Hm()})}function zu(){if(Bi===0){var e=Ns;e===0&&(e=ja,ja<<=1,(ja&261888)===0&&(ja=256)),Bi=e}return Bi}function Xm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:qa(""+e)}function qm(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function o1(e,i,a,c,f){if(i==="submit"&&a&&a.stateNode===f){var p=Xm((f[Fe]||null).action),b=c.submitter;b&&(i=(i=b[Fe]||null)?Xm(i.formAction):b.getAttribute("formAction"),i!==null&&(p=i,b=null));var C=new Ka("action","action",null,c,f);e.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bi!==0){var w=b?qm(f,b):new FormData(f);tu(a,{pending:!0,data:w,method:f.method,action:p},null,w)}}else typeof p=="function"&&(C.preventDefault(),w=b?qm(f,b):new FormData(f),tu(a,{pending:!0,data:w,method:f.method,action:p},p,w))},currentTarget:f}]})}}for(var Uu=0;Uu<yc.length;Uu++){var Lu=yc[Uu],l1=Lu.toLowerCase(),c1=Lu[0].toUpperCase()+Lu.slice(1);Tn(l1,"on"+c1)}Tn(Ad,"onAnimationEnd"),Tn(Td,"onAnimationIteration"),Tn(Ed,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(Tb,"onTransitionRun"),Tn(Eb,"onTransitionStart"),Tn(Mb,"onTransitionCancel"),Tn(Md,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jr));function $m(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],f=c.event;c=c.listeners;t:{var p=void 0;if(i)for(var b=c.length-1;0<=b;b--){var C=c[b],w=C.instance,j=C.currentTarget;if(C=C.listener,w!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=j;try{p(f)}catch(X){to(X)}f.currentTarget=null,p=w}else for(b=0;b<c.length;b++){if(C=c[b],w=C.instance,j=C.currentTarget,C=C.listener,w!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=j;try{p(f)}catch(X){to(X)}f.currentTarget=null,p=w}}}}function Tt(e,i){var a=i[Ql];a===void 0&&(a=i[Ql]=new Set);var c=e+"__bubble";a.has(c)||(Qm(i,e,2,!1),a.add(c))}function Pu(e,i,a){var c=0;i&&(c|=4),Qm(a,e,c,i)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Nu(e){if(!e[Io]){e[Io]=!0,Hf.forEach(function(a){a!=="selectionchange"&&(u1.has(a)||Pu(a,!1,e),Pu(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Io]||(i[Io]=!0,Pu("selectionchange",!1,i))}}function Qm(e,i,a,c){switch(Ag(i)){case 2:var f=N1;break;case 8:f=G1;break;default:f=Ju}a=f.bind(null,i,a,e),f=void 0,!sc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function Gu(e,i,a,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var C=c.stateNode.containerInfo;if(C===f)break;if(b===4)for(b=c.return;b!==null;){var w=b.tag;if((w===3||w===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;C!==null;){if(b=vs(C),b===null)return;if(w=b.tag,w===5||w===6||w===26||w===27){c=p=b;continue t}C=C.parentNode}}c=c.return}td(function(){var j=p,X=nc(a),K=[];t:{var I=Rd.get(e);if(I!==void 0){var F=Ka,st=e;switch(e){case"keypress":if(Qa(a)===0)break t;case"keydown":case"keyup":F=ib;break;case"focusin":st="focus",F=lc;break;case"focusout":st="blur",F=lc;break;case"beforeblur":case"afterblur":F=lc;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=ab;break;case Ad:case Td:case Ed:F=$x;break;case Md:F=lb;break;case"scroll":case"scrollend":F=Fx;break;case"wheel":F=ub;break;case"copy":case"cut":case"paste":F=Zx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=rd;break;case"toggle":case"beforetoggle":F=fb}var mt=(i&4)!==0,Vt=!mt&&(e==="scroll"||e==="scrollend"),P=mt?I!==null?I+"Capture":null:I;mt=[];for(var O=j,N;O!==null;){var Q=O;if(N=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||N===null||P===null||(Q=vr(O,P),Q!=null&&mt.push(ta(O,Q,N))),Vt)break;O=O.return}0<mt.length&&(I=new F(I,st,null,a,X),K.push({event:I,listeners:mt}))}}if((i&7)===0){t:{if(I=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",I&&a!==ec&&(st=a.relatedTarget||a.fromElement)&&(vs(st)||st[bs]))break t;if((F||I)&&(I=X.window===X?X:(I=X.ownerDocument)?I.defaultView||I.parentWindow:window,F?(st=a.relatedTarget||a.toElement,F=j,st=st?vs(st):null,st!==null&&(Vt=l(st),mt=st.tag,st!==Vt||mt!==5&&mt!==27&&mt!==6)&&(st=null)):(F=null,st=j),F!==st)){if(mt=id,Q="onMouseLeave",P="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(mt=rd,Q="onPointerLeave",P="onPointerEnter",O="pointer"),Vt=F==null?I:br(F),N=st==null?I:br(st),I=new mt(Q,O+"leave",F,a,X),I.target=Vt,I.relatedTarget=N,Q=null,vs(X)===j&&(mt=new mt(P,O+"enter",st,a,X),mt.target=N,mt.relatedTarget=Vt,Q=mt),Vt=Q,F&&st)e:{for(mt=h1,P=F,O=st,N=0,Q=P;Q;Q=mt(Q))N++;Q=0;for(var ft=O;ft;ft=mt(ft))Q++;for(;0<N-Q;)P=mt(P),N--;for(;0<Q-N;)O=mt(O),Q--;for(;N--;){if(P===O||O!==null&&P===O.alternate){mt=P;break e}P=mt(P),O=mt(O)}mt=null}else mt=null;F!==null&&Zm(K,I,F,mt,!1),st!==null&&Vt!==null&&Zm(K,Vt,st,mt,!0)}}t:{if(I=j?br(j):window,F=I.nodeName&&I.nodeName.toLowerCase(),F==="select"||F==="input"&&I.type==="file")var Ut=dd;else if(hd(I))if(pd)Ut=Sb;else{Ut=bb;var ct=xb}else F=I.nodeName,!F||F.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?j&&tc(j.elementType)&&(Ut=dd):Ut=vb;if(Ut&&(Ut=Ut(e,j))){fd(K,Ut,a,X);break t}ct&&ct(e,I,j),e==="focusout"&&j&&I.type==="number"&&j.memoizedProps.value!=null&&Jl(I,"number",I.value)}switch(ct=j?br(j):window,e){case"focusin":(hd(ct)||ct.contentEditable==="true")&&(Bs=ct,pc=j,wr=null);break;case"focusout":wr=pc=Bs=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,Sd(K,a,X);break;case"selectionchange":if(Ab)break;case"keydown":case"keyup":Sd(K,a,X)}var vt;if(uc)t:{switch(e){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else ws?cd(e,a)&&(Bt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Bt="onCompositionStart");Bt&&(ad&&a.locale!=="ko"&&(ws||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ws&&(vt=ed()):(pi=X,rc="value"in pi?pi.value:pi.textContent,ws=!0)),ct=Ho(j,Bt),0<ct.length&&(Bt=new sd(Bt,e,null,a,X),K.push({event:Bt,listeners:ct}),vt?Bt.data=vt:(vt=ud(a),vt!==null&&(Bt.data=vt)))),(vt=pb?mb(e,a):gb(e,a))&&(Bt=Ho(j,"onBeforeInput"),0<Bt.length&&(ct=new sd("onBeforeInput","beforeinput",null,a,X),K.push({event:ct,listeners:Bt}),ct.data=vt)),o1(K,e,j,a,X)}$m(K,i)})}function ta(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Ho(e,i){for(var a=i+"Capture",c=[];e!==null;){var f=e,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=vr(e,a),f!=null&&c.unshift(ta(e,f,p)),f=vr(e,i),f!=null&&c.push(ta(e,f,p))),e.tag===3)return c;e=e.return}return[]}function h1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zm(e,i,a,c,f){for(var p=i._reactName,b=[];a!==null&&a!==c;){var C=a,w=C.alternate,j=C.stateNode;if(C=C.tag,w!==null&&w===c)break;C!==5&&C!==26&&C!==27||j===null||(w=j,f?(j=vr(a,p),j!=null&&b.unshift(ta(a,j,w))):f||(j=vr(a,p),j!=null&&b.push(ta(a,j,w)))),a=a.return}b.length!==0&&e.push({event:i,listeners:b})}var f1=/\r\n?/g,d1=/\u0000|\uFFFD/g;function Km(e){return(typeof e=="string"?e:""+e).replace(f1,`
`).replace(d1,"")}function Wm(e,i){return i=Km(i),Km(e)===i}function Yt(e,i,a,c,f,p){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Es(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Es(e,""+c);break;case"className":Va(e,"class",c);break;case"tabIndex":Va(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(e,a,c);break;case"style":Wf(e,c,p);break;case"data":if(i!=="object"){Va(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=qa(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&Yt(e,i,"name",f.name,f,null),Yt(e,i,"formEncType",f.formEncType,f,null),Yt(e,i,"formMethod",f.formMethod,f,null),Yt(e,i,"formTarget",f.formTarget,f,null)):(Yt(e,i,"encType",f.encType,f,null),Yt(e,i,"method",f.method,f,null),Yt(e,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=qa(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Yn);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=qa(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),Ya(e,"popover",c);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ya(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ix.get(a)||a,Ya(e,a,c))}}function ju(e,i,a,c,f,p){switch(a){case"style":Wf(e,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof c=="string"?Es(e,c):(typeof c=="number"||typeof c=="bigint")&&Es(e,""+c);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ff.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=e[Fe]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,c,f);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):Ya(e,a,c)}}}function we(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var c=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var b=a[p];if(b!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,p,b,a,null)}}f&&Yt(e,i,"srcSet",a.srcSet,a,null),c&&Yt(e,i,"src",a.src,a,null);return;case"input":Tt("invalid",e);var C=p=b=f=null,w=null,j=null;for(c in a)if(a.hasOwnProperty(c)){var X=a[c];if(X!=null)switch(c){case"name":f=X;break;case"type":b=X;break;case"checked":w=X;break;case"defaultChecked":j=X;break;case"value":p=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:Yt(e,i,c,X,a,null)}}$f(e,p,C,w,j,b,f,!1);return;case"select":Tt("invalid",e),c=b=p=null;for(f in a)if(a.hasOwnProperty(f)&&(C=a[f],C!=null))switch(f){case"value":p=C;break;case"defaultValue":b=C;break;case"multiple":c=C;default:Yt(e,i,f,C,a,null)}i=p,a=b,e.multiple=!!c,i!=null?Ts(e,!!c,i,!1):a!=null&&Ts(e,!!c,a,!0);return;case"textarea":Tt("invalid",e),p=f=c=null;for(b in a)if(a.hasOwnProperty(b)&&(C=a[b],C!=null))switch(b){case"value":c=C;break;case"defaultValue":f=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Yt(e,i,b,C,a,null)}Zf(e,c,f,p);return;case"option":for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null)&&(w==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":Yt(e,i,w,c,a,null));return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(c=0;c<Jr.length;c++)Tt(Jr[c],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(c=a[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,j,c,a,null)}return;default:if(tc(i)){for(X in a)a.hasOwnProperty(X)&&(c=a[X],c!==void 0&&ju(e,i,X,c,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(c=a[C],c!=null&&Yt(e,i,C,c,a,null))}function p1(e,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,C=null,w=null,j=null,X=null;for(F in a){var K=a[F];if(a.hasOwnProperty(F)&&K!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":w=K;default:c.hasOwnProperty(F)||Yt(e,i,F,null,c,K)}}for(var I in c){var F=c[I];if(K=a[I],c.hasOwnProperty(I)&&(F!=null||K!=null))switch(I){case"type":p=F;break;case"name":f=F;break;case"checked":j=F;break;case"defaultChecked":X=F;break;case"value":b=F;break;case"defaultValue":C=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:F!==K&&Yt(e,i,I,F,c,K)}}Wl(e,b,C,w,j,X,p,f);return;case"select":F=b=C=I=null;for(p in a)if(w=a[p],a.hasOwnProperty(p)&&w!=null)switch(p){case"value":break;case"multiple":F=w;default:c.hasOwnProperty(p)||Yt(e,i,p,null,c,w)}for(f in c)if(p=c[f],w=a[f],c.hasOwnProperty(f)&&(p!=null||w!=null))switch(f){case"value":I=p;break;case"defaultValue":C=p;break;case"multiple":b=p;default:p!==w&&Yt(e,i,f,p,c,w)}i=C,a=b,c=F,I!=null?Ts(e,!!a,I,!1):!!c!=!!a&&(i!=null?Ts(e,!!a,i,!0):Ts(e,!!a,a?[]:"",!1));return;case"textarea":F=I=null;for(C in a)if(f=a[C],a.hasOwnProperty(C)&&f!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Yt(e,i,C,null,c,f)}for(b in c)if(f=c[b],p=a[b],c.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":I=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&Yt(e,i,b,f,c,p)}Qf(e,I,F);return;case"option":for(var st in a)I=a[st],a.hasOwnProperty(st)&&I!=null&&!c.hasOwnProperty(st)&&(st==="selected"?e.selected=!1:Yt(e,i,st,null,c,I));for(w in c)I=c[w],F=a[w],c.hasOwnProperty(w)&&I!==F&&(I!=null||F!=null)&&(w==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":Yt(e,i,w,I,c,F));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)I=a[mt],a.hasOwnProperty(mt)&&I!=null&&!c.hasOwnProperty(mt)&&Yt(e,i,mt,null,c,I);for(j in c)if(I=c[j],F=a[j],c.hasOwnProperty(j)&&I!==F&&(I!=null||F!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,i));break;default:Yt(e,i,j,I,c,F)}return;default:if(tc(i)){for(var Vt in a)I=a[Vt],a.hasOwnProperty(Vt)&&I!==void 0&&!c.hasOwnProperty(Vt)&&ju(e,i,Vt,void 0,c,I);for(X in c)I=c[X],F=a[X],!c.hasOwnProperty(X)||I===F||I===void 0&&F===void 0||ju(e,i,X,I,c,F);return}}for(var P in a)I=a[P],a.hasOwnProperty(P)&&I!=null&&!c.hasOwnProperty(P)&&Yt(e,i,P,null,c,I);for(K in c)I=c[K],F=a[K],!c.hasOwnProperty(K)||I===F||I==null&&F==null||Yt(e,i,K,I,c,F)}function Jm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var f=a[c],p=f.transferSize,b=f.initiatorType,C=f.duration;if(p&&C&&Jm(b)){for(b=0,C=f.responseEnd,c+=1;c<a.length;c++){var w=a[c],j=w.startTime;if(j>C)break;var X=w.transferSize,K=w.initiatorType;X&&Jm(K)&&(w=w.responseEnd,b+=X*(w<C?1:(C-j)/(w-j)))}if(--c,i+=8*(p+b)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Iu=null,Hu=null;function Fo(e){return e.nodeType===9?e:e.ownerDocument}function tg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eg(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Fu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yu=null;function g1(){var e=window.event;return e&&e.type==="popstate"?e===Yu?!1:(Yu=e,!0):(Yu=null,!1)}var ng=typeof setTimeout=="function"?setTimeout:void 0,y1=typeof clearTimeout=="function"?clearTimeout:void 0,ig=typeof Promise=="function"?Promise:void 0,_1=typeof queueMicrotask=="function"?queueMicrotask:typeof ig<"u"?function(e){return ig.resolve(null).then(e).catch(x1)}:ng;function x1(e){setTimeout(function(){throw e})}function ki(e){return e==="head"}function sg(e,i){var a=i,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(f),ir(i);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")ea(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ea(a);for(var p=a.firstChild;p;){var b=p.nextSibling,C=p.nodeName;p[xr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=b}}else a==="body"&&ea(e.ownerDocument.body);a=f}while(a);ir(i)}function rg(e,i){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function Vu(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vu(a),Zl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function b1(e,i,a,c){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[xr])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=xn(e.nextSibling),e===null)break}return null}function v1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=xn(e.nextSibling),e===null))return null;return e}function ag(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=xn(e.nextSibling),e===null))return null;return e}function Xu(e){return e.data==="$?"||e.data==="$~"}function qu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function S1(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function xn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var $u=null;function og(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return xn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function lg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function cg(e,i,a){switch(i=Fo(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ea(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Zl(e)}var bn=new Map,ug=new Set;function Yo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ai=q.d;q.d={f:C1,r:A1,D:T1,C:E1,L:M1,m:R1,X:B1,S:w1,M:k1};function C1(){var e=ai.f(),i=Uo();return e||i}function A1(e){var i=Ss(e);i!==null&&i.tag===5&&i.type==="form"?Mp(i):ai.r(e)}var tr=typeof document>"u"?null:document;function hg(e,i,a){var c=tr;if(c&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),ug.has(f)||(ug.add(f),e={rel:e,crossOrigin:a,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),we(i,"link",e),ve(i),c.head.appendChild(i)))}}function T1(e){ai.D(e),hg("dns-prefetch",e,null)}function E1(e,i){ai.C(e,i),hg("preconnect",e,i)}function M1(e,i,a){ai.L(e,i,a);var c=tr;if(c&&e&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(e)+'"]';var p=f;switch(i){case"style":p=er(e);break;case"script":p=nr(e)}bn.has(p)||(e=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),bn.set(p,e),c.querySelector(f)!==null||i==="style"&&c.querySelector(na(p))||i==="script"&&c.querySelector(ia(p))||(i=c.createElement("link"),we(i,"link",e),ve(i),c.head.appendChild(i)))}}function R1(e,i){ai.m(e,i);var a=tr;if(a&&e){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(c)+'"][href="'+fn(e)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=nr(e)}if(!bn.has(p)&&(e=y({rel:"modulepreload",href:e},i),bn.set(p,e),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ia(p)))return}c=a.createElement("link"),we(c,"link",e),ve(c),a.head.appendChild(c)}}}function w1(e,i,a){ai.S(e,i,a);var c=tr;if(c&&e){var f=Cs(c).hoistableStyles,p=er(e);i=i||"default";var b=f.get(p);if(!b){var C={loading:0,preload:null};if(b=c.querySelector(na(p)))C.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":i},a),(a=bn.get(p))&&Qu(e,a);var w=b=c.createElement("link");ve(w),we(w,"link",e),w._p=new Promise(function(j,X){w.onload=j,w.onerror=X}),w.addEventListener("load",function(){C.loading|=1}),w.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Vo(b,i,c)}b={type:"stylesheet",instance:b,count:1,state:C},f.set(p,b)}}}function B1(e,i){ai.X(e,i);var a=tr;if(a&&e){var c=Cs(a).hoistableScripts,f=nr(e),p=c.get(f);p||(p=a.querySelector(ia(f)),p||(e=y({src:e,async:!0},i),(i=bn.get(f))&&Zu(e,i),p=a.createElement("script"),ve(p),we(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function k1(e,i){ai.M(e,i);var a=tr;if(a&&e){var c=Cs(a).hoistableScripts,f=nr(e),p=c.get(f);p||(p=a.querySelector(ia(f)),p||(e=y({src:e,async:!0,type:"module"},i),(i=bn.get(f))&&Zu(e,i),p=a.createElement("script"),ve(p),we(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function fg(e,i,a,c){var f=(f=yt.current)?Yo(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=er(a.href),a=Cs(f).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=er(a.href);var p=Cs(f).hoistableStyles,b=p.get(e);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,b),(p=f.querySelector(na(e)))&&!p._p&&(b.instance=p,b.state.loading=5),bn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},bn.set(e,a),p||D1(f,e,a,b.state))),i&&c===null)throw Error(s(528,""));return b}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=nr(a),a=Cs(f).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function er(e){return'href="'+fn(e)+'"'}function na(e){return'link[rel="stylesheet"]['+e+"]"}function dg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function D1(e,i,a,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),we(i,"link",a),ve(i),e.head.appendChild(i))}function nr(e){return'[src="'+fn(e)+'"]'}function ia(e){return"script[async]"+e}function pg(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+fn(a.href)+'"]');if(c)return i.instance=c,ve(c),c;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ve(c),we(c,"style",f),Vo(c,a.precedence,e),i.instance=c;case"stylesheet":f=er(a.href);var p=e.querySelector(na(f));if(p)return i.state.loading|=4,i.instance=p,ve(p),p;c=dg(a),(f=bn.get(f))&&Qu(c,f),p=(e.ownerDocument||e).createElement("link"),ve(p);var b=p;return b._p=new Promise(function(C,w){b.onload=C,b.onerror=w}),we(p,"link",c),i.state.loading|=4,Vo(p,a.precedence,e),i.instance=p;case"script":return p=nr(a.src),(f=e.querySelector(ia(p)))?(i.instance=f,ve(f),f):(c=a,(f=bn.get(p))&&(c=y({},a),Zu(c,f)),e=e.ownerDocument||e,f=e.createElement("script"),ve(f),we(f,"link",c),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Vo(c,a.precedence,e));return i.instance}function Vo(e,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,b=0;b<c.length;b++){var C=c[b];if(C.dataset.precedence===i)p=C;else if(p!==f)break}p?p.parentNode.insertBefore(e,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Qu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Zu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Xo=null;function mg(e,i,a){if(Xo===null){var c=new Map,f=Xo=new Map;f.set(a,c)}else f=Xo,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var p=a[f];if(!(p[xr]||p[Te]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(i)||"";b=e+b;var C=c.get(b);C?C.push(p):c.set(b,[p])}}return c}function gg(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function O1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function yg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function z1(e,i,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=er(c.href),p=i.querySelector(na(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=qo.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=p,ve(p);return}p=i.ownerDocument||i,c=dg(c),(f=bn.get(f))&&Qu(c,f),p=p.createElement("link"),ve(p);var b=p;b._p=new Promise(function(C,w){b.onload=C,b.onerror=w}),we(p,"link",c),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=qo.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var Ku=0;function U1(e,i){return e.stylesheets&&e.count===0&&Qo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&Qo(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+i);0<e.imgBytes&&Ku===0&&(Ku=62500*m1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qo(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>Ku?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function qo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var $o=null;function Qo(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,$o=new Map,i.forEach(L1,e),$o=null,qo.call(e))}function L1(e,i){if(!(i.state.loading&4)){var a=$o.get(e);if(a)var c=a.get(null);else{a=new Map,$o.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),c=b)}c&&a.set(null,c)}f=i.instance,b=f.getAttribute("data-precedence"),p=a.get(b)||c,p===c&&a.set(null,f),a.set(b,f),this.count++,c=qo.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var sa={$$typeof:z,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function P1(e,i,a,c,f,p,b,C,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.hiddenUpdates=Xl(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function _g(e,i,a,c,f,p,b,C,w,j,X,K){return e=new P1(e,i,a,b,w,j,X,K,C),i=1,p===!0&&(i|=24),p=en(3,null,null,i),e.current=p,p.stateNode=e,i=Bc(),i.refCount++,e.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:i},zc(p),e}function xg(e){return e?(e=Os,e):Os}function bg(e,i,a,c,f,p){f=xg(f),c.context===null?c.context=f:c.pendingContext=f,c=bi(i),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=vi(e,c,i),a!==null&&(Qe(a,e,i),Lr(a,e,i))}function vg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Wu(e,i){vg(e,i),(e=e.alternate)&&vg(e,i)}function Sg(e){if(e.tag===13||e.tag===31){var i=qi(e,67108864);i!==null&&Qe(i,e,67108864),Wu(e,67108864)}}function Cg(e){if(e.tag===13||e.tag===31){var i=on();i=ql(i);var a=qi(e,i);a!==null&&Qe(a,e,i),Wu(e,i)}}var Zo=!0;function N1(e,i,a,c){var f=L.T;L.T=null;var p=q.p;try{q.p=2,Ju(e,i,a,c)}finally{q.p=p,L.T=f}}function G1(e,i,a,c){var f=L.T;L.T=null;var p=q.p;try{q.p=8,Ju(e,i,a,c)}finally{q.p=p,L.T=f}}function Ju(e,i,a,c){if(Zo){var f=th(c);if(f===null)Gu(e,i,c,Ko,a),Tg(e,c);else if(I1(f,e,i,a,c))c.stopPropagation();else if(Tg(e,c),i&4&&-1<j1.indexOf(e)){for(;f!==null;){var p=Ss(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Hi(p.pendingLanes);if(b!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;b;){var w=1<<31-Ct(b);C.entanglements[1]|=w,b&=~w}Gn(p),(Nt&6)===0&&(Oo=Ne()+500,Wr(0))}}break;case 31:case 13:C=qi(p,2),C!==null&&Qe(C,p,2),Uo(),Wu(p,2)}if(p=th(c),p===null&&Gu(e,i,c,Ko,a),p===f)break;f=p}f!==null&&c.stopPropagation()}else Gu(e,i,c,null,a)}}function th(e){return e=nc(e),eh(e)}var Ko=null;function eh(e){if(Ko=null,e=vs(e),e!==null){var i=l(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=u(i),e!==null)return e;e=null}else if(a===31){if(e=h(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Ko=e,null}function Ag(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Un()){case Ga:return 2;case A:return 8;case _:case x:return 32;case R:return 268435456;default:return 32}default:return 32}}var nh=!1,Di=null,Oi=null,zi=null,ra=new Map,aa=new Map,Ui=[],j1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tg(e,i){switch(e){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":ra.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(i.pointerId)}}function oa(e,i,a,c,f,p){return e===null||e.nativeEvent!==p?(e={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Ss(i),i!==null&&Sg(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function I1(e,i,a,c,f){switch(i){case"focusin":return Di=oa(Di,e,i,a,c,f),!0;case"dragenter":return Oi=oa(Oi,e,i,a,c,f),!0;case"mouseover":return zi=oa(zi,e,i,a,c,f),!0;case"pointerover":var p=f.pointerId;return ra.set(p,oa(ra.get(p)||null,e,i,a,c,f)),!0;case"gotpointercapture":return p=f.pointerId,aa.set(p,oa(aa.get(p)||null,e,i,a,c,f)),!0}return!1}function Eg(e){var i=vs(e.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=u(a),i!==null){e.blockedOn=i,jf(e.priority,function(){Cg(a)});return}}else if(i===31){if(i=h(a),i!==null){e.blockedOn=i,jf(e.priority,function(){Cg(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wo(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=th(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);ec=c,a.target.dispatchEvent(c),ec=null}else return i=Ss(a),i!==null&&Sg(i),e.blockedOn=a,!1;i.shift()}return!0}function Mg(e,i,a){Wo(e)&&a.delete(i)}function H1(){nh=!1,Di!==null&&Wo(Di)&&(Di=null),Oi!==null&&Wo(Oi)&&(Oi=null),zi!==null&&Wo(zi)&&(zi=null),ra.forEach(Mg),aa.forEach(Mg)}function Jo(e,i){e.blockedOn===i&&(e.blockedOn=null,nh||(nh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,H1)))}var tl=null;function Rg(e){tl!==e&&(tl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){tl===e&&(tl=null);for(var i=0;i<e.length;i+=3){var a=e[i],c=e[i+1],f=e[i+2];if(typeof c!="function"){if(eh(c||a)===null)continue;break}var p=Ss(a);p!==null&&(e.splice(i,3),i-=3,tu(p,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function ir(e){function i(w){return Jo(w,e)}Di!==null&&Jo(Di,e),Oi!==null&&Jo(Oi,e),zi!==null&&Jo(zi,e),ra.forEach(i),aa.forEach(i);for(var a=0;a<Ui.length;a++){var c=Ui[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Ui.length&&(a=Ui[0],a.blockedOn===null);)Eg(a),a.blockedOn===null&&Ui.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],p=a[c+1],b=f[Fe]||null;if(typeof p=="function")b||Rg(a);else if(b){var C=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[Fe]||null)C=b.formAction;else if(eh(f)!==null)continue}else C=b.action;typeof C=="function"?a[c+1]=C:(a.splice(c,3),c-=3),Rg(a)}}}function wg(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function ih(e){this._internalRoot=e}el.prototype.render=ih.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,c=on();bg(a,c,e,i,null,null)},el.prototype.unmount=ih.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;bg(e.current,2,null,e,null,null),Uo(),i[bs]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var i=Gf();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Ui.length&&i!==0&&i<Ui[a].priority;a++);Ui.splice(a,0,e),a===0&&Eg(e)}};var Bg=t.version;if(Bg!=="19.2.4")throw Error(s(527,Bg,"19.2.4"));q.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var F1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{$=nl.inject(F1),pt=nl}catch{}}return ua.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,c="",f=Pp,p=Np,b=Gp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=_g(e,1,!1,null,null,a,c,null,f,p,b,wg),e[bs]=i.current,Nu(e),new ih(i)},ua.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var c=!1,f="",p=Pp,b=Np,C=Gp,w=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),i=_g(e,1,!0,i,a??null,c,f,w,p,b,C,wg),i.context=xg(null),a=i.current,c=on(),c=ql(c),f=bi(c),f.callback=null,vi(a,f,c),a=c,i.current.lanes=a,_r(i,a),Gn(i),e[bs]=i.current,Nu(e),new el(i)},ua.version="19.2.4",ua}var Fg;function sv(){if(Fg)return oh.exports;Fg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),oh.exports=iv(),oh.exports}var rv=sv();const av=Pa(rv),ov="modulepreload",lv=function(r,t){return new URL(r,t).href},Yg={},Bl=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){let m=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const u=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");o=m(n.map(g=>{if(g=lv(g,s),g in Yg)return;Yg[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(s)for(let T=u.length-1;T>=0;T--){const M=u[T];if(M.href===g&&(!y||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${v}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":ov,y||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),y)return new Promise((T,M)=>{S.addEventListener("load",T),S.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})};var dt=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(dt||{});const Ih=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},sl=(r,t)=>Ih(r).priority??t,ke={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Ih).forEach(t=>{t.type.forEach(n=>this._removeHandlers[n]?.(t))}),this},add(...r){return r.map(Ih).forEach(t=>{t.type.forEach(n=>{const s=this._addHandlers,o=this._queue;s[n]?s[n]?.(t):(o[n]=o[n]||[],o[n]?.push(t))})}),this},handle(r,t,n){const s=this._addHandlers,o=this._removeHandlers;if(s[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);s[r]=t,o[r]=n;const l=this._queue;return l[r]&&(l[r]?.forEach(u=>t(u)),delete l[r]),this},handleByMap(r,t){return this.handle(r,n=>{n.name&&(t[n.name]=n.ref)},n=>{n.name&&delete t[n.name]})},handleByNamedList(r,t,n=-1){return this.handle(r,s=>{t.findIndex(l=>l.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((l,u)=>sl(u.value,n)-sl(l.value,n)))},s=>{const o=t.findIndex(l=>l.name===s.name);o!==-1&&t.splice(o,1)})},handleByList(r,t,n=-1){return this.handle(r,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((o,l)=>sl(l,n)-sl(o,n)))},s=>{const o=t.indexOf(s.ref);o!==-1&&t.splice(o,1)})},mixin(r,...t){for(const n of t)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(n))}},cv={extension:{type:dt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Bl(()=>import("./browserAll-RXquCu6G.js"),__vite__mapDeps([0,1,2]),import.meta.url)}},uv={extension:{type:dt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Bl(()=>import("./webworkerAll-C2613sYQ.js"),__vite__mapDeps([1,2]),import.meta.url)}};class Oe{constructor(t,n,s){this._x=n||0,this._y=s||0,this._observer=t}clone(t){return new Oe(t??this._observer,this._x,this._y)}set(t=0,n=t){return(this._x!==t||this._y!==n)&&(this._x=t,this._y=n,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var hh={exports:{}},Vg;function hv(){return Vg||(Vg=1,(function(r){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function o(d,m,g){this.fn=d,this.context=m,this.once=g||!1}function l(d,m,g,y,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var S=new o(g,y||d,v),T=n?n+m:m;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],S]:d._events[T].push(S):(d._events[T]=S,d._eventsCount++),d}function u(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},h.prototype.listeners=function(m){var g=n?n+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,S=y.length,T=new Array(S);v<S;v++)T[v]=y[v].fn;return T},h.prototype.listenerCount=function(m){var g=n?n+m:m,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(m,g,y,v,S,T){var M=n?n+m:m;if(!this._events[M])return!1;var E=this._events[M],B=arguments.length,D,z;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),B){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,g),!0;case 3:return E.fn.call(E.context,g,y),!0;case 4:return E.fn.call(E.context,g,y,v),!0;case 5:return E.fn.call(E.context,g,y,v,S),!0;case 6:return E.fn.call(E.context,g,y,v,S,T),!0}for(z=1,D=new Array(B-1);z<B;z++)D[z-1]=arguments[z];E.fn.apply(E.context,D)}else{var G=E.length,W;for(z=0;z<G;z++)switch(E[z].once&&this.removeListener(m,E[z].fn,void 0,!0),B){case 1:E[z].fn.call(E[z].context);break;case 2:E[z].fn.call(E[z].context,g);break;case 3:E[z].fn.call(E[z].context,g,y);break;case 4:E[z].fn.call(E[z].context,g,y,v);break;default:if(!D)for(W=1,D=new Array(B-1);W<B;W++)D[W-1]=arguments[W];E[z].fn.apply(E[z].context,D)}}return!0},h.prototype.on=function(m,g,y){return l(this,m,g,y,!1)},h.prototype.once=function(m,g,y){return l(this,m,g,y,!0)},h.prototype.removeListener=function(m,g,y,v){var S=n?n+m:m;if(!this._events[S])return this;if(!g)return u(this,S),this;var T=this._events[S];if(T.fn)T.fn===g&&(!v||T.once)&&(!y||T.context===y)&&u(this,S);else{for(var M=0,E=[],B=T.length;M<B;M++)(T[M].fn!==g||v&&!T[M].once||y&&T[M].context!==y)&&E.push(T[M]);E.length?this._events[S]=E.length===1?E[0]:E:u(this,S)}return this},h.prototype.removeAllListeners=function(m){var g;return m?(g=n?n+m:m,this._events[g]&&u(this,g)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,r.exports=h})(hh)),hh.exports}var fv=hv();const kn=Pa(fv),dv=Math.PI*2,pv=180/Math.PI,mv=Math.PI/180;class Ue{constructor(t=0,n=0){this.x=0,this.y=0,this.x=t,this.y=n}clone(){return new Ue(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,n=t){return this.x=t,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return fh.x=0,fh.y=0,fh}}const fh=new Ue;class kt{constructor(t=1,n=0,s=0,o=1,l=0,u=0){this.array=null,this.a=t,this.b=n,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,n,s,o,l,u){return this.a=t,this.b=n,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(t,n){this.array||(this.array=new Float32Array(9));const s=n||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,n){n=n||new Ue;const s=t.x,o=t.y;return n.x=this.a*s+this.c*o+this.tx,n.y=this.b*s+this.d*o+this.ty,n}applyInverse(t,n){n=n||new Ue;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,d=this.ty,m=1/(s*u+l*-o),g=t.x,y=t.y;return n.x=u*m*g+-l*m*y+(d*l-h*u)*m,n.y=s*m*y+-o*m*g+(-d*s+h*o)*m,n}translate(t,n){return this.tx+=t,this.ty+=n,this}scale(t,n){return this.a*=t,this.d*=n,this.c*=t,this.b*=n,this.tx*=t,this.ty*=n,this}rotate(t){const n=Math.cos(t),s=Math.sin(t),o=this.a,l=this.c,u=this.tx;return this.a=o*n-this.b*s,this.b=o*s+this.b*n,this.c=l*n-this.d*s,this.d=l*s+this.d*n,this.tx=u*n-this.ty*s,this.ty=u*s+this.ty*n,this}append(t){const n=this.a,s=this.b,o=this.c,l=this.d;return this.a=t.a*n+t.b*o,this.b=t.a*s+t.b*l,this.c=t.c*n+t.d*o,this.d=t.c*s+t.d*l,this.tx=t.tx*n+t.ty*o+this.tx,this.ty=t.tx*s+t.ty*l+this.ty,this}appendFrom(t,n){const s=t.a,o=t.b,l=t.c,u=t.d,h=t.tx,d=t.ty,m=n.a,g=n.b,y=n.c,v=n.d;return this.a=s*m+o*y,this.b=s*g+o*v,this.c=l*m+u*y,this.d=l*g+u*v,this.tx=h*m+d*y+n.tx,this.ty=h*g+d*v+n.ty,this}setTransform(t,n,s,o,l,u,h,d,m){return this.a=Math.cos(h+m)*l,this.b=Math.sin(h+m)*l,this.c=-Math.sin(h-d)*u,this.d=Math.cos(h-d)*u,this.tx=t-(s*this.a+o*this.c),this.ty=n-(s*this.b+o*this.d),this}prepend(t){const n=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,o=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this}decompose(t){const n=this.a,s=this.b,o=this.c,l=this.d,u=t.pivot,h=-Math.atan2(-o,l),d=Math.atan2(s,n),m=Math.abs(h+d);return m<1e-5||Math.abs(dv-m)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=d),t.scale.x=Math.sqrt(n*n+s*s),t.scale.y=Math.sqrt(o*o+l*l),t.position.x=this.tx+(u.x*n+u.y*o),t.position.y=this.ty+(u.x*s+u.y*l),t}invert(){const t=this.a,n=this.b,s=this.c,o=this.d,l=this.tx,u=t*o-n*s;return this.a=o/u,this.b=-n/u,this.c=-s/u,this.d=t/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(t*this.ty-n*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new kt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return yv.identity()}static get shared(){return gv.identity()}}const gv=new kt,yv=new kt,os=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ls=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],cs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],us=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Hh=[],gy=[],rl=Math.sign;function _v(){for(let r=0;r<16;r++){const t=[];Hh.push(t);for(let n=0;n<16;n++){const s=rl(os[r]*os[n]+cs[r]*ls[n]),o=rl(ls[r]*os[n]+us[r]*ls[n]),l=rl(os[r]*cs[n]+cs[r]*us[n]),u=rl(ls[r]*cs[n]+us[r]*us[n]);for(let h=0;h<16;h++)if(os[h]===s&&ls[h]===o&&cs[h]===l&&us[h]===u){t.push(h);break}}}for(let r=0;r<16;r++){const t=new kt;t.set(os[r],ls[r],cs[r],us[r],0,0),gy.push(t)}}_v();const Xt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>os[r],uY:r=>ls[r],vX:r=>cs[r],vY:r=>us[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>Hh[r][t],sub:(r,t)=>Hh[r][Xt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Xt.S:Xt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Xt.E:Xt.W:t>0?r>0?Xt.SE:Xt.SW:r>0?Xt.NE:Xt.NW,matrixAppendRotationInv:(r,t,n=0,s=0)=>{const o=gy[Xt.inv(t)];o.tx=n,o.ty=s,r.append(o)},transformRectCoords:(r,t,n,s)=>{const{x:o,y:l,width:u,height:h}=r,{x:d,y:m,width:g,height:y}=t;return n===Xt.E?(s.set(o+d,l+m,u,h),s):n===Xt.S?s.set(g-l-h+d,o+m,h,u):n===Xt.W?s.set(g-o-u+d,y-l-h+m,u,h):n===Xt.N?s.set(l+d,y-o-u+m,h,u):s.set(o+d,l+m,u,h)}},al=[new Ue,new Ue,new Ue,new Ue];class de{constructor(t=0,n=0,s=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(n),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new de(0,0,0,0)}clone(){return new de(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(t,n,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,d=this.y,m=s*(1-o),g=s-m,y=h-m,v=h+l+m,S=d-m,T=d+u+m,M=h+g,E=h+l-g,B=d+g,D=d+u-g;return t>=y&&t<=v&&n>=S&&n<=T&&!(t>M&&t<E&&n>B&&n<D)}intersects(t,n){if(!n){const ot=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=ot)return!1;const et=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>et}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=al[0].set(t.left,t.top),d=al[1].set(t.left,t.bottom),m=al[2].set(t.right,t.top),g=al[3].set(t.right,t.bottom);if(m.x<=h.x||d.y<=h.y)return!1;const y=Math.sign(n.a*n.d-n.b*n.c);if(y===0||(n.apply(h,h),n.apply(d,d),n.apply(m,m),n.apply(g,g),Math.max(h.x,d.x,m.x,g.x)<=s||Math.min(h.x,d.x,m.x,g.x)>=o||Math.max(h.y,d.y,m.y,g.y)<=l||Math.min(h.y,d.y,m.y,g.y)>=u))return!1;const v=y*(d.y-h.y),S=y*(h.x-d.x),T=v*s+S*l,M=v*o+S*l,E=v*s+S*u,B=v*o+S*u;if(Math.max(T,M,E,B)<=v*h.x+S*h.y||Math.min(T,M,E,B)>=v*g.x+S*g.y)return!1;const D=y*(h.y-m.y),z=y*(m.x-h.x),G=D*s+z*l,W=D*o+z*l,Z=D*s+z*u,Y=D*o+z*u;return!(Math.max(G,W,Z,Y)<=D*h.x+z*h.y||Math.min(G,W,Z,Y)>=D*g.x+z*g.y)}pad(t=0,n=t){return this.x-=t,this.y-=n,this.width+=t*2,this.height+=n*2,this}fit(t){const n=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),l=Math.min(this.y+this.height,t.y+t.height);return this.x=n,this.width=Math.max(s-n,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(t=1,n=.001){const s=Math.ceil((this.x+this.width-n)*t)/t,o=Math.ceil((this.y+this.height-n)*t)/t;return this.x=Math.floor((this.x+n)*t)/t,this.y=Math.floor((this.y+n)*t)/t,this.width=s-this.x,this.height=o-this.y,this}scale(t,n=t){return this.x*=t,this.y*=n,this.width*=t,this.height*=n,this}enlarge(t){const n=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),l=Math.max(this.y+this.height,t.y+t.height);return this.x=n,this.width=s-n,this.y=o,this.height=l-o,this}getBounds(t){return t||(t=new de),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const n=t.x,s=t.y,o=t.x+t.width,l=t.y+t.height;return n>=this.x&&n<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(t,n,s,o){return this.x=t,this.y=n,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const dh={default:-1};function le(r="default"){return dh[r]===void 0&&(dh[r]=-1),++dh[r]}const Xg=new Set,qt="8.0.0",xv="8.3.4",ar={quiet:!1,noColor:!1},Et=(r,t,n=3)=>{if(ar.quiet||Xg.has(t))return;let s=new Error().stack;const o=`${t}
Deprecated since v${r}`,l=typeof console.groupCollapsed=="function"&&!ar.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(n).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Xg.add(t)};Object.defineProperties(Et,{quiet:{get:()=>ar.quiet,set:r=>{ar.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>ar.noColor,set:r=>{ar.noColor=r},enumerable:!0,configurable:!1}});const yy=()=>{};function kl(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function qg(r){return!(r&r-1)&&!!r}function _y(r){const t={};for(const n in r)r[n]!==void 0&&(t[n]=r[n]);return t}const $g=Object.create(null);function bv(r){const t=$g[r];return t===void 0&&($g[r]=le("resource")),t}const xy=class by extends kn{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...by.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Et(qt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=bv(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};xy.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Dl=xy;const vy=class Sy extends kn{constructor(t={}){super(),this.options=t,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=le("textureSource"),this._resourceType="textureSource",this._resourceId=le("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Sy.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new Dl(_y(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=le("resource"),this.emit("change",this),this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,n,s){s||(s=this._resolution),t||(t=this.width),n||(n=this.height);const o=Math.round(t*s),l=Math.round(n*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=le("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=qg(this.pixelWidth)&&qg(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};vy.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Dn=vy;class yf extends Dn{constructor(t){const n=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(n instanceof Float32Array?s="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?s="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?s="rgba16uint":(n instanceof Int8Array,s="bgra8unorm")),super({...t,resource:n,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}yf.extension=dt.TextureSource;const Qg=new kt;class vv{constructor(t,n){this.mapCoord=new kt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,n){n===void 0&&(n=t);const s=this.mapCoord;for(let o=0;o<t.length;o+=2){const l=t[o],u=t[o+1];n[o]=l*s.a+u*s.c+s.tx,n[o+1]=l*s.b+u*s.d+s.ty}return n}update(){const t=this._texture;this._updateID++;const n=t.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=t.orig,o=t.trim;o&&(Qg.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Qg));const l=t.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(t.frame.x+h+d)/l.width,u[1]=(t.frame.y+h+d)/l.height,u[2]=(t.frame.x+t.frame.width-h+d)/l.width,u[3]=(t.frame.y+t.frame.height-h+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=t.frame.width===l.width&&t.frame.height===l.height&&t.rotate===0,!0}}class Ot extends kn{constructor({source:t,label:n,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:d,dynamic:m}={}){if(super(),this.uid=le("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new de,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=t?.source??new Dn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=m||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new vv(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:n}=this,{width:s,height:o}=this._source,l=n.x/s,u=n.y/o,h=n.width/s,d=n.height/o;let m=this.rotate;if(m){const g=h/2,y=d/2,v=l+g,S=u+y;m=Xt.add(m,Xt.NW),t.x0=v+g*Xt.uX(m),t.y0=S+y*Xt.uY(m),m=Xt.add(m,2),t.x1=v+g*Xt.uX(m),t.y1=S+y*Xt.uY(m),m=Xt.add(m,2),t.x2=v+g*Xt.uX(m),t.y2=S+y*Xt.uY(m),m=Xt.add(m,2),t.x3=v+g*Xt.uX(m),t.y3=S+y*Xt.uY(m)}else t.x0=l,t.y0=u,t.x1=l+h,t.y1=u,t.x2=l+h,t.y2=u+d,t.x3=l,t.y3=u+d}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Et(qt,"Texture.baseTexture is now Texture.source"),this._source}}Ot.EMPTY=new Ot({label:"EMPTY",source:new Dn({label:"EMPTY"})});Ot.EMPTY.destroy=yy;Ot.WHITE=new Ot({source:new yf({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ot.WHITE.destroy=yy;function Sv(r,t,n){const{width:s,height:o}=n.orig,l=n.trim;if(l){const u=l.width,h=l.height;r.minX=l.x-t._x*s,r.maxX=r.minX+u,r.minY=l.y-t._y*o,r.maxY=r.minY+h}else r.minX=-t._x*s,r.maxX=r.minX+s,r.minY=-t._y*o,r.maxY=r.minY+o}const Zg=new kt;class Bn{constructor(t=1/0,n=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Zg,this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new de);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Zg,this}set(t,n,s,o){this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}addFrame(t,n,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,d=l.c,m=l.d,g=l.tx,y=l.ty;let v=this.minX,S=this.minY,T=this.maxX,M=this.maxY,E=u*t+d*n+g,B=h*t+m*n+y;E<v&&(v=E),B<S&&(S=B),E>T&&(T=E),B>M&&(M=B),E=u*s+d*n+g,B=h*s+m*n+y,E<v&&(v=E),B<S&&(S=B),E>T&&(T=E),B>M&&(M=B),E=u*t+d*o+g,B=h*t+m*o+y,E<v&&(v=E),B<S&&(S=B),E>T&&(T=E),B>M&&(M=B),E=u*s+d*o+g,B=h*s+m*o+y,E<v&&(v=E),B<S&&(S=B),E>T&&(T=E),B>M&&(M=B),this.minX=v,this.minY=S,this.maxX=T,this.maxY=M}addRect(t,n){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,n)}addBounds(t,n){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,n)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const n=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:d,d:m,tx:g,ty:y}=t;let v=u*n+d*s+g,S=h*n+m*s+y;this.minX=v,this.minY=S,this.maxX=v,this.maxY=S,v=u*o+d*s+g,S=h*o+m*s+y,this.minX=v<this.minX?v:this.minX,this.minY=S<this.minY?S:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=S>this.maxY?S:this.maxY,v=u*n+d*l+g,S=h*n+m*l+y,this.minX=v<this.minX?v:this.minX,this.minY=S<this.minY?S:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=S>this.maxY?S:this.maxY,v=u*o+d*l+g,S=h*o+m*l+y,this.minX=v<this.minX?v:this.minX,this.minY=S<this.minY?S:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=S>this.maxY?S:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,n,s,o){return this.minX<t&&(this.minX=t),this.maxX>n&&(this.maxX=n),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(t,n=t){return this.minX-=t,this.maxX+=t,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Bn(this.minX,this.minY,this.maxX,this.maxY)}scale(t,n=t){return this.minX*=t,this.minY*=n,this.maxX*=t,this.maxY*=n,this}get x(){return this.minX}set x(t){const n=this.maxX-this.minX;this.minX=t,this.maxX=t+n}get y(){return this.minY}set y(t){const n=this.maxY-this.minY;this.minY=t,this.maxY=t+n}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,n,s,o){let l=this.minX,u=this.minY,h=this.maxX,d=this.maxY;o||(o=this.matrix);const m=o.a,g=o.b,y=o.c,v=o.d,S=o.tx,T=o.ty;for(let M=n;M<s;M+=2){const E=t[M],B=t[M+1],D=m*E+y*B+S,z=g*E+v*B+T;l=D<l?D:l,u=z<u?z:u,h=D>h?D:h,d=z>d?z:d}this.minX=l,this.minY=u,this.maxX=h,this.maxY=d}containsPoint(t,n){return this.minX<=t&&this.minY<=n&&this.maxX>=t&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var Cv={grad:.9,turn:360,rad:360/(2*Math.PI)},oi=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Ce=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},Cn=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),r>n?n:r>t?r:t},Cy=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Kg=function(r){return{r:Cn(r.r,0,255),g:Cn(r.g,0,255),b:Cn(r.b,0,255),a:Cn(r.a)}},ph=function(r){return{r:Ce(r.r),g:Ce(r.g),b:Ce(r.b),a:Ce(r.a,3)}},Av=/^#([0-9a-f]{3,8})$/i,ol=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},Ay=function(r){var t=r.r,n=r.g,s=r.b,o=r.a,l=Math.max(t,n,s),u=l-Math.min(t,n,s),h=u?l===t?(n-s)/u:l===n?2+(s-t)/u:4+(t-n)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},Ty=function(r){var t=r.h,n=r.s,s=r.v,o=r.a;t=t/360*6,n/=100,s/=100;var l=Math.floor(t),u=s*(1-n),h=s*(1-(t-l)*n),d=s*(1-(1-t+l)*n),m=l%6;return{r:255*[s,h,u,u,d,s][m],g:255*[d,s,s,h,u,u][m],b:255*[u,u,d,s,s,h][m],a:o}},Wg=function(r){return{h:Cy(r.h),s:Cn(r.s,0,100),l:Cn(r.l,0,100),a:Cn(r.a)}},Jg=function(r){return{h:Ce(r.h),s:Ce(r.s),l:Ce(r.l),a:Ce(r.a,3)}},t0=function(r){return Ty((n=(t=r).s,{h:t.h,s:(n*=((s=t.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:t.a}));var t,n,s},Ea=function(r){return{h:(t=Ay(r)).h,s:(o=(200-(n=t.s))*(s=t.v)/100)>0&&o<200?n*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,s,o},Tv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ev=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Rv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fh={string:[[function(r){var t=Av.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Ce(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Ce(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=Mv.exec(r)||Rv.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:Kg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=Tv.exec(r)||Ev.exec(r);if(!t)return null;var n,s,o=Wg({h:(n=t[1],s=t[2],s===void 0&&(s="deg"),Number(n)*(Cv[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return t0(o)},"hsl"]],object:[[function(r){var t=r.r,n=r.g,s=r.b,o=r.a,l=o===void 0?1:o;return oi(t)&&oi(n)&&oi(s)?Kg({r:Number(t),g:Number(n),b:Number(s),a:Number(l)}):null},"rgb"],[function(r){var t=r.h,n=r.s,s=r.l,o=r.a,l=o===void 0?1:o;if(!oi(t)||!oi(n)||!oi(s))return null;var u=Wg({h:Number(t),s:Number(n),l:Number(s),a:Number(l)});return t0(u)},"hsl"],[function(r){var t=r.h,n=r.s,s=r.v,o=r.a,l=o===void 0?1:o;if(!oi(t)||!oi(n)||!oi(s))return null;var u=(function(h){return{h:Cy(h.h),s:Cn(h.s,0,100),v:Cn(h.v,0,100),a:Cn(h.a)}})({h:Number(t),s:Number(n),v:Number(s),a:Number(l)});return Ty(u)},"hsv"]]},e0=function(r,t){for(var n=0;n<t.length;n++){var s=t[n][0](r);if(s)return[s,t[n][1]]}return[null,void 0]},wv=function(r){return typeof r=="string"?e0(r.trim(),Fh.string):typeof r=="object"&&r!==null?e0(r,Fh.object):[null,void 0]},mh=function(r,t){var n=Ea(r);return{h:n.h,s:Cn(n.s+100*t,0,100),l:n.l,a:n.a}},gh=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},n0=function(r,t){var n=Ea(r);return{h:n.h,s:n.s,l:Cn(n.l+100*t,0,100),a:n.a}},Yh=(function(){function r(t){this.parsed=wv(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Ce(gh(this.rgba),2)},r.prototype.isDark=function(){return gh(this.rgba)<.5},r.prototype.isLight=function(){return gh(this.rgba)>=.5},r.prototype.toHex=function(){return t=ph(this.rgba),n=t.r,s=t.g,o=t.b,u=(l=t.a)<1?ol(Ce(255*l)):"","#"+ol(n)+ol(s)+ol(o)+u;var t,n,s,o,l,u},r.prototype.toRgb=function(){return ph(this.rgba)},r.prototype.toRgbString=function(){return t=ph(this.rgba),n=t.r,s=t.g,o=t.b,(l=t.a)<1?"rgba("+n+", "+s+", "+o+", "+l+")":"rgb("+n+", "+s+", "+o+")";var t,n,s,o,l},r.prototype.toHsl=function(){return Jg(Ea(this.rgba))},r.prototype.toHslString=function(){return t=Jg(Ea(this.rgba)),n=t.h,s=t.s,o=t.l,(l=t.a)<1?"hsla("+n+", "+s+"%, "+o+"%, "+l+")":"hsl("+n+", "+s+"%, "+o+"%)";var t,n,s,o,l},r.prototype.toHsv=function(){return t=Ay(this.rgba),{h:Ce(t.h),s:Ce(t.s),v:Ce(t.v),a:Ce(t.a,3)};var t},r.prototype.invert=function(){return jn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),jn(mh(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),jn(mh(this.rgba,-t))},r.prototype.grayscale=function(){return jn(mh(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),jn(n0(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),jn(n0(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?jn({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):Ce(this.rgba.a,3);var n},r.prototype.hue=function(t){var n=Ea(this.rgba);return typeof t=="number"?jn({h:t,s:n.s,l:n.l,a:n.a}):Ce(n.h)},r.prototype.isEqual=function(t){return this.toHex()===jn(t).toHex()},r})(),jn=function(r){return r instanceof Yh?r:new Yh(r)},i0=[],Bv=function(r){r.forEach(function(t){i0.indexOf(t)<0&&(t(Yh,Fh),i0.push(t))})};function kv(r,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in n)s[n[o]]=o;var l={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,m=s[this.toHex()];if(m)return m;if(u?.closest){var g=this.toRgb(),y=1/0,v="black";if(!l.length)for(var S in n)l[S]=new r(n[S]).toRgb();for(var T in n){var M=(h=g,d=l[T],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));M<y&&(y=M,v=T)}return v}},t.string.push([function(u){var h=u.toLowerCase(),d=h==="transparent"?"#0000":n[h];return d?new r(d).toRgb():null},"name"])}Bv([kv]);const ur=class ba{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ba)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,n){const s=typeof t;if(s!==typeof n)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===n;if(Array.isArray(t)&&Array.isArray(n)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))return t.length!==n.length?!1:t.every((l,u)=>l===n[u]);if(t!==null&&n!==null){const l=Object.keys(t),u=Object.keys(n);return l.length!==u.length?!1:l.every(h=>t[h]===n[h])}return t===n}toRgba(){const[t,n,s,o]=this._components;return{r:t,g:n,b:s,a:o}}toRgb(){const[t,n,s]=this._components;return{r:t,g:n,b:s}}toRgbaString(){const[t,n,s]=this.toUint8RgbArray();return`rgba(${t},${n},${s},${this.alpha})`}toUint8RgbArray(t){const[n,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(n*255),t[1]=Math.round(s*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[n,s,o,l]=this._components;return t[0]=n,t[1]=s,t[2]=o,t[3]=l,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[n,s,o]=this._components;return t[0]=n,t[1]=s,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,n,s]=this.toUint8RgbArray();return(s<<16)+(n<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[n,s,o,l]=ba._temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(t,n=!0){return n&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,n=!0){if(t===1)return(255<<24)+this._int;if(t===0)return n?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return n&&(s=s*t+.5|0,o=o*t+.5|0,l=l*t+.5|0),(t*255<<24)+(s<<16)+(o<<8)+l}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let n,s,o,l;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const u=t;n=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,s,o,l=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,s,o,l=255]=t,n/=255,s/=255,o/=255,l/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=ba.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const u=jn(t);u.isValid()&&({r:n,g:s,b:o,a:l}=u.rgba,n/=255,s/=255,o/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,n,s]=this._components;this._int=(t*255<<16)+(n*255<<8)+(s*255|0)}_clamp(t,n=0,s=1){return typeof t=="number"?Math.min(Math.max(t,n),s):(t.forEach((o,l)=>{t[l]=Math.min(Math.max(o,n),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof ba||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};ur.shared=new ur;ur._temp=new ur;ur.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let be=ur;const Dv={cullArea:null,cullable:!1,cullableChildren:!0};let yh=0;const s0=500;function te(...r){yh!==s0&&(yh++,yh===s0?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const Na={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class Ov{constructor(t,n){this._pool=[],this._count=0,this._index=0,this._classType=t,n&&this.prepopulate(n)}prepopulate(t){for(let n=0;n<t;n++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let n;return this._index>0?n=this._pool[--this._index]:(n=new this._classType,this._count++),n.init?.(t),n}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class zv{constructor(){this._poolsByClass=new Map}prepopulate(t,n){this.getPool(t).prepopulate(n)}get(t,n){return this.getPool(t).get(n)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Ov(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(n=>{const s=t[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;t[s]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const An=new zv;Na.register(An);const Uv={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){Et("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function Lv(r,t,n){const s=r.length;let o;if(t>=s||n===0)return;n=t+n>s?s-t:n;const l=s-n;for(o=t;o<l;++o)r[o]=r[o+n];r.length=l}const Pv={allowChildren:!0,removeChildren(r=0,t){const n=t??this.children.length,s=n-r,o=[];if(s>0&&s<=n){for(let u=n-1;u>=r;u--){const h=this.children[u];h&&(o.push(h),h.parent=null)}Lv(this.children,r,n);const l=this.renderGroup||this.parentRenderGroup;l&&l.removeChildren(o);for(let u=0;u<o.length;++u){const h=o[u];h.parentRenderLayer?.detach(h),this.emit("childRemoved",h,this,u),o[u].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const t=this.getChildAt(r);return this.removeChild(t)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,t)},getChildIndex(r){const t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(r,t){this.allowChildren||Et(qt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(t<0||t>n.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${n.length}`);if(r.parent){const o=r.parent.children.indexOf(r);if(r.parent===this&&o===t)return r;o!==-1&&r.parent.children.splice(o,1)}t===n.length?n.push(r):n.splice(t,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,t),r.emit("added",this),r},swapChildren(r,t){if(r===t)return;const n=this.getChildIndex(r),s=this.getChildIndex(t);this.children[n]=t,this.children[s]=r;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(t=>this.reparentChildAt(t,this.children.length)),r[0])},reparentChildAt(r,t){if(r.parent===this)return this.setChildIndex(r,t),r;const n=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,t);const s=this.worldTransform.clone();return s.invert(),n.prepend(s),r.setFromMatrix(n),r},replaceChild(r,t){r.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(r)),t.setFromMatrix(r.localTransform),t.updateLocalTransform(),this.removeChild(r)}},Nv={collectRenderables(r,t,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,t,n):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,t,n))},collectRenderablesSimple(r,t,n){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(r,t,n)},collectRenderablesWithEffects(r,t,n){const{renderPipes:s}=t;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,r)}this.collectRenderablesSimple(r,t,n);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,r)}}};class r0{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class Gv{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const s=this._tests[n];if(s.test(t))return An.get(s.maskClass,t)}return t}returnMaskEffect(t){An.return(t)}}const Vh=new Gv;ke.handleByList(dt.MaskEffect,Vh._effectClasses);const jv={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((n,s)=>n.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const t=this.effects.indexOf(r);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const t=this._maskEffect;t?.mask!==r&&(t&&(this.removeEffect(t),Vh.returnMaskEffect(t),this._maskEffect=null),r!=null&&(this._maskEffect=Vh.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){!Array.isArray(r)&&r&&(r=[r]);const t=this._filterEffect||(this._filterEffect=new r0);r=r;const n=r?.length>0,s=t.filters?.length>0,o=n!==s;r=Array.isArray(r)?r.slice(0):r,t.filters=Object.freeze(r),o&&(n?this.addEffect(t):(this.removeEffect(t),t.filters=r??null))},get filters(){return this._filterEffect?.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new r0),this._filterEffect.filterArea=r},get filterArea(){return this._filterEffect?.filterArea}},Iv={label:null,get name(){return Et(qt,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Et(qt,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,t=!1){return this.getChildByLabel(r,t)},getChildByLabel(r,t=!1){const n=this.children;for(let s=0;s<n.length;s++){const o=n[s];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(t)for(let s=0;s<n.length;s++){const l=n[s].getChildByLabel(r,!0);if(l)return l}return null},getChildrenByLabel(r,t=!1,n=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===r||r instanceof RegExp&&r.test(l.label))&&n.push(l)}if(t)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(r,!0,n);return n}},je=An.getPool(kt),li=An.getPool(Bn),Hv=new kt,Fv={getFastGlobalBounds(r,t){t||(t=new Bn),t.clear(),this._getGlobalBoundsRecursive(!!r,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(n.worldTransform),t},_getGlobalBoundsRecursive(r,t,n){let s=t;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=li.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(r,s,n)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(Hv).invert()),t.addBounds(s),li.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),li.return(s))}};function Ey(r,t,n){n.clear();let s,o;return r.parent?t?s=r.parent.worldTransform:(o=je.get().identity(),s=_f(r,o)):s=kt.IDENTITY,My(r,n,s,t),o&&je.return(o),n.isValid||n.set(0,0,0,0),n}function My(r,t,n,s){if(!r.visible||!r.measurable)return;let o;s?o=r.worldTransform:(r.updateLocalTransform(),o=je.get(),o.appendFrom(r.localTransform,n));const l=t,u=!!r.effects.length;if(u&&(t=li.get().clear()),r.boundsArea)t.addRect(r.boundsArea,o);else{const h=r.bounds;h&&!h.isEmpty()&&(t.matrix=o,t.addBounds(h));for(let d=0;d<r.children.length;d++)My(r.children[d],t,o,s)}if(u){for(let h=0;h<r.effects.length;h++)r.effects[h].addBounds?.(t);l.addBounds(t,kt.IDENTITY),li.return(t)}s||je.return(o)}function _f(r,t){const n=r.parent;return n&&(_f(n,t),n.updateLocalTransform(),t.append(n.localTransform)),t}function Ry(r,t){if(r===16777215||!t)return t;if(t===16777215||!r)return r;const n=r>>16&255,s=r>>8&255,o=r&255,l=t>>16&255,u=t>>8&255,h=t&255,d=n*l/255|0,m=s*u/255|0,g=o*h/255|0;return(d<<16)+(m<<8)+g}const a0=16777215;function o0(r,t){return r===a0?t:t===a0?r:Ry(r,t)}function bl(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const Yv={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,n=this.parent;for(;n;)t*=n.alpha,n=n.parent;return t},getGlobalTransform(r=new kt,t){if(t)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const n=_f(this,je.get().identity());return r.appendFrom(this.localTransform,n),je.return(n),r},getGlobalTint(r){if(r)return this.renderGroup?bl(this.renderGroup.worldColor):this.parentRenderGroup?bl(o0(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,n=this.parent;for(;n;)t=o0(t,n.localColor),n=n.parent;return bl(t)}};function wy(r,t,n){return t.clear(),n||(n=kt.IDENTITY),By(r,t,n,r,!0),t.isValid||t.set(0,0,0,0),t}function By(r,t,n,s,o){let l;if(o)l=je.get(),l=n.copyTo(l);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const d=r.localTransform;l=je.get(),l.appendFrom(d,n)}const u=t,h=!!r.effects.length;if(h&&(t=li.get().clear()),r.boundsArea)t.addRect(r.boundsArea,l);else{r.renderPipeId&&(t.matrix=l,t.addBounds(r.bounds));const d=r.children;for(let m=0;m<d.length;m++)By(d[m],t,l,s,!1)}if(h){for(let d=0;d<r.effects.length;d++)r.effects[d].addLocalBounds?.(t,s);u.addBounds(t,kt.IDENTITY),li.return(t)}je.return(l)}function ky(r,t){const n=r.children;for(let s=0;s<n.length;s++){const o=n[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=t.index;(t.data[h]!==l||t.data[h+1]!==u)&&(t.data[t.index]=l,t.data[t.index+1]=u,t.didChange=!0),t.index=h+2,o.children.length&&ky(o,t)}return t.didChange}const Vv=new kt,Xv={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,t){const n=Math.sign(this.scale.x)||1;t!==0?this.scale.x=r/t*n:this.scale.x=n},_setHeight(r,t){const n=Math.sign(this.scale.y)||1;t!==0?this.scale.y=r/t*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Bn});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),ky(this,r),r.didChange&&wy(this,r.localBounds,Vv),r.localBounds},getBounds(r,t){return Ey(this,r,t||new Bn)}},qv={_onRender:null,set onRender(r){const t=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},$v={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Qv))}};function Qv(r,t){return r._zIndex-t._zIndex}const Zv={getGlobalPosition(r=new Ue,t=!1){return this.parent?this.parent.toGlobal(this._position,r,t):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,t,n=!1){const s=this.getGlobalTransform(je.get(),n);return t=s.apply(r,t),je.return(s),t},toLocal(r,t,n,s){t&&(r=t.toGlobal(r,n,s));const o=this.getGlobalTransform(je.get(),s);return n=o.applyInverse(r,n),je.return(o),n}};class Dy{constructor(){this.uid=le("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Kv=0;class Wv{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new Dl(this.textureOptions)}createTexture(t,n,s){const o=new Dn({...this.textureOptions,width:t,height:n,resolution:1,antialias:s,autoGarbageCollect:!1});return new Ot({source:o,label:`texturePool_${Kv++}`})}getOptimalTexture(t,n,s=1,o){let l=Math.ceil(t*s-1e-6),u=Math.ceil(n*s-1e-6);l=kl(l),u=kl(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(l,u,o)),d.source._resolution=s,d.source.width=l/s,d.source.height=u/s,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=n,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(t,n=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,n)}returnTexture(t,n=!1){const s=this._poolKeyHash[t.uid];n&&(t.source.style=this.textureStyle),this._texturePool[s].push(t)}clear(t){if(t=t!==!1,t)for(const n in this._texturePool){const s=this._texturePool[n];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const Oy=new Wv;Na.register(Oy);class Jv{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new kt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Dy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const n=t.children;for(let s=0;s<n.length;s++){const o=n[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Oy.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const n=this.childrenToUpdate[t];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const n=this.renderGroupChildren.indexOf(t);n>-1&&this.renderGroupChildren.splice(n,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const n=t.children;for(let s=0;s<n.length;s++)this.addChild(n[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const n=t.children;for(let s=0;s<n.length;s++)this.removeChild(n[s])}removeChildren(t){for(let n=0;n<t.length;n++)this.removeChild(t[n])}onChildUpdate(t){let n=this.childrenToUpdate[t.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const n=this.root.children;for(let s=0;s<n.length;s++)this._getChildren(n[s],t);return t}_getChildren(t,n=[]){if(n.push(t),t.renderGroup)return n;const s=t.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new kt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new kt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new kt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function tS(r,t,n={}){for(const s in t)!n[s]&&t[s]!==void 0&&(r[s]=t[s])}const _h=new Oe(null),ll=new Oe(null),xh=new Oe(null,1,1),cl=new Oe(null),l0=1,eS=2,bh=4;class Hn extends kn{constructor(t={}){super(),this.uid=le("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new kt,this.relativeGroupTransform=new kt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Oe(this,0,0),this._scale=xh,this._pivot=ll,this._origin=cl,this._skew=_h,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],tS(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(n=>this.addChild(n)),t.parent?.addChild(this)}static mixin(t){Et("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ke.mixin(Hn,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Et(qt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const n=t[0],s=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),s&&(s.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,s&&s.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const n=t[0],s=this.children.indexOf(n);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,s),n.emit("removed",this)),n}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=An.get(Jv,this),this.groupTransform=kt.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),An.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new kt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*pv}set angle(t){this.rotation=t*mv}get pivot(){return this._pivot===ll&&(this._pivot=new Oe(this,0,0)),this._pivot}set pivot(t){this._pivot===ll&&(this._pivot=new Oe(this,0,0),this._origin!==cl&&te("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===_h&&(this._skew=new Oe(this,0,0)),this._skew}set skew(t){this._skew===_h&&(this._skew=new Oe(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===xh&&(this._scale=new Oe(this,1,1)),this._scale}set scale(t){this._scale===xh&&(this._scale=new Oe(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===cl&&(this._origin=new Oe(this,0,0)),this._origin}set origin(t){this._origin===cl&&(this._origin=new Oe(this,0,0),this._pivot!==ll&&te("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const n=this.getLocalBounds().width;this._setWidth(t,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const n=this.getLocalBounds().height;this._setHeight(t,n)}getSize(t){t||(t={});const n=this.getLocalBounds();return t.width=Math.abs(this.scale.x*n.width),t.height=Math.abs(this.scale.y*n.height),t}setSize(t,n){const s=this.getLocalBounds();typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,s.width),n!==void 0&&this._setHeight(n,s.height)}_updateSkew(){const t=this._rotation,n=this._skew;this._cx=Math.cos(t+n._y),this._sx=Math.sin(t+n._y),this._cy=-Math.sin(t-n._x),this._sy=Math.cos(t-n._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const n=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,d=s._y,m=o._x,g=o._y,y=-l._x,v=-l._y;n.a=this._cx*h,n.b=this._sx*h,n.c=this._cy*d,n.d=this._sy*d,n.tx=u._x-(m*n.a+g*n.c)+(y*n.a+v*n.c)-y,n.ty=u._y-(m*n.b+g*n.d)+(y*n.b+v*n.d)-v}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=l0,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=be.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=l0,this._onUpdate())}get tint(){return bl(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=eS,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const n=t?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=bh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const n=t?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=bh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const n=t?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=bh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&n)for(let o=0;o<n.length;++o)n[o].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}ke.mixin(Hn,Pv,Fv,Zv,qv,Xv,jv,Iv,$v,Dv,Uv,Yv,Nv);class zy extends Hn{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new Bn(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=t.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const n=this.bounds,{x:s,y:o}=t;return s>=n.minX&&s<=n.maxX&&o>=n.minY&&o<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(t){this.unload(),super.destroy(t),this._bounds=null}collectRenderablesSimple(t,n,s){const{renderPipes:o}=n;o.blendMode.pushBlendMode(this,this.groupBlendMode,t),o[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let d=0;d<h;d++)u[d].collectRenderables(t,n,s);o.blendMode.popBlendMode(t)}}class hr extends zy{constructor(t=Ot.EMPTY){t instanceof Ot&&(t={texture:t});const{texture:n=Ot.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Oe({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(t,n=!1){return t instanceof Ot?new hr(t):new hr(Ot.from(t,n))}set texture(t){t||(t=Ot.EMPTY);const n=this._texture;n!==t&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Sv(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Et("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,n=this._texture,s=this._bounds,{width:o,height:l}=n.orig;s.minX=-t._x*o,s.maxX=s.minX+o,s.minY=-t._y*l,s.maxY=s.minY+l}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const nS=new Bn;function Uy(r,t,n){const s=nS;r.measurable=!0,Ey(r,n,s),t.addBoundsMask(s),r.measurable=!1}function Ly(r,t,n){const s=li.get();r.measurable=!0;const o=je.get().identity(),l=Py(r,n,o);wy(r,s,l),r.measurable=!1,t.addBoundsMask(s),je.return(o),li.return(s)}function Py(r,t,n){return r?(r!==t&&(Py(r.parent,t,n),r.updateLocalTransform(),n.append(r.localTransform)),n):(te("Mask bounds, renderable is not inside the root container"),n)}class Ny{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof hr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,n){this.inverse||Uy(this.mask,t,n)}addLocalBounds(t,n){Ly(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof hr}}Ny.extension=dt.MaskEffect;class Gy{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Gy.extension=dt.MaskEffect;class jy{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,n){Uy(this.mask,t,n)}addLocalBounds(t,n){Ly(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof Hn}}jy.extension=dt.MaskEffect;const iS={createCanvas:(r,t)=>{const n=document.createElement("canvas");return n.width=r,n.height=t,n},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let c0=iS;const ee={get(){return c0},set(r){c0=r}};class Iy extends Dn{constructor(t){t.resource||(t.resource=ee.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,n=this.height,s=this._resolution){const o=super.resize(t,n,s);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Iy.extension=dt.TextureSource;class fs extends Dn{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}fs.extension=dt.TextureSource;var Xh=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Xh||{});class vh{constructor(t,n=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=n,this.priority=s,this._once=o}match(t,n=null){return this._fn===t&&this._context===n}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=t?null:n,this.previous=null,n}}const Hy=class ln{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new vh(null,null,1/0),this.deltaMS=1/ln.targetFPMS,this.elapsedMS=1/ln.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,n,s=Xh.NORMAL){return this._addListener(new vh(t,n,s))}addOnce(t,n,s=Xh.NORMAL){return this._addListener(new vh(t,n,s,!0))}_addListener(t){let n=this._head.next,s=this._head;if(!n)t.connect(s);else{for(;n;){if(t.priority>n.priority){t.connect(s);break}s=n,n=n.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,n){let s=this._head.next;for(;s;)s.match(t,n)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,n=this._head;for(;n=n.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const l=t-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=t-l%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*ln.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,n)/1e3,ln.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,t);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!ln._shared){const t=ln._shared=new ln;t.autoStart=!0,t._protected=!0}return ln._shared}static get system(){if(!ln._system){const t=ln._system=new ln;t.autoStart=!0,t._protected=!0}return ln._system}};Hy.targetFPMS=.06;let ul=Hy,Sh;async function Fy(){return Sh??(Sh=(async()=>{const t=ee.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const n=await new Promise(u=>{const h=document.createElement("video");h.onloadeddata=()=>u(h),h.onerror=()=>u(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!n)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);const l=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,l),t.deleteFramebuffer(o),t.deleteTexture(s),t.getExtension("WEBGL_lose_context")?.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Sh}const jl=class Yy extends Dn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Yy.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=ul.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,n=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Fy(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(ul.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ul.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ul.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};jl.extension=dt.TextureSource;jl.defaultOptions={...Dn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};jl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ma=jl;const wn=(r,t,n=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(s=>typeof s=="string"||n?t(s):s):r);class sS{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const n=this._cache.get(t);return n||te(`[Assets] Asset id ${t} was not found in the Cache`),n}set(t,n){const s=wn(t);let o;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.test(n)){o=m.getCacheableAssets(s,n);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(d=>{l.set(d,n)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,h)}),u.forEach(d=>{const m=o?o[d]:n;this._cache.has(d)&&this._cache.get(d)!==m&&te("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(t){if(!this._cacheMap.has(t)){te(`[Assets] Asset id ${t} was not found in the Cache`);return}const n=this._cacheMap.get(t);n.cacheKeys.forEach(o=>{this._cache.delete(o)}),n.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Jt=new sS,qh=[];ke.handleByList(dt.TextureSource,qh);function Vy(r={}){const t=r&&r.resource,n=t?r.resource:r,s=t?r:{resource:r};for(let o=0;o<qh.length;o++){const l=qh[o];if(l.test(n))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function rS(r={},t=!1){const n=r&&r.resource,s=n?r.resource:r,o=n?r:{resource:r};if(!t&&Jt.has(s))return Jt.get(s);const l=new Ot({source:Vy(o)});return l.on("destroy",()=>{Jt.has(s)&&Jt.remove(s)}),t||Jt.set(s,l),l}function aS(r,t=!1){return typeof r=="string"?Jt.get(r):r instanceof Dn?new Ot({source:r}):rS(r,t)}Ot.from=aS;Dn.from=Vy;ke.add(Ny,Gy,jy,Ma,fs,Iy,yf);var ji=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(ji||{});function Rn(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function ha(r){return r.split("?")[0].split("#")[0]}function oS(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lS(r,t,n){return r.replace(new RegExp(oS(t),"g"),n)}function cS(r,t){let n="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=r.length;++h){if(h<r.length)u=r.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const d=n.lastIndexOf("/");if(d!==n.length-1){d===-1?(n="",s=0):(n=n.slice(0,d),s=n.length-1-n.lastIndexOf("/")),o=h,l=0;continue}}else if(n.length===2||n.length===1){n="",s=0,o=h,l=0;continue}}}else n.length>0?n+=`/${r.slice(o+1,h)}`:n=r.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return n}const cn={toPosix(r){return lS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Rn(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(r);return n?n[0]:""},toAbsolute(r,t,n){if(Rn(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const s=ha(this.toPosix(t??ee.get().getBaseUrl())),o=ha(this.toPosix(n??this.rootname(s)));return r=this.toPosix(r),r.startsWith("/")?cn.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(s,r)},normalize(r){if(Rn(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const n=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const s=r.endsWith("/");return r=cS(r),r.length>0&&s&&(r+="/"),n?`/${r}`:t+r},isAbsolute(r){return Rn(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let n=0;n<r.length;++n){const s=r[n];if(Rn(s),s.length>0)if(t===void 0)t=s;else{const o=r[n-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(Rn(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const n=t===47;let s=-1,o=!0;const l=this.getProtocol(r),u=r;r=r.slice(l.length);for(let h=r.length-1;h>=1;--h)if(t=r.charCodeAt(h),t===47){if(!o){s=h;break}}else o=!1;return s===-1?n?"/":this.isUrl(u)?l+r:l:n&&s===1?"//":l+r.slice(0,s)},rootname(r){Rn(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const n=r.indexOf("/",t.length);n!==-1?t=r.slice(0,n):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){Rn(r),t&&Rn(t),r=ha(this.toPosix(r));let n=0,s=-1,o=!0,l;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let u=t.length-1,h=-1;for(l=r.length-1;l>=0;--l){const d=r.charCodeAt(l);if(d===47){if(!o){n=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(d===t.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return n===s?s=h:s===-1&&(s=r.length),r.slice(n,s)}for(l=r.length-1;l>=0;--l)if(r.charCodeAt(l)===47){if(!o){n=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":r.slice(n,s)},extname(r){Rn(r),r=ha(this.toPosix(r));let t=-1,n=0,s=-1,o=!0,l=0;for(let u=r.length-1;u>=0;--u){const h=r.charCodeAt(u);if(h===47){if(!o){n=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?t===-1?t=u:l!==1&&(l=1):t!==-1&&(l=-1)}return t===-1||s===-1||l===0||l===1&&t===s-1&&t===n+1?"":r.slice(t,s)},parse(r){Rn(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=ha(this.toPosix(r));let n=r.charCodeAt(0);const s=this.isAbsolute(r);let o;t.root=this.rootname(r),s||this.hasProtocol(r)?o=1:o=0;let l=-1,u=0,h=-1,d=!0,m=r.length-1,g=0;for(;m>=o;--m){if(n=r.charCodeAt(m),n===47){if(!d){u=m+1;break}continue}h===-1&&(d=!1,h=m+1),n===46?l===-1?l=m:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||h===-1||g===0||g===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?t.base=t.name=r.slice(1,h):t.base=t.name=r.slice(u,h)):(u===0&&s?(t.name=r.slice(1,l),t.base=r.slice(1,h)):(t.name=r.slice(u,l),t.base=r.slice(u,h)),t.ext=r.slice(l,h)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Xy(r,t,n,s,o){const l=t[n];for(let u=0;u<l.length;u++){const h=l[u];n<t.length-1?Xy(r.replace(s[n],h),t,n+1,s,o):o.push(r.replace(s[n],h))}}function uS(r){const t=/\{(.*?)\}/g,n=r.match(t),s=[];if(n){const o=[];n.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),Xy(r,o,0,n,s)}else s.push(r);return s}const Ol=r=>!Array.isArray(r);class dr{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,n)=>`${t}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(t,n)=>n.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const n=t;this._defaultSearchParams=Object.keys(n).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(n[s])}`).join("&")}}getAlias(t){const{alias:n,src:s}=t;return wn(n||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>u?.src??u):l?.src?l.src:l,!0)}addManifest(t){this._manifest&&te("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(t,n){const s=[];let o=n;Array.isArray(n)||(o=Object.entries(n).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let d;if(typeof h=="string"){const m=this._createBundleAssetId(t,h);s.push(m),d=[h,m]}else{const m=h.map(g=>this._createBundleAssetId(t,g));s.push(...m),d=[...h,...m]}this.add({...l,alias:d,src:u})}),this._bundles[t]=s}add(t){const n=[];Array.isArray(t)?n.push(...t):n.push(t);let s;s=l=>{this.hasKey(l)&&te(`[Resolver] already has key: ${l} overwriting`)},wn(n).forEach(l=>{const{src:u}=l;let{data:h,format:d,loadParser:m,parser:g}=l;const y=wn(u).map(M=>typeof M=="string"?uS(M):Array.isArray(M)?M:[M]),v=this.getAlias(l);Array.isArray(v)?v.forEach(s):s(v);const S=[],T=M=>({...this._parsers.find(B=>B.test(M))?.parse(M),src:M});y.forEach(M=>{M.forEach(E=>{let B={};if(typeof E!="object"?B=T(E):(h=E.data??h,d=E.format??d,(E.loadParser||E.parser)&&(m=E.loadParser??m,g=E.parser??g),B={...T(E.src),...E}),!v)throw new Error(`[Resolver] alias is undefined for this asset: ${B.src}`);B=this._buildResolvedAsset(B,{aliases:v,data:h,format:d,loadParser:m,parser:g,progressSize:l.progressSize}),S.push(B)})}),v.forEach(M=>{this._assetMap[M]=S})})}resolveBundle(t){const n=Ol(t);t=wn(t);const s={};return t.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const d in u){const m=u[d];h[this._extractAssetIdFromBundle(o,d)]=m}s[o]=h}}),n?s[t[0]]:s}resolveUrl(t){const n=this.resolve(t);if(typeof t!="string"){const s={};for(const o in n)s[o]=n[o].src;return s}return n.src}resolve(t){const n=Ol(t);t=wn(t);const s={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u?.priority.forEach(h=>{u.params[h].forEach(d=>{const m=l.filter(g=>g[h]?g[h]===d:!1);m.length&&(l=m)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),n?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let n=0;n<t.length;n++){const s=t[n],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const n=/\?/.test(t)?"&":"?";return`${t}${n}${this._defaultSearchParams}`}_buildResolvedAsset(t,n){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:d}=n;return(this._basePath||this._rootPath)&&(t.src=cn.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=l??t.loadParser,t.parser=u??t.parser,t.format=h??t.format??hS(t.src),d!==void 0&&(t.progressSize=d),t}}dr.RETINA_PREFIX=/@([0-9\.]+)x/;function hS(r){return r.split(".").pop().split("?").shift().split("#").shift()}const $h=(r,t)=>{const n=t.split("?")[1];return n&&(r+=`?${n}`),r},qy=class va{constructor(t,n){this.linkedSheets=[];let s=t;t?.source instanceof Dn&&(s={texture:t,data:n});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Ot?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=va.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t;const s=va.BATCH_SIZE;for(;n-t<s&&n<this._frameKeys.length;){const o=this._frameKeys[n],l=this._frames[o],u=l.frame;if(u){let h=null,d=null;const m=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,g=new de(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);l.rotated?h=new de(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new de(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new de(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Ot({source:this.textureSource,frame:h,orig:g,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}n++}}_processAnimations(){const t=this.data.animations||{};for(const n in t){this.animations[n]=[];for(let s=0;s<t[n].length;s++){const o=t[n][s];this.animations[n].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*va.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*va.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};qy.BATCH_SIZE=1e3;let u0=qy;const fS=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function $y(r,t,n){const s={};if(r.forEach(o=>{s[o]=t}),Object.keys(t.textures).forEach(o=>{s[`${t.cachePrefix}${o}`]=t.textures[o]}),!n){const o=cn.dirname(r[0]);t.linkedSheets.forEach((l,u)=>{const h=$y([`${o}/${t.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const dS={extension:dt.Asset,cache:{test:r=>r instanceof u0,getCacheableAssets:(r,t)=>$y(r,t,!1)},resolver:{extension:{type:dt.ResolveParser,name:"resolveSpritesheet"},test:r=>{const n=r.split("?")[0].split("."),s=n.pop(),o=n.pop();return s==="json"&&fS.includes(o)},parse:r=>{const t=r.split(".");return{resolution:parseFloat(dr.RETINA_PREFIX.exec(r)?.[1]??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:dt.LoadParser,priority:ji.Normal,name:"spritesheetLoader"},async testParse(r,t){return cn.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,n){const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=t?.data??{};let h=cn.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let d;if(s instanceof Ot)d=s;else{const y=$h(h+(o??r.meta.image),t.src);d=(await n.load([{src:y,data:l}]))[y]}const m=new u0({texture:d.source,data:r,cachePrefix:u});await m.parse();const g=r?.meta?.related_multi_packs;if(Array.isArray(g)){const y=[];for(const S of g){if(typeof S!="string")continue;let T=h+S;t.data?.ignoreMultiPack||(T=$h(T,t.src),y.push(n.load({src:T,data:{textureOptions:l,ignoreMultiPack:!0}})))}const v=await Promise.all(y);m.linkedSheets=v,v.forEach(S=>{S.linkedSheets=[m].concat(m.linkedSheets.filter(T=>T!==S))})}return m},async unload(r,t,n){await n.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};ke.add(dS);const Ch=Object.create(null),h0=Object.create(null);function xf(r,t){let n=h0[r];return n===void 0&&(Ch[t]===void 0&&(Ch[t]=1),h0[r]=n=Ch[t]++),n}let hl;function Qy(){return(!hl||hl?.isContextLost())&&(hl=ee.get().createCanvas().getContext("webgl",{})),hl}let fl;function pS(){if(!fl){fl="mediump";const r=Qy();r&&r.getShaderPrecisionFormat&&(fl=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return fl}function mS(r,t,n){return t?r:n?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function gS(r,t,n){const s=n?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=n?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(s!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function yS(r,t){return t?`#version 300 es
${r}`:r}const _S={},xS={};function bS(r,{name:t="pixi-program"},n=!0){t=t.replace(/\s+/g,"-"),t+=n?"-fragment":"-vertex";const s=n?_S:xS;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${t}`}
${r}`}function vS(r,t){return t?r.replace("#version 300 es",""):r}const Ah={stripVersion:vS,ensurePrecision:gS,addProgramDefines:mS,setProgramName:bS,insertVersion:yS},fa=Object.create(null),Zy=class Qh{constructor(t){t={...Qh.defaultOptions,...t};const n=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:pS()},setProgramName:{name:t.name},addProgramDefines:n,insertVersion:n};let o=t.fragment,l=t.vertex;Object.keys(Ah).forEach(u=>{const h=s[u];o=Ah[u](o,h,!0),l=Ah[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=xf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,fa[this._cacheKey]=null}static from(t){const n=`${t.vertex}:${t.fragment}`;return fa[n]||(fa[n]=new Qh(t),fa[n]._cacheKey=n),fa[n]}};Zy.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Ky=Zy;const f0={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function SS(r){return f0[r]??f0.float32}const CS={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function AS({source:r,entryPoint:t}){const n={},s=r.indexOf(`fn ${t}`);if(s!==-1){const o=r.indexOf("->",s);if(o!==-1){const l=r.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const d=CS[h[3]]??"float32";n[h[2]]={location:parseInt(h[1],10),format:d,stride:SS(d).stride,offset:0,instance:!1,start:0}}}}return n}function Th(r){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,m=r.match(t)?.map(y=>({group:parseInt(y.match(n)[1],10),binding:parseInt(y.match(s)[1],10),name:y.match(o)[2],isUniform:y.match(o)[1]==="<uniform>",type:y.match(l)[1]}));if(!m)return{groups:[],structs:[]};const g=r.match(u)?.map(y=>{const v=y.match(d)[1],S=y.match(h).reduce((T,M)=>{const[E,B]=M.split(":");return T[E.trim()]=B.trim(),T},{});return S?{name:v,members:S}:null}).filter(({name:y})=>m.some(v=>v.type===y))??[];return{groups:m,structs:g}}var Sa=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(Sa||{});function TS({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:Sa.VERTEX|Sa.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:Sa.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:Sa.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function ES({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function MS(r,t){const n=new Set,s=new Set,o=[...r.structs,...t.structs].filter(u=>n.has(u.name)?!1:(n.add(u.name),!0)),l=[...r.groups,...t.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const da=Object.create(null);class Il{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:s,layout:o,gpuLayout:l,name:u}=t;if(this.name=u,this.fragment=n,this.vertex=s,n.source===s.source){const h=Th(n.source);this.structsAndGroups=h}else{const h=Th(s.source),d=Th(n.source);this.structsAndGroups=MS(h,d)}this.layout=o??ES(this.structsAndGroups),this.gpuLayout=l??TS(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:n}=this,s=t.source+n.source+t.entryPoint+n.entryPoint;this._layoutKey=xf(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=AS(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,da[this._cacheKey]=null}static from(t){const n=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return da[n]||(da[n]=new Il(t),da[n]._cacheKey=n),da[n]}}const Wy=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],RS=Wy.reduce((r,t)=>(r[t]=!0,r),{});function wS(r,t){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Jy=class t_{constructor(t,n){this._touched=0,this.uid=le("uniform"),this._resourceType="uniformGroup",this._resourceId=le("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...t_.defaultOptions,...n},this.uniformStructures=t;const s={};for(const o in t){const l=t[o];if(l.name=o,l.size=l.size??1,!RS[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,d]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${d} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${Wy.join(", ")}`)}l.value??(l.value=wS(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=xf(Object.keys(s).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Jy.defaultOptions={ubo:!1,isStatic:!1};let e_=Jy;class vl{constructor(t){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const s in t){const o=t[s];this.setResource(o,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let n=0;for(const s in this.resources)t[n++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,n){const s=this.resources[n];t!==s&&(s&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[n]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t,n){const s=this.resources;for(const o in s)s[o]._gcLastUsed=t,s[o]._touched=n}destroy(){const t=this.resources;for(const n in t)t[n]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const n=this.resources;for(const s in n)n[s]===t&&(n[s]=null)}else this._updateKey()}}var Zh=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(Zh||{});class bf extends kn{constructor(t){super(),this.uid=le("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:n,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=t;this.gpuProgram=n,this.glProgram=s,u===void 0&&(u=0,n&&(u|=Zh.WEBGPU),s&&(u|=Zh.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&o&&h)for(const m in h)for(const g in h[m]){const y=h[m][g];d[y]={group:m,binding:g,name:y}}else if(n&&o&&!h){const m=n.structsAndGroups.groups;h={},m.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,d[g.name]=g})}else if(l){o={},h={},n&&n.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,d[y.name]=y});let m=0;for(const g in l)d[g]||(o[99]||(o[99]=new vl,this._ownedBindGroups.push(o[99])),d[g]={group:99,binding:m,name:g},h[99]=h[99]||{},h[99][m]=g,m++);for(const g in l){const y=g;let v=l[g];!v.source&&!v._resourceType&&(v=new e_(v));const S=d[y];S&&(o[S.group]||(o[S.group]=new vl,this._ownedBindGroups.push(o[S.group])),o[S.group].setResource(v,S.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,d)}addResource(t,n,s){var o,l;(o=this._uniformBindMap)[n]||(o[n]={}),(l=this._uniformBindMap[n])[s]||(l[s]=t),this.groups[n]||(this.groups[n]=new vl,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(t,n){const s={};for(const o in n){const l=n[o];Object.defineProperty(s,l.name,{get(){return t[l.group].getResource(l.binding)},set(u){t[l.group].setResource(u,l.binding)}})}return s}destroy(t=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:n,gl:s,...o}=t;let l,u;return n&&(l=Il.from(n)),s&&(u=Ky.from(s)),new bf({gpuProgram:l,glProgram:u,...o})}}const Kh=[];ke.handleByNamedList(dt.Environment,Kh);async function BS(r){if(!r)for(let t=0;t<Kh.length;t++){const n=Kh[t];if(n.value.test()){await n.value.load();return}}}let pa;function kS(){if(typeof pa=="boolean")return pa;try{pa=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{pa=!1}return pa}function d0(r,t,n=2){const s=t&&t.length,o=s?t[0]*n:r.length;let l=n_(r,0,o,n,!0);const u=[];if(!l||l.next===l.prev)return u;let h,d,m;if(s&&(l=LS(r,t,l,n)),r.length>80*n){h=r[0],d=r[1];let g=h,y=d;for(let v=n;v<o;v+=n){const S=r[v],T=r[v+1];S<h&&(h=S),T<d&&(d=T),S>g&&(g=S),T>y&&(y=T)}m=Math.max(g-h,y-d),m=m!==0?32767/m:0}return ka(l,u,n,h,d,m,0),u}function n_(r,t,n,s,o){let l;if(o===qS(r,t,n,s)>0)for(let u=t;u<n;u+=s)l=p0(u/s|0,r[u],r[u+1],l);else for(let u=n-s;u>=t;u-=s)l=p0(u/s|0,r[u],r[u+1],l);return l&&fr(l,l.next)&&(Oa(l),l=l.next),l}function ds(r,t){if(!r)return r;t||(t=r);let n=r,s;do if(s=!1,!n.steiner&&(fr(n,n.next)||se(n.prev,n,n.next)===0)){if(Oa(n),n=t=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==t);return t}function ka(r,t,n,s,o,l,u){if(!r)return;!u&&l&&IS(r,s,o,l);let h=r;for(;r.prev!==r.next;){const d=r.prev,m=r.next;if(l?OS(r,s,o,l):DS(r)){t.push(d.i,r.i,m.i),Oa(r),r=m.next,h=m.next;continue}if(r=m,r===h){u?u===1?(r=zS(ds(r),t),ka(r,t,n,s,o,l,2)):u===2&&US(r,t,n,s,o,l):ka(ds(r),t,n,s,o,l,1);break}}}function DS(r){const t=r.prev,n=r,s=r.next;if(se(t,n,s)>=0)return!1;const o=t.x,l=n.x,u=s.x,h=t.y,d=n.y,m=s.y,g=Math.min(o,l,u),y=Math.min(h,d,m),v=Math.max(o,l,u),S=Math.max(h,d,m);let T=s.next;for(;T!==t;){if(T.x>=g&&T.x<=v&&T.y>=y&&T.y<=S&&Ca(o,h,l,d,u,m,T.x,T.y)&&se(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function OS(r,t,n,s){const o=r.prev,l=r,u=r.next;if(se(o,l,u)>=0)return!1;const h=o.x,d=l.x,m=u.x,g=o.y,y=l.y,v=u.y,S=Math.min(h,d,m),T=Math.min(g,y,v),M=Math.max(h,d,m),E=Math.max(g,y,v),B=Wh(S,T,t,n,s),D=Wh(M,E,t,n,s);let z=r.prevZ,G=r.nextZ;for(;z&&z.z>=B&&G&&G.z<=D;){if(z.x>=S&&z.x<=M&&z.y>=T&&z.y<=E&&z!==o&&z!==u&&Ca(h,g,d,y,m,v,z.x,z.y)&&se(z.prev,z,z.next)>=0||(z=z.prevZ,G.x>=S&&G.x<=M&&G.y>=T&&G.y<=E&&G!==o&&G!==u&&Ca(h,g,d,y,m,v,G.x,G.y)&&se(G.prev,G,G.next)>=0))return!1;G=G.nextZ}for(;z&&z.z>=B;){if(z.x>=S&&z.x<=M&&z.y>=T&&z.y<=E&&z!==o&&z!==u&&Ca(h,g,d,y,m,v,z.x,z.y)&&se(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;G&&G.z<=D;){if(G.x>=S&&G.x<=M&&G.y>=T&&G.y<=E&&G!==o&&G!==u&&Ca(h,g,d,y,m,v,G.x,G.y)&&se(G.prev,G,G.next)>=0)return!1;G=G.nextZ}return!0}function zS(r,t){let n=r;do{const s=n.prev,o=n.next.next;!fr(s,o)&&s_(s,n,n.next,o)&&Da(s,o)&&Da(o,s)&&(t.push(s.i,n.i,o.i),Oa(n),Oa(n.next),n=r=o),n=n.next}while(n!==r);return ds(n)}function US(r,t,n,s,o,l){let u=r;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&YS(u,h)){let d=r_(u,h);u=ds(u,u.next),d=ds(d,d.next),ka(u,t,n,s,o,l,0),ka(d,t,n,s,o,l,0);return}h=h.next}u=u.next}while(u!==r)}function LS(r,t,n,s){const o=[];for(let l=0,u=t.length;l<u;l++){const h=t[l]*s,d=l<u-1?t[l+1]*s:r.length,m=n_(r,h,d,s,!1);m===m.next&&(m.steiner=!0),o.push(FS(m))}o.sort(PS);for(let l=0;l<o.length;l++)n=NS(o[l],n);return n}function PS(r,t){let n=r.x-t.x;if(n===0&&(n=r.y-t.y,n===0)){const s=(r.next.y-r.y)/(r.next.x-r.x),o=(t.next.y-t.y)/(t.next.x-t.x);n=s-o}return n}function NS(r,t){const n=GS(r,t);if(!n)return t;const s=r_(n,r);return ds(s,s.next),ds(n,n.next)}function GS(r,t){let n=t;const s=r.x,o=r.y;let l=-1/0,u;if(fr(r,n))return n;do{if(fr(r,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const y=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=s&&y>l&&(l=y,u=n.x<n.next.x?n:n.next,y===s))return u}n=n.next}while(n!==t);if(!u)return null;const h=u,d=u.x,m=u.y;let g=1/0;n=u;do{if(s>=n.x&&n.x>=d&&s!==n.x&&i_(o<m?s:l,o,d,m,o<m?l:s,o,n.x,n.y)){const y=Math.abs(o-n.y)/(s-n.x);Da(n,r)&&(y<g||y===g&&(n.x>u.x||n.x===u.x&&jS(u,n)))&&(u=n,g=y)}n=n.next}while(n!==h);return u}function jS(r,t){return se(r.prev,r,t.prev)<0&&se(t.next,r,r.next)<0}function IS(r,t,n,s){let o=r;do o.z===0&&(o.z=Wh(o.x,o.y,t,n,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,HS(o)}function HS(r){let t,n=1;do{let s=r,o;r=null;let l=null;for(t=0;s;){t++;let u=s,h=0;for(let m=0;m<n&&(h++,u=u.nextZ,!!u);m++);let d=n;for(;h>0||d>0&&u;)h!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,d--),l?l.nextZ=o:r=o,o.prevZ=l,l=o;s=u}l.nextZ=null,n*=2}while(t>1);return r}function Wh(r,t,n,s,o){return r=(r-n)*o|0,t=(t-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function FS(r){let t=r,n=r;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==r);return n}function i_(r,t,n,s,o,l,u,h){return(o-u)*(t-h)>=(r-u)*(l-h)&&(r-u)*(s-h)>=(n-u)*(t-h)&&(n-u)*(l-h)>=(o-u)*(s-h)}function Ca(r,t,n,s,o,l,u,h){return!(r===u&&t===h)&&i_(r,t,n,s,o,l,u,h)}function YS(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!VS(r,t)&&(Da(r,t)&&Da(t,r)&&XS(r,t)&&(se(r.prev,r,t.prev)||se(r,t.prev,t))||fr(r,t)&&se(r.prev,r,r.next)>0&&se(t.prev,t,t.next)>0)}function se(r,t,n){return(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y)}function fr(r,t){return r.x===t.x&&r.y===t.y}function s_(r,t,n,s){const o=pl(se(r,t,n)),l=pl(se(r,t,s)),u=pl(se(n,s,r)),h=pl(se(n,s,t));return!!(o!==l&&u!==h||o===0&&dl(r,n,t)||l===0&&dl(r,s,t)||u===0&&dl(n,r,s)||h===0&&dl(n,t,s))}function dl(r,t,n){return t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)&&t.y<=Math.max(r.y,n.y)&&t.y>=Math.min(r.y,n.y)}function pl(r){return r>0?1:r<0?-1:0}function VS(r,t){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==t.i&&n.next.i!==t.i&&s_(n,n.next,r,t))return!0;n=n.next}while(n!==r);return!1}function Da(r,t){return se(r.prev,r,r.next)<0?se(r,t,r.next)>=0&&se(r,r.prev,t)>=0:se(r,t,r.prev)<0||se(r,r.next,t)<0}function XS(r,t){let n=r,s=!1;const o=(r.x+t.x)/2,l=(r.y+t.y)/2;do n.y>l!=n.next.y>l&&n.next.y!==n.y&&o<(n.next.x-n.x)*(l-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==r);return s}function r_(r,t){const n=Jh(r.i,r.x,r.y),s=Jh(t.i,t.x,t.y),o=r.next,l=t.prev;return r.next=t,t.prev=r,n.next=o,o.prev=n,s.next=n,n.prev=s,l.next=s,s.prev=l,s}function p0(r,t,n,s){const o=Jh(r,t,n);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Oa(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Jh(r,t,n){return{i:r,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function qS(r,t,n,s){let o=0;for(let l=t,u=n-s;l<n;l+=s)o+=(r[u]-r[l])*(r[l+1]+r[u+1]),u=l;return o}const $S=d0.default||d0;var a_=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(a_||{});class QS{constructor(t){this.items=[],this._name=t}emit(t,n,s,o,l,u,h,d){const{name:m,items:g}=this;for(let y=0,v=g.length;y<v;y++)g[y][m](t,n,s,o,l,u,h,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const n=this.items.indexOf(t);return n!==-1&&this.items.splice(n,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const ZS=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],o_=class l_ extends kn{constructor(t){super(),this.tick=0,this.uid=le("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const n=[...ZS,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(t={}){const n=t.skipExtensionImports===!0?!0:t.manageImports===!1;await BS(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...l_.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,n){this.tick++;let s=t;if(s instanceof Hn&&(s={container:s},n&&(Et(qt,"passing a second argument is deprecated, please use render options instead"),s.target=n.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:be.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(t,n,s){const o=this.view.resolution;this.view.resize(t,n,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(t={}){const n=this;t.target||(t.target=n.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=a_.ALL);const{clear:s,clearColor:o,target:l}=t;be.shared.setValue(o??this.background.colorRgba),n.renderTarget.clear(l,s,be.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(n=>{this.runners[n]=new QS(n)})}_addSystems(t){let n;for(n in t){const s=t[n];this._addSystem(s.value,s.name)}}_addSystem(t,n){const s=new t(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=s,this._systemsHash[n]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(t,n){const s=n.reduce((o,l)=>(o[l.name]=l.value,o),{});t.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&Na.release(),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!kS())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};o_.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let c_=o_,ml;function KS(r){return ml!==void 0||(ml=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:r??c_.defaultOptions.failIfMajorPerformanceCaveat};try{if(!ee.get().getWebGLRenderingContext())return!1;let s=ee.get().createCanvas().getContext("webgl",t);const o=!!s?.getContextAttributes()?.stencil;if(s){const l=s.getExtension("WEBGL_lose_context");l&&l.loseContext()}return s=null,o}catch{return!1}})()),ml}let gl;async function WS(r={}){return gl!==void 0||(gl=await(async()=>{const t=ee.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),gl}const m0=["webgl","webgpu","canvas"];async function JS(r){let t=[];r.preference?(t.push(r.preference),m0.forEach(l=>{l!==r.preference&&t.push(l)})):t=m0.slice();let n,s={};for(let l=0;l<t.length;l++){const u=t[l];if(u==="webgpu"&&await WS()){const{WebGPURenderer:h}=await Bl(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-DGeO5Lvw.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]),import.meta.url);n=h,s={...r,...r.webgpu};break}else if(u==="webgl"&&KS(r.failIfMajorPerformanceCaveat??c_.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Bl(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-CgrIBoJe.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]),import.meta.url);n=h,s={...r,...r.webgl};break}else if(u==="canvas")throw s={...r},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!n)throw new Error("No available renderer for the current environment");const o=new n;return await o.init(s),o}const u_="8.15.0";class h_{static init(){globalThis.__PIXI_APP_INIT__?.(this,u_)}static destroy(){}}h_.extension=dt.Application;class tC{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,u_)}destroy(){this._renderer=null}}tC.extension={type:[dt.WebGLSystem,dt.WebGPUSystem],name:"initHook",priority:-10};const f_=class tf{constructor(...t){this.stage=new Hn,t[0]!==void 0&&Et(qt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new Hn),this.renderer=await JS(t),tf._plugins.forEach(n=>{n.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Et(qt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){const s=tf._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};f_._plugins=[];let d_=f_;ke.handleByList(dt.Application,d_._plugins);ke.add(h_);class p_ extends kn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Et(qt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Et(qt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Et(qt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Et(qt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Et(qt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)this.chars[n].texture?.destroy();this.chars=null,t&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}class eC{constructor(t=0,n=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=s,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const n=this.items[t];delete this.items[t],this.size--,n.prev!==null&&(n.prev.next=n.next),n.next!==null&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++){const o=t[s];n[s]=[o,this.get(o)]}return n}evict(t=!1){if(t||this.size>0){const n=this.first;delete this.items[n.key],--this.size===0?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(t){let n;return this.has(t)&&(n=this.items[t].expiry),n}get(t){const n=this.items[t];if(n!==void 0){if(this.ttl>0&&n.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(n),n.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=new Array(this.size);let n=this.first,s=0;for(;n!==null;)t[s++]=n.key,n=n.next;return t}setWithEvicted(t,n,s=this.resetTtl){let o=null;if(this.has(t))this.set(t,n,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(t,n,s=!1,o=this.resetTtl){let l=this.items[t];return s||l!==void 0?(l.value=n,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=this.get(t[s]);return n}}function m_(r=1e3,t=0,n=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof n!="boolean")throw new TypeError("Invalid resetTtl value");return new eC(r,t,n)}const nC=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function ef(r){const t=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let n=r.fontFamily;Array.isArray(r.fontFamily)||(n=r.fontFamily.split(","));for(let s=n.length-1;s>=0;s--){let o=n[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!nC.includes(o)&&(o=`"${o}"`),n[s]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${t} ${n.join(",")}`}const Eh={willReadFrequently:!0},On=class ut{static get experimentalLetterSpacingSupported(){let t=ut._experimentalLetterSpacingSupported;if(t===void 0){const n=ee.get().getCanvasRenderingContext2D().prototype;t=ut._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(t,n,s,o,l,u,h,d,m){this.text=t,this.style=n,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=m}static measureText(t=" ",n,s=ut._canvas,o=n.wordWrap){const l=`${t}-${n.styleKey}-wordWrap-${o}`;if(ut._measurementCache.has(l))return ut._measurementCache.get(l);const u=ef(n),h=ut.measureFont(u);h.fontSize===0&&(h.fontSize=n.fontSize,h.ascent=n.fontSize);const d=ut.__context;d.font=u;const g=(o?ut._wordWrap(t,n,s):t).split(/(?:\r\n|\r|\n)/),y=new Array(g.length);let v=0;for(let D=0;D<g.length;D++){const z=ut._measureText(g[D],n.letterSpacing,d);y[D]=z,v=Math.max(v,z)}const S=n._stroke?.width||0;let T=v+S;n.dropShadow&&(T+=n.dropShadow.distance);const M=n.lineHeight||h.fontSize;let E=Math.max(M,h.fontSize+S)+(g.length-1)*(M+n.leading);n.dropShadow&&(E+=n.dropShadow.distance);const B=new ut(t,n,T,E,g,y,M+n.leading,v,h);return ut._measurementCache.set(l,B),B}static _measureText(t,n,s){let o=!1;ut.experimentalLetterSpacingSupported&&(ut.experimentalLetterSpacing?(s.letterSpacing=`${n}px`,s.textLetterSpacing=`${n}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(t);let u=l.width;const h=-l.actualBoundingBoxLeft;let m=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=n,m-=n;else{const g=(ut.graphemeSegmenter(t).length-1)*n;u+=g,m+=g}return Math.max(u,m)}static _wordWrap(t,n,s=ut._canvas){const o=s.getContext("2d",Eh);let l=0,u="",h="";const d=Object.create(null),{letterSpacing:m,whiteSpace:g}=n,y=ut._collapseSpaces(g),v=ut._collapseNewlines(g);let S=!y;const T=n.wordWrapWidth+m,M=ut._tokenize(t);for(let E=0;E<M.length;E++){let B=M[E];if(ut._isNewline(B)){if(!v){h+=ut._addLine(u),S=!y,u="",l=0;continue}B=" "}if(y){const z=ut.isBreakingSpace(B),G=ut.isBreakingSpace(u[u.length-1]);if(z&&G)continue}const D=ut._getFromCache(B,m,d,o);if(D>T)if(u!==""&&(h+=ut._addLine(u),u="",l=0),ut.canBreakWords(B,n.breakWords)){const z=ut.wordWrapSplit(B);for(let G=0;G<z.length;G++){let W=z[G],Z=W,Y=1;for(;z[G+Y];){const rt=z[G+Y];if(!ut.canBreakChars(Z,rt,B,G,n.breakWords))W+=rt;else break;Z=rt,Y++}G+=Y-1;const ot=ut._getFromCache(W,m,d,o);ot+l>T&&(h+=ut._addLine(u),S=!1,u="",l=0),u+=W,l+=ot}}else{u.length>0&&(h+=ut._addLine(u),u="",l=0);const z=E===M.length-1;h+=ut._addLine(B,!z),S=!1,u="",l=0}else D+l>T&&(S=!1,h+=ut._addLine(u),u="",l=0),(u.length>0||!ut.isBreakingSpace(B)||S)&&(u+=B,l+=D)}return h+=ut._addLine(u,!1),h}static _addLine(t,n=!0){return t=ut._trimRight(t),t=n?`${t}
`:t,t}static _getFromCache(t,n,s,o){let l=s[t];return typeof l!="number"&&(l=ut._measureText(t,n,o)+n,s[t]=l),l}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let n=t.length-1;n>=0;n--){const s=t[n];if(!ut.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:ut._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return typeof t!="string"?!1:ut._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const n=[];let s="";if(typeof t!="string")return n;for(let o=0;o<t.length;o++){const l=t[o],u=t[o+1];if(ut.isBreakingSpace(l,u)||ut._isNewline(l)){s!==""&&(n.push(s),s=""),l==="\r"&&u===`
`?(n.push(`\r
`),o++):n.push(l);continue}s+=l}return s!==""&&n.push(s),n}static canBreakWords(t,n){return n}static canBreakChars(t,n,s,o,l){return!0}static wordWrapSplit(t){return ut.graphemeSegmenter(t)}static measureFont(t){if(ut._fonts[t])return ut._fonts[t];const n=ut._context;n.font=t;const s=n.measureText(ut.METRICS_STRING+ut.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ut._fonts[t]=o,o}static clearMetrics(t=""){t?delete ut._fonts[t]:ut._fonts={}}static get _canvas(){if(!ut.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if(n.getContext("2d",Eh)?.measureText)return ut.__canvas=n,n;t=ee.get().createCanvas()}catch{t=ee.get().createCanvas()}t.width=t.height=10,ut.__canvas=t}return ut.__canvas}static get _context(){return ut.__context||(ut.__context=ut._canvas.getContext("2d",Eh)),ut.__context}};On.METRICS_STRING="|q";On.BASELINE_SYMBOL="M";On.BASELINE_MULTIPLIER=1.4;On.HEIGHT_MULTIPLIER=2;On.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const r=new Intl.Segmenter;return t=>{const n=r.segment(t),s=[];let o=0;for(const l of n)s[o++]=l.segment;return s}}return r=>[...r]})();On.experimentalLetterSpacing=!1;On._fonts={};On._newlines=[10,13];On._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];On._measurementCache=m_(1e3);let Sl=On;const g0=[{offset:0,color:"white"},{offset:1,color:"black"}],vf=class nf{constructor(...t){this.uid=le("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let n=iC(t);n={...n.type==="radial"?nf.defaultRadialOptions:nf.defaultLinearOptions,..._y(n)},this._textureSize=n.textureSize,this._wrapMode=n.wrapMode,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(t,n){return this.colorStops.push({offset:t,color:be.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:n}=this.start,{x:s,y:o}=this.end,l=s-t,u=o-n;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const E=t;t=s,s=E,l*=-1}if(u<0){const E=n;n=o,o=E,u*=-1}}const d=this.colorStops.length?this.colorStops:g0,m=this._textureSize,{canvas:g,context:y}=_0(m,1),v=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);y0(v,d),y.fillStyle=v,y.fillRect(0,0,m,1),this.texture=new Ot({source:new fs({resource:g,addressMode:this._wrapMode})});const S=Math.sqrt(l*l+u*u),T=Math.atan2(u,l),M=new kt;M.scale(S/m,1),M.rotate(T),M.translate(t,n),this.textureSpace==="local"&&M.scale(m,m),this.transform=M}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:g0,n=this._textureSize,{canvas:s,context:o}=_0(n,n),{x:l,y:u}=this.center,{x:h,y:d}=this.outerCenter,m=this.innerRadius,g=this.outerRadius,y=h-g,v=d-g,S=n/(g*2),T=(l-y)*S,M=(u-v)*S,E=o.createRadialGradient(T,M,m*S,(h-y)*S,(d-v)*S,g*S);y0(E,t),o.fillStyle=t[t.length-1].color,o.fillRect(0,0,n,n),o.fillStyle=E,o.translate(T,M),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-T,-M),o.fillRect(0,0,n,n),this.texture=new Ot({source:new fs({resource:s,addressMode:this._wrapMode})});const B=new kt;B.scale(1/S,1/S),B.translate(y,v),this.textureSpace==="local"&&B.scale(n,n),this.transform=B}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};vf.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};vf.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let ui=vf;function y0(r,t){for(let n=0;n<t.length;n++){const s=t[n];r.addColorStop(s.offset,s.color)}}function _0(r,t){const n=ee.get().createCanvas(r,t),s=n.getContext("2d");return{canvas:n,context:s}}function iC(r){let t=r[0]??{};return(typeof t=="number"||r[1])&&(Et("8.5.2","use options object instead"),t={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??ui.defaultLinearOptions.textureSize}),t}const x0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Hl{constructor(t,n){this.uid=le("fillPattern"),this._tick=0,this.transform=new kt,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),n&&(t.source.style.addressModeU=x0[n].addressModeU,t.source.style.addressModeV=x0[n].addressModeV)}setTransform(t){const n=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Mh,b0;function sC(){if(b0)return Mh;b0=1,Mh=n;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(l){var u=[];return l.replace(t,function(h,d,m){var g=d.toLowerCase();for(m=o(m),g=="m"&&m.length>2&&(u.push([d].concat(m.splice(0,2))),g="l",d=d=="m"?"l":"L");;){if(m.length==r[g])return m.unshift(d),u.push(m);if(m.length<r[g])throw new Error("malformed path data");u.push([d].concat(m.splice(0,r[g])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return Mh}var rC=sC();const aC=Pa(rC);function oC(r,t){const n=aC(r),s=[];let o=null,l=0,u=0;for(let h=0;h<n.length;h++){const d=n[h],m=d[0],g=d;switch(m){case"M":l=g[1],u=g[2],t.moveTo(l,u);break;case"m":l+=g[1],u+=g[2],t.moveTo(l,u);break;case"H":l=g[1],t.lineTo(l,u);break;case"h":l+=g[1],t.lineTo(l,u);break;case"V":u=g[1],t.lineTo(l,u);break;case"v":u+=g[1],t.lineTo(l,u);break;case"L":l=g[1],u=g[2],t.lineTo(l,u);break;case"l":l+=g[1],u+=g[2],t.lineTo(l,u);break;case"C":l=g[5],u=g[6],t.bezierCurveTo(g[1],g[2],g[3],g[4],l,u);break;case"c":t.bezierCurveTo(l+g[1],u+g[2],l+g[3],u+g[4],l+g[5],u+g[6]),l+=g[5],u+=g[6];break;case"S":l=g[3],u=g[4],t.bezierCurveToShort(g[1],g[2],l,u);break;case"s":t.bezierCurveToShort(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"Q":l=g[3],u=g[4],t.quadraticCurveTo(g[1],g[2],l,u);break;case"q":t.quadraticCurveTo(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"T":l=g[1],u=g[2],t.quadraticCurveToShort(l,u);break;case"t":l+=g[1],u+=g[2],t.quadraticCurveToShort(l,u);break;case"A":l=g[6],u=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"a":l+=g[6],u+=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"Z":case"z":t.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:te(`Unknown SVG path command: ${m}`)}m!=="Z"&&m!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return t}class Sf{constructor(t=0,n=0,s=0){this.type="circle",this.x=t,this.y=n,this.radius=s}clone(){return new Sf(this.x,this.y,this.radius)}contains(t,n){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-t,l=this.y-n;return o*=o,l*=l,o+l<=s}strokeContains(t,n,s,o=.5){if(this.radius===0)return!1;const l=this.x-t,u=this.y-n,h=this.radius,d=(1-o)*s,m=Math.sqrt(l*l+u*u);return m<=h+d&&m>h-(s-d)}getBounds(t){return t||(t=new de),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Cf{constructor(t=0,n=0,s=0,o=0){this.type="ellipse",this.x=t,this.y=n,this.halfWidth=s,this.halfHeight=o}clone(){return new Cf(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,o=(n-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(t,n,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),d=s-h,m=l-d,g=u-d,y=l+h,v=u+h,S=t-this.x,T=n-this.y,M=S*S/(m*m)+T*T/(g*g),E=S*S/(y*y)+T*T/(v*v);return M>1&&E<=1}getBounds(t){return t||(t=new de),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function lC(r,t,n,s,o,l){const u=r-n,h=t-s,d=o-n,m=l-s,g=u*d+h*m,y=d*d+m*m;let v=-1;y!==0&&(v=g/y);let S,T;v<0?(S=n,T=s):v>1?(S=o,T=l):(S=n+v*d,T=s+v*m);const M=r-S,E=t-T;return M*M+E*E}let cC,uC;class Ra{constructor(...t){this.type="polygon";let n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){const s=[];for(let o=0,l=n.length;o<l;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.closePath=!0}isClockwise(){let t=0;const n=this.points,s=n.length;for(let o=0;o<s;o+=2){const l=n[o],u=n[o+1],h=n[(o+2)%s],d=n[(o+3)%s];t+=(h-l)*(d+u)}return t<0}containsPolygon(t){const n=this.getBounds(cC),s=t.getBounds(uC);if(!n.containsRect(s))return!1;const o=t.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const t=this.points.slice(),n=new Ra(t);return n.closePath=this.closePath,n}contains(t,n){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],d=this.points[l*2+1],m=this.points[u*2],g=this.points[u*2+1];d>n!=g>n&&t<(m-h)*((n-d)/(g-d))+h&&(s=!s)}return s}strokeContains(t,n,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:d}=this,m=d.length-(this.closePath?0:2);for(let g=0;g<m;g+=2){const y=d[g],v=d[g+1],S=d[(g+2)%d.length],T=d[(g+3)%d.length],M=lC(t,n,y,v,S,T),E=Math.sign((S-y)*(n-v)-(T-v)*(t-y));if(M<=(E<0?h:u))return!0}return!1}getBounds(t){t||(t=new de);const n=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,d=n.length;h<d;h+=2){const m=n[h],g=n[h+1];s=m<s?m:s,o=m>o?m:o,l=g<l?g:l,u=g>u?g:u}return t.x=s,t.width=o-s,t.y=l,t.height=u-l,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,n)=>`${t}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Et("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Et("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const yl=(r,t,n,s,o,l,u)=>{const h=r-n,d=t-s,m=Math.sqrt(h*h+d*d);return m>=o-l&&m<=o+u};class Af{constructor(t=0,n=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=t,this.y=n,this.width=s,this.height=o,this.radius=l}getBounds(t){return t||(t=new de),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Af(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+s&&n<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let o=t-(this.x+s),l=n-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=t-(this.x+this.width-s),o*o+l*l<=u)||(l=n-(this.y+this.height-s),o*o+l*l<=u)||(o=t-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(t,n,s,o=.5){const{x:l,y:u,width:h,height:d,radius:m}=this,g=s*(1-o),y=s-g,v=l+m,S=u+m,T=h-m*2,M=d-m*2,E=l+h,B=u+d;return(t>=l-g&&t<=l+y||t>=E-y&&t<=E+g)&&n>=S&&n<=S+M||(n>=u-g&&n<=u+y||n>=B-y&&n<=B+g)&&t>=v&&t<=v+T?!0:t<v&&n<S&&yl(t,n,v,S,m,y,g)||t>E-m&&n<S&&yl(t,n,E-m,S,m,y,g)||t>E-m&&n>B-m&&yl(t,n,E-m,B-m,m,y,g)||t<v&&n>B-m&&yl(t,n,v,B-m,m,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const g_={};function hC(r,t,n){let s=2166136261;for(let o=0;o<t;o++)s^=r[o].uid,s=Math.imul(s,16777619),s>>>=0;return g_[s]||fC(r,t,s,n)}function fC(r,t,n,s){const o={};let l=0;for(let h=0;h<s;h++){const d=h<t?r[h]:Ot.EMPTY.source;o[l++]=d.source,o[l++]=d.style}const u=new vl(o);return g_[n]=u,u}class v0{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function S0(r,t){const n=r.byteLength/8|0,s=new Float64Array(r,0,n);new Float64Array(t,0,n).set(s);const l=r.byteLength-n*8;if(l>0){const u=new Uint8Array(r,n*8,l);new Uint8Array(t,n*8,l).set(u)}}const dC={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var pC=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(pC||{});function C0(r,t){return t.alphaMode==="no-premultiply-alpha"&&dC[r]||r}const mC=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function gC(r){let t="";for(let n=0;n<r;++n)n>0&&(t+=`
else `),n<r-1&&(t+=`if(test == ${n}.0){}`);return t}function yC(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=mC.replace(/%forloop%/gi,gC(r));if(t.shaderSource(n,s),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))r=r/2|0;else break}}finally{t.deleteShader(n)}return r}let sr=null;function _C(){if(sr)return sr;const r=Qy();return sr=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),sr=yC(sr,r),r.getExtension("WEBGL_lose_context")?.loseContext(),sr}class xC{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const n=this.textures[t];this.textures[t]=null,this.ids[n.uid]=null}this.count=0}}class bC{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new xC,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const wa=[];let zl=0;Na.register({clear:()=>{if(wa.length>0)for(const r of wa)r&&r.destroy();wa.length=0,zl=0}});function A0(){return zl>0?wa[--zl]:new bC}function T0(r){wa[zl++]=r}let ma=0;const y_=class __{constructor(t){this.uid=le("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...__.defaultOptions,...t},t.maxTextures||(Et("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=_C());const{maxTextures:n,attributesInitialSize:s,indicesInitialSize:o}=t;this.attributeBuffer=new v0(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)T0(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,n){const s=t._batch.textures.ids[n._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=n,!0)}updateElement(t){this.dirty=!0;const n=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId)}break(t){const n=this._elements;if(!n[this.elementStart])return;let s=A0(),o=s.textures;o.clear();const l=n[this.elementStart];let u=C0(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,m=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,v=this._batchIndexStart,S="startBatch";const T=this.maxTextures;for(let M=this.elementStart;M<this.elementSize;++M){const E=n[M];n[M]=null;const D=E.texture._source,z=C0(E.blendMode,D),G=u!==z||h!==E.topology;if(D._batchTick===ma&&!G){E._textureId=D._textureBindLocation,y+=E.indexSize,E.packAsQuad?(this.packQuadAttributes(E,d,m,E._attributeStart,E._textureId),this.packQuadIndex(g,E._indexStart,E._attributeStart/this.vertexSize)):(this.packAttributes(E,d,m,E._attributeStart,E._textureId),this.packIndex(E,g,E._indexStart,E._attributeStart/this.vertexSize)),E._batch=s;continue}D._batchTick=ma,(o.count>=T||G)&&(this._finishBatch(s,v,y-v,o,u,h,t,S),S="renderBatch",v=y,u=z,h=E.topology,s=A0(),o=s.textures,o.clear(),++ma),E._textureId=D._textureBindLocation=o.count,o.ids[D.uid]=o.count,o.textures[o.count++]=D,E._batch=s,y+=E.indexSize,E.packAsQuad?(this.packQuadAttributes(E,d,m,E._attributeStart,E._textureId),this.packQuadIndex(g,E._indexStart,E._attributeStart/this.vertexSize)):(this.packAttributes(E,d,m,E._attributeStart,E._textureId),this.packIndex(E,g,E._indexStart,E._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,v,y-v,o,u,h,t,S),v=y,++ma),this.elementStart=this.elementSize,this._batchIndexStart=v,this._batchIndexSize=y}_finishBatch(t,n,s,o,l,u,h,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=o,t.blendMode=l,t.topology=u,t.start=n,t.size=s,++ma,this.batches[this.batchIndex++]=t,h.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const n=Math.max(t,this.attributeBuffer.size*2),s=new v0(n);S0(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const n=this.indexBuffer;let s=Math.max(t,n.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let l=0;l<n.length;l++)o[l]=n[l];else S0(n.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,n,s){t[n]=s+0,t[n+1]=s+1,t[n+2]=s+2,t[n+3]=s+0,t[n+4]=s+2,t[n+5]=s+3}packIndex(t,n,s,o){const l=t.indices,u=t.indexSize,h=t.indexOffset,d=t.attributeOffset;for(let m=0;m<u;m++)n[s++]=o+l[m+h]-d}destroy(t={}){if(this.batches!==null){for(let n=0;n<this.batchIndex;n++)T0(this.batches[n]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&(this.shader?.destroy(),this.shader=null);for(let n=0;n<this._elements.length;n++)this._elements[n]&&(this._elements[n]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};y_.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let vC=y_;var Ke=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(Ke||{});class za extends kn{constructor(t){let{data:n,size:s}=t;const{usage:o,label:l,shrinkToFit:u}=t;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=le("buffer"),this._resourceType="buffer",this._resourceId=le("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,s??(s=n?.byteLength);const h=!!n;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Ke.STATIC)}set static(t){t?this.descriptor.usage|=Ke.STATIC:this.descriptor.usage&=~Ke.STATIC}setDataWithSize(t,n,s){if(this._updateID++,this._updateSize=n*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=le("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function x_(r,t){if(!(r instanceof za)){let n=t?Ke.INDEX:Ke.VERTEX;r instanceof Array&&(t?(r=new Uint32Array(r),n=Ke.INDEX|Ke.COPY_DST):(r=new Float32Array(r),n=Ke.VERTEX|Ke.COPY_DST)),r=new za({data:r,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return r}function SC(r,t,n){const s=r.getAttribute(t);if(!s)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,d=-1/0;const m=o.BYTES_PER_ELEMENT,g=(s.offset||0)/m,y=(s.stride||8)/m;for(let v=g;v<o.length;v+=y){const S=o[v],T=o[v+1];S>h&&(h=S),T>d&&(d=T),S<l&&(l=S),T<u&&(u=T)}return n.minX=l,n.minY=u,n.maxX=h,n.maxY=d,n}function CC(r){return(r instanceof za||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=x_(r.buffer,!1),r}class AC extends kn{constructor(t={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=le("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Bn,this._boundsDirty=!0;const{attributes:n,indexBuffer:s,topology:o}=t;if(this.buffers=[],this.attributes={},n)for(const l in n)this.addAttribute(l,n[l]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const n=this.attributes[t];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(t,n){const s=CC(n);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=x_(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,SC(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(n=>n.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const TC=new Float32Array(1),EC=new Uint32Array(1);class MC extends AC{constructor(){const n=new za({data:TC,label:"attribute-batch-buffer",usage:Ke.VERTEX|Ke.COPY_DST,shrinkToFit:!1}),s=new za({data:EC,label:"index-batch-buffer",usage:Ke.INDEX|Ke.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:o,offset:0},aUV:{buffer:n,format:"float32x2",stride:o,offset:8},aColor:{buffer:n,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function E0(r,t,n){if(r)for(const s in r){const o=s.toLocaleLowerCase(),l=t[o];if(l){let u=r[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&l.push(`//----${n}----//`),l.push(u)}else te(`${s} placement hook does not exist in shader`)}}const RC=/\{\{(.*?)\}\}/g;function M0(r){const t={};return(r.match(RC)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{t[s]=[]}),t}function R0(r,t){let n;const s=/@in\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function w0(r,t,n=!1){const s=[];R0(t,s),r.forEach(h=>{h.header&&R0(h.header,s)});const o=s;n&&o.sort();const l=o.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let u=t.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function B0(r,t){let n;const s=/@out\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function wC(r){const n=/\b(\w+)\s*:/g.exec(r);return n?n[1]:""}function BC(r){const t=/@.*?\s+/g;return r.replace(t,"")}function kC(r,t){const n=[];B0(t,n),r.forEach(d=>{d.header&&B0(d.header,n)});let s=0;const o=n.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),l=n.sort().map(d=>`       var ${BC(d)};`).join(`
`),u=`return VSOutput(
            ${n.sort().map(d=>` ${wC(d)}`).join(`,
`)});`;let h=t.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function k0(r,t){let n=r;for(const s in t){const o=t[s];o.join(`
`).length?n=n.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):n=n.replace(`{{${s}}}`,"")}return n}const Pi=Object.create(null),Rh=new Map;let DC=0;function OC({template:r,bits:t}){const n=b_(r,t);if(Pi[n])return Pi[n];const{vertex:s,fragment:o}=UC(r,t);return Pi[n]=v_(s,o,t),Pi[n]}function zC({template:r,bits:t}){const n=b_(r,t);return Pi[n]||(Pi[n]=v_(r.vertex,r.fragment,t)),Pi[n]}function UC(r,t){const n=t.map(u=>u.vertex).filter(u=>!!u),s=t.map(u=>u.fragment).filter(u=>!!u);let o=w0(n,r.vertex,!0);o=kC(n,o);const l=w0(s,r.fragment,!0);return{vertex:o,fragment:l}}function b_(r,t){return t.map(n=>(Rh.has(n)||Rh.set(n,DC++),Rh.get(n))).sort((n,s)=>n-s).join("-")+r.vertex+r.fragment}function v_(r,t,n){const s=M0(r),o=M0(t);return n.forEach(l=>{E0(l.vertex,s,l.name),E0(l.fragment,o,l.name)}),{vertex:k0(r,s),fragment:k0(t,o)}}const LC=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,PC=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,NC=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,GC=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,jC={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},IC={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function HC({bits:r,name:t}){const n=OC({template:{fragment:PC,vertex:LC},bits:[jC,...r]});return Il.from({name:t,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function FC({bits:r,name:t}){return new Ky({name:t,...zC({template:{vertex:NC,fragment:GC},bits:[IC,...r]})})}const YC={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},VC={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},wh={};function XC(r){const t=[];if(r===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let s=0;s<r;s++)t.push(`@group(1) @binding(${n++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${n++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function qC(r){const t=[];if(r===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let n=0;n<r;n++)n===r-1?t.push("  default:{"):t.push(`  case ${n}:{`),t.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function $C(r){return wh[r]||(wh[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${XC(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${qC(r)}
            `}}),wh[r]}const Bh={};function QC(r){const t=[];for(let n=0;n<r;n++)n>0&&t.push("else"),n<r-1&&t.push(`if(vTextureId < ${n}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${n}], vUV);`),t.push("}");return t.join(`
`)}function ZC(r){return Bh[r]||(Bh[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${QC(r)}
            `}}),Bh[r]}const KC={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},WC={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},D0={};function JC(r){let t=D0[r];if(t)return t;const n=new Int32Array(r);for(let s=0;s<r;s++)n[s]=s;return t=D0[r]=new e_({uTextures:{value:n,type:"i32",size:r}},{isStatic:!0}),t}class O0 extends bf{constructor(t){const n=FC({name:"batch",bits:[VC,ZC(t),WC]}),s=HC({name:"batch",bits:[YC,$C(t),KC]});super({glProgram:n,gpuProgram:s,resources:{batchSamplers:JC(t)}}),this.maxTextures=t}}let ga=null;const S_=class C_ extends vC{constructor(t){super(t),this.geometry=new MC,this.name=C_.extension.name,this.vertexSize=6,ga??(ga=new O0(t.maxTextures)),this.shader=ga}packAttributes(t,n,s,o,l){const u=l<<16|t.roundPixels&65535,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,v=h.tx,S=h.ty,{positions:T,uvs:M}=t,E=t.color,B=t.attributeOffset,D=B+t.attributeSize;for(let z=B;z<D;z++){const G=z*2,W=T[G],Z=T[G+1];n[o++]=d*W+g*Z+v,n[o++]=y*Z+m*W+S,n[o++]=M[G],n[o++]=M[G+1],s[o++]=E,s[o++]=u}}packQuadAttributes(t,n,s,o,l){const u=t.texture,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,v=h.tx,S=h.ty,T=t.bounds,M=T.maxX,E=T.minX,B=T.maxY,D=T.minY,z=u.uvs,G=t.color,W=l<<16|t.roundPixels&65535;n[o+0]=d*E+g*D+v,n[o+1]=y*D+m*E+S,n[o+2]=z.x0,n[o+3]=z.y0,s[o+4]=G,s[o+5]=W,n[o+6]=d*M+g*D+v,n[o+7]=y*D+m*M+S,n[o+8]=z.x1,n[o+9]=z.y1,s[o+10]=G,s[o+11]=W,n[o+12]=d*M+g*B+v,n[o+13]=y*B+m*M+S,n[o+14]=z.x2,n[o+15]=z.y2,s[o+16]=G,s[o+17]=W,n[o+18]=d*E+g*B+v,n[o+19]=y*B+m*E+S,n[o+20]=z.x3,n[o+21]=z.y3,s[o+22]=G,s[o+23]=W}_updateMaxTextures(t){this.shader.maxTextures!==t&&(ga=new O0(t),this.shader=ga)}destroy(){this.shader=null,super.destroy()}};S_.extension={type:[dt.Batcher],name:"default"};let tA=S_;class eA{constructor(t){this.items=Object.create(null);const{renderer:n,type:s,onUnload:o,priority:l,name:u}=t;this._renderer=n,n.gc.addResourceHash(this,"items",s,l??0),this._onUnload=o,this.name=u}add(t){return this.items[t.uid]?!1:(this.items[t.uid]=t,t.once("unload",this.remove,this),t._gcLastUsed=this._renderer.gc.now,!0)}remove(t,...n){if(!this.items[t.uid])return;const s=t._gpuData[this._renderer.uid];s&&(this._onUnload?.(t,...n),s.destroy(),t._gpuData[this._renderer.uid]=null,this.items[t.uid]=null)}removeAll(...t){Object.values(this.items).forEach(n=>n&&this.remove(n,...t))}destroy(...t){this.removeAll(...t),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function nA(r,t,n,s,o,l,u,h=null){let d=0;n*=t,o*=l;const m=h.a,g=h.b,y=h.c,v=h.d,S=h.tx,T=h.ty;for(;d<u;){const M=r[n],E=r[n+1];s[o]=m*M+y*E+S,s[o+1]=g*M+v*E+T,o+=l,n+=t,d++}}function iA(r,t,n,s){let o=0;for(t*=n;o<s;)r[t]=0,r[t+1]=0,t+=n,o++}function A_(r,t,n,s,o){const l=t.a,u=t.b,h=t.c,d=t.d,m=t.tx,g=t.ty;n||(n=0),s||(s=2),o||(o=r.length/s-n);let y=n*s;for(let v=0;v<o;v++){const S=r[y],T=r[y+1];r[y]=l*S+h*T+m,r[y+1]=u*S+d*T+g,y+=s}}const sA=new kt;class T_{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,n=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?Ry(n,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||sA}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Ua={extension:{type:dt.ShapeBuilder,name:"circle"},build(r,t){let n,s,o,l,u,h;if(r.type==="circle"){const G=r;if(u=h=G.radius,u<=0)return!1;n=G.x,s=G.y,o=l=0}else if(r.type==="ellipse"){const G=r;if(u=G.halfWidth,h=G.halfHeight,u<=0||h<=0)return!1;n=G.x,s=G.y,o=l=0}else{const G=r,W=G.width/2,Z=G.height/2;n=G.x+W,s=G.y+Z,u=h=Math.max(0,Math.min(G.radius,Math.min(W,Z))),o=W-u,l=Z-h}if(o<0||l<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+h)),m=d*8+(o?4:0)+(l?4:0);if(m===0)return!1;if(d===0)return t[0]=t[6]=n+o,t[1]=t[3]=s+l,t[2]=t[4]=n-o,t[5]=t[7]=s-l,!0;let g=0,y=d*4+(o?2:0)+2,v=y,S=m,T=o+u,M=l,E=n+T,B=n-T,D=s+M;if(t[g++]=E,t[g++]=D,t[--y]=D,t[--y]=B,l){const G=s-M;t[v++]=B,t[v++]=G,t[--S]=G,t[--S]=E}for(let G=1;G<d;G++){const W=Math.PI/2*(G/d),Z=o+Math.cos(W)*u,Y=l+Math.sin(W)*h,ot=n+Z,rt=n-Z,et=s+Y,nt=s-Y;t[g++]=ot,t[g++]=et,t[--y]=et,t[--y]=rt,t[v++]=rt,t[v++]=nt,t[--S]=nt,t[--S]=ot}T=o,M=l+h,E=n+T,B=n-T,D=s+M;const z=s-M;return t[g++]=E,t[g++]=D,t[--S]=z,t[--S]=E,o&&(t[g++]=B,t[g++]=D,t[--S]=z,t[--S]=B),!0},triangulate(r,t,n,s,o,l){if(r.length===0)return;let u=0,h=0;for(let g=0;g<r.length;g+=2)u+=r[g],h+=r[g+1];u/=r.length/2,h/=r.length/2;let d=s;t[d*n]=u,t[d*n+1]=h;const m=d++;for(let g=0;g<r.length;g+=2)t[d*n]=r[g],t[d*n+1]=r[g+1],g>0&&(o[l++]=d,o[l++]=m,o[l++]=d-1),d++;o[l++]=m+1,o[l++]=m,o[l++]=d-1}},rA={...Ua,extension:{...Ua.extension,name:"ellipse"}},aA={...Ua,extension:{...Ua.extension,name:"roundedRectangle"}},E_=1e-4,z0=1e-4;function oA(r){const t=r.length;if(t<6)return 1;let n=0;for(let s=0,o=r[t-2],l=r[t-1];s<t;s+=2){const u=r[s],h=r[s+1];n+=(u-o)*(h+l),o=u,l=h}return n<0?-1:1}function U0(r,t,n,s,o,l,u,h){const d=r-n*o,m=t-s*o,g=r+n*l,y=t+s*l;let v,S;u?(v=s,S=-n):(v=-s,S=n);const T=d+v,M=m+S,E=g+v,B=y+S;return h.push(T,M),h.push(E,B),2}function as(r,t,n,s,o,l,u,h){const d=n-r,m=s-t;let g=Math.atan2(d,m),y=Math.atan2(o-r,l-t);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let v=g;const S=y-g,T=Math.abs(S),M=Math.sqrt(d*d+m*m),E=(15*T*Math.sqrt(M)/Math.PI>>0)+1,B=S/E;if(v+=B,h){u.push(r,t),u.push(n,s);for(let D=1,z=v;D<E;D++,z+=B)u.push(r,t),u.push(r+Math.sin(z)*M,t+Math.cos(z)*M);u.push(r,t),u.push(o,l)}else{u.push(n,s),u.push(r,t);for(let D=1,z=v;D<E;D++,z+=B)u.push(r+Math.sin(z)*M,t+Math.cos(z)*M),u.push(r,t);u.push(o,l),u.push(r,t)}return E*2}function lA(r,t,n,s,o,l){const u=E_;if(r.length===0)return;const h=t;let d=h.alignment;if(t.alignment!==.5){let lt=oA(r);d=(d-.5)*lt+.5}const m=new Ue(r[0],r[1]),g=new Ue(r[r.length-2],r[r.length-1]),y=s,v=Math.abs(m.x-g.x)<u&&Math.abs(m.y-g.y)<u;if(y){r=r.slice(),v&&(r.pop(),r.pop(),g.set(r[r.length-2],r[r.length-1]));const lt=(m.x+g.x)*.5,St=(g.y+m.y)*.5;r.unshift(lt,St),r.push(lt,St)}const S=o,T=r.length/2;let M=r.length;const E=S.length/2,B=h.width/2,D=B*B,z=h.miterLimit*h.miterLimit;let G=r[0],W=r[1],Z=r[2],Y=r[3],ot=0,rt=0,et=-(W-Y),nt=G-Z,bt=0,zt=0,Mt=Math.sqrt(et*et+nt*nt);et/=Mt,nt/=Mt,et*=B,nt*=B;const ce=d,L=(1-ce)*2,q=ce*2;y||(h.cap==="round"?M+=as(G-et*(L-q)*.5,W-nt*(L-q)*.5,G-et*L,W-nt*L,G+et*q,W+nt*q,S,!0)+2:h.cap==="square"&&(M+=U0(G,W,et,nt,L,q,!0,S))),S.push(G-et*L,W-nt*L),S.push(G+et*q,W+nt*q);for(let lt=1;lt<T-1;++lt){G=r[(lt-1)*2],W=r[(lt-1)*2+1],Z=r[lt*2],Y=r[lt*2+1],ot=r[(lt+1)*2],rt=r[(lt+1)*2+1],et=-(W-Y),nt=G-Z,Mt=Math.sqrt(et*et+nt*nt),et/=Mt,nt/=Mt,et*=B,nt*=B,bt=-(Y-rt),zt=Z-ot,Mt=Math.sqrt(bt*bt+zt*zt),bt/=Mt,zt/=Mt,bt*=B,zt*=B;const St=Z-G,k=W-Y,V=Z-ot,tt=rt-Y,it=St*V+k*tt,gt=k*V-tt*St,yt=gt<0;if(Math.abs(gt)<.001*Math.abs(it)){S.push(Z-et*L,Y-nt*L),S.push(Z+et*q,Y+nt*q),it>=0&&(h.join==="round"?M+=as(Z,Y,Z-et*L,Y-nt*L,Z-bt*L,Y-zt*L,S,!1)+4:M+=2,S.push(Z-bt*q,Y-zt*q),S.push(Z+bt*L,Y+zt*L));continue}const Rt=(-et+G)*(-nt+Y)-(-et+Z)*(-nt+W),Zt=(-bt+ot)*(-zt+Y)-(-bt+Z)*(-zt+rt),Gt=(St*Zt-V*Rt)/gt,We=(tt*Rt-k*Zt)/gt,zn=(Gt-Z)*(Gt-Z)+(We-Y)*(We-Y),He=Z+(Gt-Z)*L,Ae=Y+(We-Y)*L,ue=Z-(Gt-Z)*q,Je=Y-(We-Y)*q,Ii=Math.min(St*St+k*k,V*V+tt*tt),hi=yt?L:q,ys=Ii+hi*hi*D;zn<=ys?h.join==="bevel"||zn/D>z?(yt?(S.push(He,Ae),S.push(Z+et*q,Y+nt*q),S.push(He,Ae),S.push(Z+bt*q,Y+zt*q)):(S.push(Z-et*L,Y-nt*L),S.push(ue,Je),S.push(Z-bt*L,Y-zt*L),S.push(ue,Je)),M+=2):h.join==="round"?yt?(S.push(He,Ae),S.push(Z+et*q,Y+nt*q),M+=as(Z,Y,Z+et*q,Y+nt*q,Z+bt*q,Y+zt*q,S,!0)+4,S.push(He,Ae),S.push(Z+bt*q,Y+zt*q)):(S.push(Z-et*L,Y-nt*L),S.push(ue,Je),M+=as(Z,Y,Z-et*L,Y-nt*L,Z-bt*L,Y-zt*L,S,!1)+4,S.push(Z-bt*L,Y-zt*L),S.push(ue,Je)):(S.push(He,Ae),S.push(ue,Je)):(S.push(Z-et*L,Y-nt*L),S.push(Z+et*q,Y+nt*q),h.join==="round"?yt?M+=as(Z,Y,Z+et*q,Y+nt*q,Z+bt*q,Y+zt*q,S,!0)+2:M+=as(Z,Y,Z-et*L,Y-nt*L,Z-bt*L,Y-zt*L,S,!1)+2:h.join==="miter"&&zn/D<=z&&(yt?(S.push(ue,Je),S.push(ue,Je)):(S.push(He,Ae),S.push(He,Ae)),M+=2),S.push(Z-bt*L,Y-zt*L),S.push(Z+bt*q,Y+zt*q),M+=2)}G=r[(T-2)*2],W=r[(T-2)*2+1],Z=r[(T-1)*2],Y=r[(T-1)*2+1],et=-(W-Y),nt=G-Z,Mt=Math.sqrt(et*et+nt*nt),et/=Mt,nt/=Mt,et*=B,nt*=B,S.push(Z-et*L,Y-nt*L),S.push(Z+et*q,Y+nt*q),y||(h.cap==="round"?M+=as(Z-et*(L-q)*.5,Y-nt*(L-q)*.5,Z-et*L,Y-nt*L,Z+et*q,Y+nt*q,S,!1)+2:h.cap==="square"&&(M+=U0(Z,Y,et,nt,L,q,!1,S)));const ht=z0*z0;for(let lt=E;lt<M+E-2;++lt)G=S[lt*2],W=S[lt*2+1],Z=S[(lt+1)*2],Y=S[(lt+1)*2+1],ot=S[(lt+2)*2],rt=S[(lt+2)*2+1],!(Math.abs(G*(Y-rt)+Z*(rt-W)+ot*(W-Y))<ht)&&l.push(lt,lt+1,lt+2)}function cA(r,t,n,s){const o=E_;if(r.length===0)return;const l=r[0],u=r[1],h=r[r.length-2],d=r[r.length-1],m=t||Math.abs(l-h)<o&&Math.abs(u-d)<o,g=n,y=r.length/2,v=g.length/2;for(let S=0;S<y;S++)g.push(r[S*2]),g.push(r[S*2+1]);for(let S=0;S<y-1;S++)s.push(v+S,v+S+1);m&&s.push(v+y-1,v)}function M_(r,t,n,s,o,l,u){const h=$S(r,t,2);if(!h)return;for(let m=0;m<h.length;m+=3)l[u++]=h[m]+o,l[u++]=h[m+1]+o,l[u++]=h[m+2]+o;let d=o*s;for(let m=0;m<r.length;m+=2)n[d]=r[m],n[d+1]=r[m+1],d+=s}const uA=[],hA={extension:{type:dt.ShapeBuilder,name:"polygon"},build(r,t){for(let n=0;n<r.points.length;n++)t[n]=r.points[n];return!0},triangulate(r,t,n,s,o,l){M_(r,uA,t,n,s,o,l)}},fA={extension:{type:dt.ShapeBuilder,name:"rectangle"},build(r,t){const n=r,s=n.x,o=n.y,l=n.width,u=n.height;return l>0&&u>0?(t[0]=s,t[1]=o,t[2]=s+l,t[3]=o,t[4]=s+l,t[5]=o+u,t[6]=s,t[7]=o+u,!0):!1},triangulate(r,t,n,s,o,l){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[6],t[s+u+1]=r[7],u+=n,t[s+u]=r[4],t[s+u+1]=r[5],u+=n;const h=s/n;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},dA={extension:{type:dt.ShapeBuilder,name:"triangle"},build(r,t){return t[0]=r.x,t[1]=r.y,t[2]=r.x2,t[3]=r.y2,t[4]=r.x3,t[5]=r.y3,!0},triangulate(r,t,n,s,o,l){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[4],t[s+u+1]=r[5];const h=s/n;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},pA=new kt,mA=new de;function gA(r,t,n,s){const o=t.matrix?r.copyFrom(t.matrix).invert():r.identity();if(t.textureSpace==="local"){const u=n.getBounds(mA);t.width&&u.pad(t.width);const{x:h,y:d}=u,m=1/u.width,g=1/u.height,y=-h*m,v=-d*g,S=o.a,T=o.b,M=o.c,E=o.d;o.a*=m,o.b*=m,o.c*=g,o.d*=g,o.tx=y*S+v*M+o.tx,o.ty=y*T+v*E+o.ty}else o.translate(t.texture.frame.x,t.texture.frame.y),o.scale(1/t.texture.source.width,1/t.texture.source.height);const l=t.texture.source.style;return!(t.fill instanceof ui)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(pA.copyFrom(s).invert()),o}const Fl={};ke.handleByMap(dt.ShapeBuilder,Fl);ke.add(fA,hA,dA,Ua,rA,aA);const yA=new de,_A=new kt;function xA(r,t){const{geometryData:n,batches:s}=t;s.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let o=0;o<r.instructions.length;o++){const l=r.instructions[o];if(l.action==="texture")bA(l.data,s,n);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,d=l.data.style,m=l.data.hole;u&&m&&L0(m.shapePath,d,!0,s,n),m&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=m.shapePath.shapePrimitives),L0(h,d,u,s,n)}}}function bA(r,t,n){const s=[],o=Fl.rectangle,l=yA;l.x=r.dx,l.y=r.dy,l.width=r.dw,l.height=r.dh;const u=r.transform;if(!o.build(l,s))return;const{vertices:h,uvs:d,indices:m}=n,g=m.length,y=h.length/2;u&&A_(s,u),o.triangulate(s,h,2,y,m,g);const v=r.image,S=v.uvs;d.push(S.x0,S.y0,S.x1,S.y1,S.x3,S.y3,S.x2,S.y2);const T=An.get(T_);T.indexOffset=g,T.indexSize=m.length-g,T.attributeOffset=y,T.attributeSize=h.length/2-y,T.baseColor=r.style,T.alpha=r.alpha,T.texture=v,T.geometryData=n,t.push(T)}function L0(r,t,n,s,o){const{vertices:l,uvs:u,indices:h}=o;r.shapePrimitives.forEach(({shape:d,transform:m,holes:g})=>{const y=[],v=Fl[d.type];if(!v.build(d,y))return;const S=h.length,T=l.length/2;let M="triangle-list";if(m&&A_(y,m),n){const z=d.closePath??!0,G=t;G.pixelLine?(cA(y,z,l,h),M="line-list"):lA(y,G,!1,z,l,h)}else if(g){const z=[],G=y.slice();vA(g).forEach(Z=>{z.push(G.length/2),G.push(...Z)}),M_(G,z,l,2,T,h,S)}else v.triangulate(y,l,2,T,h,S);const E=u.length/2,B=t.texture;if(B!==Ot.WHITE){const z=gA(_A,t,d,m);nA(l,2,T,u,E,2,l.length/2-T,z)}else iA(u,E,2,l.length/2-T);const D=An.get(T_);D.indexOffset=S,D.indexSize=h.length-S,D.attributeOffset=T,D.attributeSize=l.length/2-T,D.baseColor=t.color,D.alpha=t.alpha,D.texture=B,D.geometryData=o,D.topology=M,s.push(D)})}function vA(r){const t=[];for(let n=0;n<r.length;n++){const s=r[n].shape,o=[];Fl[s.type].build(s,o)&&t.push(o)}return t}class SA{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(t=>{An.return(t)}),this.graphicsData&&An.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class CA{constructor(){this.instructions=new Dy}init(t){const n=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(n):this.batcher=new tA({maxTextures:n}),this.instructions.reset()}get geometry(){return Et(xv,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Tf=class sf{constructor(t){this._renderer=t,this._managedContexts=new eA({renderer:t,type:"resource",name:"graphicsContext"})}init(t){sf.defaultOptions.bezierSmoothness=t?.bezierSmoothness??sf.defaultOptions.bezierSmoothness}getContextRenderData(t){return t._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(t)}updateGpuContext(t){const n=!!t._gpuData[this._renderer.uid],s=t._gpuData[this._renderer.uid]||this._initContext(t);if(t.dirty||!n){n&&s.reset(),xA(t,s);const o=t.batchMode;t.customShader||o==="no-batch"?s.isBatchable=!1:o==="auto"?s.isBatchable=s.geometryData.vertices.length<400:s.isBatchable=!0,t.dirty=!1}return s}getGpuContext(t){return t._gpuData[this._renderer.uid]||this._initContext(t)}_initContextRenderData(t){const n=An.get(CA,{maxTextures:this._renderer.limits.maxBatchableTextures}),s=t._gpuData[this._renderer.uid],{batches:o,geometryData:l}=s;s.graphicsData=n;const u=l.vertices.length,h=l.indices.length;for(let y=0;y<o.length;y++)o[y].applyTransform=!1;const d=n.batcher;d.ensureAttributeBuffer(u),d.ensureIndexBuffer(h),d.begin();for(let y=0;y<o.length;y++){const v=o[y];d.add(v)}d.finish(n.instructions);const m=d.geometry;m.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),m.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);const g=d.batches;for(let y=0;y<g.length;y++){const v=g[y];v.bindGroup=hC(v.textures.textures,v.textures.count,this._renderer.limits.maxBatchableTextures)}return n}_initContext(t){const n=new SA;return n.context=t,t._gpuData[this._renderer.uid]=n,this._managedContexts.add(t),n}destroy(){this._managedContexts.destroy(),this._renderer=null}};Tf.extension={type:[dt.WebGLSystem,dt.WebGPUSystem,dt.CanvasSystem],name:"graphicsContext"};Tf.defaultOptions={bezierSmoothness:.5};let R_=Tf;const AA=8,_l=11920929e-14,TA=1;function w_(r,t,n,s,o,l,u,h,d,m){const y=Math.min(.99,Math.max(0,m??R_.defaultOptions.bezierSmoothness));let v=(TA-y)/1;return v*=v,EA(t,n,s,o,l,u,h,d,r,v),r}function EA(r,t,n,s,o,l,u,h,d,m){rf(r,t,n,s,o,l,u,h,d,m,0),d.push(u,h)}function rf(r,t,n,s,o,l,u,h,d,m,g){if(g>AA)return;const y=(r+n)/2,v=(t+s)/2,S=(n+o)/2,T=(s+l)/2,M=(o+u)/2,E=(l+h)/2,B=(y+S)/2,D=(v+T)/2,z=(S+M)/2,G=(T+E)/2,W=(B+z)/2,Z=(D+G)/2;if(g>0){let Y=u-r,ot=h-t;const rt=Math.abs((n-u)*ot-(s-h)*Y),et=Math.abs((o-u)*ot-(l-h)*Y);if(rt>_l&&et>_l){if((rt+et)*(rt+et)<=m*(Y*Y+ot*ot)){d.push(W,Z);return}}else if(rt>_l){if(rt*rt<=m*(Y*Y+ot*ot)){d.push(W,Z);return}}else if(et>_l){if(et*et<=m*(Y*Y+ot*ot)){d.push(W,Z);return}}else if(Y=W-(r+u)/2,ot=Z-(t+h)/2,Y*Y+ot*ot<=m){d.push(W,Z);return}}rf(r,t,y,v,B,D,W,Z,d,m,g+1),rf(W,Z,z,G,M,E,u,h,d,m,g+1)}const MA=8,RA=11920929e-14,wA=1;function BA(r,t,n,s,o,l,u,h){const m=Math.min(.99,Math.max(0,h??R_.defaultOptions.bezierSmoothness));let g=(wA-m)/1;return g*=g,kA(t,n,s,o,l,u,r,g),r}function kA(r,t,n,s,o,l,u,h){af(u,r,t,n,s,o,l,h,0),u.push(o,l)}function af(r,t,n,s,o,l,u,h,d){if(d>MA)return;const m=(t+s)/2,g=(n+o)/2,y=(s+l)/2,v=(o+u)/2,S=(m+y)/2,T=(g+v)/2;let M=l-t,E=u-n;const B=Math.abs((s-l)*E-(o-u)*M);if(B>RA){if(B*B<=h*(M*M+E*E)){r.push(S,T);return}}else if(M=S-(t+l)/2,E=T-(n+u)/2,M*M+E*E<=h){r.push(S,T);return}af(r,t,n,m,g,S,T,h,d+1),af(r,S,T,y,v,l,u,h,d+1)}function B_(r,t,n,s,o,l,u,h){let d=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),h=Math.max(h,3);let m=d/h,g=o;m*=u?-1:1;for(let y=0;y<h+1;y++){const v=Math.cos(g),S=Math.sin(g),T=t+v*s,M=n+S*s;r.push(T,M),g+=m}}function DA(r,t,n,s,o,l){const u=r[r.length-2],d=r[r.length-1]-n,m=u-t,g=o-n,y=s-t,v=Math.abs(d*y-m*g);if(v<1e-8||l===0){(r[r.length-2]!==t||r[r.length-1]!==n)&&r.push(t,n);return}const S=d*d+m*m,T=g*g+y*y,M=d*g+m*y,E=l*Math.sqrt(S)/v,B=l*Math.sqrt(T)/v,D=E*M/S,z=B*M/T,G=E*y+B*m,W=E*g+B*d,Z=m*(B+D),Y=d*(B+D),ot=y*(E+z),rt=g*(E+z),et=Math.atan2(Y-W,Z-G),nt=Math.atan2(rt-W,ot-G);B_(r,G+t,W+n,l,et,nt,m*g>y*d)}const Ba=Math.PI*2,kh={centerX:0,centerY:0,ang1:0,ang2:0},Dh=({x:r,y:t},n,s,o,l,u,h,d)=>{r*=n,t*=s;const m=o*r-l*t,g=l*r+o*t;return d.x=m+u,d.y=g+h,d};function OA(r,t){const n=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:n,o=Math.cos(r),l=Math.sin(r),u=Math.cos(r+t),h=Math.sin(r+t);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const P0=(r,t,n,s)=>{const o=r*s-t*n<0?-1:1;let l=r*n+t*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},zA=(r,t,n,s,o,l,u,h,d,m,g,y,v)=>{const S=Math.pow(o,2),T=Math.pow(l,2),M=Math.pow(g,2),E=Math.pow(y,2);let B=S*T-S*E-T*M;B<0&&(B=0),B/=S*E+T*M,B=Math.sqrt(B)*(u===h?-1:1);const D=B*o/l*y,z=B*-l/o*g,G=m*D-d*z+(r+n)/2,W=d*D+m*z+(t+s)/2,Z=(g-D)/o,Y=(y-z)/l,ot=(-g-D)/o,rt=(-y-z)/l,et=P0(1,0,Z,Y);let nt=P0(Z,Y,ot,rt);h===0&&nt>0&&(nt-=Ba),h===1&&nt<0&&(nt+=Ba),v.centerX=G,v.centerY=W,v.ang1=et,v.ang2=nt};function UA(r,t,n,s,o,l,u,h=0,d=0,m=0){if(l===0||u===0)return;const g=Math.sin(h*Ba/360),y=Math.cos(h*Ba/360),v=y*(t-s)/2+g*(n-o)/2,S=-g*(t-s)/2+y*(n-o)/2;if(v===0&&S===0)return;l=Math.abs(l),u=Math.abs(u);const T=Math.pow(v,2)/Math.pow(l,2)+Math.pow(S,2)/Math.pow(u,2);T>1&&(l*=Math.sqrt(T),u*=Math.sqrt(T)),zA(t,n,s,o,l,u,d,m,g,y,v,S,kh);let{ang1:M,ang2:E}=kh;const{centerX:B,centerY:D}=kh;let z=Math.abs(E)/(Ba/4);Math.abs(1-z)<1e-7&&(z=1);const G=Math.max(Math.ceil(z),1);E/=G;let W=r[r.length-2],Z=r[r.length-1];const Y={x:0,y:0};for(let ot=0;ot<G;ot++){const rt=OA(M,E),{x:et,y:nt}=Dh(rt[0],l,u,y,g,B,D,Y),{x:bt,y:zt}=Dh(rt[1],l,u,y,g,B,D,Y),{x:Mt,y:ce}=Dh(rt[2],l,u,y,g,B,D,Y);w_(r,W,Z,et,nt,bt,zt,Mt,ce),W=Mt,Z=ce,M+=E}}function LA(r,t,n){const s=(u,h)=>{const d=h.x-u.x,m=h.y-u.y,g=Math.sqrt(d*d+m*m),y=d/g,v=m/g;return{len:g,nx:y,ny:v}},o=(u,h)=>{u===0?r.moveTo(h.x,h.y):r.lineTo(h.x,h.y)};let l=t[t.length-1];for(let u=0;u<t.length;u++){const h=t[u%t.length],d=h.radius??n;if(d<=0){o(u,h),l=h;continue}const m=t[(u+1)%t.length],g=s(h,l),y=s(h,m);if(g.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let v=Math.asin(g.nx*y.ny-g.ny*y.nx),S=1,T=!1;g.nx*y.nx-g.ny*-y.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,S=-1,T=!0):v>0&&(S=-1,T=!0);const M=v/2;let E,B=Math.abs(Math.cos(M)*d/Math.sin(M));B>Math.min(g.len/2,y.len/2)?(B=Math.min(g.len/2,y.len/2),E=Math.abs(B*Math.sin(M)/Math.cos(M))):E=d;const D=h.x+y.nx*B+-y.ny*E*S,z=h.y+y.ny*B+y.nx*E*S,G=Math.atan2(g.ny,g.nx)+Math.PI/2*S,W=Math.atan2(y.ny,y.nx)-Math.PI/2*S;u===0&&r.moveTo(D+Math.cos(G)*E,z+Math.sin(G)*E),r.arc(D,z,E,G,W,T),l=h}}function PA(r,t,n,s){const o=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),l=(h,d,m)=>({x:h.x+(d.x-h.x)*m,y:h.y+(d.y-h.y)*m}),u=t.length;for(let h=0;h<u;h++){const d=t[(h+1)%u],m=d.radius??n;if(m<=0){h===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const g=t[h],y=t[(h+2)%u],v=o(g,d);let S;if(v<1e-4)S=d;else{const E=Math.min(v/2,m);S=l(d,g,E/v)}const T=o(y,d);let M;if(T<1e-4)M=d;else{const E=Math.min(T/2,m);M=l(d,y,E/T)}h===0?r.moveTo(S.x,S.y):r.lineTo(S.x,S.y),r.quadraticCurveTo(d.x,d.y,M.x,M.y,s)}}const NA=new de;class GA{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Bn,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,n){return this.startPoly(t,n),this}lineTo(t,n){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==t||l!==n)&&s.push(t,n),this}arc(t,n,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return B_(h,t,n,s,o,l,u),this}arcTo(t,n,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return DA(u,t,n,s,o,l),this}arcToSvg(t,n,s,o,l,u,h){const d=this._currentPoly.points;return UA(d,this._currentPoly.lastX,this._currentPoly.lastY,u,h,t,n,s,o,l),this}bezierCurveTo(t,n,s,o,l,u,h){this._ensurePoly();const d=this._currentPoly;return w_(this._currentPoly.points,d.lastX,d.lastY,t,n,s,o,l,u,h),this}quadraticCurveTo(t,n,s,o,l){this._ensurePoly();const u=this._currentPoly;return BA(this._currentPoly.points,u.lastX,u.lastY,t,n,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(t,n){this.endPoly(),n&&!n.isIdentity()&&(t=t.clone(!0),t.transform(n));const s=this.shapePrimitives,o=s.length;for(let l=0;l<t.instructions.length;l++){const u=t.instructions[l];this[u.action](...u.data)}if(t.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const d=h.shape,m=l?.shape;m&&m.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(t=!1){this.endPoly(t)}rect(t,n,s,o,l){return this.drawShape(new de(t,n,s,o),l),this}circle(t,n,s,o){return this.drawShape(new Sf(t,n,s),o),this}poly(t,n,s){const o=new Ra(t);return o.closePath=n,this.drawShape(o,s),this}regularPoly(t,n,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,d=Math.PI*2/o,m=[];for(let g=0;g<o;g++){const y=h-g*d;m.push(t+s*Math.cos(y),n+s*Math.sin(y))}return this.poly(m,!0,u),this}roundPoly(t,n,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(t,n,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,d);const m=-1*Math.PI/2+u,g=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let v=0;v<o;v++){const S=v*g+m,T=t+s*Math.cos(S),M=n+s*Math.sin(S),E=S+Math.PI+y,B=S-Math.PI-y,D=T+l*Math.cos(E),z=M+l*Math.sin(E),G=T+l*Math.cos(B),W=M+l*Math.sin(B);v===0?this.moveTo(D,z):this.lineTo(D,z),this.quadraticCurveTo(T,M,G,W,h)}return this.closePath()}roundShape(t,n,s=!1,o){return t.length<3?this:(s?PA(this,t,n,o):LA(this,t,n),this.closePath())}filletRect(t,n,s,o,l){if(l===0)return this.rect(t,n,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),d=t+s,m=n+o,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(t,n+y).arcTo(t+g,n+g,t+y,n,y).lineTo(d-y,n).arcTo(d-g,n+g,d,n+y,y).lineTo(d,m-y).arcTo(d-g,m-g,t+s-y,m,y).lineTo(t+y,m).arcTo(t+g,m-g,t,m-y,y).closePath()}chamferRect(t,n,s,o,l,u){if(l<=0)return this.rect(t,n,s,o);const h=Math.min(l,Math.min(s,o)/2),d=t+s,m=n+o,g=[t+h,n,d-h,n,d,n+h,d,m-h,d-h,m,t+h,m,t,m-h,t,n+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,u)}ellipse(t,n,s,o,l){return this.drawShape(new Cf(t,n,s,o),l),this}roundRect(t,n,s,o,l,u){return this.drawShape(new Af(t,n,s,o,l),u),this}drawShape(t,n){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:n}),this}startPoly(t,n){let s=this._currentPoly;return s&&this.endPoly(),s=new Ra,s.points.push(t,n),this._currentPoly=s,this}endPoly(t=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=t,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Ra,t)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let s=n.shape.x,o=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const l=n.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const n=this.shapePrimitives;for(let s=0;s<n.length;s++){const o=n[s],l=o.shape.getBounds(NA);o.transform?t.addRect(l,o.transform):t.addRect(l)}return t}}class ci{constructor(t,n=!1){this.instructions=[],this.uid=le("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof t=="string"?oC(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new GA(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,n){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,n]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,n,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Ue.shared);let d=0,m=0;if(!u||u.action!=="bezierCurveTo")d=h.x,m=h.y;else{d=u.data[2],m=u.data[3];const g=h.x,y=h.y;d=g+(g-d),m=y+(y-m)}return this.instructions.push({action:"bezierCurveTo",data:[d,m,t,n,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,n,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Ue.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const d=l.x,m=l.y;u=d+(d-u),h=m+(m-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,t,n,s]}),this._dirty=!0,this}rect(t,n,s,o,l){return this.instructions.push({action:"rect",data:[t,n,s,o,l]}),this._dirty=!0,this}circle(t,n,s,o){return this.instructions.push({action:"circle",data:[t,n,s,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,n,s,o,l,u,h){l||(l=o/2);const d=-1*Math.PI/2+u,m=s*2,g=Math.PI*2/m,y=[];for(let v=0;v<m;v++){const S=v%2?l:o,T=v*g+d;y.push(t+S*Math.cos(T),n+S*Math.sin(T))}return this.poly(y,!0,h),this}clone(t=!1){const n=new ci;if(n.checkForHoles=this.checkForHoles,!t)n.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];n.instructions.push({action:o.action,data:o.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const n=t.a,s=t.b,o=t.c,l=t.d,u=t.tx,h=t.ty;let d=0,m=0,g=0,y=0,v=0,S=0,T=0,M=0;for(let E=0;E<this.instructions.length;E++){const B=this.instructions[E],D=B.data;switch(B.action){case"moveTo":case"lineTo":d=D[0],m=D[1],D[0]=n*d+o*m+u,D[1]=s*d+l*m+h;break;case"bezierCurveTo":g=D[0],y=D[1],v=D[2],S=D[3],d=D[4],m=D[5],D[0]=n*g+o*y+u,D[1]=s*g+l*y+h,D[2]=n*v+o*S+u,D[3]=s*v+l*S+h,D[4]=n*d+o*m+u,D[5]=s*d+l*m+h;break;case"quadraticCurveTo":g=D[0],y=D[1],d=D[2],m=D[3],D[0]=n*g+o*y+u,D[1]=s*g+l*y+h,D[2]=n*d+o*m+u,D[3]=s*d+l*m+h;break;case"arcToSvg":d=D[5],m=D[6],T=D[0],M=D[1],D[0]=n*T+o*M,D[1]=s*T+l*M,D[5]=n*d+o*m+u,D[6]=s*d+l*m+h;break;case"circle":D[4]=ya(D[3],t);break;case"rect":D[4]=ya(D[4],t);break;case"ellipse":D[8]=ya(D[8],t);break;case"roundRect":D[5]=ya(D[5],t);break;case"addPath":D[0].transform(t);break;case"poly":D[2]=ya(D[2],t);break;default:te("unknown transform action",B.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let n=this.instructions.length-1,s=this.instructions[n];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(n--,n<0)return t.x=0,t.y=0,t;s=this.instructions[n]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function ya(r,t){return r?r.prepend(t):t.clone()}function oe(r,t,n){const s=r.getAttribute(t);return s?Number(s):n}function jA(r,t){const n=r.querySelectorAll("defs");for(let s=0;s<n.length;s++){const o=n[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":t.defs[u.id]=IA(u);break;case"radialgradient":t.defs[u.id]=HA();break}}}}function IA(r){const t=oe(r,"x1",0),n=oe(r,"y1",0),s=oe(r,"x2",1),o=oe(r,"y2",0),l=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new ui(t,n,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<r.children.length;h++){const d=r.children[h],m=oe(d,"offset",0),g=be.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(m,g)}return u}function HA(r){return te("[SVG Parser] Radial gradients are not yet supported"),new ui(0,0,1,0)}function N0(r){const t=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const G0={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function k_(r,t){const n=r.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in G0){const h=r.getAttribute(u);h&&j0(t,l,u,h.trim())}if(n){const u=n.split(";");for(let h=0;h<u.length;h++){const d=u[h].trim(),[m,g]=d.split(":");G0[m]&&j0(t,l,m,g.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function j0(r,t,n,s){switch(n){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=N0(s);t.strokeStyle.fill=r.defs[o]}else t.strokeStyle.color=be.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=N0(s);t.fillStyle.fill=r.defs[o]}else t.fillStyle.color=be.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function FA(r){if(r.length<=2)return!0;const t=r.map(h=>h.area).sort((h,d)=>d-h),[n,s]=t,o=t[t.length-1],l=n/s,u=s/o;return!(l>3&&u<2)}function YA(r){return r.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function VA(r){const t=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const n=t.map(Number),s=[],o=[];for(let g=0;g<n.length;g+=2)g+1<n.length&&(s.push(n[g]),o.push(n[g+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),d=Math.max(...o);return(u-l)*(d-h)}function I0(r,t){const n=new ci(r,!1);for(const s of n.instructions)t.instructions.push(s)}function XA(r,t){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const n={context:t,defs:{},path:new ci};jA(r,n);const s=r.children,{fillStyle:o,strokeStyle:l}=k_(r,n);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&D_(h,n,o,l)}return t}function D_(r,t,n,s){const o=r.children,{fillStyle:l,strokeStyle:u}=k_(r,t);l&&n?n={...n,...l}:l&&(n=l),u&&s?s={...s,...u}:u&&(s=u);const h=!n&&!s;h&&(n={color:0});let d,m,g,y,v,S,T,M,E,B,D,z,G,W,Z,Y,ot;switch(r.nodeName.toLowerCase()){case"path":{W=r.getAttribute("d");const rt=r.getAttribute("fill-rule"),et=YA(W),nt=rt==="evenodd",bt=et.length>1;if(nt&&bt){const Mt=et.map(L=>({path:L,area:VA(L)}));if(Mt.sort((L,q)=>q.area-L.area),et.length>3||!FA(Mt))for(let L=0;L<Mt.length;L++){const q=Mt[L],ht=L===0;t.context.beginPath();const lt=new ci(void 0,!0);I0(q.path,lt),t.context.path(lt),ht?(n&&t.context.fill(n),s&&t.context.stroke(s)):t.context.cut()}else for(let L=0;L<Mt.length;L++){const q=Mt[L],ht=L%2===1;t.context.beginPath();const lt=new ci(void 0,!0);I0(q.path,lt),t.context.path(lt),ht?t.context.cut():(n&&t.context.fill(n),s&&t.context.stroke(s))}}else{const Mt=rt?rt==="evenodd":!0;Z=new ci(W,Mt),t.context.path(Z),n&&t.context.fill(n),s&&t.context.stroke(s)}break}case"circle":T=oe(r,"cx",0),M=oe(r,"cy",0),E=oe(r,"r",0),t.context.ellipse(T,M,E,E),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"rect":d=oe(r,"x",0),m=oe(r,"y",0),Y=oe(r,"width",0),ot=oe(r,"height",0),B=oe(r,"rx",0),D=oe(r,"ry",0),B||D?t.context.roundRect(d,m,Y,ot,B||D):t.context.rect(d,m,Y,ot),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"ellipse":T=oe(r,"cx",0),M=oe(r,"cy",0),B=oe(r,"rx",0),D=oe(r,"ry",0),t.context.beginPath(),t.context.ellipse(T,M,B,D),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"line":g=oe(r,"x1",0),y=oe(r,"y1",0),v=oe(r,"x2",0),S=oe(r,"y2",0),t.context.beginPath(),t.context.moveTo(g,y),t.context.lineTo(v,S),s&&t.context.stroke(s);break;case"polygon":G=r.getAttribute("points"),z=G.match(/-?\d+/g).map(rt=>parseInt(rt,10)),t.context.poly(z,!0),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"polyline":G=r.getAttribute("points"),z=G.match(/-?\d+/g).map(rt=>parseInt(rt,10)),t.context.poly(z,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{te(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}h&&(n=null);for(let rt=0;rt<o.length;rt++)D_(o[rt],t,n,s)}function qA(r){return be.isColorLike(r)}function H0(r){return r instanceof Hl}function F0(r){return r instanceof ui}function $A(r){return r instanceof Ot}function QA(r,t,n){const s=be.shared.setValue(t??0);return r.color=s.toNumber(),r.alpha=s.alpha===1?n.alpha:s.alpha,r.texture=Ot.WHITE,{...n,...r}}function ZA(r,t,n){return r.texture=t,{...n,...r}}function Y0(r,t,n){return r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...n,...r}}function V0(r,t,n){return t.buildGradient(),r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,r.textureSpace=t.textureSpace,{...n,...r}}function KA(r,t){const n={...t,...r},s=be.shared.setValue(n.color);return n.alpha*=s.alpha,n.color=s.toNumber(),n}function hs(r,t){if(r==null)return null;const n={},s=r;return qA(r)?QA(n,r,t):$A(r)?ZA(n,r,t):H0(r)?Y0(n,r,t):F0(r)?V0(n,r,t):s.fill&&H0(s.fill)?Y0(s,s.fill,t):s.fill&&F0(s.fill)?V0(s,s.fill,t):KA(s,t)}function Ul(r,t){const{width:n,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...d}=t,m=hs(r,d);return m?{width:n,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...m}:null}const WA=new Ue,X0=new kt,Ef=class In extends kn{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=le("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new ci,this._transform=new kt,this._fillStyle={...In.defaultFillStyle},this._strokeStyle={...In.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Bn,this._boundsDirty=!0}clone(){const t=new In;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=hs(t,In.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Ul(t,In.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=hs(t,In.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=hs(t,In.defaultStrokeStyle),this}texture(t,n,s,o,l,u){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:o||0,dw:l||t.frame.width,dh:u||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?be.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ci,this}fill(t,n){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o?.action==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(t!=null&&(n!==void 0&&typeof t=="number"&&(Et(qt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:n}),this._fillStyle=hs(t,In.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:n}=this._activePath.getLastPoint(Ue.shared);this._activePath.clear(),this._activePath.moveTo(t,n)}stroke(t){let n;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?n=s.data.path:n=this._activePath.clone(),n?(t!=null&&(this._strokeStyle=Ul(t,In.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const n=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(s);else{n.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,n,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*t+h.c*n+h.tx,h.b*t+h.d*n+h.ty,s,o,l,u),this}arcTo(t,n,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(t,n,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,n,s,o,l,d.a*u+d.c*h+d.tx,d.b*u+d.d*h+d.ty),this}bezierCurveTo(t,n,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*n+d.tx,d.b*t+d.d*n+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,n,s,o){return this._tick++,this._activePath.ellipse(t,n,s,o,this._transform.clone()),this}circle(t,n,s){return this._tick++,this._activePath.circle(t,n,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,n){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*n+s.tx,s.b*t+s.d*n+s.ty),this}moveTo(t,n){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*t+s.c*n+s.tx,u=s.b*t+s.d*n+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(t,n,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(t,n,s,o){return this._tick++,this._activePath.rect(t,n,s,o,this._transform.clone()),this}roundRect(t,n,s,o,l){return this._tick++,this._activePath.roundRect(t,n,s,o,l,this._transform.clone()),this}poly(t,n){return this._tick++,this._activePath.poly(t,n,this._transform.clone()),this}regularPoly(t,n,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(t,n,s,o,l,u),this}roundPoly(t,n,s,o,l,u){return this._tick++,this._activePath.roundPoly(t,n,s,o,l,u),this}roundShape(t,n,s,o){return this._tick++,this._activePath.roundShape(t,n,s,o),this}filletRect(t,n,s,o,l){return this._tick++,this._activePath.filletRect(t,n,s,o,l),this}chamferRect(t,n,s,o,l,u){return this._tick++,this._activePath.chamferRect(t,n,s,o,l,u),this}star(t,n,s,o,l=0,u=0){return this._tick++,this._activePath.star(t,n,s,o,l,u,this._transform.clone()),this}svg(t){return this._tick++,XA(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,n=t){return this._transform.scale(t,n),this}setTransform(t,n,s,o,l,u){return t instanceof kt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,n,s,o,l,u),this)}transform(t,n,s,o,l,u){return t instanceof kt?(this._transform.append(t),this):(X0.set(t,n,s,o,l,u),this._transform.append(X0),this)}translate(t,n=t){return this._transform.translate(t,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let n=0;n<this.instructions.length;n++){const s=this.instructions[n],o=s.action;if(o==="fill"){const l=s.data;t.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;t.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),d=l.path.bounds;t.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const n=this.instructions;let s=!1;for(let o=0;o<n.length;o++){const l=n[o],u=l.data,h=u.path;if(!l.action||!h)continue;const d=u.style,m=h.shapePath.shapePrimitives;for(let g=0;g<m.length;g++){const y=m[g].shape;if(!d||!y)continue;const v=m[g].transform,S=v?v.applyInverse(t,WA):t;if(l.action==="fill")s=y.contains(S.x,S.y);else{const M=d;s=y.strokeContains(S.x,S.y,M.width,M.alignment)}const T=u.hole;if(T){const M=T.shapePath?.shapePrimitives;if(M)for(let E=0;E<M.length;E++)M[E].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Ef.defaultFillStyle={color:16777215,alpha:1,texture:Ot.WHITE,matrix:null,fill:null,textureSpace:"local"};Ef.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ot.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Sn=Ef;const Mf=class rr extends kn{constructor(t={}){super(),this.uid=le("textStyle"),this._tick=0,JA(t);const n={...rr.defaultTextStyle,...t};for(const s in n){const o=s;this[o]=n[s]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...rr.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...rr.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Sn.defaultFillStyle,...t},()=>{this._fill=hs({...this._originalFill},Sn.defaultFillStyle)})),this._fill=hs(t===0?"black":t,Sn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Sn.defaultStrokeStyle,...t},()=>{this._stroke=Ul({...this._originalStroke},Sn.defaultStrokeStyle)})),this._stroke=Ul(t,Sn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=rr.defaultTextStyle;for(const n in t)this[n]=t[n]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new rr({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let n=0;n<this._filters.length;n++)t+=this._filters[n].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,n){return new Proxy(t,{set:(s,o,l)=>(s[o]===l||(s[o]=l,n?.(o,l),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(be.isColorLike(t)||t instanceof ui||t instanceof Hl)}};Mf.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Mf.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ll=Mf;function JA(r){const t=r;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const n=Ll.defaultDropShadow;r.dropShadow={alpha:t.dropShadowAlpha??n.alpha,angle:t.dropShadowAngle??n.angle,blur:t.dropShadowBlur??n.blur,color:t.dropShadowColor??n.color,distance:t.dropShadowDistance??n.distance}}if(t.strokeThickness!==void 0){Et(qt,"strokeThickness is now a part of stroke");const n=t.stroke;let s={};if(be.isColorLike(n))s.color=n;else if(n instanceof ui||n instanceof Hl)s.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))s=n;else throw new Error("Invalid stroke value.");r.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(Et(qt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&te("The number of fill colors must match the number of fill gradient stops.");const n=new ui({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=t.fillGradientStops.slice(),o=t.fill.map(l=>be.shared.setValue(l).toNumber());s.forEach((l,u)=>{n.addColorStop(l,o[u])}),r.fill={fill:n}}}class tT{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,n){const s=ee.get().createCanvas();s.width=t,s.height=n;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(t,n,s=1){t=Math.ceil(t*s-1e-6),n=Math.ceil(n*s-1e-6),t=kl(t),n=kl(n);const o=(t<<17)+(n<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(t,n)),l}returnCanvasAndContext(t){const n=t.canvas,{width:s,height:o}=n,l=(s<<17)+(o<<1);t.context.resetTransform(),t.context.clearRect(0,0,s,o),this._canvasPool[l].push(t)}clear(){this._canvasPool={}}}const of=new tT;Na.register(of);const q0=1e5;function $0(r,t,n,s=0){if(r.texture===Ot.WHITE&&!r.fill)return be.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof Hl){const o=r.fill,l=t.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(kt.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(r.fill instanceof ui){const o=r.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,d=1;u&&n&&(h=n.width+s,d=n.height+s);let m,g=!1;if(l){const{start:y,end:v}=o;m=t.createLinearGradient(y.x*h,y.y*d,v.x*h,v.y*d),g=Math.abs(v.x-y.x)<Math.abs((v.y-y.y)*.1)}else{const{center:y,innerRadius:v,outerCenter:S,outerRadius:T}=o;m=t.createRadialGradient(y.x*h,y.y*d,v*h,S.x*h,S.y*d,T*h)}if(g&&u&&n){const y=n.lineHeight/d;for(let v=0;v<n.lines.length;v++){const S=(v*n.lineHeight+s/2)/d;o.colorStops.forEach(T=>{const M=S+T.offset*y;m.addColorStop(Math.floor(M*q0)/q0,be.shared.setValue(T.color).toHex())})}}else o.colorStops.forEach(y=>{m.addColorStop(y.offset,be.shared.setValue(y.color).toHex())});return m}}else{const o=t.createPattern(r.texture.source.resource,"repeat"),l=r.matrix.copyTo(kt.shared);return l.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(l),o}return te("FillStyle not recognised",r),"red"}const O_=class z_ extends p_{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...z_.defaultOptions,...t};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const s=n.style.clone();n.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Ot.WHITE,s._fill.fill=null),this.applyFillAsTint=n.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=ef(s);n.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,n.textureStyle&&(this._textureStyle=n.textureStyle instanceof Dl?n.textureStyle:new Dl(n.textureStyle)),this.fontMetrics=Sl.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){const n=Sl.graphemeSegmenter(t).filter(E=>!this._currentChars.includes(E)).filter((E,B,D)=>D.indexOf(E)===B);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let d=this._currentX,m=this._currentY,g=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,v=this._padding*y;let S=!1;const T=o.width/this.resolution,M=o.height/this.resolution;for(let E=0;E<n.length;E++){const B=n[E],D=Sl.measureText(B,h,o,!1);D.lineHeight=D.height;const z=D.width*y,G=Math.ceil((h.fontStyle==="italic"?2:1)*z),W=D.height*y,Z=G+v*2,Y=W+v*2;if(S=!1,B!==`
`&&B!=="\r"&&B!=="	"&&B!==" "&&(S=!0,g=Math.ceil(Math.max(Y,g))),d+Z>T&&(m+=g,g=Y,d=0,m+g>M)){u.update();const rt=this._nextPage();o=rt.canvasAndContext.canvas,l=rt.canvasAndContext.context,u=rt.texture.source,d=0,m=0,g=0}const ot=z/y-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[B]={id:B.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:ot,kerning:{}},S){this._drawGlyph(l,D,d+v,m+v,y,h);const rt=u.width*y,et=u.height*y,nt=new de(d/rt*u.width,m/et*u.height,Z/rt*u.width,Y/et*u.height);this.chars[B].texture=new Ot({source:u,frame:nt}),d+=Math.ceil(Z)}}u.update(),this._currentX=d,this._currentY=m,this._currentMaxCharHeight=g,this._skipKerning&&this._applyKerning(n,l)}get pageTextures(){return Et(qt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,n){const s=this._measureCache;for(let o=0;o<t.length;o++){const l=t[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let d=s[l];d||(d=s[l]=n.measureText(l).width);let m=s[h];m||(m=s[h]=n.measureText(h).width);let g=n.measureText(l+h).width,y=g-(d+m);y&&(this.chars[l].kerning[h]=y),g=n.measureText(l+h).width,y=g-(d+m),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,n=of.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(n.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Ot({source:new fs({resource:n.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:n,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(t,n,s){n.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=ef(n),n.fontSize=this.baseMeasurementFontSize,t.textBaseline=n.textBaseline;const o=n._stroke,l=o?.width??0;if(o&&(t.lineWidth=l,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=$0(o,t)),n._fill&&(t.fillStyle=$0(n._fill,t)),n.dropShadow){const u=n.dropShadow,h=be.shared.setValue(u.color).toArray(),d=u.blur*s,m=u.distance*s;t.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(u.angle)*m,t.shadowOffsetY=Math.sin(u.angle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,n,s,o,l,u){const h=n.text,d=n.fontProperties,g=(u._stroke?.width??0)*l,y=s+g/2,v=o-g/2,S=d.descent*l,T=n.lineHeight*l;let M=!1;u.stroke&&g&&(M=!0,t.strokeText(h,y,v+T-S));const{shadowBlur:E,shadowOffsetX:B,shadowOffsetY:D}=t;u._fill&&(M&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(h,y,v+T-S)),M&&(t.shadowBlur=E,t.shadowOffsetX=B,t.shadowOffsetY=D)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:n,texture:s}=this.pages[t];of.returnCanvasAndContext(n),s.destroy(!0)}this.pages=null}};O_.defaultOptions={textureSize:512,style:new Ll,mipmap:!0};let Q0=O_;function eT(r,t,n,s){const o={width:0,height:0,offsetY:0,scale:t.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=n.baseLineOffset;let l=o.lines[0],u=null,h=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},m=n.baseMeasurementFontSize/t.fontSize,g=t.letterSpacing*m,y=t.wordWrapWidth*m,v=t.lineHeight?t.lineHeight*m:n.lineHeight,S=t.wordWrap&&t.breakWords,T=B=>{const D=l.width;for(let z=0;z<d.index;z++){const G=B.positions[z];l.chars.push(B.chars[z]),l.charPositions.push(G+D)}l.width+=B.width,h=!1,d.width=0,d.index=0,d.chars.length=0},M=()=>{let B=l.chars.length-1;if(s){let D=l.chars[B];for(;D===" ";)l.width-=n.chars[D].xAdvance,D=l.chars[--B]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=v},E=B=>B-g>y;for(let B=0;B<r.length+1;B++){let D;const z=B===r.length;z||(D=r[B]);const G=n.chars[D]||n.chars[" "];if(/(?:\s)/.test(D)||D==="\r"||D===`
`||z){if(!h&&t.wordWrap&&E(l.width+d.width)?(M(),T(d),z||l.charPositions.push(0)):(d.start=l.width,T(d),z||l.charPositions.push(0)),D==="\r"||D===`
`)M();else if(!z){const ot=G.xAdvance+(G.kerning[u]||0)+g;l.width+=ot,l.spaceWidth=ot,l.spacesIndex.push(l.charPositions.length),l.chars.push(D)}}else{const Y=G.kerning[u]||0,ot=G.xAdvance+Y+g;S&&E(l.width+d.width+ot)&&(T(d),M()),d.positions[d.index++]=d.width+Y,d.chars.push(D),d.width+=ot}u=D}return M(),t.align==="center"?nT(o):t.align==="right"?iT(o):t.align==="justify"&&sT(o),o}function nT(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width/2-n.width/2;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function iT(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width-n.width;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function sT(r){const t=r.width;for(let n=0;n<r.lines.length;n++){const s=r.lines[n];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,m=(t-s.width)/h;for(let g=0;g<s.charPositions.length;g++)g===l&&(l=s.spacesIndex[o++],u+=m),s.charPositions[g]+=u}}function rT(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const t=[];for(let n=0,s=r.length;n<s;n++){const o=r[n];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,d=u;h<=d;h++)t.push(String.fromCharCode(h))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let xl=0;class aT{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=m_(1e3)}getFont(t,n){let s=`${n.fontFamily}-bitmap`,o=!0;if(n._fill.fill&&!n._stroke?(s+=n._fill.fill.styleKey,o=!1):(n._stroke||n.dropShadow)&&(s=`${n.styleKey}-bitmap`,o=!1),!Jt.has(s)){const u=Object.create(n);u.lineHeight=0;const h=new Q0({style:u,overrideFill:o,overrideSize:!0,...this.defaultOptions});xl++,xl>50&&te("BitmapText",`You have dynamically created ${xl} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),h.once("destroy",()=>{xl--,Jt.remove(s)}),Jt.set(s,h)}const l=Jt.get(s);return l.ensureCharacters?.(t),l}getLayout(t,n,s=!0){const o=this.getFont(t,n),l=`${t}-${n.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=Sl.graphemeSegmenter(t),h=eT(u,n,o,s);return this.measureCache.set(l,h),h}measureText(t,n,s=!0){return this.getLayout(t,n,s)}install(...t){let n=t[0];typeof n=="string"&&(n={name:n,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},Et(qt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=n?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const o=n.style,l=o instanceof Ll?o:new Ll(o),u=n.dynamicFill??this._canUseTintForStyle(l),h=new Q0({style:l,overrideFill:u,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1,textureStyle:n.textureStyle}),d=rT(n.chars);return h.ensureCharacters(d.join("")),Jt.set(`${s}-bitmap`,h),h.once("destroy",()=>Jt.remove(`${s}-bitmap`)),h}uninstall(t){const n=`${t}-bitmap`,s=Jt.get(n);s&&s.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}}const Z0=new aT;class U_ extends p_{constructor(t,n){super();const{textures:s,data:o}=t;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:d,rotate:m}=s[u.page],g=Xt.transformRectCoords(u,h,m,new de),y=new Ot({frame:g,orig:new de(0,0,u.width,u.height),source:d,rotate:m});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:n}=this.pages[t];n.destroy(!0)}this.pages=null}static install(t){Z0.install(t)}static uninstall(t){Z0.uninstall(t)}}const Oh={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const t=r.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const v=t[y].match(/^[a-z]+/gm)[0],S=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),T={};for(const M in S){const E=S[M].split("="),B=E[0],D=E[1].replace(/"/gm,""),z=parseFloat(D),G=isNaN(z)?D:z;T[B]=G}n[v].push(T)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=n.info,[l]=n.common,[u]=n.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=n.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const m=n.char;for(let y=0;y<m.length;y++){const v=m[y],S=parseInt(v.id,10);let T=v.letter??v.char??String.fromCharCode(S);T==="space"&&(T=" "),d[S]=T,s.chars[T]={id:S,page:parseInt(v.page,10)||0,x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xOffset:parseInt(v.xoffset,10),yOffset:parseInt(v.yoffset,10),xAdvance:parseInt(v.xadvance,10),kerning:{}}}const g=n.kerning||[];for(let y=0;y<g.length;y++){const v=parseInt(g[y].first,10),S=parseInt(g[y].second,10),T=parseInt(g[y].amount,10);s.chars[d[S]].kerning[d[v]]=T}return s}},K0={test(r){const t=r;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=r.getElementsByTagName("info")[0],s=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=r.getElementsByTagName("page"),u=r.getElementsByTagName("char"),h=r.getElementsByTagName("kerning");t.fontSize=parseInt(n.getAttribute("size"),10),t.fontFamily=n.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let m=0;m<l.length;m++)t.pages.push({id:parseInt(l[m].getAttribute("id"),10)||0,file:l[m].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let m=0;m<u.length;m++){const g=u[m],y=parseInt(g.getAttribute("id"),10);let v=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(y);v==="space"&&(v=" "),d[y]=v,t.chars[v]={id:y,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let m=0;m<h.length;m++){const g=parseInt(h[m].getAttribute("first"),10),y=parseInt(h[m].getAttribute("second"),10),v=parseInt(h[m].getAttribute("amount"),10);t.chars[d[y]].kerning[d[g]]=v}return t}},W0={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?K0.test(ee.get().parseXML(r)):!1},parse(r){return K0.parse(ee.get().parseXML(r))}},oT=[".xml",".fnt"],lT={extension:{type:dt.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof U_,getCacheableAssets(r,t){const n={};return r.forEach(s=>{n[s]=t,n[`${s}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},cT={extension:{type:dt.LoadParser,priority:ji.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return oT.includes(cn.extname(r).toLowerCase())},async testParse(r){return Oh.test(r)||W0.test(r)},async parse(r,t,n){const s=Oh.test(r)?Oh.parse(r):W0.parse(r),{src:o}=t,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const v=l[y].file;let S=cn.join(cn.dirname(o),v);S=$h(S,o),u.push({src:S,data:h})}const d=await n.load(u),m=u.map(y=>d[y.src]);return new U_({data:s,textures:m},o)},async load(r,t){return await(await ee.get().fetch(r)).text()},async unload(r,t,n){await Promise.all(r.pages.map(s=>n.unload(s.texture.source._sourceOrigin))),r.destroy()}};class uT{constructor(t,n=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(t){t.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<n;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const hT={extension:{type:dt.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(t=>t instanceof Ot),getCacheableAssets:(r,t)=>{const n={};return r.forEach(s=>{t.forEach((o,l)=>{n[s+(l===0?"":l+1)]=o})}),n}};async function L_(r){if("Image"in globalThis)return new Promise(t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const fT={extension:{type:dt.DetectionParser,priority:1},test:async()=>L_("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")},J0=["png","jpg","jpeg"],dT={extension:{type:dt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...J0],remove:async r=>r.filter(t=>!J0.includes(t))},pT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Yl(r){return pT?!1:document.createElement("video").canPlayType(r)!==""}const mT={extension:{type:dt.DetectionParser,priority:0},test:async()=>Yl("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")},gT={extension:{type:dt.DetectionParser,priority:0},test:async()=>Yl("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")},yT={extension:{type:dt.DetectionParser,priority:0},test:async()=>Yl("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")},_T={extension:{type:dt.DetectionParser,priority:0},test:async()=>L_("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")},P_=class Cl{constructor(){this.loadOptions={...Cl.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,n,s)=>(this._parsersValidated=!1,t[n]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,n){const s={promise:null,parser:null};return s.promise=(async()=>{let o=null,l=null;if((n.parser||n.loadParser)&&(l=this._parserHash[n.parser||n.loadParser],n.loadParser&&te(`[Assets] "loadParser" is deprecated, use "parser" instead for ${t}`),l||te(`[Assets] specified load parser "${n.parser||n.loadParser}" not found while loading ${t}`)),!l){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&h.test?.(t,n,this)){l=h;break}}if(!l)return te(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(t,n,this),s.parser=l;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await h.testParse?.(o,n,this)&&(o=await h.parse(o,n,this)||o,s.parser=h)}return o})(),s}async load(t,n){this._parsersValidated||this._validateParsers();const s=typeof n=="function"?{...Cl.defaultOptions,...this.loadOptions,onProgress:n}:{...Cl.defaultOptions,...this.loadOptions,...n||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d}=s;let m=0;const g={},y=Ol(t),v=wn(t,M=>({alias:[M],src:M,data:{}})),S=v.reduce((M,E)=>M+(E.progressSize||1),0),T=v.map(async M=>{const E=cn.toAbsolute(M.src);g[M.src]||(await this._loadAssetWithRetry(E,M,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d},g),m+=M.progressSize||1,o&&o(m/S))});return await Promise.all(T),y?g[v[0].src]:g}async unload(t){const s=wn(t,o=>({alias:[o],src:o})).map(async o=>{const l=cn.toAbsolute(o.src),u=this.promiseCache[l];if(u){const h=await u.promise;delete this.promiseCache[l],await u.parser?.unload?.(h,o,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name||t.id).reduce((t,n)=>(!n.name&&!n.id?te("[Assets] parser should have an id"):(t[n.name]||t[n.id])&&te(`[Assets] parser id conflict "${n.id}"`),t[n.name]=n,n.id&&(t[n.id]=n),t),{})}async _loadAssetWithRetry(t,n,s,o){let l=0;const{onError:u,strategy:h,retryCount:d,retryDelay:m}=s,g=y=>new Promise(v=>setTimeout(v,y));for(;;)try{this.promiseCache[t]||(this.promiseCache[t]=this._getLoadPromiseAndParser(t,n)),o[n.src]=await this.promiseCache[t].promise;return}catch(y){delete this.promiseCache[t],delete o[n.src],l++;const v=h!=="retry"||l>d;if(h==="retry"&&!v){u&&u(y,n),await g(m);continue}if(h==="skip"){u&&u(y,n);return}u&&u(y,n);const S=new Error(`[Loader.load] Failed to load ${t}.
${y}`);throw y instanceof Error&&y.stack&&(S.stack=y.stack),S}}};P_.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let xT=P_;function pr(r,t){if(Array.isArray(t)){for(const n of t)if(r.startsWith(`data:${n}`))return!0;return!1}return r.startsWith(`data:${t}`)}function mr(r,t){const n=r.split("?")[0],s=cn.extname(n).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const bT=".json",vT="application/json",ST={extension:{type:dt.LoadParser,priority:ji.Low},name:"loadJson",id:"json",test(r){return pr(r,vT)||mr(r,bT)},async load(r){return await(await ee.get().fetch(r)).json()}},CT=".txt",AT="text/plain",TT={name:"loadTxt",id:"text",extension:{type:dt.LoadParser,priority:ji.Low,name:"loadTxt"},test(r){return pr(r,AT)||mr(r,CT)},async load(r){return await(await ee.get().fetch(r)).text()}},ET=["normal","bold","100","200","300","400","500","600","700","800","900"],MT=[".ttf",".otf",".woff",".woff2"],RT=["font/ttf","font/otf","font/woff","font/woff2"],wT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function BT(r){const t=cn.extname(r),o=cn.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(wT)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const kT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function DT(r){return kT.test(r)?r:encodeURI(r)}const OT={extension:{type:dt.LoadParser,priority:ji.Low},name:"loadWebFont",id:"web-font",test(r){return pr(r,RT)||mr(r,MT)},async load(r,t){const n=ee.get().getFontFaceSet();if(n){const s=[],o=t.data?.family??BT(r),l=t.data?.weights?.filter(h=>ET.includes(h))??["normal"],u=t.data??{};for(let h=0;h<l.length;h++){const d=l[h],m=new FontFace(o,`url(${DT(r)})`,{...u,weight:d});await m.load(),n.add(m),s.push(m)}return Jt.has(`${o}-and-url`)?Jt.get(`${o}-and-url`).entries.push({url:r,faces:s}):Jt.set(`${o}-and-url`,{entries:[{url:r,faces:s}]}),s.length===1?s[0]:s}return te("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const t=Array.isArray(r)?r:[r],n=t[0].family,s=Jt.get(`${n}-and-url`),o=s.entries.find(l=>l.faces.some(u=>t.indexOf(u)!==-1));o.faces=o.faces.filter(l=>t.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),t.forEach(l=>{ee.get().getFontFaceSet().delete(l)}),s.entries.length===0&&Jt.remove(`${n}-and-url`)}};function Rf(r,t=1){const n=dr.RETINA_PREFIX?.exec(r);return n?parseFloat(n[1]):t}function wf(r,t,n){r.label=n,r._sourceOrigin=n;const s=new Ot({source:r,label:n}),o=()=>{delete t.promiseCache[n],Jt.has(n)&&Jt.remove(n)};return s.source.once("destroy",()=>{t.promiseCache[n]&&(te("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{r.destroyed||(te("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const zT=".svg",UT="image/svg+xml",LT={extension:{type:dt.LoadParser,priority:ji.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return pr(r,UT)||mr(r,zT)},async load(r,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?NT(r):PT(r,t,n,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function PT(r,t,n,s){const o=await ee.get().fetch(r),l=ee.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=t.data?.width??l.width,h=t.data?.height??l.height,d=t.data?.resolution||Rf(r),m=Math.ceil(u*d),g=Math.ceil(h*d),y=ee.get().createCanvas(m,g),v=y.getContext("2d");v.imageSmoothingEnabled=!0,v.imageSmoothingQuality="high",v.drawImage(l,0,0,u*d,h*d);const{parseAsGraphicsContext:S,...T}=t.data??{},M=new fs({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...T});return wf(M,n,r)}async function NT(r){const n=await(await ee.get().fetch(r)).text(),s=new Sn;return s.svg(n),s}const GT=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let or=null,lf=class{constructor(){or||(or=URL.createObjectURL(new Blob([GT],{type:"application/javascript"}))),this.worker=new Worker(or)}};lf.revokeObjectURL=function(){or&&(URL.revokeObjectURL(or),or=null)};const jT=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let lr=null;class N_{constructor(){lr||(lr=URL.createObjectURL(new Blob([jT],{type:"application/javascript"}))),this.worker=new Worker(lr)}}N_.revokeObjectURL=function(){lr&&(URL.revokeObjectURL(lr),lr=null)};let ty=0,zh;class IT{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:n}=new lf;n.addEventListener("message",s=>{n.terminate(),lf.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,n){return this._run("loadImageBitmap",[t,n?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){zh===void 0&&(zh=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<zh&&(this._createdWorkers++,t=new N_().worker,t.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){this._resolveHash[t.uuid]&&(t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),delete this._resolveHash[t.uuid])}async _run(t,n){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:t,arguments:n,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const n=this._queue.pop(),s=n.id;this._resolveHash[ty]={resolve:n.resolve,reject:n.reject},t.postMessage({data:n.arguments,uuid:ty++,id:s})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const ey=new IT,HT=[".jpeg",".jpg",".png",".webp",".avif"],FT=["image/jpeg","image/png","image/webp","image/avif"];async function YT(r,t){const n=await ee.get().fetch(r);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${n.status} ${n.statusText}`);const s=await n.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const G_={name:"loadTextures",id:"texture",extension:{type:dt.LoadParser,priority:ji.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return pr(r,FT)||mr(r,HT)},async load(r,t,n){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ey.isImageBitmapSupported()?s=await ey.loadImageBitmap(r,t):s=await YT(r,t):s=await new Promise((l,u)=>{s=ee.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=r,s.complete?l(s):(s.onload=()=>{l(s)},s.onerror=u)});const o=new fs({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||Rf(r),...t.data});return wf(o,n,r)},unload(r){r.destroy(!0)}},VT=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Uh,Lh;function XT(r,t,n){n===void 0&&!t.startsWith("data:")?r.crossOrigin=$T(t):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")}function qT(r){return new Promise((t,n)=>{r.addEventListener("canplaythrough",s),r.addEventListener("error",o),r.load();function s(){l(),t()}function o(u){l(),n(u)}function l(){r.removeEventListener("canplaythrough",s),r.removeEventListener("error",o)}})}function $T(r,t=globalThis.location){if(r.startsWith("data:"))return"";t||(t=globalThis.location);const n=new URL(r,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}function QT(){const r=[],t=[];for(const n of VT){const s=Ma.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;Yl(s)&&(r.push(n),t.includes(s)||t.push(s))}return{validVideoExtensions:r,validVideoMime:t}}const ZT={name:"loadVideo",id:"video",extension:{type:dt.LoadParser,name:"loadVideo"},test(r){if(!Uh||!Lh){const{validVideoExtensions:s,validVideoMime:o}=QT();Uh=s,Lh=o}const t=pr(r,Lh),n=mr(r,Uh);return t||n},async load(r,t,n){const s={...Ma.defaultOptions,resolution:t.data?.resolution||Rf(r),alphaMode:t.data?.alphaMode||await Fy(),...t.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(d=>{const m=l[d];m!==void 0&&o.setAttribute(d,m)}),s.muted===!0&&(o.muted=!0),XT(o,r,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(r.startsWith("data:"))h=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const d=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();h=Ma.MIME_TYPES[d]||`video/${d}`}return u.src=r,h&&(u.type=h),new Promise(d=>{const m=async()=>{const g=new Ma({...s,resource:o});o.removeEventListener("canplay",m),t.data.preload&&await qT(o),d(wf(g,n,r))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",m),o.appendChild(u)})},unload(r){r.destroy(!0)}},j_={extension:{type:dt.ResolveParser,name:"resolveTexture"},test:G_.test,parse:r=>({resolution:parseFloat(dr.RETINA_PREFIX.exec(r)?.[1]??"1"),format:r.split(".").pop(),src:r})},KT={extension:{type:dt.ResolveParser,priority:-2,name:"resolveJson"},test:r=>dr.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:j_.parse};class WT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new dr,this.loader=new xT,this.cache=Jt,this._backgroundLoader=new uT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){te("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const n=t.texturePreference?.resolution??1,s=typeof n=="number"?[n]:n,o=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,n){this._initialized||await this.init();const s=Ol(t),o=wn(t).map(h=>{if(typeof h!="string"){const d=this.resolver.getAlias(h);return d.some(m=>!this.resolver.hasKey(m))&&this.add(h),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,n);return s?u[o[0]]:u}addBundle(t,n){this.resolver.addBundle(t,n)}async loadBundle(t,n){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const o=this.resolver.resolveBundle(t),l={},u=Object.keys(o);let h=0;const d=[],m=()=>{n?.(d.reduce((y,v)=>y+v,0)/h)},g=u.map((y,v)=>{const S=o[y],T=Object.values(S),E=[...new Set(T.flat())].reduce((B,D)=>B+(D.progressSize||1),0);return d.push(0),h+=E,this._mapLoadToResolve(S,B=>{d[v]=B*E,m()}).then(B=>{l[y]=B})});return await Promise.all(g),s?l[t[0]]:l}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolveBundle(t);Object.values(n).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Jt.get(t);const n={};for(let s=0;s<t.length;s++)n[s]=Jt.get(t[s]);return n}async _mapLoadToResolve(t,n){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,n);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(m=>{l[m]=h}),Jt.set(d,h)}),l}async unload(t){this._initialized||await this.init();const n=wn(t).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(n);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=wn(t);const n=this.resolver.resolveBundle(t),s=Object.keys(n).map(o=>this._unloadFromResolved(n[o]));await Promise.all(s)}async _unloadFromResolved(t){const n=Object.values(t);n.forEach(s=>{Jt.remove(s.src)}),await this.loader.unload(n)}async _detectFormats(t){let n=[];t.preferredFormats&&(n=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?n=await s.add(n):t.skipDetections||(n=await s.remove(n));return n=n.filter((s,o)=>n.indexOf(s)===o),n}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(s=>s in t).forEach(s=>{n.config[s]=t[s]})})}}const Aa=new WT;ke.handleByList(dt.LoadParser,Aa.loader.parsers).handleByList(dt.ResolveParser,Aa.resolver.parsers).handleByList(dt.CacheParser,Aa.cache.parsers).handleByList(dt.DetectionParser,Aa.detections);ke.add(hT,dT,fT,_T,mT,gT,yT,ST,TT,OT,LT,G_,ZT,cT,lT,j_,KT);const ny={loader:dt.LoadParser,resolver:dt.ResolveParser,cache:dt.CacheParser,detection:dt.DetectionParser};ke.handle(dt.Asset,r=>{const t=r.ref;Object.entries(ny).filter(([n])=>!!t[n]).forEach(([n,s])=>ke.add(Object.assign(t[n],{extension:t[n].extension??s})))},r=>{const t=r.ref;Object.keys(ny).filter(n=>!!t[n]).forEach(n=>ke.remove(t[n]))});class Pl extends zy{constructor(t){t instanceof Sn&&(t={context:t});const{context:n,roundPixels:s,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",n?this.context=n:(this.context=this._ownedContext=new Sn,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=t,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_onTouch(t){this._gcLastUsed=t,this._context._gcLastUsed=t}_callContextMethod(t,n){return this.context[t](...n),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Pl(this._context.clone()):(this._ownedContext=null,new Pl(this._context))}lineStyle(t,n,s){Et(qt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),n&&(o.color=n),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(t,n){Et(qt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t!==void 0&&(s.color=t),n!==void 0&&(s.alpha=n),this.context.fillStyle=s,this}endFill(){Et(qt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Sn.defaultStrokeStyle.width||t.color!==Sn.defaultStrokeStyle.color||t.alpha!==Sn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Et(qt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Et(qt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Et(qt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Et(qt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Et(qt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Et(qt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}ke.add(cv,uv);const iy=r=>{let t;const n=new Set,s=(m,g)=>{const y=typeof m=="function"?m(t):m;if(!Object.is(y,t)){const v=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(S=>S(t,v))}},o=()=>t,h={setState:s,getState:o,getInitialState:()=>d,subscribe:m=>(n.add(m),()=>n.delete(m))},d=t=r(s,o,h);return h},JT=(r=>r?iy(r):iy),tE=r=>r;function eE(r,t=tE){const n=xa.useSyncExternalStore(r.subscribe,xa.useCallback(()=>t(r.getState()),[r,t]),xa.useCallback(()=>t(r.getInitialState()),[r,t]));return xa.useDebugValue(n),n}const sy=r=>{const t=JT(r),n=s=>eE(t,s);return Object.assign(n,t),n},nE=(r=>r?sy(r):sy),Be=[];for(let r=0;r<256;++r)Be.push((r+256).toString(16).slice(1));function iE(r,t=0){return(Be[r[t+0]]+Be[r[t+1]]+Be[r[t+2]]+Be[r[t+3]]+"-"+Be[r[t+4]]+Be[r[t+5]]+"-"+Be[r[t+6]]+Be[r[t+7]]+"-"+Be[r[t+8]]+Be[r[t+9]]+"-"+Be[r[t+10]]+Be[r[t+11]]+Be[r[t+12]]+Be[r[t+13]]+Be[r[t+14]]+Be[r[t+15]]).toLowerCase()}let Ph;const sE=new Uint8Array(16);function rE(){if(!Ph){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ph=crypto.getRandomValues.bind(crypto)}return Ph(sE)}const aE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ry={randomUUID:aE};function oE(r,t,n){r=r||{};const s=r.random??r.rng?.()??rE();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,iE(s)}function I_(r,t,n){return ry.randomUUID&&!r?ry.randomUUID():oE(r)}const Le=nE(r=>({myId:I_(),isHost:!1,username:"Player",tokens:[],map:{url:null,scale:50,offsetX:0,offsetY:0,gridType:"square",fogEnabled:!1},chat:[],turnOrder:[],setIdentity:(t,n)=>r({myId:t,isHost:n}),setUsername:t=>r({username:t}),addToken:t=>r(n=>({tokens:[...n.tokens,t]})),updateToken:(t,n)=>r(s=>({tokens:s.tokens.map(o=>o.id===t?{...o,...n}:o)})),removeToken:t=>r(n=>({tokens:n.tokens.filter(s=>s.id!==t)})),setMapBackground:t=>r(n=>({map:{...n.map,url:t}})),addChatMessage:t=>r(n=>({chat:[...n.chat,t]})),syncState:t=>r(n=>({...n,...t}))}));class lE{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return cE(t).buffer}}function cE(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r){const l=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(l,s),s+=o.byteLength}return n}function H_(r){return new uE(r).unpack()}function F_(r){const t=new hE,n=t.pack(r);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class uE{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let s=0,o="",l,u;for(;s<t;)l=n[s],l<160?(u=l,s++):(l^192)<32?(u=(l&31)<<6|n[s+1]&63,s+=2):(l^224)<16?(u=(l&15)<<12|(n[s+1]&63)<<6|n[s+2]&63,s+=3):(u=(l&7)<<18|(n[s+1]&63)<<12|(n[s+2]&63)<<6|n[s+3]&63,s+=4),o+=String.fromCodePoint(u);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let s=0;s<t;s++)n[s]=this.unpack();return n}unpack_map(t){const n={};for(let s=0;s<t;s++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,s=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(s-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),s=t>>31,o=(t>>20&2047)-1023,u=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(s===0?1:-1)*u}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class hE{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const s=this.pack_array(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const s=t;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const s=this.pack_object(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),s=n.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const s=o=>{if(o<n){const l=this.pack(t[o]);return l instanceof Promise?l.then(()=>s(o+1)):s(o+1)}};return s(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const s=Math.floor(Math.log(t)/Math.LN2),o=t/2**s-1,l=Math.floor(o*2**52),u=2**32,h=n<<31|s+1023<<20|l/u&1048575,d=l%u;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),s=n.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const o=l=>{if(l<n.length){const u=n[l];if(t.hasOwnProperty(u)){this.pack(u);const h=this.pack(t[u]);if(h instanceof Promise)return h.then(()=>o(l+1))}return o(l+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new lE,this._textEncoder=new TextEncoder}}let Y_=!0,V_=!0;function Ta(r,t,n){const s=r.match(t);return s&&s.length>=n&&parseFloat(s[n],10)}function ps(r,t,n){if(!r.RTCPeerConnection)return;const s=r.RTCPeerConnection.prototype,o=s.addEventListener;s.addEventListener=function(u,h){if(u!==t)return o.apply(this,arguments);const d=m=>{const g=n(m);g&&(h.handleEvent?h.handleEvent(g):h(g))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(h,d),o.apply(this,[u,d])};const l=s.removeEventListener;s.removeEventListener=function(u,h){if(u!==t||!this._eventMap||!this._eventMap[t])return l.apply(this,arguments);if(!this._eventMap[t].has(h))return l.apply(this,arguments);const d=this._eventMap[t].get(h);return this._eventMap[t].delete(h),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[u,d])},Object.defineProperty(s,"on"+t,{get(){return this["_on"+t]},set(u){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),u&&this.addEventListener(t,this["_on"+t]=u)},enumerable:!0,configurable:!0})}function fE(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Y_=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function dE(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(V_=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function X_(){if(typeof window=="object"){if(Y_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Bf(r,t){V_&&console.warn(r+" is deprecated, please use "+t+" instead.")}function pE(r){const t={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=r;if(n.userAgentData&&n.userAgentData.brands){const s=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Ta(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Ta(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Ta(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,t._safariVersion=Ta(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function ay(r){return Object.prototype.toString.call(r)==="[object Object]"}function q_(r){return ay(r)?Object.keys(r).reduce(function(t,n){const s=ay(r[n]),o=s?q_(r[n]):r[n],l=s&&!Object.keys(o).length;return o===void 0||l?t:Object.assign(t,{[n]:o})},{}):r}function cf(r,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(s=>{s.endsWith("Id")?cf(r,r.get(t[s]),n):s.endsWith("Ids")&&t[s].forEach(o=>{cf(r,r.get(o),n)})}))}function oy(r,t,n){const s=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const l=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===t.id&&l.push(u)}),l.forEach(u=>{r.forEach(h=>{h.type===s&&h.trackId===u.id&&cf(r,h,o)})}),o}const ly=X_;function $_(r,t){const n=r&&r.navigator;if(!n.mediaDevices)return;const s=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const d={};return Object.keys(h).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const g=typeof h[m]=="object"?h[m]:{ideal:h[m]};g.exact!==void 0&&typeof g.exact=="number"&&(g.min=g.max=g.exact);const y=function(v,S){return v?v+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(g.ideal!==void 0){d.optional=d.optional||[];let v={};typeof g.ideal=="number"?(v[y("min",m)]=g.ideal,d.optional.push(v),v={},v[y("max",m)]=g.ideal,d.optional.push(v)):(v[y("",m)]=g.ideal,d.optional.push(v))}g.exact!==void 0&&typeof g.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[y("",m)]=g.exact):["min","max"].forEach(v=>{g[v]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[y(v,m)]=g[v])})}),h.advanced&&(d.optional=(d.optional||[]).concat(h.advanced)),d},o=function(h,d){if(t.version>=61)return d(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const m=function(g,y,v){y in g&&!(v in g)&&(g[v]=g[y],delete g[y])};h=JSON.parse(JSON.stringify(h)),m(h.audio,"autoGainControl","googAutoGainControl"),m(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=s(h.audio)}if(h&&typeof h.video=="object"){let m=h.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const g=t.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!g)){delete h.video.facingMode;let y;if(m.exact==="environment"||m.ideal==="environment"?y=["back","rear"]:(m.exact==="user"||m.ideal==="user")&&(y=["front"]),y)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(T=>T.kind==="videoinput");let S=v.find(T=>y.some(M=>T.label.toLowerCase().includes(M)));return!S&&v.length&&y.includes("back")&&(S=v[v.length-1]),S&&(h.video.deviceId=m.exact?{exact:S.deviceId}:{ideal:S.deviceId}),h.video=s(h.video),ly("chrome: "+JSON.stringify(h)),d(h)})}h.video=s(h.video)}return ly("chrome: "+JSON.stringify(h)),d(h)},l=function(h){return t.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,d,m){o(h,g=>{n.webkitGetUserMedia(g,d,y=>{m&&m(l(y))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return o(d,m=>h(m).then(g=>{if(m.audio&&!g.getAudioTracks().length||m.video&&!g.getVideoTracks().length)throw g.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return g},g=>Promise.reject(l(g))))}}}function Q_(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function Z_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",o=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===o.track.id):l={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)}),s.stream.getTracks().forEach(o=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===o.id):l={track:o};const u=new Event("track");u.track=o,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ps(r,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function K_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const t=function(o,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=o.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:o}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(h,d){let m=o.apply(this,arguments);return m||(m=t(this,h),this._senders.push(m)),m};const l=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const d=this._senders.indexOf(h);d!==-1&&this._senders.splice(d,1)}}const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(t(this,u))})};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(u=>{const h=this._senders.find(d=>d.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function W_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const n=r.RTCPeerConnection.prototype.getSenders;n&&(r.RTCPeerConnection.prototype.getSenders=function(){const l=n.apply(this,[]);return l.forEach(u=>u._pc=this),l});const s=r.RTCPeerConnection.prototype.addTrack;s&&(r.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),r.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>oy(u,l.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const n=r.RTCPeerConnection.prototype.getReceivers;n&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o}),ps(r,"track",s=>(s.receiver._pc=s.srcElement,s)),r.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>oy(l,o.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const s=arguments[0];let o,l,u;return this.getSenders().forEach(h=>{h.track===s&&(o?u=!0:o=h)}),this.getReceivers().forEach(h=>(h.track===s&&(l?u=!0:l=h),h.track===s)),u||o&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function J_(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(d)===-1&&this._shimmedLocalStreams[h.id].push(d):this._shimmedLocalStreams[h.id]=[h,d],d};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(m=>{if(this.getSenders().find(y=>y.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(m=>h.indexOf(m)===-1);this._shimmedLocalStreams[u.id]=[u].concat(d)};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],s.apply(this,arguments)};const o=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const d=this._shimmedLocalStreams[h].indexOf(u);d!==-1&&this._shimmedLocalStreams[h].splice(d,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),o.apply(this,arguments)}}function tx(r,t){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&t.version>=65)return J_(r);const n=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const g=n.apply(this);return this._reverseStreams=this._reverseStreams||{},g.map(y=>this._reverseStreams[y.id])};const s=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(g){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},g.getTracks().forEach(y=>{if(this.getSenders().find(S=>S.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[g.id]){const y=new r.MediaStream(g.getTracks());this._streams[g.id]=y,this._reverseStreams[y.id]=g,g=y}s.apply(this,[g])};const o=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(g){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[g.id]||g]),delete this._reverseStreams[this._streams[g.id]?this._streams[g.id].id:g.id],delete this._streams[g.id]},r.RTCPeerConnection.prototype.addTrack=function(g,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(M=>M===g))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(M=>M.track===g))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const T=this._streams[y.id];if(T)T.addTrack(g),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const M=new r.MediaStream([g]);this._streams[y.id]=M,this._reverseStreams[M.id]=y,this.addStream(M)}return this.getSenders().find(M=>M.track===g)};function l(m,g){let y=g.sdp;return Object.keys(m._reverseStreams||[]).forEach(v=>{const S=m._reverseStreams[v],T=m._streams[S.id];y=y.replace(new RegExp(T.id,"g"),S.id)}),new RTCSessionDescription({type:g.type,sdp:y})}function u(m,g){let y=g.sdp;return Object.keys(m._reverseStreams||[]).forEach(v=>{const S=m._reverseStreams[v],T=m._streams[S.id];y=y.replace(new RegExp(S.id,"g"),T.id)}),new RTCSessionDescription({type:g.type,sdp:y})}["createOffer","createAnswer"].forEach(function(m){const g=r.RTCPeerConnection.prototype[m],y={[m](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?g.apply(this,[T=>{const M=l(this,T);v[0].apply(null,[M])},T=>{v[1]&&v[1].apply(null,T)},arguments[2]]):g.apply(this,arguments).then(T=>l(this,T))}};r.RTCPeerConnection.prototype[m]=y[m]});const h=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const m=d.get.apply(this);return m.type===""?m:l(this,m)}}),r.RTCPeerConnection.prototype.removeTrack=function(g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!g._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(g._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(M=>g.track===M)&&(v=this._streams[S])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(g.track),this.dispatchEvent(new Event("negotiationneeded")))}}function uf(r,t){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=r.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=o[n]})}function ex(r,t){ps(r,"negotiationneeded",n=>{const s=n.target;if(!((t.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return n})}const cy=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ex,shimAddTrackRemoveTrack:tx,shimAddTrackRemoveTrackWithNative:J_,shimGetSendersWithDtmf:K_,shimGetUserMedia:$_,shimMediaStream:Q_,shimOnTrack:Z_,shimPeerConnection:uf,shimSenderReceiverGetStats:W_},Symbol.toStringTag,{value:"Module"}));function nx(r,t){const n=r&&r.navigator,s=r&&r.MediaStreamTrack;if(n.getUserMedia=function(o,l,u){Bf("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(l,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(u,h,d){h in u&&!(d in u)&&(u[d]=u[h],delete u[h])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),l(u)},s&&s.prototype.getSettings){const u=s.prototype.getSettings;s.prototype.getSettings=function(){const h=u.apply(this,arguments);return o(h,"mozAutoGainControl","autoGainControl"),o(h,"mozNoiseSuppression","noiseSuppression"),h}}if(s&&s.prototype.applyConstraints){const u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),o(h,"autoGainControl","mozAutoGainControl"),o(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function mE(r,t){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return s.video===!0?s.video={mediaSource:t}:s.video.mediaSource=t,r.navigator.mediaDevices.getUserMedia(s)})}function ix(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hf(r,t){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const l=r.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=u[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[l,u,h]=arguments;return s.apply(this,[l||null]).then(d=>{if(t.version<53&&!u)try{d.forEach(m=>{m.type=n[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;d.forEach((g,y)=>{d.set(y,Object.assign({},g,{type:n[g.type]||g.type}))})}return d}).then(u,h)}}function sx(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(l=>l._pc=this),o});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function rx(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s}),ps(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ax(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){Bf("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&n.getTracks().includes(s.track)&&this.removeTrack(s)})})}function ox(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function lx(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.addTransceiver;t&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const o=s.length>0;o&&s.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=t.apply(this,arguments);if(o){const{sender:u}=l,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=s,u.sendEncodings=s,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function cx(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const t=r.RTCRtpSender.prototype.getParameters;t&&(r.RTCRtpSender.prototype.getParameters=function(){const s=t.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function ux(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function hx(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const uy=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:lx,shimCreateAnswer:hx,shimCreateOffer:ux,shimGetDisplayMedia:mE,shimGetParameters:cx,shimGetUserMedia:nx,shimOnTrack:ix,shimPeerConnection:hf,shimRTCDataChannel:ox,shimReceiverGetStats:rx,shimRemoveStream:ax,shimSenderGetStats:sx},Symbol.toStringTag,{value:"Module"}));function fx(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(o=>t.call(this,o,s)),s.getVideoTracks().forEach(o=>t.call(this,o,s))},r.RTCPeerConnection.prototype.addTrack=function(s,...o){return o&&o.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),t.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(n);if(s===-1)return;this._localStreams.splice(s,1);const o=n.getTracks();this.getSenders().forEach(l=>{o.includes(l.track)&&this.removeTrack(l)})})}}function dx(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,this.dispatchEvent(l)})})}});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(l=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(l)>=0)return;s._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,s.dispatchEvent(u)})}),t.apply(s,arguments)}}}function px(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,n=t.createOffer,s=t.createAnswer,o=t.setLocalDescription,l=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(m,g){const y=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[y]);return g?(v.then(m,g),Promise.resolve()):v},t.createAnswer=function(m,g){const y=arguments.length>=2?arguments[2]:arguments[0],v=s.apply(this,[y]);return g?(v.then(m,g),Promise.resolve()):v};let h=function(d,m,g){const y=o.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y};t.setLocalDescription=h,h=function(d,m,g){const y=l.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y},t.setRemoteDescription=h,h=function(d,m,g){const y=u.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y},t.addIceCandidate=h}function mx(r){const t=r&&r.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,s=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>s(gx(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(s,o,l){t.mediaDevices.getUserMedia(s).then(o,l)}).bind(t))}function gx(r){return r&&r.video!==void 0?Object.assign({},r,{video:q_(r.video)}):r}function yx(r){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection;r.RTCPeerConnection=function(s,o){if(s&&s.iceServers){const l=[];for(let u=0;u<s.iceServers.length;u++){let h=s.iceServers[u];h.urls===void 0&&h.url?(Bf("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(s.iceServers[u])}s.iceServers=l}return new t(s,o)},r.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function _x(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xx(r){const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):s.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):s.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function bx(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const hy=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:bx,shimCallbacksAPI:px,shimConstraints:gx,shimCreateOfferLegacy:xx,shimGetUserMedia:mx,shimLocalStreamsAPI:fx,shimRTCIceServerUrls:yx,shimRemoteStreamsAPI:dx,shimTrackEventTransceiver:_x},Symbol.toStringTag,{value:"Module"}));var Nh={exports:{}},fy;function gE(){return fy||(fy=1,(function(r){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(s=>s.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,l)=>(l>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const s=t.splitSections(n);return s&&s[0]},t.getMediaSections=function(n){const s=t.splitSections(n);return s.shift(),s},t.matchPrefix=function(n,s){return t.splitLines(n).filter(o=>o.indexOf(s)===0)},t.parseCandidate=function(n){let s;n.indexOf("a=candidate:")===0?s=n.substring(12).split(" "):s=n.substring(10).split(" ");const o={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let l=8;l<s.length;l+=2)switch(s[l]){case"raddr":o.relatedAddress=s[l+1];break;case"rport":o.relatedPort=parseInt(s[l+1],10);break;case"tcptype":o.tcpType=s[l+1];break;case"ufrag":o.ufrag=s[l+1],o.usernameFragment=s[l+1];break;default:o[s[l]]===void 0&&(o[s[l]]=s[l+1]);break}return o},t.writeCandidate=function(n){const s=[];s.push(n.foundation);const o=n.component;o==="rtp"?s.push(1):o==="rtcp"?s.push(2):s.push(o),s.push(n.protocol.toUpperCase()),s.push(n.priority),s.push(n.address||n.ip),s.push(n.port);const l=n.type;return s.push("typ"),s.push(l),l!=="host"&&n.relatedAddress&&n.relatedPort&&(s.push("raddr"),s.push(n.relatedAddress),s.push("rport"),s.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(s.push("ufrag"),s.push(n.usernameFragment||n.ufrag)),"candidate:"+s.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let s=n.substring(9).split(" ");const o={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),o.name=s[0],o.clockRate=parseInt(s[1],10),o.channels=s.length===3?parseInt(s[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let s=n.payloadType;n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+s+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const s=n.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const s={};let o;const l=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<l.length;u++)o=l[u].trim().split("="),s[o[0].trim()]=o[1];return s},t.writeFmtp=function(n){let s="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const l=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?l.push(u+"="+n.parameters[u]):l.push(u)}),s+="a=fmtp:"+o+" "+l.join(";")+`\r
`}return s},t.parseRtcpFb=function(n){const s=n.substring(n.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},t.writeRtcpFb=function(n){let s="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(l=>{s+="a=rtcp-fb:"+o+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),s},t.parseSsrcMedia=function(n){const s=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,s),10)},l=n.indexOf(":",s);return l>-1?(o.attribute=n.substring(s+1,l),o.value=n.substring(l+1)):o.attribute=n.substring(s+1),o},t.parseSsrcGroup=function(n){const s=n.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(o=>parseInt(o,10))}},t.getMid=function(n){const s=t.matchPrefix(n,"a=mid:")[0];if(s)return s.substring(6)},t.parseFingerprint=function(n){const s=n.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},t.getDtlsParameters=function(n,s){return{role:"auto",fingerprints:t.matchPrefix(n+s,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,s){let o="a=setup:"+s+`\r
`;return n.fingerprints.forEach(l=>{o+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),o},t.parseCryptoLine=function(n){const s=n.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const s=n.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,s){return t.matchPrefix(n+s,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,s){const o=t.matchPrefix(n+s,"a=ice-ufrag:")[0],l=t.matchPrefix(n+s,"a=ice-pwd:")[0];return o&&l?{usernameFragment:o.substring(12),password:l.substring(10)}:null},t.writeIceParameters=function(n){let s="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(s+=`a=ice-lite\r
`),s},t.parseRtpParameters=function(n){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=t.splitLines(n)[0].split(" ");s.profile=l[2];for(let h=3;h<l.length;h++){const d=l[h],m=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(m){const g=t.parseRtpMap(m),y=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(g.parameters=y.length?t.parseFmtp(y[0]):{},g.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),s.codecs.push(g),g.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(g.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(h=>{s.headerExtensions.push(t.parseExtmap(h))});const u=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return s.codecs.forEach(h=>{u.forEach(d=>{h.rtcpFeedback.find(g=>g.type===d.type&&g.parameter===d.parameter)||h.rtcpFeedback.push(d)})}),s},t.writeRtpDescription=function(n,s){let o="";o+="m="+n+" ",o+=s.codecs.length>0?"9":"0",o+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=s.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(u=>{o+=t.writeRtpMap(u),o+=t.writeFmtp(u),o+=t.writeRtcpFb(u)});let l=0;return s.codecs.forEach(u=>{u.maxptime>l&&(l=u.maxptime)}),l>0&&(o+="a=maxptime:"+l+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(u=>{o+=t.writeExtmap(u)}),o},t.parseRtpEncodingParameters=function(n){const s=[],o=t.parseRtpParameters(n),l=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,h=t.matchPrefix(n,"a=ssrc:").map(v=>t.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),d=h.length>0&&h[0].ssrc;let m;const g=t.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(T=>parseInt(T,10)));g.length>0&&g[0].length>1&&g[0][0]===d&&(m=g[0][1]),o.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let S={ssrc:d,codecPayloadType:parseInt(v.parameters.apt,10)};d&&m&&(S.rtx={ssrc:m}),s.push(S),l&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:d,mechanism:u?"red+ulpfec":"red"},s.push(S))}}),s.length===0&&d&&s.push({ssrc:d});let y=t.matchPrefix(n,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substring(5),10)*1e3*.95-2e3*8:y=void 0,s.forEach(v=>{v.maxBitrate=y})),s},t.parseRtcpParameters=function(n){const s={},o=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];o&&(s.cname=o.value,s.ssrc=o.ssrc);const l=t.matchPrefix(n,"a=rtcp-rsize");s.reducedSize=l.length>0,s.compound=l.length===0;const u=t.matchPrefix(n,"a=rtcp-mux");return s.mux=u.length>0,s},t.writeRtcpParameters=function(n){let s="";return n.reducedSize&&(s+=`a=rtcp-rsize\r
`),n.mux&&(s+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(s+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),s},t.parseMsid=function(n){let s;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return s=o[0].substring(7).split(" "),{stream:s[0],track:s[1]};const l=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(l.length>0)return s=l[0].value.split(" "),{stream:s[0],track:s[1]}},t.parseSctpDescription=function(n){const s=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let l;o.length>0&&(l=parseInt(o[0].substring(19),10)),isNaN(l)&&(l=65536);const u=t.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:s.fmt,maxMessageSize:l};const h=t.matchPrefix(n,"a=sctpmap:");if(h.length>0){const d=h[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:l}}},t.writeSctpDescription=function(n,s){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&o.push("a=max-message-size:"+s.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,s,o){let l;const u=s!==void 0?s:2;return n?l=n:l=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+l+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,s){const o=t.splitLines(n);for(let l=0;l<o.length;l++)switch(o[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[l].substring(2)}return s?t.getDirection(s):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const s=t.splitLines(n);for(let o=0;o<s.length;o++)if(s[o].length<2||s[o].charAt(1)!=="=")return!1;return!0},r.exports=t})(Nh)),Nh.exports}var vx=gE();const cr=Pa(vx),yE=V1({__proto__:null,default:cr},[vx]);function Al(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const t=r.RTCIceCandidate;r.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const o=new t(s),l=cr.parseCandidate(s.candidate);for(const u in l)u in o||Object.defineProperty(o,u,{value:l[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(s)},r.RTCIceCandidate.prototype=t.prototype,ps(r,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new r.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ff(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||ps(r,"icecandidate",t=>{if(t.candidate){const n=cr.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Tl(r,t){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const d=cr.splitSections(h.sdp);return d.shift(),d.some(m=>{const g=cr.parseMLine(m);return g&&g.kind==="application"&&g.protocol.indexOf("SCTP")!==-1})},s=function(h){const d=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const m=parseInt(d[1],10);return m!==m?-1:m},o=function(h){let d=65536;return t.browser==="firefox"&&(t.version<57?h===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},l=function(h,d){let m=65536;t.browser==="firefox"&&t.version===57&&(m=65535);const g=cr.matchPrefix(h.sdp,"a=max-message-size:");return g.length>0?m=parseInt(g[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(m=2147483637),m},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=s(arguments[0]),m=o(d),g=l(arguments[0],d);let y;m===0&&g===0?y=Number.POSITIVE_INFINITY:m===0||g===0?y=Math.max(m,g):y=Math.min(m,g);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return y}}),this._sctp=v}return u.apply(this,arguments)}}function El(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function t(s,o){const l=s.send;s.send=function(){const h=arguments[0],d=h.length||h.size||h.byteLength;if(s.readyState==="open"&&o.sctp&&d>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return l.apply(s,arguments)}}const n=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},ps(r,"datachannel",s=>(t(s.channel,s.target),s))}function df(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const t=r.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const s=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const l=o.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const u=new Event("connectionstatechange",o);l.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function pf(r,t){if(!r.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&o instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:o.type,sdp:l}):o.sdp=l}return n.apply(this,arguments)}}function Ml(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Rl(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const _E=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:pf,shimAddIceCandidateNullOrEmpty:Ml,shimConnectionState:df,shimMaxMessageSize:Tl,shimParameterlessSetLocalDescription:Rl,shimRTCIceCandidate:Al,shimRTCIceCandidateRelayProtocol:ff,shimSendThrowTypeError:El},Symbol.toStringTag,{value:"Module"}));function xE({window:r}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=X_,s=pE(r),o={browserDetails:s,commonShim:_E,extractVersion:Ta,disableLog:fE,disableWarnings:dE,sdp:yE};switch(s.browser){case"chrome":if(!cy||!uf||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(s.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=cy,Ml(r,s),Rl(r),$_(r,s),Q_(r),uf(r,s),Z_(r),tx(r,s),K_(r),W_(r),ex(r,s),Al(r),ff(r),df(r),Tl(r,s),El(r),pf(r,s);break;case"firefox":if(!uy||!hf||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=uy,Ml(r,s),Rl(r),nx(r,s),hf(r,s),ix(r),ax(r),sx(r),rx(r),ox(r),lx(r),cx(r),ux(r),hx(r),Al(r),df(r),Tl(r,s),El(r);break;case"safari":if(!hy||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=hy,Ml(r,s),Rl(r),yx(r),xx(r),px(r),fx(r),dx(r),_x(r),mx(r),bx(r),Al(r),ff(r),Tl(r,s),El(r),pf(r,s);break;default:n("Unsupported browser!");break}return o}const dy=xE({window:typeof window>"u"?void 0:window});function ms(r,t,n,s){Object.defineProperty(r,t,{get:n,set:s,enumerable:!0,configurable:!0})}class Sx{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],s=t.byteLength,o=Math.ceil(s/this.chunkedMTU);let l=0,u=0;for(;u<s;){const h=Math.min(s,u+this.chunkedMTU),d=t.slice(u,h),m={__peerData:this._dataCount,n:l,data:d,total:o};n.push(m),u=h,l++}return this._dataCount++,n}}}function bE(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r)n.set(o,s),s+=o.byteLength;return n}const Gh=dy.default||dy,_a=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Gh.browserDetails.browser}getVersion(){return Gh.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),t=Gh.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,s=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),s=!0}catch{}finally{n&&n.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},vE=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),Cx=()=>Math.random().toString(36).slice(2),py={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class SE extends Sx{noop(){}blobToArrayBuffer(t,n){const s=new FileReader;return s.onload=function(o){o.target&&n(o.target.result)},s.readAsArrayBuffer(t),s}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=py,this.browser=_a.getBrowser(),this.browserVersion=_a.getVersion(),this.pack=F_,this.unpack=H_,this.supports=(function(){const n={browser:_a.isBrowserSupported(),webRTC:_a.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let s;try{s=new RTCPeerConnection(py),n.audioVideo=!0;let o;try{o=s.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!_a.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{s&&s.close()}return n})(),this.validateId=vE,this.randomToken=Cx}}const Ze=new SE,CE="PeerJS: ";class AE{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const s=[CE,...n];for(const o in s)s[o]instanceof Error&&(s[o]="("+s[o].name+") "+s[o].message);t>=3?console.log(...s):t>=2?console.warn("WARNING",...s):t>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var at=new AE,kf={},TE=Object.prototype.hasOwnProperty,Ie="~";function La(){}Object.create&&(La.prototype=Object.create(null),new La().__proto__||(Ie=!1));function EE(r,t,n){this.fn=r,this.context=t,this.once=n||!1}function Ax(r,t,n,s,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var l=new EE(n,s||r,o),u=Ie?Ie+t:t;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],l]:r._events[u].push(l):(r._events[u]=l,r._eventsCount++),r}function wl(r,t){--r._eventsCount===0?r._events=new La:delete r._events[t]}function Pe(){this._events=new La,this._eventsCount=0}Pe.prototype.eventNames=function(){var t=[],n,s;if(this._eventsCount===0)return t;for(s in n=this._events)TE.call(n,s)&&t.push(Ie?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Pe.prototype.listeners=function(t){var n=Ie?Ie+t:t,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var o=0,l=s.length,u=new Array(l);o<l;o++)u[o]=s[o].fn;return u};Pe.prototype.listenerCount=function(t){var n=Ie?Ie+t:t,s=this._events[n];return s?s.fn?1:s.length:0};Pe.prototype.emit=function(t,n,s,o,l,u){var h=Ie?Ie+t:t;if(!this._events[h])return!1;var d=this._events[h],m=arguments.length,g,y;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),m){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,s),!0;case 4:return d.fn.call(d.context,n,s,o),!0;case 5:return d.fn.call(d.context,n,s,o,l),!0;case 6:return d.fn.call(d.context,n,s,o,l,u),!0}for(y=1,g=new Array(m-1);y<m;y++)g[y-1]=arguments[y];d.fn.apply(d.context,g)}else{var v=d.length,S;for(y=0;y<v;y++)switch(d[y].once&&this.removeListener(t,d[y].fn,void 0,!0),m){case 1:d[y].fn.call(d[y].context);break;case 2:d[y].fn.call(d[y].context,n);break;case 3:d[y].fn.call(d[y].context,n,s);break;case 4:d[y].fn.call(d[y].context,n,s,o);break;default:if(!g)for(S=1,g=new Array(m-1);S<m;S++)g[S-1]=arguments[S];d[y].fn.apply(d[y].context,g)}}return!0};Pe.prototype.on=function(t,n,s){return Ax(this,t,n,s,!1)};Pe.prototype.once=function(t,n,s){return Ax(this,t,n,s,!0)};Pe.prototype.removeListener=function(t,n,s,o){var l=Ie?Ie+t:t;if(!this._events[l])return this;if(!n)return wl(this,l),this;var u=this._events[l];if(u.fn)u.fn===n&&(!o||u.once)&&(!s||u.context===s)&&wl(this,l);else{for(var h=0,d=[],m=u.length;h<m;h++)(u[h].fn!==n||o&&!u[h].once||s&&u[h].context!==s)&&d.push(u[h]);d.length?this._events[l]=d.length===1?d[0]:d:wl(this,l)}return this};Pe.prototype.removeAllListeners=function(t){var n;return t?(n=Ie?Ie+t:t,this._events[n]&&wl(this,n)):(this._events=new La,this._eventsCount=0),this};Pe.prototype.off=Pe.prototype.removeListener;Pe.prototype.addListener=Pe.prototype.on;Pe.prefixed=Ie;Pe.EventEmitter=Pe;kf=Pe;var gs={};ms(gs,"ConnectionType",()=>Gi);ms(gs,"PeerErrorType",()=>_e);ms(gs,"BaseConnectionErrorType",()=>mf);ms(gs,"DataConnectionErrorType",()=>Df);ms(gs,"SerializationType",()=>Vl);ms(gs,"SocketEventType",()=>Ni);ms(gs,"ServerMessageType",()=>ze);var Gi=(function(r){return r.Data="data",r.Media="media",r})({}),_e=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),mf=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),Df=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Vl=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),Ni=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),ze=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const Tx="1.5.5";class ME extends kf.EventEmitter{constructor(t,n,s,o,l,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const h=t?"wss://":"ws://";this._baseUrl=h+n+":"+s+o+"peerjs?key="+l}start(t,n){this._id=t;const s=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+Tx),this._disconnected=!1,this._socket.onmessage=o=>{let l;try{l=JSON.parse(o.data),at.log("Server message received:",l)}catch{at.log("Invalid server message",o.data);return}this.emit(Ni.Message,l)},this._socket.onclose=o=>{this._disconnected||(at.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Ni.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),at.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){at.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:ze.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ni.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Ex{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Gi.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const s=this.connection,o={ordered:!!t.reliable},l=n.createDataChannel(s.label,o);s._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){at.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,s=this.connection.connectionId,o=this.connection.type,l=this.connection.provider;at.log("Listening for ICE candidates."),t.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(at.log(`Received ICE candidates for ${n}:`,u.candidate),l.socket.send({type:ze.Candidate,payload:{candidate:u.candidate,type:o,connectionId:s},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":at.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(mf.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":at.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(mf.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":at.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},at.log("Listening for data channel"),t.ondatachannel=u=>{at.log("Received data channel");const h=u.channel;l.getConnection(n,s)._initializeDataChannel(h)},at.log("Listening for remote stream"),t.ontrack=u=>{at.log("Received remote stream");const h=u.streams[0],d=l.getConnection(n,s);if(d.type===Gi.Media){const m=d;this._addStreamToMediaConnection(h,m)}}}cleanup(){at.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let s=!1;const o=this.connection.dataChannel;o&&(s=!!o.readyState&&o.readyState!=="closed"),(n||s)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createOffer(this.connection.options.constraints);at.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),at.log("Set localDescription:",s,`for:${this.connection.peer}`);let o={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Gi.Data){const l=this.connection;o={...o,label:l.label,reliable:l.reliable,serialization:l.serialization}}n.socket.send({type:ze.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(_e.WebRTC,o),at.log("Failed to setLocalDescription, ",o))}}catch(s){n.emitError(_e.WebRTC,s),at.log("Failed to createOffer, ",s)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createAnswer();at.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),at.log("Set localDescription:",s,`for:${this.connection.peer}`),n.socket.send({type:ze.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(_e.WebRTC,o),at.log("Failed to setLocalDescription, ",o)}}catch(s){n.emitError(_e.WebRTC,s),at.log("Failed to create answer, ",s)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const s=this.connection.peerConnection,o=this.connection.provider;at.log("Setting remote description",n);const l=this;try{await s.setRemoteDescription(n),at.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await l._makeAnswer()}catch(u){o.emitError(_e.WebRTC,u),at.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(t){at.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),at.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(_e.WebRTC,n),at.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(at.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return at.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(s=>{n.addTrack(s,t)})}_addStreamToMediaConnection(t,n){at.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class Mx extends kf.EventEmitter{emitError(t,n){at.error("Error:",n),this.emit("error",new RE(`${t}`,n))}}class RE extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class Rx extends Mx{get open(){return this._open}constructor(t,n,s){super(),this.peer=t,this.provider=n,this.options=s,this._open=!1,this.metadata=s.metadata}}class Nl extends Rx{static#t=this.ID_PREFIX="mc_";get type(){return Gi.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,s){super(t,n,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Nl.ID_PREFIX+Ze.randomToken(),this._negotiator=new Ex(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{at.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{at.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){at.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,s=t.payload;switch(t.type){case ze.Answer:this._negotiator.handleSDP(n,s.sdp),this._open=!0;break;case ze.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:at.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){at.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const s=this.provider._getMessages(this.connectionId);for(const o of s)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class wE{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:s,port:o,path:l,key:u}=this._options,h=new URL(`${n}://${s}:${o}${l}${u}/${t}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",Tx),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){at.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Ze.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Ze.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw at.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Gl extends Rx{static#t=this.ID_PREFIX="dc_";static#e=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Gi.Data}constructor(t,n,s){super(t,n,s),this.connectionId=this.options.connectionId||Gl.ID_PREFIX+Cx(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Ex(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{at.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{at.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{at.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Df.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case ze.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case ze.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:at.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Of extends Gl{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Gl.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return at.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class jh extends Of{close(t){super.close(t),this._chunkedData={}}constructor(t,n,s){super(t,n,s),this.chunker=new Sx,this.serialization=Vl.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=H_(t),s=n.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,s=this._chunkedData[n]||{data:[],count:0,total:t.total};if(s.data[t.n]=new Uint8Array(t.data),s.count++,this._chunkedData[n]=s,s.total===s.count){delete this._chunkedData[n];const o=bE(s.data);this._handleDataMessage({data:o})}}_send(t,n){const s=F_(t);if(s instanceof Promise)return this._send_blob(s);if(!n&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);at.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const s of n)this.send(s,!0)}}class BE extends Of{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Vl.None}}class kE extends Of{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),s=n.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const s=this.encoder.encode(this.stringify(t));if(s.byteLength>=Ze.chunkedMTU){this.emitError(Df.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...t){super(...t),this.serialization=Vl.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class zf extends Mx{static#t=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,s]of this._connections)t[n]=s;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:BE,json:kE,binary:jh,"binary-utf8":jh,default:jh},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(t&&t.constructor==Object?n=t:t&&(s=t.toString()),n={debug:0,host:Ze.CLOUD_HOST,port:Ze.CLOUD_PORT,path:"/",key:zf.DEFAULT_KEY,token:Ze.randomToken(),config:Ze.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ze.CLOUD_HOST?this._options.secure=Ze.isSecure():this._options.host==Ze.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&at.setLogFunction(this._options.logFunction),at.logLevel=this._options.debug||0,this._api=new wE(n),this._socket=this._createServerConnection(),!Ze.supports.audioVideo&&!Ze.supports.data){this._delayedAbort(_e.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!Ze.validateId(s)){this._delayedAbort(_e.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(_e.ServerError,o))}_createServerConnection(){const t=new ME(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ni.Message,n=>{this._handleMessage(n)}),t.on(Ni.Error,n=>{this._abort(_e.SocketError,n)}),t.on(Ni.Disconnected,()=>{this.disconnected||(this.emitError(_e.Network,"Lost connection to server."),this.disconnect())}),t.on(Ni.Close,()=>{this.disconnected||this._abort(_e.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,s=t.payload,o=t.src;switch(n){case ze.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ze.Error:this._abort(_e.ServerError,s.msg);break;case ze.IdTaken:this._abort(_e.UnavailableID,`ID "${this.id}" is taken`);break;case ze.InvalidKey:this._abort(_e.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ze.Leave:at.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case ze.Expire:this.emitError(_e.PeerUnavailable,`Could not connect to peer ${o}`);break;case ze.Offer:{const l=s.connectionId;let u=this.getConnection(o,l);if(u&&(u.close(),at.warn(`Offer received for existing Connection ID:${l}`)),s.type===Gi.Media){const d=new Nl(o,this,{connectionId:l,_payload:s,metadata:s.metadata});u=d,this._addConnection(o,u),this.emit("call",d)}else if(s.type===Gi.Data){const d=new this._serializers[s.serialization](o,this,{connectionId:l,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});u=d,this._addConnection(o,u),this.emit("connection",d)}else{at.warn(`Received malformed connection type:${s.type}`);return}const h=this._getMessages(l);for(const d of h)u.handleMessage(d);break}default:{if(!s){at.warn(`You received a malformed message from ${o} of type ${n}`);return}const l=s.connectionId,u=this.getConnection(o,l);u&&u.peerConnection?u.handleMessage(t):l?this._storeMessage(l,t):at.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){at.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(_e.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,s),s}call(t,n,s={}){if(this.disconnected){at.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(_e.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){at.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Nl(t,this,{...s,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){at.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const s=this._connections.get(t);if(!s)return null;for(const o of s)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){at.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(at.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const s of n)s.close()}disconnect(){if(this.disconnected)return;const t=this.id;at.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)at.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)at.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(_e.ServerError,n))}}class DE{peer=null;connections=[];hostConnection=null;constructor(){}initialize(t){return new Promise((n,s)=>{this.peer=new zf(t),this.peer.on("open",o=>{console.log("My Peer ID is: "+o),n(o)}),this.peer.on("connection",o=>{this.handleConnection(o)}),this.peer.on("error",o=>{console.error(o),s(o)})})}connectToHost(t){if(!this.peer)return;const n=this.peer.connect(t);this.hostConnection=n,n.on("open",()=>{console.log("Connected to host"),n.send({type:"REQUEST_STATE"})}),n.on("data",s=>{this.handleData(s,n)})}handleConnection(t){this.connections.push(t),t.on("data",n=>{this.handleData(n,t)}),t.on("close",()=>{this.connections=this.connections.filter(n=>n!==t)})}handleData(t,n){const s=Le.getState();switch(console.log("Received data:",t),t.type){case"SYNC_STATE":s.syncState(t.payload);break;case"REQUEST_STATE":s.isHost&&n.send({type:"SYNC_STATE",payload:{tokens:s.tokens,map:s.map,chat:s.chat}});break;case"ACTION":this.applyAction(t.action,t.payload),s.isHost&&this.broadcast({type:"ACTION",action:t.action,payload:t.payload},n.peer);break}}applyAction(t,n){const s=Le.getState();switch(t){case"ADD_TOKEN":s.addToken(n);break;case"UPDATE_TOKEN":s.updateToken(n.id,n.data);break;case"ADD_CHAT":s.addChatMessage(n);break;case"UPDATE_MAP":s.setMapBackground(n.url);break}}broadcast(t,n){this.connections.forEach(s=>{s.peer!==n&&s.send(t)})}sendAction(t,n){this.applyAction(t,n);const s={type:"ACTION",action:t,payload:n};this.hostConnection?this.hostConnection.send(s):this.broadcast(s)}}const vn=new DE,OE=({onEditToken:r})=>{const t=Qt.useRef(null),n=Qt.useRef(null),s=Le(g=>g.map),o=Le(g=>g.tokens),l=Le(g=>g.myId),u=Le(g=>g.isHost),h=Qt.useRef(new Hn),d=Qt.useRef(new Hn),m=Qt.useRef(null);return Qt.useEffect(()=>t.current?((async()=>{const y=new d_;await y.init({resizeTo:t.current,backgroundColor:1710618,antialias:!0}),t.current.appendChild(y.canvas),n.current=y,y.stage.addChild(h.current),h.current.addChild(d.current);let v=!1,S={x:0,y:0};y.canvas.addEventListener("mousedown",T=>{(T.button===1||T.button===0&&T.altKey)&&(v=!0,S={x:T.clientX,y:T.clientY})}),window.addEventListener("mouseup",()=>v=!1),window.addEventListener("mousemove",T=>{if(v){const M=T.clientX-S.x,E=T.clientY-S.y;h.current.position.x+=M,h.current.position.y+=E,S={x:T.clientX,y:T.clientY}}}),y.canvas.addEventListener("wheel",T=>{T.preventDefault();const M=1.1,E=T.deltaY<0?h.current.scale.x*M:h.current.scale.x/M;E>.1&&E<5&&h.current.scale.set(E)})})(),()=>{n.current?.destroy({removeView:!0})}):void 0,[]),Qt.useEffect(()=>{(async()=>{if(!(!s.url||!n.current))try{const y=await Aa.load(s.url);m.current&&h.current.removeChild(m.current);const v=new hr(y);m.current=v,h.current.addChildAt(v,0)}catch(y){console.error("Failed to load map bg",y)}})()},[s.url]),Qt.useEffect(()=>{d.current.removeChildren(),o.forEach(g=>{if(g.hidden&&!u)return;const y=new Pl;y.circle(0,0,s.scale/2-2),y.fill(16711680),y.stroke({width:2,color:16777215}),g.hidden&&(y.alpha=.5),y.position.set(g.x*s.scale+s.scale/2,g.y*s.scale+s.scale/2),y.eventMode="static",y.cursor="pointer";let v=null,S={x:0,y:0},T=0;(u||g.ownerId===l)&&(y.on("pointerdown",M=>{if(M.button===0){const E=Date.now();E-T<300&&r&&r(g.id),T=E,v=M,y.alpha=g.hidden?.3:.5,S={x:y.x,y:y.y},M.stopPropagation()}}),y.on("rightclick",M=>{u&&(M.stopPropagation(),setTimeout(()=>{confirm(`Manage Token?
OK: Toggle Visibility (Current: ${g.hidden?"Hidden":"Visible"})
Cancel: Delete Token`)&&vn.sendAction("UPDATE_TOKEN",{id:g.id,data:{hidden:!g.hidden}})},10))}),y.on("rightclick",M=>{u&&(M.stopPropagation(),M.preventDefault(),vn.sendAction("UPDATE_TOKEN",{id:g.id,data:{hidden:!g.hidden}}))}),y.on("pointermove",M=>{if(v){const E=M.getLocalPosition(y.parent);y.position.set(E.x,E.y)}}),y.on("pointerup",()=>{if(v){v=null,y.alpha=g.hidden?.5:1;const M=Math.floor(y.x/s.scale),E=Math.floor(y.y/s.scale);vn.sendAction("UPDATE_TOKEN",{id:g.id,data:{x:M,y:E}})}}),y.on("pointerupoutside",()=>{v=null,y.alpha=g.hidden?.5:1,y.position.set(S.x,S.y)})),d.current.addChild(y)})},[o,s.scale,u,l,s.url]),J.jsx("div",{ref:t,className:"w-full h-full"})};const wx=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();const zE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const UE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase());const my=r=>{const t=UE(r);return t.charAt(0).toUpperCase()+t.slice(1)};var LE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PE=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const NE=Qt.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:u,...h},d)=>Qt.createElement("svg",{ref:d,...LE,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:wx("lucide",o),...!l&&!PE(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,g])=>Qt.createElement(m,g)),...Array.isArray(l)?l:[l]]));const Bx=(r,t)=>{const n=Qt.forwardRef(({className:s,...o},l)=>Qt.createElement(NE,{ref:l,iconNode:t,className:wx(`lucide-${zE(my(r))}`,`lucide-${r}`,s),...o}));return n.displayName=my(r),n};const GE=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],jE=Bx("scroll",GE);const IE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],HE=Bx("send",IE),FE=r=>{const t=r.match(/(\d+)d(\d+)([+-]\d+)?/);if(!t)return null;const n=parseInt(t[1]),s=parseInt(t[2]),o=t[3]?parseInt(t[3]):0;let l=0;const u=[];for(let h=0;h<n;h++){const d=Math.floor(Math.random()*s)+1;u.push(d),l+=d}return l+=o,{total:l,rolls:u,mod:o}},YE=()=>{const[r,t]=Qt.useState(""),n=Le(m=>m.chat),s=Le(m=>m.username),o=Le(m=>m.myId),l=Qt.useRef(null),u=()=>{l.current?.scrollIntoView({behavior:"smooth"})};Qt.useEffect(u,[n]);const h=()=>{if(!r.trim())return;let m={id:I_(),senderId:o,senderName:s,timestamp:Date.now(),content:r,type:"text"};if(r.startsWith("/roll ")){const g=r.replace("/roll ","").trim(),y=FE(g);y?(m.type="roll",m.rollData={formula:g,result:y.total,details:`[${y.rolls.join(", ")}] ${y.mod?y.mod>0?"+"+y.mod:y.mod:""}`},m.content=`rolled ${g} = ${y.total}`):(m.type="system",m.content="Invalid dice formula. Use format like 1d20+5")}vn.sendAction("ADD_CHAT",m),t("")},d=m=>{m.key==="Enter"&&h()};return J.jsxs("div",{className:"flex flex-col h-full bg-gray-900 border-l border-gray-700 w-80",children:[J.jsxs("div",{className:"p-3 border-b border-gray-700 bg-gray-800 font-bold text-gray-200 flex items-center gap-2",children:[J.jsx(jE,{size:18})," Chat & Logs"]}),J.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[n.map(m=>J.jsxs("div",{className:`text-sm ${m.type==="system"?"text-yellow-400 italic":""}`,children:[J.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[J.jsx("span",{className:"font-bold text-blue-400",children:m.senderName}),J.jsx("span",{children:new Date(m.timestamp).toLocaleTimeString()})]}),m.type==="roll"?J.jsxs("div",{className:"bg-gray-800 p-2 rounded border border-gray-700",children:[J.jsx("div",{className:"font-mono text-lg font-bold text-green-400",children:m.rollData?.result}),J.jsxs("div",{className:"text-xs text-gray-400",children:[m.rollData?.formula," (",m.rollData?.details,")"]})]}):J.jsx("div",{className:"text-gray-300 break-words",children:m.content})]},m.id)),J.jsx("div",{ref:l})]}),J.jsxs("div",{className:"p-3 bg-gray-800 border-t border-gray-700 flex gap-2",children:[J.jsx("input",{className:"flex-1 bg-gray-900 border border-gray-600 rounded px-2 py-1 text-sm text-white focus:border-blue-500 outline-none",value:r,onChange:m=>t(m.target.value),onKeyDown:d,placeholder:"/roll 1d20 or message..."}),J.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-500 rounded px-3 py-1 flex items-center justify-center text-white",children:J.jsx(HE,{size:16})})]}),J.jsx("div",{className:"grid grid-cols-4 gap-1 p-2 bg-gray-800 border-t border-gray-700",children:["d4","d6","d8","d10","d12","d20","d100"].map(m=>J.jsx("button",{onClick:()=>{t(`/roll 1${m}`),h()},className:"bg-gray-700 hover:bg-gray-600 text-xs py-1 rounded text-gray-300",children:m},m))})]})},VE=()=>{const r=Le(h=>h.tokens),t=Le(h=>h.turnOrder),n=Le(h=>h.isHost),[s,o]=Qt.useState(0),l=t.map(h=>r.find(d=>d.id===h)).filter(Boolean),u=()=>{o(h=>(h+1)%l.length)};return l.length===0?null:J.jsxs("div",{className:"absolute top-4 left-4 bg-gray-900/90 border border-gray-700 rounded-lg p-3 text-white w-64 shadow-2xl backdrop-blur-sm z-50",children:[J.jsxs("h3",{className:"text-sm font-bold border-b border-gray-700 pb-2 mb-2 flex justify-between",children:["Initiative",n&&J.jsx("button",{onClick:u,className:"text-xs bg-blue-600 px-2 rounded hover:bg-blue-500",children:"Next"})]}),J.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:l.map((h,d)=>J.jsxs("div",{className:`flex items-center gap-2 p-2 rounded text-sm ${d===s?"bg-blue-900/50 border border-blue-500":"bg-gray-800"}`,children:[J.jsx("span",{className:"font-mono text-gray-500 text-xs",children:d+1+"."}),J.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500 border border-white flex-shrink-0"}),J.jsx("span",{className:"flex-1 truncate",children:h?.label||"Unknown"}),J.jsxs("div",{className:"text-xs font-bold text-yellow-500",children:["HP: ",h?.stats?.hp]})]},h?.id))})]})},XE=({tokenId:r,onClose:t})=>{const n=Le(v=>v.tokens.find(S=>S.id===r)),[s,o]=Qt.useState(""),[l,u]=Qt.useState(0),[h,d]=Qt.useState(0),[m,g]=Qt.useState(0);Qt.useEffect(()=>{n&&(o(n.label||"Unknown"),u(n.stats?.hp||0),d(n.stats?.maxHp||0),g(n.stats?.ac||10))},[n]);const y=()=>{n&&(vn.sendAction("UPDATE_TOKEN",{id:n.id,data:{label:s,stats:{hp:l,maxHp:h,ac:m}}}),t())};return n?J.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:J.jsxs("div",{className:"bg-gray-800 border border-gray-600 p-6 rounded-lg w-96 shadow-2xl",children:[J.jsxs("h2",{className:"text-xl font-bold mb-4 text-purple-400",children:["Edit Token: ",s]}),J.jsxs("div",{className:"space-y-3",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs text-gray-400",children:"Name / Label"}),J.jsx("input",{type:"text",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:s,onChange:v=>o(v.target.value)})]}),J.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs text-gray-400",children:"Current HP"}),J.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:l,onChange:v=>u(Number(v.target.value))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs text-gray-400",children:"Max HP"}),J.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:h,onChange:v=>d(Number(v.target.value))})]})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs text-gray-400",children:"Armour Class (AC)"}),J.jsx("input",{type:"number",className:"w-full bg-gray-900 border border-gray-700 px-2 py-1 rounded text-white",value:m,onChange:v=>g(Number(v.target.value))})]})]}),J.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[J.jsx("button",{onClick:t,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"}),J.jsx("button",{onClick:y,className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded font-bold",children:"Save"})]})]})}):null};function qE(){const[r,t]=Qt.useState(""),[n,s]=Qt.useState(null),o=Le(d=>d.myId),l=Le(d=>d.setIdentity);Qt.useEffect(()=>{vn.initialize().then(d=>{l(d,!0)}).catch(console.error)},[]);const u=()=>{r&&(l(o,!1),vn.connectToHost(r))},h=()=>{const d={id:Date.now().toString(),x:3,y:3,size:1,image:"",label:"Hero",stats:{hp:20,maxHp:20,ac:14}};vn.sendAction("ADD_TOKEN",d)};return J.jsxs("div",{className:"flex h-screen w-screen bg-gray-900 text-white overflow-hidden font-sans",children:[J.jsxs("div",{className:"w-64 bg-gray-800 flex flex-col border-r border-gray-700 z-10 shadow-xl",children:[J.jsxs("div",{className:"p-4 border-b border-gray-700",children:[J.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent mb-4",children:"VTT RPG"}),J.jsxs("div",{className:"p-3 bg-gray-700 rounded-lg text-sm",children:[J.jsxs("div",{className:"mb-2",children:[J.jsx("span",{className:"text-gray-400",children:"My ID:"}),J.jsx("code",{className:"block mt-1 p-1 bg-black rounded select-all text-xs break-all cursor-pointer hover:bg-gray-900",title:"Click to Copy",onClick:()=>navigator.clipboard.writeText(o),children:o})]}),J.jsxs("div",{className:"flex gap-2",children:[J.jsx("input",{type:"text",placeholder:"Host ID to join...",className:"flex-1 px-2 py-1 bg-gray-900 rounded border border-gray-600 text-xs text-white",value:r,onChange:d=>t(d.target.value)}),J.jsx("button",{onClick:u,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-xs font-bold",children:"Join"})]})]})]}),J.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[J.jsx("h2",{className:"text-xs font-bold uppercase text-gray-500 mb-2",children:"Tools"}),J.jsxs("div",{className:"flex flex-col gap-2",children:[J.jsxs("label",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors cursor-pointer block",children:[J.jsx("span",{children:"Upload Map"}),J.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>{const m=d.target.files?.[0];if(m){const g=new FileReader;g.onload=y=>{const v=y.target?.result;vn.sendAction("UPDATE_MAP",{url:v})},g.readAsDataURL(m)}}})]}),J.jsxs("label",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors cursor-pointer block",children:[J.jsx("span",{children:"Add Token (Image)"}),J.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>{const m=d.target.files?.[0];if(m){const g=new FileReader;g.onload=y=>{const v=y.target?.result,S={id:Date.now().toString(),x:3,y:3,size:1,image:v,label:"Token",stats:{hp:10,maxHp:10,ac:10}};vn.sendAction("ADD_TOKEN",S)},g.readAsDataURL(m)}}})]}),J.jsx("button",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors",onClick:h,children:"Add Basic Token"}),J.jsxs("div",{className:"mt-4 p-2 bg-yellow-900/30 border border-yellow-700/50 rounded text-xs text-yellow-200",children:[J.jsx("p",{children:"Debug Info:"}),J.jsxs("p",{children:["Connected: ",vn.hostConnection?"Yes":"No"]})]}),J.jsxs("div",{className:"border-t border-gray-700 my-2 pt-2 space-y-2",children:[J.jsx("button",{className:"w-full text-left px-3 py-2 bg-green-900/50 hover:bg-green-800 rounded text-sm transition-colors text-green-100 flex items-center gap-2",onClick:()=>{const d=Le.getState(),m={tokens:d.tokens,map:d.map,chat:d.chat,turnOrder:d.turnOrder,version:1},g=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),y=URL.createObjectURL(g),v=document.createElement("a");v.href=y,v.download=`vtt-save-${new Date().toISOString().slice(0,10)}.json`,v.click(),URL.revokeObjectURL(y)},children:" Save Campaign"}),J.jsxs("label",{className:"w-full text-left px-3 py-2 bg-blue-900/50 hover:bg-blue-800 rounded text-sm transition-colors text-blue-100 flex items-center gap-2 cursor-pointer block",children:[J.jsx("span",{children:" Load Campaign"}),J.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:d=>{const m=d.target.files?.[0];if(!m)return;const g=new FileReader;g.onload=y=>{try{const v=JSON.parse(y.target?.result);v.version===1&&(vn.sendAction("SYNC_STATE",v),alert("Campaign loaded successfully!"))}catch(v){console.error(v),alert("Failed to load save file.")}},g.readAsText(m)}})]})]})]})]})]}),J.jsx("div",{className:"flex-1 relative bg-black overflow-hidden flex flex-col",children:J.jsxs("div",{className:"flex-1 relative",children:[J.jsx(OE,{onEditToken:s}),J.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:J.jsx("div",{className:"pointer-events-auto p-4",children:J.jsx(VE,{})})})]})}),J.jsx(YE,{}),n&&J.jsx(XE,{tokenId:n,onClose:()=>s(null)})]})}av.createRoot(document.getElementById("root")).render(J.jsx(xa.StrictMode,{children:J.jsx(qE,{})}));export{be as $,c_ as A,Ke as B,Hn as C,ee as D,dt as E,Ey as F,Il as G,Bn as H,Oy as I,r0 as J,hr as K,SS as L,kt as M,kS as N,Na as O,Ue as P,de as Q,Zh as R,bf as S,ul as T,Xh as U,QS as V,o0 as W,bh as X,l0 as Y,eS as Z,Dl as _,Ky as a,Jv as a0,wy as a1,u_ as a2,Et as a3,qt as a4,tC as a5,AC as a6,yC as a7,FC as a8,VC as a9,WC as aa,ZC as ab,JC as ac,kl as ad,Sl as ae,ef as af,$0 as ag,T_ as ah,C0 as ai,v0 as aj,Z0 as ak,eT as al,Jt as am,Pl as an,Sv as ao,Ll as ap,R_ as aq,kn as b,eA as c,pC as d,ke as e,S0 as f,hC as g,za as h,vl as i,xf as j,a_ as k,Iy as l,Dn as m,e_ as n,of as o,HC as p,YC as q,Lv as r,KC as s,$C as t,le as u,Ot as v,te as w,vv as x,tA as y,An as z};
