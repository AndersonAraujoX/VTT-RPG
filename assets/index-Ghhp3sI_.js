const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-CyFel0GM.js","assets/webworkerAll-CHpwp0M2.js","assets/colorToUniform-HUpMEcN1.js","assets/WebGPURenderer-B2vxKJ9P.js","assets/SharedSystems-ByGes3zk.js","assets/WebGLRenderer-Dbb1S_NS.js"])))=>i.map(i=>d[i]);
function Gv(r,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(s,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function ba(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fu={exports:{}},Xr={};var bg;function jv(){if(bg)return Xr;bg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var h in o)h!=="key"&&(c[h]=o[h])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:u,ref:o!==void 0?o:null,props:c}}return Xr.Fragment=t,Xr.jsx=n,Xr.jsxs=n,Xr}var vg;function Hv(){return vg||(vg=1,Fu.exports=jv()),Fu.exports}var it=Hv(),Xu={exports:{}},ct={};var Sg;function Yv(){if(Sg)return ct;Sg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=x&&R[x]||R["@@iterator"],typeof R=="function"?R:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function M(R,Y,X){this.props=R,this.context=Y,this.refs=C,this.updater=X||S}M.prototype.isReactComponent={},M.prototype.setState=function(R,Y){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,Y,"setState")},M.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function w(){}w.prototype=M.prototype;function O(R,Y,X){this.props=R,this.context=Y,this.refs=C,this.updater=X||S}var P=O.prototype=new w;P.constructor=O,A(P,M.prototype),P.isPureReactComponent=!0;var F=Array.isArray;function V(){}var N={H:null,A:null,T:null,S:null},tt=Object.prototype.hasOwnProperty;function W(R,Y,X){var Q=X.ref;return{$$typeof:r,type:R,key:Y,ref:Q!==void 0?Q:null,props:X}}function q(R,Y){return W(R.type,Y,R.props)}function $(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function dt(R){var Y={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(X){return Y[X]})}var Et=/\/+/g;function Ct(R,Y){return typeof R=="object"&&R!==null&&R.key!=null?dt(""+R.key):Y.toString(36)}function ae(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(V,V):(R.status="pending",R.then(function(Y){R.status==="pending"&&(R.status="fulfilled",R.value=Y)},function(Y){R.status==="pending"&&(R.status="rejected",R.reason=Y)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function k(R,Y,X,Q,lt){var ut=typeof R;(ut==="undefined"||ut==="boolean")&&(R=null);var At=!1;if(R===null)At=!0;else switch(ut){case"bigint":case"string":case"number":At=!0;break;case"object":switch(R.$$typeof){case r:case t:At=!0;break;case g:return At=R._init,k(At(R._payload),Y,X,Q,lt)}}if(At)return lt=lt(R),At=Q===""?"."+Ct(R,0):Q,F(lt)?(X="",At!=null&&(X=At.replace(Et,"$&/")+"/"),k(lt,Y,X,"",function(bn){return bn})):lt!=null&&($(lt)&&(lt=q(lt,X+(lt.key==null||R&&R.key===lt.key?"":(""+lt.key).replace(Et,"$&/")+"/")+At)),Y.push(lt)),1;At=0;var oe=Q===""?".":Q+":";if(F(R))for(var Lt=0;Lt<R.length;Lt++)Q=R[Lt],ut=oe+Ct(Q,Lt),At+=k(Q,Y,X,ut,lt);else if(Lt=b(R),typeof Lt=="function")for(R=Lt.call(R),Lt=0;!(Q=R.next()).done;)Q=Q.value,ut=oe+Ct(Q,Lt++),At+=k(Q,Y,X,ut,lt);else if(ut==="object"){if(typeof R.then=="function")return k(ae(R),Y,X,Q,lt);throw Y=String(R),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return At}function j(R,Y,X){if(R==null)return R;var Q=[],lt=0;return k(R,Q,"","",function(ut){return Y.call(X,ut,lt++)}),Q}function at(R){if(R._status===-1){var Y=R._result;Y=Y(),Y.then(function(X){(R._status===0||R._status===-1)&&(R._status=1,R._result=X)},function(X){(R._status===0||R._status===-1)&&(R._status=2,R._result=X)}),R._status===-1&&(R._status=0,R._result=Y)}if(R._status===1)return R._result.default;throw R._result}var et=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},yt={map:j,forEach:function(R,Y,X){j(R,function(){Y.apply(this,arguments)},X)},count:function(R){var Y=0;return j(R,function(){Y++}),Y},toArray:function(R){return j(R,function(Y){return Y})||[]},only:function(R){if(!$(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ct.Activity=y,ct.Children=yt,ct.Component=M,ct.Fragment=n,ct.Profiler=o,ct.PureComponent=O,ct.StrictMode=s,ct.Suspense=d,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ct.__COMPILER_RUNTIME={__proto__:null,c:function(R){return N.H.useMemoCache(R)}},ct.cache=function(R){return function(){return R.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(R,Y,X){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Q=A({},R.props),lt=R.key;if(Y!=null)for(ut in Y.key!==void 0&&(lt=""+Y.key),Y)!tt.call(Y,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&Y.ref===void 0||(Q[ut]=Y[ut]);var ut=arguments.length-2;if(ut===1)Q.children=X;else if(1<ut){for(var At=Array(ut),oe=0;oe<ut;oe++)At[oe]=arguments[oe+2];Q.children=At}return W(R.type,lt,Q)},ct.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:c,_context:R},R},ct.createElement=function(R,Y,X){var Q,lt={},ut=null;if(Y!=null)for(Q in Y.key!==void 0&&(ut=""+Y.key),Y)tt.call(Y,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(lt[Q]=Y[Q]);var At=arguments.length-2;if(At===1)lt.children=X;else if(1<At){for(var oe=Array(At),Lt=0;Lt<At;Lt++)oe[Lt]=arguments[Lt+2];lt.children=oe}if(R&&R.defaultProps)for(Q in At=R.defaultProps,At)lt[Q]===void 0&&(lt[Q]=At[Q]);return W(R,ut,lt)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(R){return{$$typeof:h,render:R}},ct.isValidElement=$,ct.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:at}},ct.memo=function(R,Y){return{$$typeof:m,type:R,compare:Y===void 0?null:Y}},ct.startTransition=function(R){var Y=N.T,X={};N.T=X;try{var Q=R(),lt=N.S;lt!==null&&lt(X,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(V,et)}catch(ut){et(ut)}finally{Y!==null&&X.types!==null&&(Y.types=X.types),N.T=Y}},ct.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ct.use=function(R){return N.H.use(R)},ct.useActionState=function(R,Y,X){return N.H.useActionState(R,Y,X)},ct.useCallback=function(R,Y){return N.H.useCallback(R,Y)},ct.useContext=function(R){return N.H.useContext(R)},ct.useDebugValue=function(){},ct.useDeferredValue=function(R,Y){return N.H.useDeferredValue(R,Y)},ct.useEffect=function(R,Y){return N.H.useEffect(R,Y)},ct.useEffectEvent=function(R){return N.H.useEffectEvent(R)},ct.useId=function(){return N.H.useId()},ct.useImperativeHandle=function(R,Y,X){return N.H.useImperativeHandle(R,Y,X)},ct.useInsertionEffect=function(R,Y){return N.H.useInsertionEffect(R,Y)},ct.useLayoutEffect=function(R,Y){return N.H.useLayoutEffect(R,Y)},ct.useMemo=function(R,Y){return N.H.useMemo(R,Y)},ct.useOptimistic=function(R,Y){return N.H.useOptimistic(R,Y)},ct.useReducer=function(R,Y,X){return N.H.useReducer(R,Y,X)},ct.useRef=function(R){return N.H.useRef(R)},ct.useState=function(R){return N.H.useState(R)},ct.useSyncExternalStore=function(R,Y,X){return N.H.useSyncExternalStore(R,Y,X)},ct.useTransition=function(){return N.H.useTransition()},ct.version="19.2.4",ct}var Cg;function ef(){return Cg||(Cg=1,Xu.exports=Yv()),Xu.exports}var ie=ef();const na=ba(ie);var qu={exports:{}},qr={},$u={exports:{}},Qu={};var Ag;function Iv(){return Ag||(Ag=1,(function(r){function t(k,j){var at=k.length;k.push(j);t:for(;0<at;){var et=at-1>>>1,yt=k[et];if(0<o(yt,j))k[et]=j,k[at]=yt,at=et;else break t}}function n(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var j=k[0],at=k.pop();if(at!==j){k[0]=at;t:for(var et=0,yt=k.length,R=yt>>>1;et<R;){var Y=2*(et+1)-1,X=k[Y],Q=Y+1,lt=k[Q];if(0>o(X,at))Q<yt&&0>o(lt,X)?(k[et]=lt,k[Q]=at,et=Q):(k[et]=X,k[Y]=at,et=Y);else if(Q<yt&&0>o(lt,at))k[et]=lt,k[Q]=at,et=Q;else break t}}return j}function o(k,j){var at=k.sortIndex-j.sortIndex;return at!==0?at:k.id-j.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],m=[],g=1,y=null,x=3,b=!1,S=!1,A=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function P(k){for(var j=n(m);j!==null;){if(j.callback===null)s(m);else if(j.startTime<=k)s(m),j.sortIndex=j.expirationTime,t(d,j);else break;j=n(m)}}function F(k){if(A=!1,P(k),!S)if(n(d)!==null)S=!0,V||(V=!0,dt());else{var j=n(m);j!==null&&ae(F,j.startTime-k)}}var V=!1,N=-1,tt=5,W=-1;function q(){return C?!0:!(r.unstable_now()-W<tt)}function $(){if(C=!1,V){var k=r.unstable_now();W=k;var j=!0;try{t:{S=!1,A&&(A=!1,w(N),N=-1),b=!0;var at=x;try{e:{for(P(k),y=n(d);y!==null&&!(y.expirationTime>k&&q());){var et=y.callback;if(typeof et=="function"){y.callback=null,x=y.priorityLevel;var yt=et(y.expirationTime<=k);if(k=r.unstable_now(),typeof yt=="function"){y.callback=yt,P(k),j=!0;break e}y===n(d)&&s(d),P(k)}else s(d);y=n(d)}if(y!==null)j=!0;else{var R=n(m);R!==null&&ae(F,R.startTime-k),j=!1}}break t}finally{y=null,x=at,b=!1}j=void 0}}finally{j?dt():V=!1}}}var dt;if(typeof O=="function")dt=function(){O($)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,Ct=Et.port2;Et.port1.onmessage=$,dt=function(){Ct.postMessage(null)}}else dt=function(){M($,0)};function ae(k,j){N=M(function(){k(r.unstable_now())},j)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(k){k.callback=null},r.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tt=0<k?Math.floor(1e3/k):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(k){switch(x){case 1:case 2:case 3:var j=3;break;default:j=x}var at=x;x=j;try{return k()}finally{x=at}},r.unstable_requestPaint=function(){C=!0},r.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var at=x;x=k;try{return j()}finally{x=at}},r.unstable_scheduleCallback=function(k,j,at){var et=r.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?et+at:et):at=et,k){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=at+yt,k={id:g++,callback:j,priorityLevel:k,startTime:at,expirationTime:yt,sortIndex:-1},at>et?(k.sortIndex=at,t(m,k),n(d)===null&&k===n(m)&&(A?(w(N),N=-1):A=!0,ae(F,at-et))):(k.sortIndex=yt,t(d,k),S||b||(S=!0,V||(V=!0,dt()))),k},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(k){var j=x;return function(){var at=x;x=j;try{return k.apply(this,arguments)}finally{x=at}}}})(Qu)),Qu}var Tg;function Vv(){return Tg||(Tg=1,$u.exports=Iv()),$u.exports}var Zu={exports:{}},_e={};var Mg;function Fv(){if(Mg)return _e;Mg=1;var r=ef();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(d,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:d,containerInfo:m,implementation:g}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_e.createPortal=function(d,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(d,m,null,g)},_e.flushSync=function(d){var m=u.T,g=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=m,s.p=g,s.d.f()}},_e.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(d,m))},_e.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},_e.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var g=m.as,y=h(g,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?s.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:b}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_e.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=h(m.as,m.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(d)},_e.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=h(g,m.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_e.preloadModule=function(d,m){if(typeof d=="string")if(m){var g=h(m.as,m.crossOrigin);s.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(d)},_e.requestFormReset=function(d){s.d.r(d)},_e.unstable_batchedUpdates=function(d,m){return d(m)},_e.useFormState=function(d,m,g){return u.H.useFormState(d,m,g)},_e.useFormStatus=function(){return u.H.useHostTransitionStatus()},_e.version="19.2.4",_e}var Eg;function Xv(){if(Eg)return Zu.exports;Eg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Zu.exports=Fv(),Zu.exports}var Rg;function qv(){if(Rg)return qr;Rg=1;var r=Vv(),t=ef(),n=Xv();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function u(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(c(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return d(f),e;if(p===l)return d(f),i;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=p;else{for(var _=!1,v=f.child;v;){if(v===a){_=!0,a=f,l=p;break}if(v===l){_=!0,l=f,a=p;break}v=v.sibling}if(!_){for(v=p.child;v;){if(v===a){_=!0,a=p,l=f;break}if(v===l){_=!0,l=p,a=f;break}v=v.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function dt(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Symbol.for("react.client.reference");function Ct(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Et?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case M:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case V:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case O:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case P:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return i=e.displayName||null,i!==null?i:Ct(e.type)||"Memo";case tt:i=e._payload,e=e._init;try{return Ct(e(i))}catch{}}return null}var ae=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},et=[],yt=-1;function R(e){return{current:e}}function Y(e){0>yt||(e.current=et[yt],et[yt]=null,yt--)}function X(e,i){yt++,et[yt]=e.current,e.current=i}var Q=R(null),lt=R(null),ut=R(null),At=R(null);function oe(e,i){switch(X(ut,i),X(lt,e),X(Q,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Im(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Im(i),e=Vm(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(Q),X(Q,e)}function Lt(){Y(Q),Y(lt),Y(ut)}function bn(e){e.memoizedState!==null&&X(At,e);var i=Q.current,a=Vm(i,e.type);i!==a&&(X(lt,e),X(Q,a))}function Kn(e){lt.current===e&&(Y(Q),Y(lt)),At.current===e&&(Y(At),Yr._currentValue=at)}var cn,vn;function Ce(e){if(cn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);cn=i&&i[1]||"",vn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+e+vn}var un=!1;function Js(e,i){if(!e||un)return"";un=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(L){var U=L}Reflect.construct(e,[],I)}else{try{I.call()}catch(L){U=L}e.call(I.prototype)}}else{try{throw Error()}catch(L){U=L}(I=e())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(L){if(L&&U&&typeof L.stack=="string")return[L.stack,U.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),_=p[0],v=p[1];if(_&&v){var T=_.split(`
`),B=v.split(`
`);for(f=l=0;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===T.length||f===B.length)for(l=T.length-1,f=B.length-1;1<=l&&0<=f&&T[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(T[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||T[l]!==B[f]){var G=`
`+T[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=f);break}}}finally{un=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ce(a):""}function Sa(e,i){switch(e.tag){case 26:case 27:case 5:return Ce(e.type);case 16:return Ce("Lazy");case 13:return e.child!==i&&i!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Js(e.type,!1);case 11:return Js(e.type.render,!1);case 1:return Js(e.type,!0);case 31:return Ce("Activity");default:return""}}function Ca(e){try{var i="",a=null;do i+=Sa(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Aa=Object.prototype.hasOwnProperty,Dl=r.unstable_scheduleCallback,Ol=r.unstable_cancelCallback,yx=r.unstable_shouldYield,_x=r.unstable_requestPaint,Le=r.unstable_now,xx=r.unstable_getCurrentPriorityLevel,vf=r.unstable_ImmediatePriority,Sf=r.unstable_UserBlockingPriority,Ta=r.unstable_NormalPriority,bx=r.unstable_LowPriority,Cf=r.unstable_IdlePriority,vx=r.log,Sx=r.unstable_setDisableYieldValue,tr=null,Ne=null;function Wn(e){if(typeof vx=="function"&&Sx(e),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(tr,e)}catch{}}var Ge=Math.clz32?Math.clz32:Tx,Cx=Math.log,Ax=Math.LN2;function Tx(e){return e>>>=0,e===0?32:31-(Cx(e)/Ax|0)|0}var Ma=256,Ea=262144,Ra=4194304;function Ei(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wa(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,p=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var v=l&134217727;return v!==0?(l=v&~p,l!==0?f=Ei(l):(_&=v,_!==0?f=Ei(_):a||(a=v&~e,a!==0&&(f=Ei(a))))):(v=l&~p,v!==0?f=Ei(v):_!==0?f=Ei(_):a||(a=l&~e,a!==0&&(f=Ei(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function er(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Mx(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Af(){var e=Ra;return Ra<<=1,(Ra&62914560)===0&&(Ra=4194304),e}function zl(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function nr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ex(e,i,a,l,f,p){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,T=e.expirationTimes,B=e.hiddenUpdates;for(a=_&~a;0<a;){var G=31-Ge(a),I=1<<G;v[G]=0,T[G]=-1;var U=B[G];if(U!==null)for(B[G]=null,G=0;G<U.length;G++){var L=U[G];L!==null&&(L.lane&=-536870913)}a&=~I}l!==0&&Tf(e,l,0),p!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=p&~(_&~i))}function Tf(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Ge(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Mf(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Ge(a),f=1<<l;f&i|e[l]&i&&(e[l]|=i),a&=~f}}function Ef(e,i){var a=i&-i;return a=(a&42)!==0?1:Bl(a),(a&(e.suspendedLanes|i))!==0?0:a}function Bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ul(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Rf(){var e=j.p;return e!==0?e:(e=window.event,e===void 0?32:dg(e.type))}function wf(e,i){var a=j.p;try{return j.p=e,i()}finally{j.p=a}}var Jn=Math.random().toString(36).slice(2),he="__reactFiber$"+Jn,Ee="__reactProps$"+Jn,ns="__reactContainer$"+Jn,Pl="__reactEvents$"+Jn,Rx="__reactListeners$"+Jn,wx="__reactHandles$"+Jn,kf="__reactResources$"+Jn,ir="__reactMarker$"+Jn;function Ll(e){delete e[he],delete e[Ee],delete e[Pl],delete e[Rx],delete e[wx]}function is(e){var i=e[he];if(i)return i;for(var a=e.parentNode;a;){if(i=a[ns]||a[he]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Km(e);e!==null;){if(a=e[he])return a;e=Km(e)}return i}e=a,a=e.parentNode}return null}function ss(e){if(e=e[he]||e[ns]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function sr(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function rs(e){var i=e[kf];return i||(i=e[kf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function le(e){e[ir]=!0}var Df=new Set,Of={};function Ri(e,i){as(e,i),as(e+"Capture",i)}function as(e,i){for(Of[e]=i,e=0;e<i.length;e++)Df.add(i[e])}var kx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zf={},Bf={};function Dx(e){return Aa.call(Bf,e)?!0:Aa.call(zf,e)?!1:kx.test(e)?Bf[e]=!0:(zf[e]=!0,!1)}function ka(e,i,a){if(Dx(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Da(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function wn(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function Qe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Uf(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ox(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,p.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Nl(e){if(!e._valueTracker){var i=Uf(e)?"checked":"value";e._valueTracker=Ox(e,i,""+e[i])}}function Pf(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=Uf(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zx=/[\n"\\]/g;function Ze(e){return e.replace(zx,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Gl(e,i,a,l,f,p,_,v){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Qe(i)):e.value!==""+Qe(i)&&(e.value=""+Qe(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?jl(e,_,Qe(i)):a!=null?jl(e,_,Qe(a)):l!=null&&e.removeAttribute("value"),f==null&&p!=null&&(e.defaultChecked=!!p),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Qe(v):e.removeAttribute("name")}function Lf(e,i,a,l,f,p,_,v){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Nl(e);return}a=a!=null?""+Qe(a):"",i=i!=null?""+Qe(i):a,v||i===e.value||(e.value=i),e.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=v?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Nl(e)}function jl(e,i,a){i==="number"&&Oa(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function os(e,i,a,l){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Qe(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Nf(e,i,a){if(i!=null&&(i=""+Qe(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Qe(a):""}function Gf(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ae(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Qe(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Nl(e)}function ls(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Bx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jf(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Bx.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Hf(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&jf(e,f,l)}else for(var p in i)i.hasOwnProperty(p)&&jf(e,p,i[p])}function Hl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ux=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Px=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(e){return Px.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kn(){}var Yl=null;function Il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,us=null;function Yf(e){var i=ss(e);if(i&&(e=i.stateNode)){var a=e[Ee]||null;t:switch(e=i.stateNode,i.type){case"input":if(Gl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ze(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var f=l[Ee]||null;if(!f)throw Error(s(90));Gl(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Pf(l)}break t;case"textarea":Nf(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&os(e,!!a.multiple,i,!1)}}}var Vl=!1;function If(e,i,a){if(Vl)return e(i,a);Vl=!0;try{var l=e(i);return l}finally{if(Vl=!1,(cs!==null||us!==null)&&(vo(),cs&&(i=cs,e=us,us=cs=null,Yf(i),e)))for(i=0;i<e.length;i++)Yf(e[i])}}function rr(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Ee]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=!1;if(Dn)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Fl=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Fl=!1}var ti=null,Xl=null,Ba=null;function Vf(){if(Ba)return Ba;var e,i=Xl,a=i.length,l,f="value"in ti?ti.value:ti.textContent,p=f.length;for(e=0;e<a&&i[e]===f[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===f[p-l];l++);return Ba=f.slice(e,1<l?1-l:void 0)}function Ua(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Pa(){return!0}function Ff(){return!1}function Re(e){function i(a,l,f,p,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(p):p[v]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Pa:Ff,this.isPropagationStopped=Ff,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),i}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Re(wi),or=y({},wi,{view:0,detail:0}),Lx=Re(or),ql,$l,lr,Na=y({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&e.type==="mousemove"?(ql=e.screenX-lr.screenX,$l=e.screenY-lr.screenY):$l=ql=0,lr=e),ql)},movementY:function(e){return"movementY"in e?e.movementY:$l}}),Xf=Re(Na),Nx=y({},Na,{dataTransfer:0}),Gx=Re(Nx),jx=y({},or,{relatedTarget:0}),Ql=Re(jx),Hx=y({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Yx=Re(Hx),Ix=y({},wi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vx=Re(Ix),Fx=y({},wi,{data:0}),qf=Re(Fx),Xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qx(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=$x[e])?!!i[e]:!1}function Zl(){return Qx}var Zx=y({},or,{key:function(e){if(e.key){var i=Xx[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ua(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(e){return e.type==="keypress"?Ua(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ua(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kx=Re(Zx),Wx=y({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$f=Re(Wx),Jx=y({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),tb=Re(Jx),eb=y({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),nb=Re(eb),ib=y({},Na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sb=Re(ib),rb=y({},wi,{newState:0,oldState:0}),ab=Re(rb),ob=[9,13,27,32],Kl=Dn&&"CompositionEvent"in window,cr=null;Dn&&"documentMode"in document&&(cr=document.documentMode);var lb=Dn&&"TextEvent"in window&&!cr,Qf=Dn&&(!Kl||cr&&8<cr&&11>=cr),Zf=" ",Kf=!1;function Wf(e,i){switch(e){case"keyup":return ob.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hs=!1;function cb(e,i){switch(e){case"compositionend":return Jf(i);case"keypress":return i.which!==32?null:(Kf=!0,Zf);case"textInput":return e=i.data,e===Zf&&Kf?null:e;default:return null}}function ub(e,i){if(hs)return e==="compositionend"||!Kl&&Wf(e,i)?(e=Vf(),Ba=Xl=ti=null,hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Qf&&i.locale!=="ko"?null:i.data;default:return null}}var hb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!hb[e.type]:i==="textarea"}function ed(e,i,a,l){cs?us?us.push(l):us=[l]:cs=l,i=Ro(i,"onChange"),0<i.length&&(a=new La("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var ur=null,hr=null;function fb(e){Lm(e,0)}function Ga(e){var i=sr(e);if(Pf(i))return e}function nd(e,i){if(e==="change")return i}var id=!1;if(Dn){var Wl;if(Dn){var Jl="oninput"in document;if(!Jl){var sd=document.createElement("div");sd.setAttribute("oninput","return;"),Jl=typeof sd.oninput=="function"}Wl=Jl}else Wl=!1;id=Wl&&(!document.documentMode||9<document.documentMode)}function rd(){ur&&(ur.detachEvent("onpropertychange",ad),hr=ur=null)}function ad(e){if(e.propertyName==="value"&&Ga(hr)){var i=[];ed(i,hr,e,Il(e)),If(fb,i)}}function db(e,i,a){e==="focusin"?(rd(),ur=i,hr=a,ur.attachEvent("onpropertychange",ad)):e==="focusout"&&rd()}function pb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ga(hr)}function mb(e,i){if(e==="click")return Ga(i)}function gb(e,i){if(e==="input"||e==="change")return Ga(i)}function yb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var je=typeof Object.is=="function"?Object.is:yb;function fr(e,i){if(je(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Aa.call(i,f)||!je(e[f],i[f]))return!1}return!0}function od(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ld(e,i){var a=od(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=od(a)}}function cd(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?cd(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function ud(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Oa(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Oa(e.document)}return i}function tc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var _b=Dn&&"documentMode"in document&&11>=document.documentMode,fs=null,ec=null,dr=null,nc=!1;function hd(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nc||fs==null||fs!==Oa(l)||(l=fs,"selectionStart"in l&&tc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dr&&fr(dr,l)||(dr=l,l=Ro(ec,"onSelect"),0<l.length&&(i=new La("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=fs)))}function ki(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ds={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},ic={},fd={};Dn&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Di(e){if(ic[e])return ic[e];if(!ds[e])return e;var i=ds[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in fd)return ic[e]=i[a];return e}var dd=Di("animationend"),pd=Di("animationiteration"),md=Di("animationstart"),xb=Di("transitionrun"),bb=Di("transitionstart"),vb=Di("transitioncancel"),gd=Di("transitionend"),yd=new Map,sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sc.push("scrollEnd");function hn(e,i){yd.set(e,i),Ri(i,[e])}var ja=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ke=[],ps=0,rc=0;function Ha(){for(var e=ps,i=rc=ps=0;i<e;){var a=Ke[i];Ke[i++]=null;var l=Ke[i];Ke[i++]=null;var f=Ke[i];Ke[i++]=null;var p=Ke[i];if(Ke[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}p!==0&&_d(a,f,p)}}function Ya(e,i,a,l){Ke[ps++]=e,Ke[ps++]=i,Ke[ps++]=a,Ke[ps++]=l,rc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ac(e,i,a,l){return Ya(e,i,a,l),Ia(e)}function Oi(e,i){return Ya(e,null,null,i),Ia(e)}function _d(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=e.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(f=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,f&&i!==null&&(f=31-Ge(a),e=p.hiddenUpdates,l=e[f],l===null?e[f]=[i]:l.push(i),i.lane=a|536870912),p):null}function Ia(e){if(50<Ur)throw Ur=0,mu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ms={};function Sb(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(e,i,a,l){return new Sb(e,i,a,l)}function oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function On(e,i){var a=e.alternate;return a===null?(a=He(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function xd(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Va(e,i,a,l,f,p){var _=0;if(l=e,typeof e=="function")oc(e)&&(_=1);else if(typeof e=="string")_=Ev(e,a,Q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case W:return e=He(31,a,i,f),e.elementType=W,e.lanes=p,e;case A:return zi(a.children,f,p,i);case C:_=8,f|=24;break;case M:return e=He(12,a,i,f|2),e.elementType=M,e.lanes=p,e;case F:return e=He(13,a,i,f),e.elementType=F,e.lanes=p,e;case V:return e=He(19,a,i,f),e.elementType=V,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:_=10;break t;case w:_=9;break t;case P:_=11;break t;case N:_=14;break t;case tt:_=16,l=null;break t}_=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=He(_,a,i,f),i.elementType=e,i.type=l,i.lanes=p,i}function zi(e,i,a,l){return e=He(7,e,l,i),e.lanes=a,e}function lc(e,i,a){return e=He(6,e,null,i),e.lanes=a,e}function bd(e){var i=He(18,null,null,0);return i.stateNode=e,i}function cc(e,i,a){return i=He(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var vd=new WeakMap;function We(e,i){if(typeof e=="object"&&e!==null){var a=vd.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Ca(i)},vd.set(e,i),i)}return{value:e,source:i,stack:Ca(i)}}var gs=[],ys=0,Fa=null,pr=0,Je=[],tn=0,ei=null,Sn=1,Cn="";function zn(e,i){gs[ys++]=pr,gs[ys++]=Fa,Fa=e,pr=i}function Sd(e,i,a){Je[tn++]=Sn,Je[tn++]=Cn,Je[tn++]=ei,ei=e;var l=Sn;e=Cn;var f=32-Ge(l)-1;l&=~(1<<f),a+=1;var p=32-Ge(i)+f;if(30<p){var _=f-f%5;p=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Sn=1<<32-Ge(i)+f|a<<f|l,Cn=p+e}else Sn=1<<p|a<<f|l,Cn=e}function uc(e){e.return!==null&&(zn(e,1),Sd(e,1,0))}function hc(e){for(;e===Fa;)Fa=gs[--ys],gs[ys]=null,pr=gs[--ys],gs[ys]=null;for(;e===ei;)ei=Je[--tn],Je[tn]=null,Cn=Je[--tn],Je[tn]=null,Sn=Je[--tn],Je[tn]=null}function Cd(e,i){Je[tn++]=Sn,Je[tn++]=Cn,Je[tn++]=ei,Sn=i.id,Cn=i.overflow,ei=e}var fe=null,Nt=null,vt=!1,ni=null,en=!1,fc=Error(s(519));function ii(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mr(We(i,e)),fc}function Ad(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[he]=e,i[Ee]=l,a){case"dialog":mt("cancel",i),mt("close",i);break;case"iframe":case"object":case"embed":mt("load",i);break;case"video":case"audio":for(a=0;a<Lr.length;a++)mt(Lr[a],i);break;case"source":mt("error",i);break;case"img":case"image":case"link":mt("error",i),mt("load",i);break;case"details":mt("toggle",i);break;case"input":mt("invalid",i),Lf(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":mt("invalid",i);break;case"textarea":mt("invalid",i),Gf(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Hm(i.textContent,a)?(l.popover!=null&&(mt("beforetoggle",i),mt("toggle",i)),l.onScroll!=null&&mt("scroll",i),l.onScrollEnd!=null&&mt("scrollend",i),l.onClick!=null&&(i.onclick=kn),i=!0):i=!1,i||ii(e,!0)}function Td(e){for(fe=e.return;fe;)switch(fe.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:fe=fe.return}}function _s(e){if(e!==fe)return!1;if(!vt)return Td(e),vt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ku(e.type,e.memoizedProps)),a=!a),a&&Nt&&ii(e),Td(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Nt=Zm(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Nt=Zm(e)}else i===27?(i=Nt,yi(e.type)?(e=Uu,Uu=null,Nt=e):Nt=i):Nt=fe?sn(e.stateNode.nextSibling):null;return!0}function Bi(){Nt=fe=null,vt=!1}function dc(){var e=ni;return e!==null&&(Oe===null?Oe=e:Oe.push.apply(Oe,e),ni=null),e}function mr(e){ni===null?ni=[e]:ni.push(e)}var pc=R(null),Ui=null,Bn=null;function si(e,i,a){X(pc,i._currentValue),i._currentValue=a}function Un(e){e._currentValue=pc.current,Y(pc)}function mc(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function gc(e,i,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var p=f.dependencies;if(p!==null){var _=f.child;p=p.firstContext;t:for(;p!==null;){var v=p;p=f;for(var T=0;T<i.length;T++)if(v.context===i[T]){p.lanes|=a,v=p.alternate,v!==null&&(v.lanes|=a),mc(p.return,a,e),l||(_=null);break t}p=v.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,p=_.alternate,p!==null&&(p.lanes|=a),mc(_,a,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function xs(e,i,a,l){e=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var v=f.type;je(f.pendingProps.value,_.value)||(e!==null?e.push(v):e=[v])}}else if(f===At.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Yr):e=[Yr])}f=f.return}e!==null&&gc(i,e,a,l),i.flags|=262144}function Xa(e){for(e=e.firstContext;e!==null;){if(!je(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){Ui=e,Bn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function de(e){return Md(Ui,e)}function qa(e,i){return Ui===null&&Pi(e),Md(e,i)}function Md(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Bn===null){if(e===null)throw Error(s(308));Bn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Bn=Bn.next=i;return a}var Cb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Ab=r.unstable_scheduleCallback,Tb=r.unstable_NormalPriority,Wt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yc(){return{controller:new Cb,data:new Map,refCount:0}}function gr(e){e.refCount--,e.refCount===0&&Ab(Tb,function(){e.controller.abort()})}var yr=null,_c=0,bs=0,vs=null;function Mb(e,i){if(yr===null){var a=yr=[];_c=0,bs=vu(),vs={status:"pending",value:void 0,then:function(l){a.push(l)}}}return _c++,i.then(Ed,Ed),i}function Ed(){if(--_c===0&&yr!==null){vs!==null&&(vs.status="fulfilled");var e=yr;yr=null,bs=0,vs=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Eb(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Rd=k.S;k.S=function(e,i){hm=Le(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Mb(e,i),Rd!==null&&Rd(e,i)};var Li=R(null);function xc(){var e=Li.current;return e!==null?e:Pt.pooledCache}function $a(e,i){i===null?X(Li,Li.current):X(Li,i.pool)}function wd(){var e=xc();return e===null?null:{parent:Wt._currentValue,pool:e}}var Ss=Error(s(460)),bc=Error(s(474)),Qa=Error(s(542)),Za={then:function(){}};function kd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Dd(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(kn,kn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,zd(e),e;default:if(typeof i.status=="string")i.then(kn,kn);else{if(e=Pt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,zd(e),e}throw Gi=i,Ss}}function Ni(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gi=a,Ss):a}}var Gi=null;function Od(){if(Gi===null)throw Error(s(459));var e=Gi;return Gi=null,e}function zd(e){if(e===Ss||e===Qa)throw Error(s(483))}var Cs=null,_r=0;function Ka(e){var i=_r;return _r+=1,Cs===null&&(Cs=[]),Dd(Cs,e,i)}function xr(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Wa(e,i){throw i.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Bd(e){function i(D,E){if(e){var z=D.deletions;z===null?(D.deletions=[E],D.flags|=16):z.push(E)}}function a(D,E){if(!e)return null;for(;E!==null;)i(D,E),E=E.sibling;return null}function l(D){for(var E=new Map;D!==null;)D.key!==null?E.set(D.key,D):E.set(D.index,D),D=D.sibling;return E}function f(D,E){return D=On(D,E),D.index=0,D.sibling=null,D}function p(D,E,z){return D.index=z,e?(z=D.alternate,z!==null?(z=z.index,z<E?(D.flags|=67108866,E):z):(D.flags|=67108866,E)):(D.flags|=1048576,E)}function _(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function v(D,E,z,H){return E===null||E.tag!==6?(E=lc(z,D.mode,H),E.return=D,E):(E=f(E,z),E.return=D,E)}function T(D,E,z,H){var st=z.type;return st===A?G(D,E,z.props.children,H,z.key):E!==null&&(E.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===tt&&Ni(st)===E.type)?(E=f(E,z.props),xr(E,z),E.return=D,E):(E=Va(z.type,z.key,z.props,null,D.mode,H),xr(E,z),E.return=D,E)}function B(D,E,z,H){return E===null||E.tag!==4||E.stateNode.containerInfo!==z.containerInfo||E.stateNode.implementation!==z.implementation?(E=cc(z,D.mode,H),E.return=D,E):(E=f(E,z.children||[]),E.return=D,E)}function G(D,E,z,H,st){return E===null||E.tag!==7?(E=zi(z,D.mode,H,st),E.return=D,E):(E=f(E,z),E.return=D,E)}function I(D,E,z){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=lc(""+E,D.mode,z),E.return=D,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case b:return z=Va(E.type,E.key,E.props,null,D.mode,z),xr(z,E),z.return=D,z;case S:return E=cc(E,D.mode,z),E.return=D,E;case tt:return E=Ni(E),I(D,E,z)}if(ae(E)||dt(E))return E=zi(E,D.mode,z,null),E.return=D,E;if(typeof E.then=="function")return I(D,Ka(E),z);if(E.$$typeof===O)return I(D,qa(D,E),z);Wa(D,E)}return null}function U(D,E,z,H){var st=E!==null?E.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return st!==null?null:v(D,E,""+z,H);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return z.key===st?T(D,E,z,H):null;case S:return z.key===st?B(D,E,z,H):null;case tt:return z=Ni(z),U(D,E,z,H)}if(ae(z)||dt(z))return st!==null?null:G(D,E,z,H,null);if(typeof z.then=="function")return U(D,E,Ka(z),H);if(z.$$typeof===O)return U(D,E,qa(D,z),H);Wa(D,z)}return null}function L(D,E,z,H,st){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return D=D.get(z)||null,v(E,D,""+H,st);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return D=D.get(H.key===null?z:H.key)||null,T(E,D,H,st);case S:return D=D.get(H.key===null?z:H.key)||null,B(E,D,H,st);case tt:return H=Ni(H),L(D,E,z,H,st)}if(ae(H)||dt(H))return D=D.get(z)||null,G(E,D,H,st,null);if(typeof H.then=="function")return L(D,E,z,Ka(H),st);if(H.$$typeof===O)return L(D,E,z,qa(E,H),st);Wa(E,H)}return null}function Z(D,E,z,H){for(var st=null,Tt=null,J=E,ft=E=0,xt=null;J!==null&&ft<z.length;ft++){J.index>ft?(xt=J,J=null):xt=J.sibling;var Mt=U(D,J,z[ft],H);if(Mt===null){J===null&&(J=xt);break}e&&J&&Mt.alternate===null&&i(D,J),E=p(Mt,E,ft),Tt===null?st=Mt:Tt.sibling=Mt,Tt=Mt,J=xt}if(ft===z.length)return a(D,J),vt&&zn(D,ft),st;if(J===null){for(;ft<z.length;ft++)J=I(D,z[ft],H),J!==null&&(E=p(J,E,ft),Tt===null?st=J:Tt.sibling=J,Tt=J);return vt&&zn(D,ft),st}for(J=l(J);ft<z.length;ft++)xt=L(J,D,ft,z[ft],H),xt!==null&&(e&&xt.alternate!==null&&J.delete(xt.key===null?ft:xt.key),E=p(xt,E,ft),Tt===null?st=xt:Tt.sibling=xt,Tt=xt);return e&&J.forEach(function(Si){return i(D,Si)}),vt&&zn(D,ft),st}function ot(D,E,z,H){if(z==null)throw Error(s(151));for(var st=null,Tt=null,J=E,ft=E=0,xt=null,Mt=z.next();J!==null&&!Mt.done;ft++,Mt=z.next()){J.index>ft?(xt=J,J=null):xt=J.sibling;var Si=U(D,J,Mt.value,H);if(Si===null){J===null&&(J=xt);break}e&&J&&Si.alternate===null&&i(D,J),E=p(Si,E,ft),Tt===null?st=Si:Tt.sibling=Si,Tt=Si,J=xt}if(Mt.done)return a(D,J),vt&&zn(D,ft),st;if(J===null){for(;!Mt.done;ft++,Mt=z.next())Mt=I(D,Mt.value,H),Mt!==null&&(E=p(Mt,E,ft),Tt===null?st=Mt:Tt.sibling=Mt,Tt=Mt);return vt&&zn(D,ft),st}for(J=l(J);!Mt.done;ft++,Mt=z.next())Mt=L(J,D,ft,Mt.value,H),Mt!==null&&(e&&Mt.alternate!==null&&J.delete(Mt.key===null?ft:Mt.key),E=p(Mt,E,ft),Tt===null?st=Mt:Tt.sibling=Mt,Tt=Mt);return e&&J.forEach(function(Nv){return i(D,Nv)}),vt&&zn(D,ft),st}function zt(D,E,z,H){if(typeof z=="object"&&z!==null&&z.type===A&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case b:t:{for(var st=z.key;E!==null;){if(E.key===st){if(st=z.type,st===A){if(E.tag===7){a(D,E.sibling),H=f(E,z.props.children),H.return=D,D=H;break t}}else if(E.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===tt&&Ni(st)===E.type){a(D,E.sibling),H=f(E,z.props),xr(H,z),H.return=D,D=H;break t}a(D,E);break}else i(D,E);E=E.sibling}z.type===A?(H=zi(z.props.children,D.mode,H,z.key),H.return=D,D=H):(H=Va(z.type,z.key,z.props,null,D.mode,H),xr(H,z),H.return=D,D=H)}return _(D);case S:t:{for(st=z.key;E!==null;){if(E.key===st)if(E.tag===4&&E.stateNode.containerInfo===z.containerInfo&&E.stateNode.implementation===z.implementation){a(D,E.sibling),H=f(E,z.children||[]),H.return=D,D=H;break t}else{a(D,E);break}else i(D,E);E=E.sibling}H=cc(z,D.mode,H),H.return=D,D=H}return _(D);case tt:return z=Ni(z),zt(D,E,z,H)}if(ae(z))return Z(D,E,z,H);if(dt(z)){if(st=dt(z),typeof st!="function")throw Error(s(150));return z=st.call(z),ot(D,E,z,H)}if(typeof z.then=="function")return zt(D,E,Ka(z),H);if(z.$$typeof===O)return zt(D,E,qa(D,z),H);Wa(D,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,E!==null&&E.tag===6?(a(D,E.sibling),H=f(E,z),H.return=D,D=H):(a(D,E),H=lc(z,D.mode,H),H.return=D,D=H),_(D)):a(D,E)}return function(D,E,z,H){try{_r=0;var st=zt(D,E,z,H);return Cs=null,st}catch(J){if(J===Ss||J===Qa)throw J;var Tt=He(29,J,null,D.mode);return Tt.lanes=H,Tt.return=D,Tt}}}var ji=Bd(!0),Ud=Bd(!1),ri=!1;function vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ai(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oi(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Rt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Ia(e),_d(e,null,a),i}return Ya(e,l,i,a),Ia(e)}function br(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Mf(e,a)}}function Cc(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Ac=!1;function vr(){if(Ac){var e=vs;if(e!==null)throw e}}function Sr(e,i,a,l){Ac=!1;var f=e.updateQueue;ri=!1;var p=f.firstBaseUpdate,_=f.lastBaseUpdate,v=f.shared.pending;if(v!==null){f.shared.pending=null;var T=v,B=T.next;T.next=null,_===null?p=B:_.next=B,_=T;var G=e.alternate;G!==null&&(G=G.updateQueue,v=G.lastBaseUpdate,v!==_&&(v===null?G.firstBaseUpdate=B:v.next=B,G.lastBaseUpdate=T))}if(p!==null){var I=f.baseState;_=0,G=B=T=null,v=p;do{var U=v.lane&-536870913,L=U!==v.lane;if(L?(_t&U)===U:(l&U)===U){U!==0&&U===bs&&(Ac=!0),G!==null&&(G=G.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});t:{var Z=e,ot=v;U=i;var zt=a;switch(ot.tag){case 1:if(Z=ot.payload,typeof Z=="function"){I=Z.call(zt,I,U);break t}I=Z;break t;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ot.payload,U=typeof Z=="function"?Z.call(zt,I,U):Z,U==null)break t;I=y({},I,U);break t;case 2:ri=!0}}U=v.callback,U!==null&&(e.flags|=64,L&&(e.flags|=8192),L=f.callbacks,L===null?f.callbacks=[U]:L.push(U))}else L={lane:U,tag:v.tag,payload:v.payload,callback:v.callback,next:null},G===null?(B=G=L,T=I):G=G.next=L,_|=U;if(v=v.next,v===null){if(v=f.shared.pending,v===null)break;L=v,v=L.next,L.next=null,f.lastBaseUpdate=L,f.shared.pending=null}}while(!0);G===null&&(T=I),f.baseState=T,f.firstBaseUpdate=B,f.lastBaseUpdate=G,p===null&&(f.shared.lanes=0),fi|=_,e.lanes=_,e.memoizedState=I}}function Pd(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Ld(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Pd(a[e],i)}var As=R(null),Ja=R(0);function Nd(e,i){e=Vn,X(Ja,e),X(As,i),Vn=e|i.baseLanes}function Tc(){X(Ja,Vn),X(As,As.current)}function Mc(){Vn=Ja.current,Y(As),Y(Ja)}var Ye=R(null),nn=null;function li(e){var i=e.alternate;X(Qt,Qt.current&1),X(Ye,e),nn===null&&(i===null||As.current!==null||i.memoizedState!==null)&&(nn=e)}function Ec(e){X(Qt,Qt.current),X(Ye,e),nn===null&&(nn=e)}function Gd(e){e.tag===22?(X(Qt,Qt.current),X(Ye,e),nn===null&&(nn=e)):ci()}function ci(){X(Qt,Qt.current),X(Ye,Ye.current)}function Ie(e){Y(Ye),nn===e&&(nn=null),Y(Qt)}var Qt=R(0);function to(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||zu(a)||Bu(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Pn=0,ht=null,Dt=null,Jt=null,eo=!1,Ts=!1,Hi=!1,no=0,Cr=0,Ms=null,Rb=0;function Ft(){throw Error(s(321))}function Rc(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!je(e[a],i[a]))return!1;return!0}function wc(e,i,a,l,f,p){return Pn=p,ht=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,k.H=e===null||e.memoizedState===null?Sp:Vc,Hi=!1,p=a(l,f),Hi=!1,Ts&&(p=Hd(i,a,l,f)),jd(e),p}function jd(e){k.H=Mr;var i=Dt!==null&&Dt.next!==null;if(Pn=0,Jt=Dt=ht=null,eo=!1,Cr=0,Ms=null,i)throw Error(s(300));e===null||te||(e=e.dependencies,e!==null&&Xa(e)&&(te=!0))}function Hd(e,i,a,l){ht=e;var f=0;do{if(Ts&&(Ms=null),Cr=0,Ts=!1,25<=f)throw Error(s(301));if(f+=1,Jt=Dt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}k.H=Cp,p=i(a,l)}while(Ts);return p}function wb(){var e=k.H,i=e.useState()[0];return i=typeof i.then=="function"?Ar(i):i,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(ht.flags|=1024),i}function kc(){var e=no!==0;return no=0,e}function Dc(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Oc(e){if(eo){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}eo=!1}Pn=0,Jt=Dt=ht=null,Ts=!1,Cr=no=0,Ms=null}function Ae(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?ht.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function Zt(){if(Dt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var i=Jt===null?ht.memoizedState:Jt.next;if(i!==null)Jt=i,Dt=e;else{if(e===null)throw ht.alternate===null?Error(s(467)):Error(s(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Jt===null?ht.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function io(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ar(e){var i=Cr;return Cr+=1,Ms===null&&(Ms=[]),e=Dd(Ms,e,i),i=ht,(Jt===null?i.memoizedState:Jt.next)===null&&(i=i.alternate,k.H=i===null||i.memoizedState===null?Sp:Vc),e}function so(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ar(e);if(e.$$typeof===O)return de(e)}throw Error(s(438,String(e)))}function zc(e){var i=null,a=ht.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=ht.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=io(),ht.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=q;return i.index++,a}function Ln(e,i){return typeof i=="function"?i(e):i}function ro(e){var i=Zt();return Bc(i,Dt,e)}function Bc(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=e.baseQueue,p=l.pending;if(p!==null){if(f!==null){var _=f.next;f.next=p.next,p.next=_}i.baseQueue=f=p,l.pending=null}if(p=e.baseState,f===null)e.memoizedState=p;else{i=f.next;var v=_=null,T=null,B=i,G=!1;do{var I=B.lane&-536870913;if(I!==B.lane?(_t&I)===I:(Pn&I)===I){var U=B.revertLane;if(U===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),I===bs&&(G=!0);else if((Pn&U)===U){B=B.next,U===bs&&(G=!0);continue}else I={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},T===null?(v=T=I,_=p):T=T.next=I,ht.lanes|=U,fi|=U;I=B.action,Hi&&a(p,I),p=B.hasEagerState?B.eagerState:a(p,I)}else U={lane:I,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},T===null?(v=T=U,_=p):T=T.next=U,ht.lanes|=I,fi|=I;B=B.next}while(B!==null&&B!==i);if(T===null?_=p:T.next=v,!je(p,e.memoizedState)&&(te=!0,G&&(a=vs,a!==null)))throw a;e.memoizedState=p,e.baseState=_,e.baseQueue=T,l.lastRenderedState=p}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Uc(e){var i=Zt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do p=e(p,_.action),_=_.next;while(_!==f);je(p,i.memoizedState)||(te=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,l]}function Yd(e,i,a){var l=ht,f=Zt(),p=vt;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!je((Dt||f).memoizedState,a);if(_&&(f.memoizedState=a,te=!0),f=f.queue,Nc(Fd.bind(null,l,f,e),[e]),f.getSnapshot!==i||_||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,Es(9,{destroy:void 0},Vd.bind(null,l,f,a,i),null),Pt===null)throw Error(s(349));p||(Pn&127)!==0||Id(l,i,a)}return a}function Id(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=ht.updateQueue,i===null?(i=io(),ht.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Vd(e,i,a,l){i.value=a,i.getSnapshot=l,Xd(i)&&qd(e)}function Fd(e,i,a){return a(function(){Xd(i)&&qd(e)})}function Xd(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!je(e,a)}catch{return!0}}function qd(e){var i=Oi(e,2);i!==null&&ze(i,e,2)}function Pc(e){var i=Ae();if(typeof e=="function"){var a=e;if(e=a(),Hi){Wn(!0);try{a()}finally{Wn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:e},i}function $d(e,i,a,l){return e.baseState=a,Bc(e,Dt,typeof l=="function"?l:Ln)}function kb(e,i,a,l,f){if(lo(e))throw Error(s(485));if(e=i.action,e!==null){var p={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){p.listeners.push(_)}};k.T!==null?a(!0):p.isTransition=!1,l(p),a=i.pending,a===null?(p.next=i.pending=p,Qd(i,p)):(p.next=a.next,i.pending=a.next=p)}}function Qd(e,i){var a=i.action,l=i.payload,f=e.state;if(i.isTransition){var p=k.T,_={};k.T=_;try{var v=a(f,l),T=k.S;T!==null&&T(_,v),Zd(e,i,v)}catch(B){Lc(e,i,B)}finally{p!==null&&_.types!==null&&(p.types=_.types),k.T=p}}else try{p=a(f,l),Zd(e,i,p)}catch(B){Lc(e,i,B)}}function Zd(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Kd(e,i,l)},function(l){return Lc(e,i,l)}):Kd(e,i,a)}function Kd(e,i,a){i.status="fulfilled",i.value=a,Wd(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Qd(e,a)))}function Lc(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Wd(i),i=i.next;while(i!==l)}e.action=null}function Wd(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Jd(e,i){return i}function tp(e,i){if(vt){var a=Pt.formState;if(a!==null){t:{var l=ht;if(vt){if(Nt){e:{for(var f=Nt,p=en;f.nodeType!==8;){if(!p){f=null;break e}if(f=sn(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Nt=sn(f.nextSibling),l=f.data==="F!";break t}}ii(l)}l=!1}l&&(i=a[0])}}return a=Ae(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jd,lastRenderedState:i},a.queue=l,a=xp.bind(null,ht,l),l.dispatch=a,l=Pc(!1),p=Ic.bind(null,ht,!1,l.queue),l=Ae(),f={state:i,dispatch:null,action:e,pending:null},l.queue=f,a=kb.bind(null,ht,f,p,a),f.dispatch=a,l.memoizedState=e,[i,a,!1]}function ep(e){var i=Zt();return np(i,Dt,e)}function np(e,i,a){if(i=Bc(e,i,Jd)[0],e=ro(Ln)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ar(i)}catch(_){throw _===Ss?Qa:_}else l=i;i=Zt();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(ht.flags|=2048,Es(9,{destroy:void 0},Db.bind(null,f,a),null)),[l,p,e]}function Db(e,i){e.action=i}function ip(e){var i=Zt(),a=Dt;if(a!==null)return np(i,a,e);Zt(),i=i.memoizedState,a=Zt();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Es(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=ht.updateQueue,i===null&&(i=io(),ht.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function sp(){return Zt().memoizedState}function ao(e,i,a,l){var f=Ae();ht.flags|=e,f.memoizedState=Es(1|i,{destroy:void 0},a,l===void 0?null:l)}function oo(e,i,a,l){var f=Zt();l=l===void 0?null:l;var p=f.memoizedState.inst;Dt!==null&&l!==null&&Rc(l,Dt.memoizedState.deps)?f.memoizedState=Es(i,p,a,l):(ht.flags|=e,f.memoizedState=Es(1|i,p,a,l))}function rp(e,i){ao(8390656,8,e,i)}function Nc(e,i){oo(2048,8,e,i)}function Ob(e){ht.flags|=4;var i=ht.updateQueue;if(i===null)i=io(),ht.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function ap(e){var i=Zt().memoizedState;return Ob({ref:i,nextImpl:e}),function(){if((Rt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function op(e,i){return oo(4,2,e,i)}function lp(e,i){return oo(4,4,e,i)}function cp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function up(e,i,a){a=a!=null?a.concat([e]):null,oo(4,4,cp.bind(null,i,e),a)}function Gc(){}function hp(e,i){var a=Zt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Rc(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function fp(e,i){var a=Zt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Rc(i,l[1]))return l[0];if(l=e(),Hi){Wn(!0);try{e()}finally{Wn(!1)}}return a.memoizedState=[l,i],l}function jc(e,i,a){return a===void 0||(Pn&1073741824)!==0&&(_t&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=dm(),ht.lanes|=e,fi|=e,a)}function dp(e,i,a,l){return je(a,i)?a:As.current!==null?(e=jc(e,a,l),je(e,i)||(te=!0),e):(Pn&42)===0||(Pn&1073741824)!==0&&(_t&261930)===0?(te=!0,e.memoizedState=a):(e=dm(),ht.lanes|=e,fi|=e,i)}function pp(e,i,a,l,f){var p=j.p;j.p=p!==0&&8>p?p:8;var _=k.T,v={};k.T=v,Ic(e,!1,i,a);try{var T=f(),B=k.S;if(B!==null&&B(v,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var G=Eb(T,l);Tr(e,i,G,Xe(e))}else Tr(e,i,l,Xe(e))}catch(I){Tr(e,i,{then:function(){},status:"rejected",reason:I},Xe())}finally{j.p=p,_!==null&&v.types!==null&&(_.types=v.types),k.T=_}}function zb(){}function Hc(e,i,a,l){if(e.tag!==5)throw Error(s(476));var f=mp(e).queue;pp(e,f,i,at,a===null?zb:function(){return gp(e),a(l)})}function mp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:at},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function gp(e){var i=mp(e);i.next===null&&(i=e.alternate.memoizedState),Tr(e,i.next.queue,{},Xe())}function Yc(){return de(Yr)}function yp(){return Zt().memoizedState}function _p(){return Zt().memoizedState}function Bb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Xe();e=ai(a);var l=oi(i,e,a);l!==null&&(ze(l,i,a),br(l,i,a)),i={cache:yc()},e.payload=i;return}i=i.return}}function Ub(e,i,a){var l=Xe();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},lo(e)?bp(i,a):(a=ac(e,i,a,l),a!==null&&(ze(a,e,l),vp(a,i,l)))}function xp(e,i,a){var l=Xe();Tr(e,i,a,l)}function Tr(e,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(lo(e))bp(i,f);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var _=i.lastRenderedState,v=p(_,a);if(f.hasEagerState=!0,f.eagerState=v,je(v,_))return Ya(e,i,f,0),Pt===null&&Ha(),!1}catch{}if(a=ac(e,i,f,l),a!==null)return ze(a,e,l),vp(a,i,l),!0}return!1}function Ic(e,i,a,l){if(l={lane:2,revertLane:vu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},lo(e)){if(i)throw Error(s(479))}else i=ac(e,a,l,2),i!==null&&ze(i,e,2)}function lo(e){var i=e.alternate;return e===ht||i!==null&&i===ht}function bp(e,i){Ts=eo=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function vp(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Mf(e,a)}}var Mr={readContext:de,use:so,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};Mr.useEffectEvent=Ft;var Sp={readContext:de,use:so,useCallback:function(e,i){return Ae().memoizedState=[e,i===void 0?null:i],e},useContext:de,useEffect:rp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,ao(4194308,4,cp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return ao(4194308,4,e,i)},useInsertionEffect:function(e,i){ao(4,2,e,i)},useMemo:function(e,i){var a=Ae();i=i===void 0?null:i;var l=e();if(Hi){Wn(!0);try{e()}finally{Wn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=Ae();if(a!==void 0){var f=a(i);if(Hi){Wn(!0);try{a(i)}finally{Wn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Ub.bind(null,ht,e),[l.memoizedState,e]},useRef:function(e){var i=Ae();return e={current:e},i.memoizedState=e},useState:function(e){e=Pc(e);var i=e.queue,a=xp.bind(null,ht,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Gc,useDeferredValue:function(e,i){var a=Ae();return jc(a,e,i)},useTransition:function(){var e=Pc(!1);return e=pp.bind(null,ht,e.queue,!0,!1),Ae().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=ht,f=Ae();if(vt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Pt===null)throw Error(s(349));(_t&127)!==0||Id(l,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,rp(Fd.bind(null,l,p,e),[e]),l.flags|=2048,Es(9,{destroy:void 0},Vd.bind(null,l,p,a,i),null),a},useId:function(){var e=Ae(),i=Pt.identifierPrefix;if(vt){var a=Cn,l=Sn;a=(l&~(1<<32-Ge(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=no++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Rb++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Yc,useFormState:tp,useActionState:tp,useOptimistic:function(e){var i=Ae();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Ic.bind(null,ht,!0,a),a.dispatch=i,[e,i]},useMemoCache:zc,useCacheRefresh:function(){return Ae().memoizedState=Bb.bind(null,ht)},useEffectEvent:function(e){var i=Ae(),a={impl:e};return i.memoizedState=a,function(){if((Rt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Vc={readContext:de,use:so,useCallback:hp,useContext:de,useEffect:Nc,useImperativeHandle:up,useInsertionEffect:op,useLayoutEffect:lp,useMemo:fp,useReducer:ro,useRef:sp,useState:function(){return ro(Ln)},useDebugValue:Gc,useDeferredValue:function(e,i){var a=Zt();return dp(a,Dt.memoizedState,e,i)},useTransition:function(){var e=ro(Ln)[0],i=Zt().memoizedState;return[typeof e=="boolean"?e:Ar(e),i]},useSyncExternalStore:Yd,useId:yp,useHostTransitionStatus:Yc,useFormState:ep,useActionState:ep,useOptimistic:function(e,i){var a=Zt();return $d(a,Dt,e,i)},useMemoCache:zc,useCacheRefresh:_p};Vc.useEffectEvent=ap;var Cp={readContext:de,use:so,useCallback:hp,useContext:de,useEffect:Nc,useImperativeHandle:up,useInsertionEffect:op,useLayoutEffect:lp,useMemo:fp,useReducer:Uc,useRef:sp,useState:function(){return Uc(Ln)},useDebugValue:Gc,useDeferredValue:function(e,i){var a=Zt();return Dt===null?jc(a,e,i):dp(a,Dt.memoizedState,e,i)},useTransition:function(){var e=Uc(Ln)[0],i=Zt().memoizedState;return[typeof e=="boolean"?e:Ar(e),i]},useSyncExternalStore:Yd,useId:yp,useHostTransitionStatus:Yc,useFormState:ip,useActionState:ip,useOptimistic:function(e,i){var a=Zt();return Dt!==null?$d(a,Dt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:zc,useCacheRefresh:_p};Cp.useEffectEvent=ap;function Fc(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:y({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xc={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=Xe(),f=ai(l);f.payload=i,a!=null&&(f.callback=a),i=oi(e,f,l),i!==null&&(ze(i,e,l),br(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=Xe(),f=ai(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=oi(e,f,l),i!==null&&(ze(i,e,l),br(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Xe(),l=ai(a);l.tag=2,i!=null&&(l.callback=i),i=oi(e,l,a),i!==null&&(ze(i,e,a),br(i,e,a))}};function Ap(e,i,a,l,f,p,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,_):i.prototype&&i.prototype.isPureReactComponent?!fr(a,l)||!fr(f,p):!0}function Tp(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Xc.enqueueReplaceState(i,i.state,null)}function Yi(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Mp(e){ja(e)}function Ep(e){console.error(e)}function Rp(e){ja(e)}function co(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function wp(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qc(e,i,a){return a=ai(a),a.tag=3,a.payload={element:null},a.callback=function(){co(e,i)},a}function kp(e){return e=ai(e),e.tag=3,e}function Dp(e,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;e.payload=function(){return f(p)},e.callback=function(){wp(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){wp(i,a,l),typeof f!="function"&&(di===null?di=new Set([this]):di.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function Pb(e,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&xs(i,a,f,!0),a=Ye.current,a!==null){switch(a.tag){case 31:case 13:return nn===null?So():a.alternate===null&&Xt===0&&(Xt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Za?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),_u(e,l,f)),!1;case 22:return a.flags|=65536,l===Za?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),_u(e,l,f)),!1}throw Error(s(435,a.tag))}return _u(e,l,f),So(),!1}if(vt)return i=Ye.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==fc&&(e=Error(s(422),{cause:l}),mr(We(e,a)))):(l!==fc&&(i=Error(s(423),{cause:l}),mr(We(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=We(l,a),f=qc(e.stateNode,l,f),Cc(e,f),Xt!==4&&(Xt=2)),!1;var p=Error(s(520),{cause:l});if(p=We(p,a),Br===null?Br=[p]:Br.push(p),Xt!==4&&(Xt=2),i===null)return!0;l=We(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=qc(a.stateNode,l,e),Cc(a,e),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(di===null||!di.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=kp(f),Dp(f,e,a,l),Cc(a,f),!1}a=a.return}while(a!==null);return!1}var $c=Error(s(461)),te=!1;function pe(e,i,a,l){i.child=e===null?Ud(i,null,a,l):ji(i,e.child,a,l)}function Op(e,i,a,l,f){a=a.render;var p=i.ref;if("ref"in l){var _={};for(var v in l)v!=="ref"&&(_[v]=l[v])}else _=l;return Pi(i),l=wc(e,i,a,_,p,f),v=kc(),e!==null&&!te?(Dc(e,i,f),Nn(e,i,f)):(vt&&v&&uc(i),i.flags|=1,pe(e,i,l,f),i.child)}function zp(e,i,a,l,f){if(e===null){var p=a.type;return typeof p=="function"&&!oc(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,Bp(e,i,p,l,f)):(e=Va(a.type,null,l,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(p=e.child,!nu(e,f)){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:fr,a(_,l)&&e.ref===i.ref)return Nn(e,i,f)}return i.flags|=1,e=On(p,l),e.ref=i.ref,e.return=i,i.child=e}function Bp(e,i,a,l,f){if(e!==null){var p=e.memoizedProps;if(fr(p,l)&&e.ref===i.ref)if(te=!1,i.pendingProps=l=p,nu(e,f))(e.flags&131072)!==0&&(te=!0);else return i.lanes=e.lanes,Nn(e,i,f)}return Qc(e,i,a,l,f)}function Up(e,i,a,l){var f=l.children,p=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(l=i.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,i.child=null;return Pp(e,i,p,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&$a(i,p!==null?p.cachePool:null),p!==null?Nd(i,p):Tc(),Gd(i);else return l=i.lanes=536870912,Pp(e,i,p!==null?p.baseLanes|a:a,a,l)}else p!==null?($a(i,p.cachePool),Nd(i,p),ci(),i.memoizedState=null):(e!==null&&$a(i,null),Tc(),ci());return pe(e,i,f,a),i.child}function Er(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Pp(e,i,a,l,f){var p=xc();return p=p===null?null:{parent:Wt._currentValue,pool:p},i.memoizedState={baseLanes:a,cachePool:p},e!==null&&$a(i,null),Tc(),Gd(i),e!==null&&xs(e,i,l,!0),i.childLanes=f,null}function uo(e,i){return i=fo({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Lp(e,i,a){return ji(i,e.child,null,a),e=uo(i,i.pendingProps),e.flags|=2,Ie(i),i.memoizedState=null,e}function Lb(e,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(vt){if(l.mode==="hidden")return e=uo(i,l),i.lanes=536870912,Er(null,e);if(Ec(i),(e=Nt)?(e=Qm(e,en),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ei!==null?{id:Sn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},a=bd(e),a.return=i,i.child=a,fe=i,Nt=null)):e=null,e===null)throw ii(i);return i.lanes=536870912,null}return uo(i,l)}var p=e.memoizedState;if(p!==null){var _=p.dehydrated;if(Ec(i),f)if(i.flags&256)i.flags&=-257,i=Lp(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(te||xs(e,i,a,!1),f=(a&e.childLanes)!==0,te||f){if(l=Pt,l!==null&&(_=Ef(l,a),_!==0&&_!==p.retryLane))throw p.retryLane=_,Oi(e,_),ze(l,e,_),$c;So(),i=Lp(e,i,a)}else e=p.treeContext,Nt=sn(_.nextSibling),fe=i,vt=!0,ni=null,en=!1,e!==null&&Cd(i,e),i=uo(i,l),i.flags|=4096;return i}return e=On(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function ho(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Qc(e,i,a,l,f){return Pi(i),a=wc(e,i,a,l,void 0,f),l=kc(),e!==null&&!te?(Dc(e,i,f),Nn(e,i,f)):(vt&&l&&uc(i),i.flags|=1,pe(e,i,a,f),i.child)}function Np(e,i,a,l,f,p){return Pi(i),i.updateQueue=null,a=Hd(i,l,a,f),jd(e),l=kc(),e!==null&&!te?(Dc(e,i,p),Nn(e,i,p)):(vt&&l&&uc(i),i.flags|=1,pe(e,i,a,p),i.child)}function Gp(e,i,a,l,f){if(Pi(i),i.stateNode===null){var p=ms,_=a.contextType;typeof _=="object"&&_!==null&&(p=de(_)),p=new a(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Xc,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},vc(i),_=a.contextType,p.context=typeof _=="object"&&_!==null?de(_):ms,p.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Fc(i,a,_,l),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(_=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),_!==p.state&&Xc.enqueueReplaceState(p,p.state,null),Sr(i,l,p,f),vr(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){p=i.stateNode;var v=i.memoizedProps,T=Yi(a,v);p.props=T;var B=p.context,G=a.contextType;_=ms,typeof G=="object"&&G!==null&&(_=de(G));var I=a.getDerivedStateFromProps;G=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function",v=i.pendingProps!==v,G||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v||B!==_)&&Tp(i,p,l,_),ri=!1;var U=i.memoizedState;p.state=U,Sr(i,l,p,f),vr(),B=i.memoizedState,v||U!==B||ri?(typeof I=="function"&&(Fc(i,a,I,l),B=i.memoizedState),(T=ri||Ap(i,a,T,l,U,B,_))?(G||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),p.props=l,p.state=B,p.context=_,l=T):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Sc(e,i),_=i.memoizedProps,G=Yi(a,_),p.props=G,I=i.pendingProps,U=p.context,B=a.contextType,T=ms,typeof B=="object"&&B!==null&&(T=de(B)),v=a.getDerivedStateFromProps,(B=typeof v=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==I||U!==T)&&Tp(i,p,l,T),ri=!1,U=i.memoizedState,p.state=U,Sr(i,l,p,f),vr();var L=i.memoizedState;_!==I||U!==L||ri||e!==null&&e.dependencies!==null&&Xa(e.dependencies)?(typeof v=="function"&&(Fc(i,a,v,l),L=i.memoizedState),(G=ri||Ap(i,a,G,l,U,L,T)||e!==null&&e.dependencies!==null&&Xa(e.dependencies))?(B||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,L,T),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,L,T)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=L),p.props=l,p.state=L,p.context=T,l=G):(typeof p.componentDidUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(i.flags|=1024),l=!1)}return p=l,ho(e,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,e!==null&&l?(i.child=ji(i,e.child,null,f),i.child=ji(i,null,a,f)):pe(e,i,a,f),i.memoizedState=p.state,e=i.child):e=Nn(e,i,f),e}function jp(e,i,a,l){return Bi(),i.flags|=256,pe(e,i,a,l),i.child}var Zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kc(e){return{baseLanes:e,cachePool:wd()}}function Wc(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Fe),e}function Hp(e,i,a){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,_;if((_=p)||(_=e!==null&&e.memoizedState===null?!1:(Qt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(vt){if(f?li(i):ci(),(e=Nt)?(e=Qm(e,en),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ei!==null?{id:Sn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},a=bd(e),a.return=i,i.child=a,fe=i,Nt=null)):e=null,e===null)throw ii(i);return Bu(e)?i.lanes=32:i.lanes=536870912,null}var v=l.children;return l=l.fallback,f?(ci(),f=i.mode,v=fo({mode:"hidden",children:v},f),l=zi(l,f,a,null),v.return=i,l.return=i,v.sibling=l,i.child=v,l=i.child,l.memoizedState=Kc(a),l.childLanes=Wc(e,_,a),i.memoizedState=Zc,Er(null,l)):(li(i),Jc(i,v))}var T=e.memoizedState;if(T!==null&&(v=T.dehydrated,v!==null)){if(p)i.flags&256?(li(i),i.flags&=-257,i=tu(e,i,a)):i.memoizedState!==null?(ci(),i.child=e.child,i.flags|=128,i=null):(ci(),v=l.fallback,f=i.mode,l=fo({mode:"visible",children:l.children},f),v=zi(v,f,a,null),v.flags|=2,l.return=i,v.return=i,l.sibling=v,i.child=l,ji(i,e.child,null,a),l=i.child,l.memoizedState=Kc(a),l.childLanes=Wc(e,_,a),i.memoizedState=Zc,i=Er(null,l));else if(li(i),Bu(v)){if(_=v.nextSibling&&v.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(s(419)),l.stack="",l.digest=_,mr({value:l,source:null,stack:null}),i=tu(e,i,a)}else if(te||xs(e,i,a,!1),_=(a&e.childLanes)!==0,te||_){if(_=Pt,_!==null&&(l=Ef(_,a),l!==0&&l!==T.retryLane))throw T.retryLane=l,Oi(e,l),ze(_,e,l),$c;zu(v)||So(),i=tu(e,i,a)}else zu(v)?(i.flags|=192,i.child=e.child,i=null):(e=T.treeContext,Nt=sn(v.nextSibling),fe=i,vt=!0,ni=null,en=!1,e!==null&&Cd(i,e),i=Jc(i,l.children),i.flags|=4096);return i}return f?(ci(),v=l.fallback,f=i.mode,T=e.child,B=T.sibling,l=On(T,{mode:"hidden",children:l.children}),l.subtreeFlags=T.subtreeFlags&65011712,B!==null?v=On(B,v):(v=zi(v,f,a,null),v.flags|=2),v.return=i,l.return=i,l.sibling=v,i.child=l,Er(null,l),l=i.child,v=e.child.memoizedState,v===null?v=Kc(a):(f=v.cachePool,f!==null?(T=Wt._currentValue,f=f.parent!==T?{parent:T,pool:T}:f):f=wd(),v={baseLanes:v.baseLanes|a,cachePool:f}),l.memoizedState=v,l.childLanes=Wc(e,_,a),i.memoizedState=Zc,Er(e.child,l)):(li(i),a=e.child,e=a.sibling,a=On(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Jc(e,i){return i=fo({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function fo(e,i){return e=He(22,e,null,i),e.lanes=0,e}function tu(e,i,a){return ji(i,e.child,null,a),e=Jc(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Yp(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),mc(e.return,i,a)}function eu(e,i,a,l,f,p){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:p}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=p)}function Ip(e,i,a){var l=i.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var _=Qt.current,v=(_&2)!==0;if(v?(_=_&1|2,i.flags|=128):_&=1,X(Qt,_),pe(e,i,l,a),l=vt?pr:0,!v&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yp(e,a,i);else if(e.tag===19)Yp(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&to(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),eu(i,!1,f,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&to(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}eu(i,!0,a,null,p,l);break;case"together":eu(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Nn(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),fi|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(xs(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=On(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=On(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function nu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Xa(e)))}function Nb(e,i,a){switch(i.tag){case 3:oe(i,i.stateNode.containerInfo),si(i,Wt,e.memoizedState.cache),Bi();break;case 27:case 5:bn(i);break;case 4:oe(i,i.stateNode.containerInfo);break;case 10:si(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ec(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(li(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Hp(e,i,a):(li(i),e=Nn(e,i,a),e!==null?e.sibling:null);li(i);break;case 19:var f=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(xs(e,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Ip(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),X(Qt,Qt.current),l)break;return null;case 22:return i.lanes=0,Up(e,i,a,i.pendingProps);case 24:si(i,Wt,e.memoizedState.cache)}return Nn(e,i,a)}function Vp(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)te=!0;else{if(!nu(e,a)&&(i.flags&128)===0)return te=!1,Nb(e,i,a);te=(e.flags&131072)!==0}else te=!1,vt&&(i.flags&1048576)!==0&&Sd(i,pr,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Ni(i.elementType),i.type=e,typeof e=="function")oc(e)?(l=Yi(e,l),i.tag=1,i=Gp(null,i,e,l,a)):(i.tag=0,i=Qc(null,i,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===P){i.tag=11,i=Op(null,i,e,l,a);break t}else if(f===N){i.tag=14,i=zp(null,i,e,l,a);break t}}throw i=Ct(e)||e,Error(s(306,i,""))}}return i;case 0:return Qc(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Yi(l,i.pendingProps),Gp(e,i,l,f,a);case 3:t:{if(oe(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,Sc(e,i),Sr(i,l,null,a);var _=i.memoizedState;if(l=_.cache,si(i,Wt,l),l!==p.cache&&gc(i,[Wt],a,!0),vr(),l=_.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=jp(e,i,l,a);break t}else if(l!==f){f=We(Error(s(424)),i),mr(f),i=jp(e,i,l,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Nt=sn(e.firstChild),fe=i,vt=!0,ni=null,en=!0,a=Ud(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Bi(),l===f){i=Nn(e,i,a);break t}pe(e,i,l,a)}i=i.child}return i;case 26:return ho(e,i),e===null?(a=eg(i.type,null,i.pendingProps,null))?i.memoizedState=a:vt||(a=i.type,e=i.pendingProps,l=wo(ut.current).createElement(a),l[he]=i,l[Ee]=e,me(l,a,e),le(l),i.stateNode=l):i.memoizedState=eg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return bn(i),e===null&&vt&&(l=i.stateNode=Wm(i.type,i.pendingProps,ut.current),fe=i,en=!0,f=Nt,yi(i.type)?(Uu=f,Nt=sn(l.firstChild)):Nt=f),pe(e,i,i.pendingProps.children,a),ho(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&vt&&((f=l=Nt)&&(l=pv(l,i.type,i.pendingProps,en),l!==null?(i.stateNode=l,fe=i,Nt=sn(l.firstChild),en=!1,f=!0):f=!1),f||ii(i)),bn(i),f=i.type,p=i.pendingProps,_=e!==null?e.memoizedProps:null,l=p.children,ku(f,p)?l=null:_!==null&&ku(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=wc(e,i,wb,null,null,a),Yr._currentValue=f),ho(e,i),pe(e,i,l,a),i.child;case 6:return e===null&&vt&&((e=a=Nt)&&(a=mv(a,i.pendingProps,en),a!==null?(i.stateNode=a,fe=i,Nt=null,e=!0):e=!1),e||ii(i)),null;case 13:return Hp(e,i,a);case 4:return oe(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=ji(i,null,l,a):pe(e,i,l,a),i.child;case 11:return Op(e,i,i.type,i.pendingProps,a);case 7:return pe(e,i,i.pendingProps,a),i.child;case 8:return pe(e,i,i.pendingProps.children,a),i.child;case 12:return pe(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,si(i,i.type,l.value),pe(e,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Pi(i),f=de(f),l=l(f),i.flags|=1,pe(e,i,l,a),i.child;case 14:return zp(e,i,i.type,i.pendingProps,a);case 15:return Bp(e,i,i.type,i.pendingProps,a);case 19:return Ip(e,i,a);case 31:return Lb(e,i,a);case 22:return Up(e,i,a,i.pendingProps);case 24:return Pi(i),l=de(Wt),e===null?(f=xc(),f===null&&(f=Pt,p=yc(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:l,cache:f},vc(i),si(i,Wt,f)):((e.lanes&a)!==0&&(Sc(e,i),Sr(i,null,null,a),vr()),f=e.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),si(i,Wt,l)):(l=p.cache,si(i,Wt,l),l!==f.cache&&gc(i,[Wt],a,!0))),pe(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Gn(e){e.flags|=4}function iu(e,i,a,l,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(ym())e.flags|=8192;else throw Gi=Za,bc}else e.flags&=-16777217}function Fp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ag(i))if(ym())e.flags|=8192;else throw Gi=Za,bc}function po(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Af():536870912,e.lanes|=i,Ds|=i)}function Rr(e,i){if(!vt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Gt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function Gb(e,i,a){var l=i.pendingProps;switch(hc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(i),null;case 1:return Gt(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Un(Wt),Lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_s(i)?Gn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dc())),Gt(i),null;case 26:var f=i.type,p=i.memoizedState;return e===null?(Gn(i),p!==null?(Gt(i),Fp(i,p)):(Gt(i),iu(i,f,null,l,a))):p?p!==e.memoizedState?(Gn(i),Gt(i),Fp(i,p)):(Gt(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&Gn(i),Gt(i),iu(i,f,e,l,a)),null;case 27:if(Kn(i),a=ut.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Gn(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Gt(i),null}e=Q.current,_s(i)?Ad(i):(e=Wm(f,l,a),i.stateNode=e,Gn(i))}return Gt(i),null;case 5:if(Kn(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Gn(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Gt(i),null}if(p=Q.current,_s(i))Ad(i);else{var _=wo(ut.current);switch(p){case 1:p=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=_.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}p[he]=i,p[Ee]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=p;t:switch(me(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Gn(i)}}return Gt(i),iu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Gn(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=ut.current,_s(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,f=fe,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[he]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Hm(e.nodeValue,a)),e||ii(i,!0)}else e=wo(e).createTextNode(l),e[he]=i,i.stateNode=e}return Gt(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=_s(i),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[he]=i}else Bi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),e=!1}else a=dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Ie(i),i):(Ie(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Gt(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=_s(i),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[he]=i}else Bi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),f=!1}else f=dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ie(i),i):(Ie(i),null)}return Ie(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),po(i,i.updateQueue),Gt(i),null);case 4:return Lt(),e===null&&Tu(i.stateNode.containerInfo),Gt(i),null;case 10:return Un(i.type),Gt(i),null;case 19:if(Y(Qt),l=i.memoizedState,l===null)return Gt(i),null;if(f=(i.flags&128)!==0,p=l.rendering,p===null)if(f)Rr(l,!1);else{if(Xt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(p=to(e),p!==null){for(i.flags|=128,Rr(l,!1),e=p.updateQueue,i.updateQueue=e,po(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)xd(a,e),a=a.sibling;return X(Qt,Qt.current&1|2),vt&&zn(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&Le()>xo&&(i.flags|=128,f=!0,Rr(l,!1),i.lanes=4194304)}else{if(!f)if(e=to(p),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,po(i,e),Rr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!vt)return Gt(i),null}else 2*Le()-l.renderingStartTime>xo&&a!==536870912&&(i.flags|=128,f=!0,Rr(l,!1),i.lanes=4194304);l.isBackwards?(p.sibling=i.child,i.child=p):(e=l.last,e!==null?e.sibling=p:i.child=p,l.last=p)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Le(),e.sibling=null,a=Qt.current,X(Qt,f?a&1|2:a&1),vt&&zn(i,l.treeForkCount),e):(Gt(i),null);case 22:case 23:return Ie(i),Mc(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Gt(i),i.subtreeFlags&6&&(i.flags|=8192)):Gt(i),a=i.updateQueue,a!==null&&po(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&Y(Li),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Un(Wt),Gt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function jb(e,i){switch(hc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Un(Wt),Lt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Kn(i),null;case 31:if(i.memoizedState!==null){if(Ie(i),i.alternate===null)throw Error(s(340));Bi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Ie(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Bi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Y(Qt),null;case 4:return Lt(),null;case 10:return Un(i.type),null;case 22:case 23:return Ie(i),Mc(),e!==null&&Y(Li),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Un(Wt),null;case 25:return null;default:return null}}function Xp(e,i){switch(hc(i),i.tag){case 3:Un(Wt),Lt();break;case 26:case 27:case 5:Kn(i);break;case 4:Lt();break;case 31:i.memoizedState!==null&&Ie(i);break;case 13:Ie(i);break;case 19:Y(Qt);break;case 10:Un(i.type);break;case 22:case 23:Ie(i),Mc(),e!==null&&Y(Li);break;case 24:Un(Wt)}}function wr(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var p=a.create,_=a.inst;l=p(),_.destroy=l}a=a.next}while(a!==f)}}catch(v){kt(i,i.return,v)}}function ui(e,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&e)===e){var _=l.inst,v=_.destroy;if(v!==void 0){_.destroy=void 0,f=i;var T=a,B=v;try{B()}catch(G){kt(f,T,G)}}}l=l.next}while(l!==p)}}catch(G){kt(i,i.return,G)}}function qp(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Ld(i,a)}catch(l){kt(e,e.return,l)}}}function $p(e,i,a){a.props=Yi(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){kt(e,i,l)}}function kr(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){kt(e,i,f)}}function An(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){kt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){kt(e,i,f)}else a.current=null}function Qp(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){kt(e,e.return,f)}}function su(e,i,a){try{var l=e.stateNode;lv(l,e.type,a,i),l[Ee]=i}catch(f){kt(e,e.return,f)}}function Zp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&yi(e.type)||e.tag===4}function ru(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&yi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function au(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=kn));else if(l!==4&&(l===27&&yi(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(au(e,i,a),e=e.sibling;e!==null;)au(e,i,a),e=e.sibling}function mo(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&yi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(mo(e,i,a),e=e.sibling;e!==null;)mo(e,i,a),e=e.sibling}function Kp(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);me(i,l,a),i[he]=e,i[Ee]=a}catch(p){kt(e,e.return,p)}}var jn=!1,ee=!1,ou=!1,Wp=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Hb(e,i){if(e=e.containerInfo,Ru=Po,e=ud(e),tc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var _=0,v=-1,T=-1,B=0,G=0,I=e,U=null;e:for(;;){for(var L;I!==a||f!==0&&I.nodeType!==3||(v=_+f),I!==p||l!==0&&I.nodeType!==3||(T=_+l),I.nodeType===3&&(_+=I.nodeValue.length),(L=I.firstChild)!==null;)U=I,I=L;for(;;){if(I===e)break e;if(U===a&&++B===f&&(v=_),U===p&&++G===l&&(T=_),(L=I.nextSibling)!==null)break;I=U,U=I.parentNode}I=L}a=v===-1||T===-1?null:{start:v,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(wu={focusedElem:e,selectionRange:a},Po=!1,ce=i;ce!==null;)if(i=ce,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,ce=e;else for(;ce!==null;){switch(i=ce,p=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Z=Yi(a.type,f);e=l.getSnapshotBeforeUpdate(Z,p),l.__reactInternalSnapshotBeforeUpdate=e}catch(ot){kt(a,a.return,ot)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Ou(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ou(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,ce=e;break}ce=i.return}}function Jp(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Yn(e,a),l&4&&wr(5,a);break;case 1:if(Yn(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){kt(a,a.return,_)}else{var f=Yi(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){kt(a,a.return,_)}}l&64&&qp(a),l&512&&kr(a,a.return);break;case 3:if(Yn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ld(e,i)}catch(_){kt(a,a.return,_)}}break;case 27:i===null&&l&4&&Kp(a);case 26:case 5:Yn(e,a),i===null&&l&4&&Qp(a),l&512&&kr(a,a.return);break;case 12:Yn(e,a);break;case 31:Yn(e,a),l&4&&nm(e,a);break;case 13:Yn(e,a),l&4&&im(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Zb.bind(null,a),gv(e,a))));break;case 22:if(l=a.memoizedState!==null||jn,!l){i=i!==null&&i.memoizedState!==null||ee,f=jn;var p=ee;jn=l,(ee=i)&&!p?In(e,a,(a.subtreeFlags&8772)!==0):Yn(e,a),jn=f,ee=p}break;case 30:break;default:Yn(e,a)}}function tm(e){var i=e.alternate;i!==null&&(e.alternate=null,tm(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Ll(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var It=null,we=!1;function Hn(e,i,a){for(a=a.child;a!==null;)em(e,i,a),a=a.sibling}function em(e,i,a){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(tr,a)}catch{}switch(a.tag){case 26:ee||An(a,i),Hn(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ee||An(a,i);var l=It,f=we;yi(a.type)&&(It=a.stateNode,we=!1),Hn(e,i,a),Gr(a.stateNode),It=l,we=f;break;case 5:ee||An(a,i);case 6:if(l=It,f=we,It=null,Hn(e,i,a),It=l,we=f,It!==null)if(we)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(a.stateNode)}catch(p){kt(a,i,p)}else try{It.removeChild(a.stateNode)}catch(p){kt(a,i,p)}break;case 18:It!==null&&(we?(e=It,qm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Gs(e)):qm(It,a.stateNode));break;case 4:l=It,f=we,It=a.stateNode.containerInfo,we=!0,Hn(e,i,a),It=l,we=f;break;case 0:case 11:case 14:case 15:ui(2,a,i),ee||ui(4,a,i),Hn(e,i,a);break;case 1:ee||(An(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&$p(a,i,l)),Hn(e,i,a);break;case 21:Hn(e,i,a);break;case 22:ee=(l=ee)||a.memoizedState!==null,Hn(e,i,a),ee=l;break;default:Hn(e,i,a)}}function nm(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Gs(e)}catch(a){kt(i,i.return,a)}}}function im(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Gs(e)}catch(a){kt(i,i.return,a)}}function Yb(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Wp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Wp),i;default:throw Error(s(435,e.tag))}}function go(e,i){var a=Yb(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=Kb.bind(null,e,l);l.then(f,f)}})}function ke(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=e,_=i,v=_;t:for(;v!==null;){switch(v.tag){case 27:if(yi(v.type)){It=v.stateNode,we=!1;break t}break;case 5:It=v.stateNode,we=!1;break t;case 3:case 4:It=v.stateNode.containerInfo,we=!0;break t}v=v.return}if(It===null)throw Error(s(160));em(p,_,f),It=null,we=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)sm(i,e),i=i.sibling}var fn=null;function sm(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ke(i,e),De(e),l&4&&(ui(3,e,e.return),wr(3,e),ui(5,e,e.return));break;case 1:ke(i,e),De(e),l&512&&(ee||a===null||An(a,a.return)),l&64&&jn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=fn;if(ke(i,e),De(e),l&512&&(ee||a===null||An(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[ir]||p[he]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),me(p,l,a),p[he]=e,le(p),l=p;break t;case"link":var _=sg("link","href",f).get(l+(a.href||""));if(_){for(var v=0;v<_.length;v++)if(p=_[v],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(v,1);break e}}p=f.createElement(l),me(p,l,a),f.head.appendChild(p);break;case"meta":if(_=sg("meta","content",f).get(l+(a.content||""))){for(v=0;v<_.length;v++)if(p=_[v],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(v,1);break e}}p=f.createElement(l),me(p,l,a),f.head.appendChild(p);break;default:throw Error(s(468,l))}p[he]=e,le(p),l=p}e.stateNode=l}else rg(f,e.type,e.stateNode);else e.stateNode=ig(f,l,e.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?rg(f,e.type,e.stateNode):ig(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&su(e,e.memoizedProps,a.memoizedProps)}break;case 27:ke(i,e),De(e),l&512&&(ee||a===null||An(a,a.return)),a!==null&&l&4&&su(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ke(i,e),De(e),l&512&&(ee||a===null||An(a,a.return)),e.flags&32){f=e.stateNode;try{ls(f,"")}catch(Z){kt(e,e.return,Z)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,su(e,f,a!==null?a.memoizedProps:f)),l&1024&&(ou=!0);break;case 6:if(ke(i,e),De(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Z){kt(e,e.return,Z)}}break;case 3:if(Oo=null,f=fn,fn=ko(i.containerInfo),ke(i,e),fn=f,De(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Gs(i.containerInfo)}catch(Z){kt(e,e.return,Z)}ou&&(ou=!1,rm(e));break;case 4:l=fn,fn=ko(e.stateNode.containerInfo),ke(i,e),De(e),fn=l;break;case 12:ke(i,e),De(e);break;case 31:ke(i,e),De(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,go(e,l)));break;case 13:ke(i,e),De(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_o=Le()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,go(e,l)));break;case 22:f=e.memoizedState!==null;var T=a!==null&&a.memoizedState!==null,B=jn,G=ee;if(jn=B||f,ee=G||T,ke(i,e),ee=G,jn=B,De(e),l&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||T||jn||ee||Ii(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){T=a=i;try{if(p=T.stateNode,f)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{v=T.stateNode;var I=T.memoizedProps.style,U=I!=null&&I.hasOwnProperty("display")?I.display:null;v.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(Z){kt(T,T.return,Z)}}}else if(i.tag===6){if(a===null){T=i;try{T.stateNode.nodeValue=f?"":T.memoizedProps}catch(Z){kt(T,T.return,Z)}}}else if(i.tag===18){if(a===null){T=i;try{var L=T.stateNode;f?$m(L,!0):$m(T.stateNode,!1)}catch(Z){kt(T,T.return,Z)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,go(e,a))));break;case 19:ke(i,e),De(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,go(e,l)));break;case 30:break;case 21:break;default:ke(i,e),De(e)}}function De(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(Zp(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=ru(e);mo(e,p,f);break;case 5:var _=a.stateNode;a.flags&32&&(ls(_,""),a.flags&=-33);var v=ru(e);mo(e,v,_);break;case 3:case 4:var T=a.stateNode.containerInfo,B=ru(e);au(e,B,T);break;default:throw Error(s(161))}}catch(G){kt(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function rm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;rm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Yn(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jp(e,i.alternate,i),i=i.sibling}function Ii(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:ui(4,i,i.return),Ii(i);break;case 1:An(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&$p(i,i.return,a),Ii(i);break;case 27:Gr(i.stateNode);case 26:case 5:An(i,i.return),Ii(i);break;case 22:i.memoizedState===null&&Ii(i);break;case 30:Ii(i);break;default:Ii(i)}e=e.sibling}}function In(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=e,p=i,_=p.flags;switch(p.tag){case 0:case 11:case 15:In(f,p,a),wr(4,p);break;case 1:if(In(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){kt(l,l.return,B)}if(l=p,f=l.updateQueue,f!==null){var v=l.stateNode;try{var T=f.shared.hiddenCallbacks;if(T!==null)for(f.shared.hiddenCallbacks=null,f=0;f<T.length;f++)Pd(T[f],v)}catch(B){kt(l,l.return,B)}}a&&_&64&&qp(p),kr(p,p.return);break;case 27:Kp(p);case 26:case 5:In(f,p,a),a&&l===null&&_&4&&Qp(p),kr(p,p.return);break;case 12:In(f,p,a);break;case 31:In(f,p,a),a&&_&4&&nm(f,p);break;case 13:In(f,p,a),a&&_&4&&im(f,p);break;case 22:p.memoizedState===null&&In(f,p,a),kr(p,p.return);break;case 30:break;default:In(f,p,a)}i=i.sibling}}function lu(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&gr(a))}function cu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&gr(e))}function dn(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)am(e,i,a,l),i=i.sibling}function am(e,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:dn(e,i,a,l),f&2048&&wr(9,i);break;case 1:dn(e,i,a,l);break;case 3:dn(e,i,a,l),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&gr(e)));break;case 12:if(f&2048){dn(e,i,a,l),e=i.stateNode;try{var p=i.memoizedProps,_=p.id,v=p.onPostCommit;typeof v=="function"&&v(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){kt(i,i.return,T)}}else dn(e,i,a,l);break;case 31:dn(e,i,a,l);break;case 13:dn(e,i,a,l);break;case 23:break;case 22:p=i.stateNode,_=i.alternate,i.memoizedState!==null?p._visibility&2?dn(e,i,a,l):Dr(e,i):p._visibility&2?dn(e,i,a,l):(p._visibility|=2,Rs(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&lu(_,i);break;case 24:dn(e,i,a,l),f&2048&&cu(i.alternate,i);break;default:dn(e,i,a,l)}}function Rs(e,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=e,_=i,v=a,T=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:Rs(p,_,v,T,f),wr(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?Rs(p,_,v,T,f):Dr(p,_):(G._visibility|=2,Rs(p,_,v,T,f)),f&&B&2048&&lu(_.alternate,_);break;case 24:Rs(p,_,v,T,f),f&&B&2048&&cu(_.alternate,_);break;default:Rs(p,_,v,T,f)}i=i.sibling}}function Dr(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,f=l.flags;switch(l.tag){case 22:Dr(a,l),f&2048&&lu(l.alternate,l);break;case 24:Dr(a,l),f&2048&&cu(l.alternate,l);break;default:Dr(a,l)}i=i.sibling}}var Or=8192;function ws(e,i,a){if(e.subtreeFlags&Or)for(e=e.child;e!==null;)om(e,i,a),e=e.sibling}function om(e,i,a){switch(e.tag){case 26:ws(e,i,a),e.flags&Or&&e.memoizedState!==null&&Rv(a,fn,e.memoizedState,e.memoizedProps);break;case 5:ws(e,i,a);break;case 3:case 4:var l=fn;fn=ko(e.stateNode.containerInfo),ws(e,i,a),fn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Or,Or=16777216,ws(e,i,a),Or=l):ws(e,i,a));break;default:ws(e,i,a)}}function lm(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function zr(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ce=l,um(l,e)}lm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cm(e),e=e.sibling}function cm(e){switch(e.tag){case 0:case 11:case 15:zr(e),e.flags&2048&&ui(9,e,e.return);break;case 3:zr(e);break;case 12:zr(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,yo(e)):zr(e);break;default:zr(e)}}function yo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ce=l,um(l,e)}lm(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:ui(8,i,i.return),yo(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,yo(i));break;default:yo(i)}e=e.sibling}}function um(e,i){for(;ce!==null;){var a=ce;switch(a.tag){case 0:case 11:case 15:ui(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gr(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ce=l;else t:for(a=e;ce!==null;){l=ce;var f=l.sibling,p=l.return;if(tm(l),l===a){ce=null;break t}if(f!==null){f.return=p,ce=f;break t}ce=p}}}var Ib={getCacheForType:function(e){var i=de(Wt),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return de(Wt).controller.signal}},Vb=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Pt=null,pt=null,_t=0,wt=0,Ve=null,hi=!1,ks=!1,uu=!1,Vn=0,Xt=0,fi=0,Vi=0,hu=0,Fe=0,Ds=0,Br=null,Oe=null,fu=!1,_o=0,hm=0,xo=1/0,bo=null,di=null,se=0,pi=null,Os=null,Fn=0,du=0,pu=null,fm=null,Ur=0,mu=null;function Xe(){return(Rt&2)!==0&&_t!==0?_t&-_t:k.T!==null?vu():Rf()}function dm(){if(Fe===0)if((_t&536870912)===0||vt){var e=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),Fe=e}else Fe=536870912;return e=Ye.current,e!==null&&(e.flags|=32),Fe}function ze(e,i,a){(e===Pt&&(wt===2||wt===9)||e.cancelPendingCommit!==null)&&(zs(e,0),mi(e,_t,Fe,!1)),nr(e,a),((Rt&2)===0||e!==Pt)&&(e===Pt&&((Rt&2)===0&&(Vi|=a),Xt===4&&mi(e,_t,Fe,!1)),Tn(e))}function pm(e,i,a){if((Rt&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||er(e,i),f=l?qb(e,i):yu(e,i,!0),p=l;do{if(f===0){ks&&!l&&mi(e,i,0,!1);break}else{if(a=e.current.alternate,p&&!Fb(a)){f=yu(e,i,!1),p=!1;continue}if(f===2){if(p=i,e.errorRecoveryDisabledLanes&p)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var v=e;f=Br;var T=v.current.memoizedState.isDehydrated;if(T&&(zs(v,_).flags|=256),_=yu(v,_,!1),_!==2){if(uu&&!T){v.errorRecoveryDisabledLanes|=p,Vi|=p,f=4;break t}p=Oe,Oe=f,p!==null&&(Oe===null?Oe=p:Oe.push.apply(Oe,p))}f=_}if(p=!1,f!==2)continue}}if(f===1){zs(e,0),mi(e,i,0,!0);break}t:{switch(l=e,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:mi(l,i,Fe,!hi);break t;case 2:Oe=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=_o+300-Le(),10<f)){if(mi(l,i,Fe,!hi),wa(l,0,!0)!==0)break t;Fn=i,l.timeoutHandle=Fm(mm.bind(null,l,a,Oe,bo,fu,i,Fe,Vi,Ds,hi,p,"Throttled",-0,0),f);break t}mm(l,a,Oe,bo,fu,i,Fe,Vi,Ds,hi,p,null,-0,0)}}break}while(!0);Tn(e)}function mm(e,i,a,l,f,p,_,v,T,B,G,I,U,L){if(e.timeoutHandle=-1,I=i.subtreeFlags,I&8192||(I&16785408)===16785408){I={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},om(i,p,I);var Z=(p&62914560)===p?_o-Le():(p&4194048)===p?hm-Le():0;if(Z=wv(I,Z),Z!==null){Fn=p,e.cancelPendingCommit=Z(Cm.bind(null,e,i,p,a,l,f,_,v,T,G,I,null,U,L)),mi(e,p,_,!B);return}}Cm(e,i,p,a,l,f,_,v,T)}function Fb(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!je(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function mi(e,i,a,l){i&=~hu,i&=~Vi,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var f=i;0<f;){var p=31-Ge(f),_=1<<p;l[p]=-1,f&=~_}a!==0&&Tf(e,a,i)}function vo(){return(Rt&6)===0?(Pr(0),!1):!0}function gu(){if(pt!==null){if(wt===0)var e=pt.return;else e=pt,Bn=Ui=null,Oc(e),Cs=null,_r=0,e=pt;for(;e!==null;)Xp(e.alternate,e),e=e.return;pt=null}}function zs(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,hv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Fn=0,gu(),Pt=e,pt=a=On(e.current,null),_t=i,wt=0,Ve=null,hi=!1,ks=er(e,i),uu=!1,Ds=Fe=hu=Vi=fi=Xt=0,Oe=Br=null,fu=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var f=31-Ge(l),p=1<<f;i|=e[f],l&=~p}return Vn=i,Ha(),a}function gm(e,i){ht=null,k.H=Mr,i===Ss||i===Qa?(i=Od(),wt=3):i===bc?(i=Od(),wt=4):wt=i===$c?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ve=i,pt===null&&(Xt=1,co(e,We(i,e.current)))}function ym(){var e=Ye.current;return e===null?!0:(_t&4194048)===_t?nn===null:(_t&62914560)===_t||(_t&536870912)!==0?e===nn:!1}function _m(){var e=k.H;return k.H=Mr,e===null?Mr:e}function xm(){var e=k.A;return k.A=Ib,e}function So(){Xt=4,hi||(_t&4194048)!==_t&&Ye.current!==null||(ks=!0),(fi&134217727)===0&&(Vi&134217727)===0||Pt===null||mi(Pt,_t,Fe,!1)}function yu(e,i,a){var l=Rt;Rt|=2;var f=_m(),p=xm();(Pt!==e||_t!==i)&&(bo=null,zs(e,i)),i=!1;var _=Xt;t:do try{if(wt!==0&&pt!==null){var v=pt,T=Ve;switch(wt){case 8:gu(),_=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(i=!0);var B=wt;if(wt=0,Ve=null,Bs(e,v,T,B),a&&ks){_=0;break t}break;default:B=wt,wt=0,Ve=null,Bs(e,v,T,B)}}Xb(),_=Xt;break}catch(G){gm(e,G)}while(!0);return i&&e.shellSuspendCounter++,Bn=Ui=null,Rt=l,k.H=f,k.A=p,pt===null&&(Pt=null,_t=0,Ha()),_}function Xb(){for(;pt!==null;)bm(pt)}function qb(e,i){var a=Rt;Rt|=2;var l=_m(),f=xm();Pt!==e||_t!==i?(bo=null,xo=Le()+500,zs(e,i)):ks=er(e,i);t:do try{if(wt!==0&&pt!==null){i=pt;var p=Ve;e:switch(wt){case 1:wt=0,Ve=null,Bs(e,i,p,1);break;case 2:case 9:if(kd(p)){wt=0,Ve=null,vm(i);break}i=function(){wt!==2&&wt!==9||Pt!==e||(wt=7),Tn(e)},p.then(i,i);break t;case 3:wt=7;break t;case 4:wt=5;break t;case 7:kd(p)?(wt=0,Ve=null,vm(i)):(wt=0,Ve=null,Bs(e,i,p,7));break;case 5:var _=null;switch(pt.tag){case 26:_=pt.memoizedState;case 5:case 27:var v=pt;if(_?ag(_):v.stateNode.complete){wt=0,Ve=null;var T=v.sibling;if(T!==null)pt=T;else{var B=v.return;B!==null?(pt=B,Co(B)):pt=null}break e}}wt=0,Ve=null,Bs(e,i,p,5);break;case 6:wt=0,Ve=null,Bs(e,i,p,6);break;case 8:gu(),Xt=6;break t;default:throw Error(s(462))}}$b();break}catch(G){gm(e,G)}while(!0);return Bn=Ui=null,k.H=l,k.A=f,Rt=a,pt!==null?0:(Pt=null,_t=0,Ha(),Xt)}function $b(){for(;pt!==null&&!yx();)bm(pt)}function bm(e){var i=Vp(e.alternate,e,Vn);e.memoizedProps=e.pendingProps,i===null?Co(e):pt=i}function vm(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Np(a,i,i.pendingProps,i.type,void 0,_t);break;case 11:i=Np(a,i,i.pendingProps,i.type.render,i.ref,_t);break;case 5:Oc(i);default:Xp(a,i),i=pt=xd(i,Vn),i=Vp(a,i,Vn)}e.memoizedProps=e.pendingProps,i===null?Co(e):pt=i}function Bs(e,i,a,l){Bn=Ui=null,Oc(i),Cs=null,_r=0;var f=i.return;try{if(Pb(e,f,i,a,_t)){Xt=1,co(e,We(a,e.current)),pt=null;return}}catch(p){if(f!==null)throw pt=f,p;Xt=1,co(e,We(a,e.current)),pt=null;return}i.flags&32768?(vt||l===1?e=!0:ks||(_t&536870912)!==0?e=!1:(hi=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ye.current,l!==null&&l.tag===13&&(l.flags|=16384))),Sm(i,e)):Co(i)}function Co(e){var i=e;do{if((i.flags&32768)!==0){Sm(i,hi);return}e=i.return;var a=Gb(i.alternate,i,Vn);if(a!==null){pt=a;return}if(i=i.sibling,i!==null){pt=i;return}pt=i=e}while(i!==null);Xt===0&&(Xt=5)}function Sm(e,i){do{var a=jb(e.alternate,e);if(a!==null){a.flags&=32767,pt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){pt=e;return}pt=e=a}while(e!==null);Xt=6,pt=null}function Cm(e,i,a,l,f,p,_,v,T){e.cancelPendingCommit=null;do Ao();while(se!==0);if((Rt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=rc,Ex(e,a,p,_,v,T),e===Pt&&(pt=Pt=null,_t=0),Os=i,pi=e,Fn=a,du=p,pu=f,fm=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Wb(Ta,function(){return Rm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=k.T,k.T=null,f=j.p,j.p=2,_=Rt,Rt|=4;try{Hb(e,i,a)}finally{Rt=_,j.p=f,k.T=l}}se=1,Am(),Tm(),Mm()}}function Am(){if(se===1){se=0;var e=pi,i=Os,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var l=j.p;j.p=2;var f=Rt;Rt|=4;try{sm(i,e);var p=wu,_=ud(e.containerInfo),v=p.focusedElem,T=p.selectionRange;if(_!==v&&v&&v.ownerDocument&&cd(v.ownerDocument.documentElement,v)){if(T!==null&&tc(v)){var B=T.start,G=T.end;if(G===void 0&&(G=B),"selectionStart"in v)v.selectionStart=B,v.selectionEnd=Math.min(G,v.value.length);else{var I=v.ownerDocument||document,U=I&&I.defaultView||window;if(U.getSelection){var L=U.getSelection(),Z=v.textContent.length,ot=Math.min(T.start,Z),zt=T.end===void 0?ot:Math.min(T.end,Z);!L.extend&&ot>zt&&(_=zt,zt=ot,ot=_);var D=ld(v,ot),E=ld(v,zt);if(D&&E&&(L.rangeCount!==1||L.anchorNode!==D.node||L.anchorOffset!==D.offset||L.focusNode!==E.node||L.focusOffset!==E.offset)){var z=I.createRange();z.setStart(D.node,D.offset),L.removeAllRanges(),ot>zt?(L.addRange(z),L.extend(E.node,E.offset)):(z.setEnd(E.node,E.offset),L.addRange(z))}}}}for(I=[],L=v;L=L.parentNode;)L.nodeType===1&&I.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<I.length;v++){var H=I[v];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}Po=!!Ru,wu=Ru=null}finally{Rt=f,j.p=l,k.T=a}}e.current=i,se=2}}function Tm(){if(se===2){se=0;var e=pi,i=Os,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var l=j.p;j.p=2;var f=Rt;Rt|=4;try{Jp(e,i.alternate,i)}finally{Rt=f,j.p=l,k.T=a}}se=3}}function Mm(){if(se===4||se===3){se=0,_x();var e=pi,i=Os,a=Fn,l=fm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?se=5:(se=0,Os=pi=null,Em(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(di=null),Ul(a),i=i.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(tr,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=k.T,f=j.p,j.p=2,k.T=null;try{for(var p=e.onRecoverableError,_=0;_<l.length;_++){var v=l[_];p(v.value,{componentStack:v.stack})}}finally{k.T=i,j.p=f}}(Fn&3)!==0&&Ao(),Tn(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===mu?Ur++:(Ur=0,mu=e):Ur=0,Pr(0)}}function Em(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,gr(i)))}function Ao(){return Am(),Tm(),Mm(),Rm()}function Rm(){if(se!==5)return!1;var e=pi,i=du;du=0;var a=Ul(Fn),l=k.T,f=j.p;try{j.p=32>a?32:a,k.T=null,a=pu,pu=null;var p=pi,_=Fn;if(se=0,Os=pi=null,Fn=0,(Rt&6)!==0)throw Error(s(331));var v=Rt;if(Rt|=4,cm(p.current),am(p,p.current,_,a),Rt=v,Pr(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(tr,p)}catch{}return!0}finally{j.p=f,k.T=l,Em(e,i)}}function wm(e,i,a){i=We(a,i),i=qc(e.stateNode,i,2),e=oi(e,i,2),e!==null&&(nr(e,2),Tn(e))}function kt(e,i,a){if(e.tag===3)wm(e,e,a);else for(;i!==null;){if(i.tag===3){wm(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(di===null||!di.has(l))){e=We(a,e),a=kp(2),l=oi(i,a,2),l!==null&&(Dp(a,l,i,e),nr(l,2),Tn(l));break}}i=i.return}}function _u(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Vb;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(uu=!0,f.add(a),e=Qb.bind(null,e,i,a),i.then(e,e))}function Qb(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Pt===e&&(_t&a)===a&&(Xt===4||Xt===3&&(_t&62914560)===_t&&300>Le()-_o?(Rt&2)===0&&zs(e,0):hu|=a,Ds===_t&&(Ds=0)),Tn(e)}function km(e,i){i===0&&(i=Af()),e=Oi(e,i),e!==null&&(nr(e,i),Tn(e))}function Zb(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),km(e,a)}function Kb(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),km(e,a)}function Wb(e,i){return Dl(e,i)}var To=null,Us=null,xu=!1,Mo=!1,bu=!1,gi=0;function Tn(e){e!==Us&&e.next===null&&(Us===null?To=Us=e:Us=Us.next=e),Mo=!0,xu||(xu=!0,tv())}function Pr(e,i){if(!bu&&Mo){bu=!0;do for(var a=!1,l=To;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var _=l.suspendedLanes,v=l.pingedLanes;p=(1<<31-Ge(42|e)+1)-1,p&=f&~(_&~v),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Bm(l,p))}else p=_t,p=wa(l,l===Pt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||er(l,p)||(a=!0,Bm(l,p));l=l.next}while(a);bu=!1}}function Jb(){Dm()}function Dm(){Mo=xu=!1;var e=0;gi!==0&&uv()&&(e=gi);for(var i=Le(),a=null,l=To;l!==null;){var f=l.next,p=Om(l,i);p===0?(l.next=null,a===null?To=f:a.next=f,f===null&&(Us=a)):(a=l,(e!==0||(p&3)!==0)&&(Mo=!0)),l=f}se!==0&&se!==5||Pr(e),gi!==0&&(gi=0)}function Om(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var _=31-Ge(p),v=1<<_,T=f[_];T===-1?((v&a)===0||(v&l)!==0)&&(f[_]=Mx(v,i)):T<=i&&(e.expiredLanes|=v),p&=~v}if(i=Pt,a=_t,a=wa(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(wt===2||wt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ol(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||er(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&Ol(l),Ul(a)){case 2:case 8:a=Sf;break;case 32:a=Ta;break;case 268435456:a=Cf;break;default:a=Ta}return l=zm.bind(null,e),a=Dl(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&Ol(l),e.callbackPriority=2,e.callbackNode=null,2}function zm(e,i){if(se!==0&&se!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ao()&&e.callbackNode!==a)return null;var l=_t;return l=wa(e,e===Pt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(pm(e,l,i),Om(e,Le()),e.callbackNode!=null&&e.callbackNode===a?zm.bind(null,e):null)}function Bm(e,i){if(Ao())return null;pm(e,i,!0)}function tv(){fv(function(){(Rt&6)!==0?Dl(vf,Jb):Dm()})}function vu(){if(gi===0){var e=bs;e===0&&(e=Ma,Ma<<=1,(Ma&261888)===0&&(Ma=256)),gi=e}return gi}function Um(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:za(""+e)}function Pm(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function ev(e,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var p=Um((f[Ee]||null).action),_=l.submitter;_&&(i=(i=_[Ee]||null)?Um(i.formAction):_.getAttribute("formAction"),i!==null&&(p=i,_=null));var v=new La("action","action",null,l,f);e.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gi!==0){var T=_?Pm(f,_):new FormData(f);Hc(a,{pending:!0,data:T,method:f.method,action:p},null,T)}}else typeof p=="function"&&(v.preventDefault(),T=_?Pm(f,_):new FormData(f),Hc(a,{pending:!0,data:T,method:f.method,action:p},p,T))},currentTarget:f}]})}}for(var Su=0;Su<sc.length;Su++){var Cu=sc[Su],nv=Cu.toLowerCase(),iv=Cu[0].toUpperCase()+Cu.slice(1);hn(nv,"on"+iv)}hn(dd,"onAnimationEnd"),hn(pd,"onAnimationIteration"),hn(md,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(xb,"onTransitionRun"),hn(bb,"onTransitionStart"),hn(vb,"onTransitionCancel"),hn(gd,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lr));function Lm(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var p=void 0;if(i)for(var _=l.length-1;0<=_;_--){var v=l[_],T=v.instance,B=v.currentTarget;if(v=v.listener,T!==p&&f.isPropagationStopped())break t;p=v,f.currentTarget=B;try{p(f)}catch(G){ja(G)}f.currentTarget=null,p=T}else for(_=0;_<l.length;_++){if(v=l[_],T=v.instance,B=v.currentTarget,v=v.listener,T!==p&&f.isPropagationStopped())break t;p=v,f.currentTarget=B;try{p(f)}catch(G){ja(G)}f.currentTarget=null,p=T}}}}function mt(e,i){var a=i[Pl];a===void 0&&(a=i[Pl]=new Set);var l=e+"__bubble";a.has(l)||(Nm(i,e,2,!1),a.add(l))}function Au(e,i,a){var l=0;i&&(l|=4),Nm(a,e,l,i)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function Tu(e){if(!e[Eo]){e[Eo]=!0,Df.forEach(function(a){a!=="selectionchange"&&(sv.has(a)||Au(a,!1,e),Au(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Eo]||(i[Eo]=!0,Au("selectionchange",!1,i))}}function Nm(e,i,a,l){switch(dg(i)){case 2:var f=Ov;break;case 8:f=zv;break;default:f=ju}a=f.bind(null,i,a,e),f=void 0,!Fl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function Mu(e,i,a,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var v=l.stateNode.containerInfo;if(v===f)break;if(_===4)for(_=l.return;_!==null;){var T=_.tag;if((T===3||T===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;v!==null;){if(_=is(v),_===null)return;if(T=_.tag,T===5||T===6||T===26||T===27){l=p=_;continue t}v=v.parentNode}}l=l.return}If(function(){var B=p,G=Il(a),I=[];t:{var U=yd.get(e);if(U!==void 0){var L=La,Z=e;switch(e){case"keypress":if(Ua(a)===0)break t;case"keydown":case"keyup":L=Kx;break;case"focusin":Z="focus",L=Ql;break;case"focusout":Z="blur",L=Ql;break;case"beforeblur":case"afterblur":L=Ql;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Gx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=tb;break;case dd:case pd:case md:L=Yx;break;case gd:L=nb;break;case"scroll":case"scrollend":L=Lx;break;case"wheel":L=sb;break;case"copy":case"cut":case"paste":L=Vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=$f;break;case"toggle":case"beforetoggle":L=ab}var ot=(i&4)!==0,zt=!ot&&(e==="scroll"||e==="scrollend"),D=ot?U!==null?U+"Capture":null:U;ot=[];for(var E=B,z;E!==null;){var H=E;if(z=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||z===null||D===null||(H=rr(E,D),H!=null&&ot.push(Nr(E,H,z))),zt)break;E=E.return}0<ot.length&&(U=new L(U,Z,null,a,G),I.push({event:U,listeners:ot}))}}if((i&7)===0){t:{if(U=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",U&&a!==Yl&&(Z=a.relatedTarget||a.fromElement)&&(is(Z)||Z[ns]))break t;if((L||U)&&(U=G.window===G?G:(U=G.ownerDocument)?U.defaultView||U.parentWindow:window,L?(Z=a.relatedTarget||a.toElement,L=B,Z=Z?is(Z):null,Z!==null&&(zt=c(Z),ot=Z.tag,Z!==zt||ot!==5&&ot!==27&&ot!==6)&&(Z=null)):(L=null,Z=B),L!==Z)){if(ot=Xf,H="onMouseLeave",D="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ot=$f,H="onPointerLeave",D="onPointerEnter",E="pointer"),zt=L==null?U:sr(L),z=Z==null?U:sr(Z),U=new ot(H,E+"leave",L,a,G),U.target=zt,U.relatedTarget=z,H=null,is(G)===B&&(ot=new ot(D,E+"enter",Z,a,G),ot.target=z,ot.relatedTarget=zt,H=ot),zt=H,L&&Z)e:{for(ot=rv,D=L,E=Z,z=0,H=D;H;H=ot(H))z++;H=0;for(var st=E;st;st=ot(st))H++;for(;0<z-H;)D=ot(D),z--;for(;0<H-z;)E=ot(E),H--;for(;z--;){if(D===E||E!==null&&D===E.alternate){ot=D;break e}D=ot(D),E=ot(E)}ot=null}else ot=null;L!==null&&Gm(I,U,L,ot,!1),Z!==null&&zt!==null&&Gm(I,zt,Z,ot,!0)}}t:{if(U=B?sr(B):window,L=U.nodeName&&U.nodeName.toLowerCase(),L==="select"||L==="input"&&U.type==="file")var Tt=nd;else if(td(U))if(id)Tt=gb;else{Tt=pb;var J=db}else L=U.nodeName,!L||L.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?B&&Hl(B.elementType)&&(Tt=nd):Tt=mb;if(Tt&&(Tt=Tt(e,B))){ed(I,Tt,a,G);break t}J&&J(e,U,B),e==="focusout"&&B&&U.type==="number"&&B.memoizedProps.value!=null&&jl(U,"number",U.value)}switch(J=B?sr(B):window,e){case"focusin":(td(J)||J.contentEditable==="true")&&(fs=J,ec=B,dr=null);break;case"focusout":dr=ec=fs=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,hd(I,a,G);break;case"selectionchange":if(_b)break;case"keydown":case"keyup":hd(I,a,G)}var ft;if(Kl)t:{switch(e){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else hs?Wf(e,a)&&(xt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(xt="onCompositionStart");xt&&(Qf&&a.locale!=="ko"&&(hs||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&hs&&(ft=Vf()):(ti=G,Xl="value"in ti?ti.value:ti.textContent,hs=!0)),J=Ro(B,xt),0<J.length&&(xt=new qf(xt,e,null,a,G),I.push({event:xt,listeners:J}),ft?xt.data=ft:(ft=Jf(a),ft!==null&&(xt.data=ft)))),(ft=lb?cb(e,a):ub(e,a))&&(xt=Ro(B,"onBeforeInput"),0<xt.length&&(J=new qf("onBeforeInput","beforeinput",null,a,G),I.push({event:J,listeners:xt}),J.data=ft)),ev(I,e,B,a,G)}Lm(I,i)})}function Nr(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Ro(e,i){for(var a=i+"Capture",l=[];e!==null;){var f=e,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=rr(e,a),f!=null&&l.unshift(Nr(e,f,p)),f=rr(e,i),f!=null&&l.push(Nr(e,f,p))),e.tag===3)return l;e=e.return}return[]}function rv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gm(e,i,a,l,f){for(var p=i._reactName,_=[];a!==null&&a!==l;){var v=a,T=v.alternate,B=v.stateNode;if(v=v.tag,T!==null&&T===l)break;v!==5&&v!==26&&v!==27||B===null||(T=B,f?(B=rr(a,p),B!=null&&_.unshift(Nr(a,B,T))):f||(B=rr(a,p),B!=null&&_.push(Nr(a,B,T)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var av=/\r\n?/g,ov=/\u0000|\uFFFD/g;function jm(e){return(typeof e=="string"?e:""+e).replace(av,`
`).replace(ov,"")}function Hm(e,i){return i=jm(i),jm(e)===i}function Ot(e,i,a,l,f,p){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ls(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ls(e,""+l);break;case"className":Da(e,"class",l);break;case"tabIndex":Da(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Da(e,a,l);break;case"style":Hf(e,l,p);break;case"data":if(i!=="object"){Da(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=za(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&Ot(e,i,"name",f.name,f,null),Ot(e,i,"formEncType",f.formEncType,f,null),Ot(e,i,"formMethod",f.formMethod,f,null),Ot(e,i,"formTarget",f.formTarget,f,null)):(Ot(e,i,"encType",f.encType,f,null),Ot(e,i,"method",f.method,f,null),Ot(e,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=za(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=kn);break;case"onScroll":l!=null&&mt("scroll",e);break;case"onScrollEnd":l!=null&&mt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=za(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":mt("beforetoggle",e),mt("toggle",e),ka(e,"popover",l);break;case"xlinkActuate":wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":wn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":wn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":wn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":wn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ka(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ux.get(a)||a,ka(e,a,l))}}function Eu(e,i,a,l,f,p){switch(a){case"style":Hf(e,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?ls(e,l):(typeof l=="number"||typeof l=="bigint")&&ls(e,""+l);break;case"onScroll":l!=null&&mt("scroll",e);break;case"onScrollEnd":l!=null&&mt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Of.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=e[Ee]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):ka(e,a,l)}}}function me(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",e),mt("load",e);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var _=a[p];if(_!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ot(e,i,p,_,a,null)}}f&&Ot(e,i,"srcSet",a.srcSet,a,null),l&&Ot(e,i,"src",a.src,a,null);return;case"input":mt("invalid",e);var v=p=_=f=null,T=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":f=G;break;case"type":_=G;break;case"checked":T=G;break;case"defaultChecked":B=G;break;case"value":p=G;break;case"defaultValue":v=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Ot(e,i,l,G,a,null)}}Lf(e,p,v,T,B,_,f,!1);return;case"select":mt("invalid",e),l=_=p=null;for(f in a)if(a.hasOwnProperty(f)&&(v=a[f],v!=null))switch(f){case"value":p=v;break;case"defaultValue":_=v;break;case"multiple":l=v;default:Ot(e,i,f,v,a,null)}i=p,a=_,e.multiple=!!l,i!=null?os(e,!!l,i,!1):a!=null&&os(e,!!l,a,!0);return;case"textarea":mt("invalid",e),p=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(v=a[_],v!=null))switch(_){case"value":l=v;break;case"defaultValue":f=v;break;case"children":p=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:Ot(e,i,_,v,a,null)}Gf(e,l,f,p);return;case"option":for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null)&&(T==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Ot(e,i,T,l,a,null));return;case"dialog":mt("beforetoggle",e),mt("toggle",e),mt("cancel",e),mt("close",e);break;case"iframe":case"object":mt("load",e);break;case"video":case"audio":for(l=0;l<Lr.length;l++)mt(Lr[l],e);break;case"image":mt("error",e),mt("load",e);break;case"details":mt("toggle",e);break;case"embed":case"source":case"link":mt("error",e),mt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ot(e,i,B,l,a,null)}return;default:if(Hl(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&Eu(e,i,G,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Ot(e,i,v,l,a,null))}function lv(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,_=null,v=null,T=null,B=null,G=null;for(L in a){var I=a[L];if(a.hasOwnProperty(L)&&I!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":T=I;default:l.hasOwnProperty(L)||Ot(e,i,L,null,l,I)}}for(var U in l){var L=l[U];if(I=a[U],l.hasOwnProperty(U)&&(L!=null||I!=null))switch(U){case"type":p=L;break;case"name":f=L;break;case"checked":B=L;break;case"defaultChecked":G=L;break;case"value":_=L;break;case"defaultValue":v=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,i));break;default:L!==I&&Ot(e,i,U,L,l,I)}}Gl(e,_,v,T,B,G,p,f);return;case"select":L=_=v=U=null;for(p in a)if(T=a[p],a.hasOwnProperty(p)&&T!=null)switch(p){case"value":break;case"multiple":L=T;default:l.hasOwnProperty(p)||Ot(e,i,p,null,l,T)}for(f in l)if(p=l[f],T=a[f],l.hasOwnProperty(f)&&(p!=null||T!=null))switch(f){case"value":U=p;break;case"defaultValue":v=p;break;case"multiple":_=p;default:p!==T&&Ot(e,i,f,p,l,T)}i=v,a=_,l=L,U!=null?os(e,!!a,U,!1):!!l!=!!a&&(i!=null?os(e,!!a,i,!0):os(e,!!a,a?[]:"",!1));return;case"textarea":L=U=null;for(v in a)if(f=a[v],a.hasOwnProperty(v)&&f!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ot(e,i,v,null,l,f)}for(_ in l)if(f=l[_],p=a[_],l.hasOwnProperty(_)&&(f!=null||p!=null))switch(_){case"value":U=f;break;case"defaultValue":L=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&Ot(e,i,_,f,l,p)}Nf(e,U,L);return;case"option":for(var Z in a)U=a[Z],a.hasOwnProperty(Z)&&U!=null&&!l.hasOwnProperty(Z)&&(Z==="selected"?e.selected=!1:Ot(e,i,Z,null,l,U));for(T in l)U=l[T],L=a[T],l.hasOwnProperty(T)&&U!==L&&(U!=null||L!=null)&&(T==="selected"?e.selected=U&&typeof U!="function"&&typeof U!="symbol":Ot(e,i,T,U,l,L));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in a)U=a[ot],a.hasOwnProperty(ot)&&U!=null&&!l.hasOwnProperty(ot)&&Ot(e,i,ot,null,l,U);for(B in l)if(U=l[B],L=a[B],l.hasOwnProperty(B)&&U!==L&&(U!=null||L!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,i));break;default:Ot(e,i,B,U,l,L)}return;default:if(Hl(i)){for(var zt in a)U=a[zt],a.hasOwnProperty(zt)&&U!==void 0&&!l.hasOwnProperty(zt)&&Eu(e,i,zt,void 0,l,U);for(G in l)U=l[G],L=a[G],!l.hasOwnProperty(G)||U===L||U===void 0&&L===void 0||Eu(e,i,G,U,l,L);return}}for(var D in a)U=a[D],a.hasOwnProperty(D)&&U!=null&&!l.hasOwnProperty(D)&&Ot(e,i,D,null,l,U);for(I in l)U=l[I],L=a[I],!l.hasOwnProperty(I)||U===L||U==null&&L==null||Ot(e,i,I,U,l,L)}function Ym(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],p=f.transferSize,_=f.initiatorType,v=f.duration;if(p&&v&&Ym(_)){for(_=0,v=f.responseEnd,l+=1;l<a.length;l++){var T=a[l],B=T.startTime;if(B>v)break;var G=T.transferSize,I=T.initiatorType;G&&Ym(I)&&(T=T.responseEnd,_+=G*(T<v?1:(v-B)/(T-B)))}if(--l,i+=8*(p+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ru=null,wu=null;function wo(e){return e.nodeType===9?e:e.ownerDocument}function Im(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vm(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function ku(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Du=null;function uv(){var e=window.event;return e&&e.type==="popstate"?e===Du?!1:(Du=e,!0):(Du=null,!1)}var Fm=typeof setTimeout=="function"?setTimeout:void 0,hv=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,fv=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(e){return Xm.resolve(null).then(e).catch(dv)}:Fm;function dv(e){setTimeout(function(){throw e})}function yi(e){return e==="head"}function qm(e,i){var a=i,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),Gs(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Gr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Gr(a);for(var p=a.firstChild;p;){var _=p.nextSibling,v=p.nodeName;p[ir]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=_}}else a==="body"&&Gr(e.ownerDocument.body);a=f}while(a);Gs(i)}function $m(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Ou(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ou(a),Ll(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function pv(e,i,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ir])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function mv(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=sn(e.nextSibling),e===null))return null;return e}function Qm(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=sn(e.nextSibling),e===null))return null;return e}function zu(e){return e.data==="$?"||e.data==="$~"}function Bu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function gv(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function sn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Uu=null;function Zm(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return sn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function Km(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function Wm(e,i,a){switch(i=wo(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Gr(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ll(e)}var rn=new Map,Jm=new Set;function ko(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xn=j.d;j.d={f:yv,r:_v,D:xv,C:bv,L:vv,m:Sv,X:Av,S:Cv,M:Tv};function yv(){var e=Xn.f(),i=vo();return e||i}function _v(e){var i=ss(e);i!==null&&i.tag===5&&i.type==="form"?gp(i):Xn.r(e)}var Ps=typeof document>"u"?null:document;function tg(e,i,a){var l=Ps;if(l&&typeof i=="string"&&i){var f=Ze(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Jm.has(f)||(Jm.add(f),e={rel:e,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),me(i,"link",e),le(i),l.head.appendChild(i)))}}function xv(e){Xn.D(e),tg("dns-prefetch",e,null)}function bv(e,i){Xn.C(e,i),tg("preconnect",e,i)}function vv(e,i,a){Xn.L(e,i,a);var l=Ps;if(l&&e&&i){var f='link[rel="preload"][as="'+Ze(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ze(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ze(a.imageSizes)+'"]')):f+='[href="'+Ze(e)+'"]';var p=f;switch(i){case"style":p=Ls(e);break;case"script":p=Ns(e)}rn.has(p)||(e=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),rn.set(p,e),l.querySelector(f)!==null||i==="style"&&l.querySelector(jr(p))||i==="script"&&l.querySelector(Hr(p))||(i=l.createElement("link"),me(i,"link",e),le(i),l.head.appendChild(i)))}}function Sv(e,i){Xn.m(e,i);var a=Ps;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Ze(l)+'"][href="'+Ze(e)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ns(e)}if(!rn.has(p)&&(e=y({rel:"modulepreload",href:e},i),rn.set(p,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Hr(p)))return}l=a.createElement("link"),me(l,"link",e),le(l),a.head.appendChild(l)}}}function Cv(e,i,a){Xn.S(e,i,a);var l=Ps;if(l&&e){var f=rs(l).hoistableStyles,p=Ls(e);i=i||"default";var _=f.get(p);if(!_){var v={loading:0,preload:null};if(_=l.querySelector(jr(p)))v.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":i},a),(a=rn.get(p))&&Pu(e,a);var T=_=l.createElement("link");le(T),me(T,"link",e),T._p=new Promise(function(B,G){T.onload=B,T.onerror=G}),T.addEventListener("load",function(){v.loading|=1}),T.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Do(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:v},f.set(p,_)}}}function Av(e,i){Xn.X(e,i);var a=Ps;if(a&&e){var l=rs(a).hoistableScripts,f=Ns(e),p=l.get(f);p||(p=a.querySelector(Hr(f)),p||(e=y({src:e,async:!0},i),(i=rn.get(f))&&Lu(e,i),p=a.createElement("script"),le(p),me(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Tv(e,i){Xn.M(e,i);var a=Ps;if(a&&e){var l=rs(a).hoistableScripts,f=Ns(e),p=l.get(f);p||(p=a.querySelector(Hr(f)),p||(e=y({src:e,async:!0,type:"module"},i),(i=rn.get(f))&&Lu(e,i),p=a.createElement("script"),le(p),me(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function eg(e,i,a,l){var f=(f=ut.current)?ko(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ls(a.href),a=rs(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ls(a.href);var p=rs(f).hoistableStyles,_=p.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,_),(p=f.querySelector(jr(e)))&&!p._p&&(_.instance=p,_.state.loading=5),rn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},rn.set(e,a),p||Mv(f,e,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ns(a),a=rs(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ls(e){return'href="'+Ze(e)+'"'}function jr(e){return'link[rel="stylesheet"]['+e+"]"}function ng(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Mv(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),me(i,"link",a),le(i),e.head.appendChild(i))}function Ns(e){return'[src="'+Ze(e)+'"]'}function Hr(e){return"script[async]"+e}function ig(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+Ze(a.href)+'"]');if(l)return i.instance=l,le(l),l;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),le(l),me(l,"style",f),Do(l,a.precedence,e),i.instance=l;case"stylesheet":f=Ls(a.href);var p=e.querySelector(jr(f));if(p)return i.state.loading|=4,i.instance=p,le(p),p;l=ng(a),(f=rn.get(f))&&Pu(l,f),p=(e.ownerDocument||e).createElement("link"),le(p);var _=p;return _._p=new Promise(function(v,T){_.onload=v,_.onerror=T}),me(p,"link",l),i.state.loading|=4,Do(p,a.precedence,e),i.instance=p;case"script":return p=Ns(a.src),(f=e.querySelector(Hr(p)))?(i.instance=f,le(f),f):(l=a,(f=rn.get(p))&&(l=y({},a),Lu(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),le(f),me(f,"link",l),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Do(l,a.precedence,e));return i.instance}function Do(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,_=0;_<l.length;_++){var v=l[_];if(v.dataset.precedence===i)p=v;else if(p!==f)break}p?p.parentNode.insertBefore(e,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Pu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Lu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Oo=null;function sg(e,i,a){if(Oo===null){var l=new Map,f=Oo=new Map;f.set(a,l)}else f=Oo,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var p=a[f];if(!(p[ir]||p[he]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var _=p.getAttribute(i)||"";_=e+_;var v=l.get(_);v?v.push(p):l.set(_,[p])}}return l}function rg(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function Ev(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ag(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Rv(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ls(l.href),p=i.querySelector(jr(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=zo.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=p,le(p);return}p=i.ownerDocument||i,l=ng(l),(f=rn.get(f))&&Pu(l,f),p=p.createElement("link"),le(p);var _=p;_._p=new Promise(function(v,T){_.onload=v,_.onerror=T}),me(p,"link",l),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=zo.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var Nu=0;function wv(e,i){return e.stylesheets&&e.count===0&&Uo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Uo(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+i);0<e.imgBytes&&Nu===0&&(Nu=62500*cv());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Uo(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>Nu?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function zo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bo=null;function Uo(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bo=new Map,i.forEach(kv,e),Bo=null,zo.call(e))}function kv(e,i){if(!(i.state.loading&4)){var a=Bo.get(e);if(a)var l=a.get(null);else{a=new Map,Bo.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var _=f[p];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),p=a.get(_)||l,p===l&&a.set(null,f),a.set(_,f),this.count++,l=zo.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Yr={$$typeof:O,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function Dv(e,i,a,l,f,p,_,v,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.hiddenUpdates=zl(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function og(e,i,a,l,f,p,_,v,T,B,G,I){return e=new Dv(e,i,a,_,T,B,G,I,v),i=1,p===!0&&(i|=24),p=He(3,null,null,i),e.current=p,p.stateNode=e,i=yc(),i.refCount++,e.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:i},vc(p),e}function lg(e){return e?(e=ms,e):ms}function cg(e,i,a,l,f,p){f=lg(f),l.context===null?l.context=f:l.pendingContext=f,l=ai(i),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=oi(e,l,i),a!==null&&(ze(a,e,i),br(a,e,i))}function ug(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Gu(e,i){ug(e,i),(e=e.alternate)&&ug(e,i)}function hg(e){if(e.tag===13||e.tag===31){var i=Oi(e,67108864);i!==null&&ze(i,e,67108864),Gu(e,67108864)}}function fg(e){if(e.tag===13||e.tag===31){var i=Xe();i=Bl(i);var a=Oi(e,i);a!==null&&ze(a,e,i),Gu(e,i)}}var Po=!0;function Ov(e,i,a,l){var f=k.T;k.T=null;var p=j.p;try{j.p=2,ju(e,i,a,l)}finally{j.p=p,k.T=f}}function zv(e,i,a,l){var f=k.T;k.T=null;var p=j.p;try{j.p=8,ju(e,i,a,l)}finally{j.p=p,k.T=f}}function ju(e,i,a,l){if(Po){var f=Hu(l);if(f===null)Mu(e,i,l,Lo,a),pg(e,l);else if(Uv(f,e,i,a,l))l.stopPropagation();else if(pg(e,l),i&4&&-1<Bv.indexOf(e)){for(;f!==null;){var p=ss(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var _=Ei(p.pendingLanes);if(_!==0){var v=p;for(v.pendingLanes|=2,v.entangledLanes|=2;_;){var T=1<<31-Ge(_);v.entanglements[1]|=T,_&=~T}Tn(p),(Rt&6)===0&&(xo=Le()+500,Pr(0))}}break;case 31:case 13:v=Oi(p,2),v!==null&&ze(v,p,2),vo(),Gu(p,2)}if(p=Hu(l),p===null&&Mu(e,i,l,Lo,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else Mu(e,i,l,null,a)}}function Hu(e){return e=Il(e),Yu(e)}var Lo=null;function Yu(e){if(Lo=null,e=is(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=u(i),e!==null)return e;e=null}else if(a===31){if(e=h(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Lo=e,null}function dg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xx()){case vf:return 2;case Sf:return 8;case Ta:case bx:return 32;case Cf:return 268435456;default:return 32}default:return 32}}var Iu=!1,_i=null,xi=null,bi=null,Ir=new Map,Vr=new Map,vi=[],Bv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pg(e,i){switch(e){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":Ir.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(i.pointerId)}}function Fr(e,i,a,l,f,p){return e===null||e.nativeEvent!==p?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=ss(i),i!==null&&hg(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Uv(e,i,a,l,f){switch(i){case"focusin":return _i=Fr(_i,e,i,a,l,f),!0;case"dragenter":return xi=Fr(xi,e,i,a,l,f),!0;case"mouseover":return bi=Fr(bi,e,i,a,l,f),!0;case"pointerover":var p=f.pointerId;return Ir.set(p,Fr(Ir.get(p)||null,e,i,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,Vr.set(p,Fr(Vr.get(p)||null,e,i,a,l,f)),!0}return!1}function mg(e){var i=is(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=u(a),i!==null){e.blockedOn=i,wf(e.priority,function(){fg(a)});return}}else if(i===31){if(i=h(a),i!==null){e.blockedOn=i,wf(e.priority,function(){fg(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function No(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Hu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Yl=l,a.target.dispatchEvent(l),Yl=null}else return i=ss(a),i!==null&&hg(i),e.blockedOn=a,!1;i.shift()}return!0}function gg(e,i,a){No(e)&&a.delete(i)}function Pv(){Iu=!1,_i!==null&&No(_i)&&(_i=null),xi!==null&&No(xi)&&(xi=null),bi!==null&&No(bi)&&(bi=null),Ir.forEach(gg),Vr.forEach(gg)}function Go(e,i){e.blockedOn===i&&(e.blockedOn=null,Iu||(Iu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Pv)))}var jo=null;function yg(e){jo!==e&&(jo=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jo===e&&(jo=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],f=e[i+2];if(typeof l!="function"){if(Yu(l||a)===null)continue;break}var p=ss(a);p!==null&&(e.splice(i,3),i-=3,Hc(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Gs(e){function i(T){return Go(T,e)}_i!==null&&Go(_i,e),xi!==null&&Go(xi,e),bi!==null&&Go(bi,e),Ir.forEach(i),Vr.forEach(i);for(var a=0;a<vi.length;a++){var l=vi[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<vi.length&&(a=vi[0],a.blockedOn===null);)mg(a),a.blockedOn===null&&vi.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],_=f[Ee]||null;if(typeof p=="function")_||yg(a);else if(_){var v=null;if(p&&p.hasAttribute("formAction")){if(f=p,_=p[Ee]||null)v=_.formAction;else if(Yu(f)!==null)continue}else v=_.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),yg(a)}}}function _g(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Vu(e){this._internalRoot=e}Ho.prototype.render=Vu.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Xe();cg(a,l,e,i,null,null)},Ho.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;cg(e.current,2,null,e,null,null),vo(),i[ns]=null}};function Ho(e){this._internalRoot=e}Ho.prototype.unstable_scheduleHydration=function(e){if(e){var i=Rf();e={blockedOn:null,target:e,priority:i};for(var a=0;a<vi.length&&i!==0&&i<vi[a].priority;a++);vi.splice(a,0,e),a===0&&mg(e)}};var xg=t.version;if(xg!=="19.2.4")throw Error(s(527,xg,"19.2.4"));j.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Lv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yo.isDisabled&&Yo.supportsFiber)try{tr=Yo.inject(Lv),Ne=Yo}catch{}}return qr.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",f=Mp,p=Ep,_=Rp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=og(e,1,!1,null,null,a,l,null,f,p,_,_g),e[ns]=i.current,Tu(e),new Vu(i)},qr.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,f="",p=Mp,_=Ep,v=Rp,T=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(T=a.formState)),i=og(e,1,!0,i,a??null,l,f,T,p,_,v,_g),i.context=lg(null),a=i.current,l=Xe(),l=Bl(l),f=ai(l),f.callback=null,oi(a,f,l),a=l,i.current.lanes=a,nr(i,a),Tn(i),e[ns]=i.current,Tu(e),new Ho(i)},qr.version="19.2.4",qr}var wg;function $v(){if(wg)return qu.exports;wg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),qu.exports=qv(),qu.exports}var Qv=$v();const Zv=ba(Qv),Kv="modulepreload",Wv=function(r){return"/VTT-RPG/"+r},kg={},ml=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(m){return Promise.all(m.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");o=d(n.map(m=>{if(m=Wv(m),m in kg)return;kg[m]=!0;const g=m.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":Kv,g||(x.as="script"),x.crossOrigin="",x.href=m,h&&x.setAttribute("nonce",h),document.head.appendChild(x),g)return new Promise((b,S)=>{x.addEventListener("load",b),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&c(h.reason);return t().catch(c)})};var rt=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(rt||{});const Eh=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Io=(r,t)=>Eh(r).priority??t,ye={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Eh).forEach(t=>{t.type.forEach(n=>this._removeHandlers[n]?.(t))}),this},add(...r){return r.map(Eh).forEach(t=>{t.type.forEach(n=>{const s=this._addHandlers,o=this._queue;s[n]?s[n]?.(t):(o[n]=o[n]||[],o[n]?.push(t))})}),this},handle(r,t,n){const s=this._addHandlers,o=this._removeHandlers;if(s[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);s[r]=t,o[r]=n;const c=this._queue;return c[r]&&(c[r]?.forEach(u=>t(u)),delete c[r]),this},handleByMap(r,t){return this.handle(r,n=>{n.name&&(t[n.name]=n.ref)},n=>{n.name&&delete t[n.name]})},handleByNamedList(r,t,n=-1){return this.handle(r,s=>{t.findIndex(c=>c.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((c,u)=>Io(u.value,n)-Io(c.value,n)))},s=>{const o=t.findIndex(c=>c.name===s.name);o!==-1&&t.splice(o,1)})},handleByList(r,t,n=-1){return this.handle(r,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((o,c)=>Io(c,n)-Io(o,n)))},s=>{const o=t.indexOf(s.ref);o!==-1&&t.splice(o,1)})},mixin(r,...t){for(const n of t)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(n))}},Jv={extension:{type:rt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await ml(()=>import("./browserAll-CyFel0GM.js"),__vite__mapDeps([0,1,2]))}},t1={extension:{type:rt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await ml(()=>import("./webworkerAll-CHpwp0M2.js"),__vite__mapDeps([1,2]))}};class xe{constructor(t,n,s){this._x=n||0,this._y=s||0,this._observer=t}clone(t){return new xe(t??this._observer,this._x,this._y)}set(t=0,n=t){return(this._x!==t||this._y!==n)&&(this._x=t,this._y=n,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Ku={exports:{}},Dg;function e1(){return Dg||(Dg=1,(function(r){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function o(d,m,g){this.fn=d,this.context=m,this.once=g||!1}function c(d,m,g,y,x){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new o(g,y||d,x),S=n?n+m:m;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],b]:d._events[S].push(b):(d._events[S]=b,d._eventsCount++),d}function u(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},h.prototype.listeners=function(m){var g=n?n+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,b=y.length,S=new Array(b);x<b;x++)S[x]=y[x].fn;return S},h.prototype.listenerCount=function(m){var g=n?n+m:m,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(m,g,y,x,b,S){var A=n?n+m:m;if(!this._events[A])return!1;var C=this._events[A],M=arguments.length,w,O;if(C.fn){switch(C.once&&this.removeListener(m,C.fn,void 0,!0),M){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,g),!0;case 3:return C.fn.call(C.context,g,y),!0;case 4:return C.fn.call(C.context,g,y,x),!0;case 5:return C.fn.call(C.context,g,y,x,b),!0;case 6:return C.fn.call(C.context,g,y,x,b,S),!0}for(O=1,w=new Array(M-1);O<M;O++)w[O-1]=arguments[O];C.fn.apply(C.context,w)}else{var P=C.length,F;for(O=0;O<P;O++)switch(C[O].once&&this.removeListener(m,C[O].fn,void 0,!0),M){case 1:C[O].fn.call(C[O].context);break;case 2:C[O].fn.call(C[O].context,g);break;case 3:C[O].fn.call(C[O].context,g,y);break;case 4:C[O].fn.call(C[O].context,g,y,x);break;default:if(!w)for(F=1,w=new Array(M-1);F<M;F++)w[F-1]=arguments[F];C[O].fn.apply(C[O].context,w)}}return!0},h.prototype.on=function(m,g,y){return c(this,m,g,y,!1)},h.prototype.once=function(m,g,y){return c(this,m,g,y,!0)},h.prototype.removeListener=function(m,g,y,x){var b=n?n+m:m;if(!this._events[b])return this;if(!g)return u(this,b),this;var S=this._events[b];if(S.fn)S.fn===g&&(!x||S.once)&&(!y||S.context===y)&&u(this,b);else{for(var A=0,C=[],M=S.length;A<M;A++)(S[A].fn!==g||x&&!S[A].once||y&&S[A].context!==y)&&C.push(S[A]);C.length?this._events[b]=C.length===1?C[0]:C:u(this,b)}return this},h.prototype.removeAllListeners=function(m){var g;return m?(g=n?n+m:m,this._events[g]&&u(this,g)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,r.exports=h})(Ku)),Ku.exports}var n1=e1();const yn=ba(n1),i1=Math.PI*2,s1=180/Math.PI,r1=Math.PI/180;class ve{constructor(t=0,n=0){this.x=0,this.y=0,this.x=t,this.y=n}clone(){return new ve(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,n=t){return this.x=t,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Wu.x=0,Wu.y=0,Wu}}const Wu=new ve;class bt{constructor(t=1,n=0,s=0,o=1,c=0,u=0){this.array=null,this.a=t,this.b=n,this.c=s,this.d=o,this.tx=c,this.ty=u}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,n,s,o,c,u){return this.a=t,this.b=n,this.c=s,this.d=o,this.tx=c,this.ty=u,this}toArray(t,n){this.array||(this.array=new Float32Array(9));const s=n||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,n){n=n||new ve;const s=t.x,o=t.y;return n.x=this.a*s+this.c*o+this.tx,n.y=this.b*s+this.d*o+this.ty,n}applyInverse(t,n){n=n||new ve;const s=this.a,o=this.b,c=this.c,u=this.d,h=this.tx,d=this.ty,m=1/(s*u+c*-o),g=t.x,y=t.y;return n.x=u*m*g+-c*m*y+(d*c-h*u)*m,n.y=s*m*y+-o*m*g+(-d*s+h*o)*m,n}translate(t,n){return this.tx+=t,this.ty+=n,this}scale(t,n){return this.a*=t,this.d*=n,this.c*=t,this.b*=n,this.tx*=t,this.ty*=n,this}rotate(t){const n=Math.cos(t),s=Math.sin(t),o=this.a,c=this.c,u=this.tx;return this.a=o*n-this.b*s,this.b=o*s+this.b*n,this.c=c*n-this.d*s,this.d=c*s+this.d*n,this.tx=u*n-this.ty*s,this.ty=u*s+this.ty*n,this}append(t){const n=this.a,s=this.b,o=this.c,c=this.d;return this.a=t.a*n+t.b*o,this.b=t.a*s+t.b*c,this.c=t.c*n+t.d*o,this.d=t.c*s+t.d*c,this.tx=t.tx*n+t.ty*o+this.tx,this.ty=t.tx*s+t.ty*c+this.ty,this}appendFrom(t,n){const s=t.a,o=t.b,c=t.c,u=t.d,h=t.tx,d=t.ty,m=n.a,g=n.b,y=n.c,x=n.d;return this.a=s*m+o*y,this.b=s*g+o*x,this.c=c*m+u*y,this.d=c*g+u*x,this.tx=h*m+d*y+n.tx,this.ty=h*g+d*x+n.ty,this}setTransform(t,n,s,o,c,u,h,d,m){return this.a=Math.cos(h+m)*c,this.b=Math.sin(h+m)*c,this.c=-Math.sin(h-d)*u,this.d=Math.cos(h-d)*u,this.tx=t-(s*this.a+o*this.c),this.ty=n-(s*this.b+o*this.d),this}prepend(t){const n=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,o=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this}decompose(t){const n=this.a,s=this.b,o=this.c,c=this.d,u=t.pivot,h=-Math.atan2(-o,c),d=Math.atan2(s,n),m=Math.abs(h+d);return m<1e-5||Math.abs(i1-m)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=d),t.scale.x=Math.sqrt(n*n+s*s),t.scale.y=Math.sqrt(o*o+c*c),t.position.x=this.tx+(u.x*n+u.y*o),t.position.y=this.ty+(u.x*s+u.y*c),t}invert(){const t=this.a,n=this.b,s=this.c,o=this.d,c=this.tx,u=t*o-n*s;return this.a=o/u,this.b=-n/u,this.c=-s/u,this.d=t/u,this.tx=(s*this.ty-o*c)/u,this.ty=-(t*this.ty-n*c)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new bt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return o1.identity()}static get shared(){return a1.identity()}}const a1=new bt,o1=new bt,Xi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],qi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],$i=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Qi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Rh=[],n0=[],Vo=Math.sign;function l1(){for(let r=0;r<16;r++){const t=[];Rh.push(t);for(let n=0;n<16;n++){const s=Vo(Xi[r]*Xi[n]+$i[r]*qi[n]),o=Vo(qi[r]*Xi[n]+Qi[r]*qi[n]),c=Vo(Xi[r]*$i[n]+$i[r]*Qi[n]),u=Vo(qi[r]*$i[n]+Qi[r]*Qi[n]);for(let h=0;h<16;h++)if(Xi[h]===s&&qi[h]===o&&$i[h]===c&&Qi[h]===u){t.push(h);break}}}for(let r=0;r<16;r++){const t=new bt;t.set(Xi[r],qi[r],$i[r],Qi[r],0,0),n0.push(t)}}l1();const Bt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Xi[r],uY:r=>qi[r],vX:r=>$i[r],vY:r=>Qi[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>Rh[r][t],sub:(r,t)=>Rh[r][Bt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Bt.S:Bt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Bt.E:Bt.W:t>0?r>0?Bt.SE:Bt.SW:r>0?Bt.NE:Bt.NW,matrixAppendRotationInv:(r,t,n=0,s=0)=>{const o=n0[Bt.inv(t)];o.tx=n,o.ty=s,r.append(o)},transformRectCoords:(r,t,n,s)=>{const{x:o,y:c,width:u,height:h}=r,{x:d,y:m,width:g,height:y}=t;return n===Bt.E?(s.set(o+d,c+m,u,h),s):n===Bt.S?s.set(g-c-h+d,o+m,h,u):n===Bt.W?s.set(g-o-u+d,y-c-h+m,u,h):n===Bt.N?s.set(c+d,y-o-u+m,h,u):s.set(o+d,c+m,u,h)}},Fo=[new ve,new ve,new ve,new ve];class Kt{constructor(t=0,n=0,s=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(n),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Kt(0,0,0,0)}clone(){return new Kt(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(t,n,s,o=.5){const{width:c,height:u}=this;if(c<=0||u<=0)return!1;const h=this.x,d=this.y,m=s*(1-o),g=s-m,y=h-m,x=h+c+m,b=d-m,S=d+u+m,A=h+g,C=h+c-g,M=d+g,w=d+u-g;return t>=y&&t<=x&&n>=b&&n<=S&&!(t>A&&t<C&&n>M&&n<w)}intersects(t,n){if(!n){const tt=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=tt)return!1;const q=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>q}const s=this.left,o=this.right,c=this.top,u=this.bottom;if(o<=s||u<=c)return!1;const h=Fo[0].set(t.left,t.top),d=Fo[1].set(t.left,t.bottom),m=Fo[2].set(t.right,t.top),g=Fo[3].set(t.right,t.bottom);if(m.x<=h.x||d.y<=h.y)return!1;const y=Math.sign(n.a*n.d-n.b*n.c);if(y===0||(n.apply(h,h),n.apply(d,d),n.apply(m,m),n.apply(g,g),Math.max(h.x,d.x,m.x,g.x)<=s||Math.min(h.x,d.x,m.x,g.x)>=o||Math.max(h.y,d.y,m.y,g.y)<=c||Math.min(h.y,d.y,m.y,g.y)>=u))return!1;const x=y*(d.y-h.y),b=y*(h.x-d.x),S=x*s+b*c,A=x*o+b*c,C=x*s+b*u,M=x*o+b*u;if(Math.max(S,A,C,M)<=x*h.x+b*h.y||Math.min(S,A,C,M)>=x*g.x+b*g.y)return!1;const w=y*(h.y-m.y),O=y*(m.x-h.x),P=w*s+O*c,F=w*o+O*c,V=w*s+O*u,N=w*o+O*u;return!(Math.max(P,F,V,N)<=w*h.x+O*h.y||Math.min(P,F,V,N)>=w*g.x+O*g.y)}pad(t=0,n=t){return this.x-=t,this.y-=n,this.width+=t*2,this.height+=n*2,this}fit(t){const n=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),c=Math.min(this.y+this.height,t.y+t.height);return this.x=n,this.width=Math.max(s-n,0),this.y=o,this.height=Math.max(c-o,0),this}ceil(t=1,n=.001){const s=Math.ceil((this.x+this.width-n)*t)/t,o=Math.ceil((this.y+this.height-n)*t)/t;return this.x=Math.floor((this.x+n)*t)/t,this.y=Math.floor((this.y+n)*t)/t,this.width=s-this.x,this.height=o-this.y,this}scale(t,n=t){return this.x*=t,this.y*=n,this.width*=t,this.height*=n,this}enlarge(t){const n=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),c=Math.max(this.y+this.height,t.y+t.height);return this.x=n,this.width=s-n,this.y=o,this.height=c-o,this}getBounds(t){return t||(t=new Kt),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const n=t.x,s=t.y,o=t.x+t.width,c=t.y+t.height;return n>=this.x&&n<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&c>=this.y&&c<this.y+this.height}set(t,n,s,o){return this.x=t,this.y=n,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Ju={default:-1};function $t(r="default"){return Ju[r]===void 0&&(Ju[r]=-1),++Ju[r]}const Og=new Set,Ut="8.0.0",c1="8.3.4",Ys={quiet:!1,noColor:!1},gt=(r,t,n=3)=>{if(Ys.quiet||Og.has(t))return;let s=new Error().stack;const o=`${t}
Deprecated since v${r}`,c=typeof console.groupCollapsed=="function"&&!Ys.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(n).join(`
`),c?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Og.add(t)};Object.defineProperties(gt,{quiet:{get:()=>Ys.quiet,set:r=>{Ys.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>Ys.noColor,set:r=>{Ys.noColor=r},enumerable:!0,configurable:!1}});const i0=()=>{};function gl(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function zg(r){return!(r&r-1)&&!!r}function s0(r){const t={};for(const n in r)r[n]!==void 0&&(t[n]=r[n]);return t}const Bg=Object.create(null);function u1(r){const t=Bg[r];return t===void 0&&(Bg[r]=$t("resource")),t}const r0=class a0 extends yn{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...a0.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){gt(Ut,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=u1(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};r0.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let yl=r0;const o0=class l0 extends yn{constructor(t={}){super(),this.options=t,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=$t("textureSource"),this._resourceType="textureSource",this._resourceId=$t("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...l0.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new yl(s0(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=$t("resource"),this.emit("change",this),this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,n,s){s||(s=this._resolution),t||(t=this.width),n||(n=this.height);const o=Math.round(t*s),c=Math.round(n*s);return this.width=o/s,this.height=c/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===c?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=c,this.emit("resize",this),this._resourceId=$t("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=zg(this.pixelWidth)&&zg(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};o0.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let _n=o0;class nf extends _n{constructor(t){const n=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(n instanceof Float32Array?s="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?s="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?s="rgba16uint":(n instanceof Int8Array,s="bgra8unorm")),super({...t,resource:n,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}nf.extension=rt.TextureSource;const Ug=new bt;class h1{constructor(t,n){this.mapCoord=new bt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,n){n===void 0&&(n=t);const s=this.mapCoord;for(let o=0;o<t.length;o+=2){const c=t[o],u=t[o+1];n[o]=c*s.a+u*s.c+s.tx,n[o+1]=c*s.b+u*s.d+s.ty}return n}update(){const t=this._texture;this._updateID++;const n=t.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=t.orig,o=t.trim;o&&(Ug.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Ug));const c=t.source,u=this.uClampFrame,h=this.clampMargin/c._resolution,d=this.clampOffset/c._resolution;return u[0]=(t.frame.x+h+d)/c.width,u[1]=(t.frame.y+h+d)/c.height,u[2]=(t.frame.x+t.frame.width-h+d)/c.width,u[3]=(t.frame.y+t.frame.height-h+d)/c.height,this.uClampOffset[0]=this.clampOffset/c.pixelWidth,this.uClampOffset[1]=this.clampOffset/c.pixelHeight,this.isSimple=t.frame.width===c.width&&t.frame.height===c.height&&t.rotate===0,!0}}class St extends yn{constructor({source:t,label:n,frame:s,orig:o,trim:c,defaultAnchor:u,defaultBorders:h,rotate:d,dynamic:m}={}){if(super(),this.uid=$t("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Kt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=t?.source??new _n,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=o||this.frame,this.trim=c,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=m||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new h1(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:n}=this,{width:s,height:o}=this._source,c=n.x/s,u=n.y/o,h=n.width/s,d=n.height/o;let m=this.rotate;if(m){const g=h/2,y=d/2,x=c+g,b=u+y;m=Bt.add(m,Bt.NW),t.x0=x+g*Bt.uX(m),t.y0=b+y*Bt.uY(m),m=Bt.add(m,2),t.x1=x+g*Bt.uX(m),t.y1=b+y*Bt.uY(m),m=Bt.add(m,2),t.x2=x+g*Bt.uX(m),t.y2=b+y*Bt.uY(m),m=Bt.add(m,2),t.x3=x+g*Bt.uX(m),t.y3=b+y*Bt.uY(m)}else t.x0=c,t.y0=u,t.x1=c+h,t.y1=u,t.x2=c+h,t.y2=u+d,t.x3=c,t.y3=u+d}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return gt(Ut,"Texture.baseTexture is now Texture.source"),this._source}}St.EMPTY=new St({label:"EMPTY",source:new _n({label:"EMPTY"})});St.EMPTY.destroy=i0;St.WHITE=new St({source:new nf({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});St.WHITE.destroy=i0;function f1(r,t,n){const{width:s,height:o}=n.orig,c=n.trim;if(c){const u=c.width,h=c.height;r.minX=c.x-t._x*s,r.maxX=r.minX+u,r.minY=c.y-t._y*o,r.maxY=r.minY+h}else r.minX=-t._x*s,r.maxX=r.minX+s,r.minY=-t._y*o,r.maxY=r.minY+o}const Pg=new bt;class gn{constructor(t=1/0,n=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Pg,this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Kt);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Pg,this}set(t,n,s,o){this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}addFrame(t,n,s,o,c){c||(c=this.matrix);const u=c.a,h=c.b,d=c.c,m=c.d,g=c.tx,y=c.ty;let x=this.minX,b=this.minY,S=this.maxX,A=this.maxY,C=u*t+d*n+g,M=h*t+m*n+y;C<x&&(x=C),M<b&&(b=M),C>S&&(S=C),M>A&&(A=M),C=u*s+d*n+g,M=h*s+m*n+y,C<x&&(x=C),M<b&&(b=M),C>S&&(S=C),M>A&&(A=M),C=u*t+d*o+g,M=h*t+m*o+y,C<x&&(x=C),M<b&&(b=M),C>S&&(S=C),M>A&&(A=M),C=u*s+d*o+g,M=h*s+m*o+y,C<x&&(x=C),M<b&&(b=M),C>S&&(S=C),M>A&&(A=M),this.minX=x,this.minY=b,this.maxX=S,this.maxY=A}addRect(t,n){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,n)}addBounds(t,n){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,n)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const n=this.minX,s=this.minY,o=this.maxX,c=this.maxY,{a:u,b:h,c:d,d:m,tx:g,ty:y}=t;let x=u*n+d*s+g,b=h*n+m*s+y;this.minX=x,this.minY=b,this.maxX=x,this.maxY=b,x=u*o+d*s+g,b=h*o+m*s+y,this.minX=x<this.minX?x:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=b>this.maxY?b:this.maxY,x=u*n+d*c+g,b=h*n+m*c+y,this.minX=x<this.minX?x:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=b>this.maxY?b:this.maxY,x=u*o+d*c+g,b=h*o+m*c+y,this.minX=x<this.minX?x:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=b>this.maxY?b:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,n,s,o){return this.minX<t&&(this.minX=t),this.maxX>n&&(this.maxX=n),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(t,n=t){return this.minX-=t,this.maxX+=t,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new gn(this.minX,this.minY,this.maxX,this.maxY)}scale(t,n=t){return this.minX*=t,this.minY*=n,this.maxX*=t,this.maxY*=n,this}get x(){return this.minX}set x(t){const n=this.maxX-this.minX;this.minX=t,this.maxX=t+n}get y(){return this.minY}set y(t){const n=this.maxY-this.minY;this.minY=t,this.maxY=t+n}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,n,s,o){let c=this.minX,u=this.minY,h=this.maxX,d=this.maxY;o||(o=this.matrix);const m=o.a,g=o.b,y=o.c,x=o.d,b=o.tx,S=o.ty;for(let A=n;A<s;A+=2){const C=t[A],M=t[A+1],w=m*C+y*M+b,O=g*C+x*M+S;c=w<c?w:c,u=O<u?O:u,h=w>h?w:h,d=O>d?O:d}this.minX=c,this.minY=u,this.maxX=h,this.maxY=d}containsPoint(t,n){return this.minX<=t&&this.minY<=n&&this.maxX>=t&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var d1={grad:.9,turn:360,rad:360/(2*Math.PI)},qn=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},ue=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},on=function(r,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),r>n?n:r>t?r:t},c0=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Lg=function(r){return{r:on(r.r,0,255),g:on(r.g,0,255),b:on(r.b,0,255),a:on(r.a)}},th=function(r){return{r:ue(r.r),g:ue(r.g),b:ue(r.b),a:ue(r.a,3)}},p1=/^#([0-9a-f]{3,8})$/i,Xo=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},u0=function(r){var t=r.r,n=r.g,s=r.b,o=r.a,c=Math.max(t,n,s),u=c-Math.min(t,n,s),h=u?c===t?(n-s)/u:c===n?2+(s-t)/u:4+(t-n)/u:0;return{h:60*(h<0?h+6:h),s:c?u/c*100:0,v:c/255*100,a:o}},h0=function(r){var t=r.h,n=r.s,s=r.v,o=r.a;t=t/360*6,n/=100,s/=100;var c=Math.floor(t),u=s*(1-n),h=s*(1-(t-c)*n),d=s*(1-(1-t+c)*n),m=c%6;return{r:255*[s,h,u,u,d,s][m],g:255*[d,s,s,h,u,u][m],b:255*[u,u,d,s,s,h][m],a:o}},Ng=function(r){return{h:c0(r.h),s:on(r.s,0,100),l:on(r.l,0,100),a:on(r.a)}},Gg=function(r){return{h:ue(r.h),s:ue(r.s),l:ue(r.l),a:ue(r.a,3)}},jg=function(r){return h0((n=(t=r).s,{h:t.h,s:(n*=((s=t.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:t.a}));var t,n,s},ca=function(r){return{h:(t=u0(r)).h,s:(o=(200-(n=t.s))*(s=t.v)/100)>0&&o<200?n*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,s,o},m1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,g1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wh={string:[[function(r){var t=p1.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?ue(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?ue(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=y1.exec(r)||_1.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:Lg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=m1.exec(r)||g1.exec(r);if(!t)return null;var n,s,o=Ng({h:(n=t[1],s=t[2],s===void 0&&(s="deg"),Number(n)*(d1[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return jg(o)},"hsl"]],object:[[function(r){var t=r.r,n=r.g,s=r.b,o=r.a,c=o===void 0?1:o;return qn(t)&&qn(n)&&qn(s)?Lg({r:Number(t),g:Number(n),b:Number(s),a:Number(c)}):null},"rgb"],[function(r){var t=r.h,n=r.s,s=r.l,o=r.a,c=o===void 0?1:o;if(!qn(t)||!qn(n)||!qn(s))return null;var u=Ng({h:Number(t),s:Number(n),l:Number(s),a:Number(c)});return jg(u)},"hsl"],[function(r){var t=r.h,n=r.s,s=r.v,o=r.a,c=o===void 0?1:o;if(!qn(t)||!qn(n)||!qn(s))return null;var u=(function(h){return{h:c0(h.h),s:on(h.s,0,100),v:on(h.v,0,100),a:on(h.a)}})({h:Number(t),s:Number(n),v:Number(s),a:Number(c)});return h0(u)},"hsv"]]},Hg=function(r,t){for(var n=0;n<t.length;n++){var s=t[n][0](r);if(s)return[s,t[n][1]]}return[null,void 0]},x1=function(r){return typeof r=="string"?Hg(r.trim(),wh.string):typeof r=="object"&&r!==null?Hg(r,wh.object):[null,void 0]},eh=function(r,t){var n=ca(r);return{h:n.h,s:on(n.s+100*t,0,100),l:n.l,a:n.a}},nh=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Yg=function(r,t){var n=ca(r);return{h:n.h,s:n.s,l:on(n.l+100*t,0,100),a:n.a}},kh=(function(){function r(t){this.parsed=x1(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return ue(nh(this.rgba),2)},r.prototype.isDark=function(){return nh(this.rgba)<.5},r.prototype.isLight=function(){return nh(this.rgba)>=.5},r.prototype.toHex=function(){return t=th(this.rgba),n=t.r,s=t.g,o=t.b,u=(c=t.a)<1?Xo(ue(255*c)):"","#"+Xo(n)+Xo(s)+Xo(o)+u;var t,n,s,o,c,u},r.prototype.toRgb=function(){return th(this.rgba)},r.prototype.toRgbString=function(){return t=th(this.rgba),n=t.r,s=t.g,o=t.b,(c=t.a)<1?"rgba("+n+", "+s+", "+o+", "+c+")":"rgb("+n+", "+s+", "+o+")";var t,n,s,o,c},r.prototype.toHsl=function(){return Gg(ca(this.rgba))},r.prototype.toHslString=function(){return t=Gg(ca(this.rgba)),n=t.h,s=t.s,o=t.l,(c=t.a)<1?"hsla("+n+", "+s+"%, "+o+"%, "+c+")":"hsl("+n+", "+s+"%, "+o+"%)";var t,n,s,o,c},r.prototype.toHsv=function(){return t=u0(this.rgba),{h:ue(t.h),s:ue(t.s),v:ue(t.v),a:ue(t.a,3)};var t},r.prototype.invert=function(){return Mn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),Mn(eh(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),Mn(eh(this.rgba,-t))},r.prototype.grayscale=function(){return Mn(eh(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),Mn(Yg(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),Mn(Yg(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?Mn({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):ue(this.rgba.a,3);var n},r.prototype.hue=function(t){var n=ca(this.rgba);return typeof t=="number"?Mn({h:t,s:n.s,l:n.l,a:n.a}):ue(n.h)},r.prototype.isEqual=function(t){return this.toHex()===Mn(t).toHex()},r})(),Mn=function(r){return r instanceof kh?r:new kh(r)},Ig=[],b1=function(r){r.forEach(function(t){Ig.indexOf(t)<0&&(t(kh,wh),Ig.push(t))})};function v1(r,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in n)s[n[o]]=o;var c={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,m=s[this.toHex()];if(m)return m;if(u?.closest){var g=this.toRgb(),y=1/0,x="black";if(!c.length)for(var b in n)c[b]=new r(n[b]).toRgb();for(var S in n){var A=(h=g,d=c[S],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));A<y&&(y=A,x=S)}return x}},t.string.push([function(u){var h=u.toLowerCase(),d=h==="transparent"?"#0000":n[h];return d?new r(d).toRgb():null},"name"])}b1([v1]);const qs=class ia{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ia)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,n){const s=typeof t;if(s!==typeof n)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===n;if(Array.isArray(t)&&Array.isArray(n)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))return t.length!==n.length?!1:t.every((c,u)=>c===n[u]);if(t!==null&&n!==null){const c=Object.keys(t),u=Object.keys(n);return c.length!==u.length?!1:c.every(h=>t[h]===n[h])}return t===n}toRgba(){const[t,n,s,o]=this._components;return{r:t,g:n,b:s,a:o}}toRgb(){const[t,n,s]=this._components;return{r:t,g:n,b:s}}toRgbaString(){const[t,n,s]=this.toUint8RgbArray();return`rgba(${t},${n},${s},${this.alpha})`}toUint8RgbArray(t){const[n,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(n*255),t[1]=Math.round(s*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[n,s,o,c]=this._components;return t[0]=n,t[1]=s,t[2]=o,t[3]=c,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[n,s,o]=this._components;return t[0]=n,t[1]=s,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,n,s]=this.toUint8RgbArray();return(s<<16)+(n<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[n,s,o,c]=ia._temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=s,this._components[2]*=o,this._components[3]*=c,this._refreshInt(),this._value=null,this}premultiply(t,n=!0){return n&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,n=!0){if(t===1)return(255<<24)+this._int;if(t===0)return n?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,c=this._int&255;return n&&(s=s*t+.5|0,o=o*t+.5|0,c=c*t+.5|0),(t*255<<24)+(s<<16)+(o<<8)+c}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let n,s,o,c;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const u=t;n=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,c=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,s,o,c=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,s,o,c=255]=t,n/=255,s/=255,o/=255,c/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=ia.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const u=Mn(t);u.isValid()&&({r:n,g:s,b:o,a:c}=u.rgba,n/=255,s/=255,o/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=s,this._components[2]=o,this._components[3]=c,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,n,s]=this._components;this._int=(t*255<<16)+(n*255<<8)+(s*255|0)}_clamp(t,n=0,s=1){return typeof t=="number"?Math.min(Math.max(t,n),s):(t.forEach((o,c)=>{t[c]=Math.min(Math.max(o,n),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof ia||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};qs.shared=new qs;qs._temp=new qs;qs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let re=qs;const S1={cullArea:null,cullable:!1,cullableChildren:!0};let ih=0;const Vg=500;function Ht(...r){ih!==Vg&&(ih++,ih===Vg?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const va={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class C1{constructor(t,n){this._pool=[],this._count=0,this._index=0,this._classType=t,n&&this.prepopulate(n)}prepopulate(t){for(let n=0;n<t;n++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let n;return this._index>0?n=this._pool[--this._index]:(n=new this._classType,this._count++),n.init?.(t),n}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class A1{constructor(){this._poolsByClass=new Map}prepopulate(t,n){this.getPool(t).prepopulate(n)}get(t,n){return this.getPool(t).get(n)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new C1(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(n=>{const s=t[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;t[s]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const ln=new A1;va.register(ln);const T1={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){gt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function M1(r,t,n){const s=r.length;let o;if(t>=s||n===0)return;n=t+n>s?s-t:n;const c=s-n;for(o=t;o<c;++o)r[o]=r[o+n];r.length=c}const E1={allowChildren:!0,removeChildren(r=0,t){const n=t??this.children.length,s=n-r,o=[];if(s>0&&s<=n){for(let u=n-1;u>=r;u--){const h=this.children[u];h&&(o.push(h),h.parent=null)}M1(this.children,r,n);const c=this.renderGroup||this.parentRenderGroup;c&&c.removeChildren(o);for(let u=0;u<o.length;++u){const h=o[u];h.parentRenderLayer?.detach(h),this.emit("childRemoved",h,this,u),o[u].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const t=this.getChildAt(r);return this.removeChild(t)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,t)},getChildIndex(r){const t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(r,t){this.allowChildren||gt(Ut,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(t<0||t>n.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${n.length}`);if(r.parent){const o=r.parent.children.indexOf(r);if(r.parent===this&&o===t)return r;o!==-1&&r.parent.children.splice(o,1)}t===n.length?n.push(r):n.splice(t,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,t),r.emit("added",this),r},swapChildren(r,t){if(r===t)return;const n=this.getChildIndex(r),s=this.getChildIndex(t);this.children[n]=t,this.children[s]=r;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(t=>this.reparentChildAt(t,this.children.length)),r[0])},reparentChildAt(r,t){if(r.parent===this)return this.setChildIndex(r,t),r;const n=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,t);const s=this.worldTransform.clone();return s.invert(),n.prepend(s),r.setFromMatrix(n),r},replaceChild(r,t){r.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(r)),t.setFromMatrix(r.localTransform),t.updateLocalTransform(),this.removeChild(r)}},R1={collectRenderables(r,t,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,t,n):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,t,n))},collectRenderablesSimple(r,t,n){const s=this.children,o=s.length;for(let c=0;c<o;c++)s[c].collectRenderables(r,t,n)},collectRenderablesWithEffects(r,t,n){const{renderPipes:s}=t;for(let o=0;o<this.effects.length;o++){const c=this.effects[o];s[c.pipe].push(c,this,r)}this.collectRenderablesSimple(r,t,n);for(let o=this.effects.length-1;o>=0;o--){const c=this.effects[o];s[c.pipe].pop(c,this,r)}}};class Fg{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class w1{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const s=this._tests[n];if(s.test(t))return ln.get(s.maskClass,t)}return t}returnMaskEffect(t){ln.return(t)}}const Dh=new w1;ye.handleByList(rt.MaskEffect,Dh._effectClasses);const k1={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((n,s)=>n.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const t=this.effects.indexOf(r);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const t=this._maskEffect;t?.mask!==r&&(t&&(this.removeEffect(t),Dh.returnMaskEffect(t),this._maskEffect=null),r!=null&&(this._maskEffect=Dh.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){!Array.isArray(r)&&r&&(r=[r]);const t=this._filterEffect||(this._filterEffect=new Fg);r=r;const n=r?.length>0,s=t.filters?.length>0,o=n!==s;r=Array.isArray(r)?r.slice(0):r,t.filters=Object.freeze(r),o&&(n?this.addEffect(t):(this.removeEffect(t),t.filters=r??null))},get filters(){return this._filterEffect?.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new Fg),this._filterEffect.filterArea=r},get filterArea(){return this._filterEffect?.filterArea}},D1={label:null,get name(){return gt(Ut,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){gt(Ut,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,t=!1){return this.getChildByLabel(r,t)},getChildByLabel(r,t=!1){const n=this.children;for(let s=0;s<n.length;s++){const o=n[s];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(t)for(let s=0;s<n.length;s++){const c=n[s].getChildByLabel(r,!0);if(c)return c}return null},getChildrenByLabel(r,t=!1,n=[]){const s=this.children;for(let o=0;o<s.length;o++){const c=s[o];(c.label===r||r instanceof RegExp&&r.test(c.label))&&n.push(c)}if(t)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(r,!0,n);return n}},Te=ln.getPool(bt),$n=ln.getPool(gn),O1=new bt,z1={getFastGlobalBounds(r,t){t||(t=new gn),t.clear(),this._getGlobalBoundsRecursive(!!r,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(n.worldTransform),t},_getGlobalBoundsRecursive(r,t,n){let s=t;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=$n.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const c=this.children;for(let u=0;u<c.length;u++)c[u]._getGlobalBoundsRecursive(r,s,n)}if(o){let c=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(c||(c=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));c&&s.applyMatrix(u.worldTransform.copyTo(O1).invert()),t.addBounds(s),$n.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),$n.return(s))}};function f0(r,t,n){n.clear();let s,o;return r.parent?t?s=r.parent.worldTransform:(o=Te.get().identity(),s=sf(r,o)):s=bt.IDENTITY,d0(r,n,s,t),o&&Te.return(o),n.isValid||n.set(0,0,0,0),n}function d0(r,t,n,s){if(!r.visible||!r.measurable)return;let o;s?o=r.worldTransform:(r.updateLocalTransform(),o=Te.get(),o.appendFrom(r.localTransform,n));const c=t,u=!!r.effects.length;if(u&&(t=$n.get().clear()),r.boundsArea)t.addRect(r.boundsArea,o);else{const h=r.bounds;h&&!h.isEmpty()&&(t.matrix=o,t.addBounds(h));for(let d=0;d<r.children.length;d++)d0(r.children[d],t,o,s)}if(u){for(let h=0;h<r.effects.length;h++)r.effects[h].addBounds?.(t);c.addBounds(t,bt.IDENTITY),$n.return(t)}s||Te.return(o)}function sf(r,t){const n=r.parent;return n&&(sf(n,t),n.updateLocalTransform(),t.append(n.localTransform)),t}function p0(r,t){if(r===16777215||!t)return t;if(t===16777215||!r)return r;const n=r>>16&255,s=r>>8&255,o=r&255,c=t>>16&255,u=t>>8&255,h=t&255,d=n*c/255|0,m=s*u/255|0,g=o*h/255|0;return(d<<16)+(m<<8)+g}const Xg=16777215;function qg(r,t){return r===Xg?t:t===Xg?r:p0(r,t)}function rl(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const B1={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,n=this.parent;for(;n;)t*=n.alpha,n=n.parent;return t},getGlobalTransform(r=new bt,t){if(t)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const n=sf(this,Te.get().identity());return r.appendFrom(this.localTransform,n),Te.return(n),r},getGlobalTint(r){if(r)return this.renderGroup?rl(this.renderGroup.worldColor):this.parentRenderGroup?rl(qg(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,n=this.parent;for(;n;)t=qg(t,n.localColor),n=n.parent;return rl(t)}};function m0(r,t,n){return t.clear(),n||(n=bt.IDENTITY),g0(r,t,n,r,!0),t.isValid||t.set(0,0,0,0),t}function g0(r,t,n,s,o){let c;if(o)c=Te.get(),c=n.copyTo(c);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const d=r.localTransform;c=Te.get(),c.appendFrom(d,n)}const u=t,h=!!r.effects.length;if(h&&(t=$n.get().clear()),r.boundsArea)t.addRect(r.boundsArea,c);else{r.renderPipeId&&(t.matrix=c,t.addBounds(r.bounds));const d=r.children;for(let m=0;m<d.length;m++)g0(d[m],t,c,s,!1)}if(h){for(let d=0;d<r.effects.length;d++)r.effects[d].addLocalBounds?.(t,s);u.addBounds(t,bt.IDENTITY),$n.return(t)}Te.return(c)}function y0(r,t){const n=r.children;for(let s=0;s<n.length;s++){const o=n[s],c=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=t.index;(t.data[h]!==c||t.data[h+1]!==u)&&(t.data[t.index]=c,t.data[t.index+1]=u,t.didChange=!0),t.index=h+2,o.children.length&&y0(o,t)}return t.didChange}const U1=new bt,P1={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,t){const n=Math.sign(this.scale.x)||1;t!==0?this.scale.x=r/t*n:this.scale.x=n},_setHeight(r,t){const n=Math.sign(this.scale.y)||1;t!==0?this.scale.y=r/t*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new gn});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),y0(this,r),r.didChange&&m0(this,r.localBounds,U1),r.localBounds},getBounds(r,t){return f0(this,r,t||new gn)}},L1={_onRender:null,set onRender(r){const t=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},N1={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(G1))}};function G1(r,t){return r._zIndex-t._zIndex}const j1={getGlobalPosition(r=new ve,t=!1){return this.parent?this.parent.toGlobal(this._position,r,t):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,t,n=!1){const s=this.getGlobalTransform(Te.get(),n);return t=s.apply(r,t),Te.return(s),t},toLocal(r,t,n,s){t&&(r=t.toGlobal(r,n,s));const o=this.getGlobalTransform(Te.get(),s);return n=o.applyInverse(r,n),Te.return(o),n}};class _0{constructor(){this.uid=$t("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let H1=0;class Y1{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new yl(this.textureOptions)}createTexture(t,n,s){const o=new _n({...this.textureOptions,width:t,height:n,resolution:1,antialias:s,autoGarbageCollect:!1});return new St({source:o,label:`texturePool_${H1++}`})}getOptimalTexture(t,n,s=1,o){let c=Math.ceil(t*s-1e-6),u=Math.ceil(n*s-1e-6);c=gl(c),u=gl(u);const h=(c<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(c,u,o)),d.source._resolution=s,d.source.width=c/s,d.source.height=u/s,d.source.pixelWidth=c,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=n,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(t,n=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,n)}returnTexture(t,n=!1){const s=this._poolKeyHash[t.uid];n&&(t.source.style=this.textureStyle),this._texturePool[s].push(t)}clear(t){if(t=t!==!1,t)for(const n in this._texturePool){const s=this._texturePool[n];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const x0=new Y1;va.register(x0);class I1{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new bt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new _0,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const n=t.children;for(let s=0;s<n.length;s++){const o=n[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(x0.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const n=this.childrenToUpdate[t];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const n=this.renderGroupChildren.indexOf(t);n>-1&&this.renderGroupChildren.splice(n,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const n=t.children;for(let s=0;s<n.length;s++)this.addChild(n[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const n=t.children;for(let s=0;s<n.length;s++)this.removeChild(n[s])}removeChildren(t){for(let n=0;n<t.length;n++)this.removeChild(t[n])}onChildUpdate(t){let n=this.childrenToUpdate[t.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const n=this.root.children;for(let s=0;s<n.length;s++)this._getChildren(n[s],t);return t}_getChildren(t,n=[]){if(n.push(t),t.renderGroup)return n;const s=t.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new bt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new bt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new bt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function V1(r,t,n={}){for(const s in t)!n[s]&&t[s]!==void 0&&(r[s]=t[s])}const sh=new xe(null),qo=new xe(null),rh=new xe(null,1,1),$o=new xe(null),$g=1,F1=2,ah=4;class Rn extends yn{constructor(t={}){super(),this.uid=$t("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new bt,this.relativeGroupTransform=new bt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new xe(this,0,0),this._scale=rh,this._pivot=qo,this._origin=$o,this._skew=sh,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],V1(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(n=>this.addChild(n)),t.parent?.addChild(this)}static mixin(t){gt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ye.mixin(Rn,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||gt(Ut,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const n=t[0],s=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),s&&(s.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,s&&s.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const n=t[0],s=this.children.indexOf(n);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,s),n.emit("removed",this)),n}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=ln.get(I1,this),this.groupTransform=bt.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),ln.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new bt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*s1}set angle(t){this.rotation=t*r1}get pivot(){return this._pivot===qo&&(this._pivot=new xe(this,0,0)),this._pivot}set pivot(t){this._pivot===qo&&(this._pivot=new xe(this,0,0),this._origin!==$o&&Ht("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===sh&&(this._skew=new xe(this,0,0)),this._skew}set skew(t){this._skew===sh&&(this._skew=new xe(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===rh&&(this._scale=new xe(this,1,1)),this._scale}set scale(t){this._scale===rh&&(this._scale=new xe(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===$o&&(this._origin=new xe(this,0,0)),this._origin}set origin(t){this._origin===$o&&(this._origin=new xe(this,0,0),this._pivot!==qo&&Ht("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const n=this.getLocalBounds().width;this._setWidth(t,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const n=this.getLocalBounds().height;this._setHeight(t,n)}getSize(t){t||(t={});const n=this.getLocalBounds();return t.width=Math.abs(this.scale.x*n.width),t.height=Math.abs(this.scale.y*n.height),t}setSize(t,n){const s=this.getLocalBounds();typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,s.width),n!==void 0&&this._setHeight(n,s.height)}_updateSkew(){const t=this._rotation,n=this._skew;this._cx=Math.cos(t+n._y),this._sx=Math.sin(t+n._y),this._cy=-Math.sin(t-n._x),this._sy=Math.cos(t-n._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const n=this.localTransform,s=this._scale,o=this._pivot,c=this._origin,u=this._position,h=s._x,d=s._y,m=o._x,g=o._y,y=-c._x,x=-c._y;n.a=this._cx*h,n.b=this._sx*h,n.c=this._cy*d,n.d=this._sy*d,n.tx=u._x-(m*n.a+g*n.c)+(y*n.a+x*n.c)-y,n.ty=u._y-(m*n.b+g*n.d)+(y*n.b+x*n.d)-x}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=$g,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=re.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=$g,this._onUpdate())}get tint(){return rl(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=F1,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const n=t?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ah,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const n=t?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ah,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const n=t?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=ah,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&n)for(let o=0;o<n.length;++o)n[o].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}ye.mixin(Rn,E1,z1,j1,L1,P1,k1,D1,N1,S1,T1,B1,R1);class b0 extends Rn{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new gn(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=t.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const n=this.bounds,{x:s,y:o}=t;return s>=n.minX&&s<=n.maxX&&o>=n.minY&&o<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(t){this.unload(),super.destroy(t),this._bounds=null}collectRenderablesSimple(t,n,s){const{renderPipes:o}=n;o.blendMode.pushBlendMode(this,this.groupBlendMode,t),o[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let d=0;d<h;d++)u[d].collectRenderables(t,n,s);o.blendMode.popBlendMode(t)}}class $s extends b0{constructor(t=St.EMPTY){t instanceof St&&(t={texture:t});const{texture:n=St.EMPTY,anchor:s,roundPixels:o,width:c,height:u,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new xe({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=o??!1,c!==void 0&&(this.width=c),u!==void 0&&(this.height=u)}static from(t,n=!1){return t instanceof St?new $s(t):new $s(St.from(t,n))}set texture(t){t||(t=St.EMPTY);const n=this._texture;n!==t&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return f1(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return gt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,n=this._texture,s=this._bounds,{width:o,height:c}=n.orig;s.minX=-t._x*o,s.maxX=s.minX+o,s.minY=-t._y*c,s.maxY=s.minY+c}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const X1=new gn;function v0(r,t,n){const s=X1;r.measurable=!0,f0(r,n,s),t.addBoundsMask(s),r.measurable=!1}function S0(r,t,n){const s=$n.get();r.measurable=!0;const o=Te.get().identity(),c=C0(r,n,o);m0(r,s,c),r.measurable=!1,t.addBoundsMask(s),Te.return(o),$n.return(s)}function C0(r,t,n){return r?(r!==t&&(C0(r.parent,t,n),r.updateLocalTransform(),n.append(r.localTransform)),n):(Ht("Mask bounds, renderable is not inside the root container"),n)}class A0{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof $s),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,n){this.inverse||v0(this.mask,t,n)}addLocalBounds(t,n){S0(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof $s}}A0.extension=rt.MaskEffect;class T0{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}T0.extension=rt.MaskEffect;class M0{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,n){v0(this.mask,t,n)}addLocalBounds(t,n){S0(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof Rn}}M0.extension=rt.MaskEffect;const q1={createCanvas:(r,t)=>{const n=document.createElement("canvas");return n.width=r,n.height=t,n},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let Qg=q1;const Yt={get(){return Qg},set(r){Qg=r}};class E0 extends _n{constructor(t){t.resource||(t.resource=Yt.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,n=this.height,s=this._resolution){const o=super.resize(t,n,s);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}E0.extension=rt.TextureSource;class Ki extends _n{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Ki.extension=rt.TextureSource;var Oh=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Oh||{});class oh{constructor(t,n=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=n,this.priority=s,this._once=o}match(t,n=null){return this._fn===t&&this._context===n}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=t?null:n,this.previous=null,n}}const R0=class qe{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new oh(null,null,1/0),this.deltaMS=1/qe.targetFPMS,this.elapsedMS=1/qe.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,n,s=Oh.NORMAL){return this._addListener(new oh(t,n,s))}addOnce(t,n,s=Oh.NORMAL){return this._addListener(new oh(t,n,s,!0))}_addListener(t){let n=this._head.next,s=this._head;if(!n)t.connect(s);else{for(;n;){if(t.priority>n.priority){t.connect(s);break}s=n,n=n.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,n){let s=this._head.next;for(;s;)s.match(t,n)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,n=this._head;for(;n=n.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const c=t-this._lastFrame|0;if(c<this._minElapsedMS)return;this._lastFrame=t-c%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*qe.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,n)/1e3,qe.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,t);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!qe._shared){const t=qe._shared=new qe;t.autoStart=!0,t._protected=!0}return qe._shared}static get system(){if(!qe._system){const t=qe._system=new qe;t.autoStart=!0,t._protected=!0}return qe._system}};R0.targetFPMS=.06;let Qo=R0,lh;async function w0(){return lh??(lh=(async()=>{const t=Yt.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const n=await new Promise(u=>{const h=document.createElement("video");h.onloadeddata=()=>u(h),h.onerror=()=>u(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!n)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);const c=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,c),t.deleteFramebuffer(o),t.deleteTexture(s),t.getExtension("WEBGL_lose_context")?.loseContext(),c[0]<=c[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),lh}const Tl=class k0 extends _n{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...k0.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Qo.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,n=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await w0(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Qo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Qo.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Qo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Tl.extension=rt.TextureSource;Tl.defaultOptions={..._n.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Tl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ua=Tl;const mn=(r,t,n=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(s=>typeof s=="string"||n?t(s):s):r);class $1{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const n=this._cache.get(t);return n||Ht(`[Assets] Asset id ${t} was not found in the Cache`),n}set(t,n){const s=mn(t);let o;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.test(n)){o=m.getCacheableAssets(s,n);break}}const c=new Map(Object.entries(o||{}));o||s.forEach(d=>{c.set(d,n)});const u=[...c.keys()],h={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,h)}),u.forEach(d=>{const m=o?o[d]:n;this._cache.has(d)&&this._cache.get(d)!==m&&Ht("[Cache] already has key:",d),this._cache.set(d,c.get(d))})}remove(t){if(!this._cacheMap.has(t)){Ht(`[Assets] Asset id ${t} was not found in the Cache`);return}const n=this._cacheMap.get(t);n.cacheKeys.forEach(o=>{this._cache.delete(o)}),n.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const jt=new $1,zh=[];ye.handleByList(rt.TextureSource,zh);function D0(r={}){const t=r&&r.resource,n=t?r.resource:r,s=t?r:{resource:r};for(let o=0;o<zh.length;o++){const c=zh[o];if(c.test(n))return new c(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function Q1(r={},t=!1){const n=r&&r.resource,s=n?r.resource:r,o=n?r:{resource:r};if(!t&&jt.has(s))return jt.get(s);const c=new St({source:D0(o)});return c.on("destroy",()=>{jt.has(s)&&jt.remove(s)}),t||jt.set(s,c),c}function Z1(r,t=!1){return typeof r=="string"?jt.get(r):r instanceof _n?new St({source:r}):Q1(r,t)}St.from=Z1;_n.from=D0;ye.add(A0,T0,M0,ua,Ki,E0,nf);var Mi=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Mi||{});function pn(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function $r(r){return r.split("?")[0].split("#")[0]}function K1(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function W1(r,t,n){return r.replace(new RegExp(K1(t),"g"),n)}function J1(r,t){let n="",s=0,o=-1,c=0,u=-1;for(let h=0;h<=r.length;++h){if(h<r.length)u=r.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||c===1))if(o!==h-1&&c===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const d=n.lastIndexOf("/");if(d!==n.length-1){d===-1?(n="",s=0):(n=n.slice(0,d),s=n.length-1-n.lastIndexOf("/")),o=h,c=0;continue}}else if(n.length===2||n.length===1){n="",s=0,o=h,c=0;continue}}}else n.length>0?n+=`/${r.slice(o+1,h)}`:n=r.slice(o+1,h),s=h-o-1;o=h,c=0}else u===46&&c!==-1?++c:c=-1}return n}const $e={toPosix(r){return W1(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){pn(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(r);return n?n[0]:""},toAbsolute(r,t,n){if(pn(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const s=$r(this.toPosix(t??Yt.get().getBaseUrl())),o=$r(this.toPosix(n??this.rootname(s)));return r=this.toPosix(r),r.startsWith("/")?$e.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(s,r)},normalize(r){if(pn(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const n=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const s=r.endsWith("/");return r=J1(r),r.length>0&&s&&(r+="/"),n?`/${r}`:t+r},isAbsolute(r){return pn(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let n=0;n<r.length;++n){const s=r[n];if(pn(s),s.length>0)if(t===void 0)t=s;else{const o=r[n-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(pn(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const n=t===47;let s=-1,o=!0;const c=this.getProtocol(r),u=r;r=r.slice(c.length);for(let h=r.length-1;h>=1;--h)if(t=r.charCodeAt(h),t===47){if(!o){s=h;break}}else o=!1;return s===-1?n?"/":this.isUrl(u)?c+r:c:n&&s===1?"//":c+r.slice(0,s)},rootname(r){pn(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const n=r.indexOf("/",t.length);n!==-1?t=r.slice(0,n):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){pn(r),t&&pn(t),r=$r(this.toPosix(r));let n=0,s=-1,o=!0,c;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let u=t.length-1,h=-1;for(c=r.length-1;c>=0;--c){const d=r.charCodeAt(c);if(d===47){if(!o){n=c+1;break}}else h===-1&&(o=!1,h=c+1),u>=0&&(d===t.charCodeAt(u)?--u===-1&&(s=c):(u=-1,s=h))}return n===s?s=h:s===-1&&(s=r.length),r.slice(n,s)}for(c=r.length-1;c>=0;--c)if(r.charCodeAt(c)===47){if(!o){n=c+1;break}}else s===-1&&(o=!1,s=c+1);return s===-1?"":r.slice(n,s)},extname(r){pn(r),r=$r(this.toPosix(r));let t=-1,n=0,s=-1,o=!0,c=0;for(let u=r.length-1;u>=0;--u){const h=r.charCodeAt(u);if(h===47){if(!o){n=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?t===-1?t=u:c!==1&&(c=1):t!==-1&&(c=-1)}return t===-1||s===-1||c===0||c===1&&t===s-1&&t===n+1?"":r.slice(t,s)},parse(r){pn(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=$r(this.toPosix(r));let n=r.charCodeAt(0);const s=this.isAbsolute(r);let o;t.root=this.rootname(r),s||this.hasProtocol(r)?o=1:o=0;let c=-1,u=0,h=-1,d=!0,m=r.length-1,g=0;for(;m>=o;--m){if(n=r.charCodeAt(m),n===47){if(!d){u=m+1;break}continue}h===-1&&(d=!1,h=m+1),n===46?c===-1?c=m:g!==1&&(g=1):c!==-1&&(g=-1)}return c===-1||h===-1||g===0||g===1&&c===h-1&&c===u+1?h!==-1&&(u===0&&s?t.base=t.name=r.slice(1,h):t.base=t.name=r.slice(u,h)):(u===0&&s?(t.name=r.slice(1,c),t.base=r.slice(1,h)):(t.name=r.slice(u,c),t.base=r.slice(u,h)),t.ext=r.slice(c,h)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function O0(r,t,n,s,o){const c=t[n];for(let u=0;u<c.length;u++){const h=c[u];n<t.length-1?O0(r.replace(s[n],h),t,n+1,s,o):o.push(r.replace(s[n],h))}}function tS(r){const t=/\{(.*?)\}/g,n=r.match(t),s=[];if(n){const o=[];n.forEach(c=>{const u=c.substring(1,c.length-1).split(",");o.push(u)}),O0(r,o,0,n,s)}else s.push(r);return s}const _l=r=>!Array.isArray(r);class Zs{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,n)=>`${t}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(t,n)=>n.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const n=t;this._defaultSearchParams=Object.keys(n).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(n[s])}`).join("&")}}getAlias(t){const{alias:n,src:s}=t;return mn(n||s,c=>typeof c=="string"?c:Array.isArray(c)?c.map(u=>u?.src??u):c?.src?c.src:c,!0)}addManifest(t){this._manifest&&Ht("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(t,n){const s=[];let o=n;Array.isArray(n)||(o=Object.entries(n).map(([c,u])=>typeof u=="string"||Array.isArray(u)?{alias:c,src:u}:{alias:c,...u})),o.forEach(c=>{const u=c.src,h=c.alias;let d;if(typeof h=="string"){const m=this._createBundleAssetId(t,h);s.push(m),d=[h,m]}else{const m=h.map(g=>this._createBundleAssetId(t,g));s.push(...m),d=[...h,...m]}this.add({...c,alias:d,src:u})}),this._bundles[t]=s}add(t){const n=[];Array.isArray(t)?n.push(...t):n.push(t);let s;s=c=>{this.hasKey(c)&&Ht(`[Resolver] already has key: ${c} overwriting`)},mn(n).forEach(c=>{const{src:u}=c;let{data:h,format:d,loadParser:m,parser:g}=c;const y=mn(u).map(A=>typeof A=="string"?tS(A):Array.isArray(A)?A:[A]),x=this.getAlias(c);Array.isArray(x)?x.forEach(s):s(x);const b=[],S=A=>({...this._parsers.find(M=>M.test(A))?.parse(A),src:A});y.forEach(A=>{A.forEach(C=>{let M={};if(typeof C!="object"?M=S(C):(h=C.data??h,d=C.format??d,(C.loadParser||C.parser)&&(m=C.loadParser??m,g=C.parser??g),M={...S(C.src),...C}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${M.src}`);M=this._buildResolvedAsset(M,{aliases:x,data:h,format:d,loadParser:m,parser:g,progressSize:c.progressSize}),b.push(M)})}),x.forEach(A=>{this._assetMap[A]=b})})}resolveBundle(t){const n=_l(t);t=mn(t);const s={};return t.forEach(o=>{const c=this._bundles[o];if(c){const u=this.resolve(c),h={};for(const d in u){const m=u[d];h[this._extractAssetIdFromBundle(o,d)]=m}s[o]=h}}),n?s[t[0]]:s}resolveUrl(t){const n=this.resolve(t);if(typeof t!="string"){const s={};for(const o in n)s[o]=n[o].src;return s}return n.src}resolve(t){const n=_l(t);t=mn(t);const s={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let c=this._assetMap[o];const u=this._getPreferredOrder(c);u?.priority.forEach(h=>{u.params[h].forEach(d=>{const m=c.filter(g=>g[h]?g[h]===d:!1);m.length&&(c=m)})}),this._resolverHash[o]=c[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),n?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let n=0;n<t.length;n++){const s=t[n],o=this._preferredOrder.find(c=>c.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const n=/\?/.test(t)?"&":"?";return`${t}${n}${this._defaultSearchParams}`}_buildResolvedAsset(t,n){const{aliases:s,data:o,loadParser:c,parser:u,format:h,progressSize:d}=n;return(this._basePath||this._rootPath)&&(t.src=$e.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=c??t.loadParser,t.parser=u??t.parser,t.format=h??t.format??eS(t.src),d!==void 0&&(t.progressSize=d),t}}Zs.RETINA_PREFIX=/@([0-9\.]+)x/;function eS(r){return r.split(".").pop().split("?").shift().split("#").shift()}const Bh=(r,t)=>{const n=t.split("?")[1];return n&&(r+=`?${n}`),r},z0=class sa{constructor(t,n){this.linkedSheets=[];let s=t;t?.source instanceof _n&&(s={texture:t,data:n});const{texture:o,data:c,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof St?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=c;const h=parseFloat(c.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=sa.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t;const s=sa.BATCH_SIZE;for(;n-t<s&&n<this._frameKeys.length;){const o=this._frameKeys[n],c=this._frames[o],u=c.frame;if(u){let h=null,d=null;const m=c.trimmed!==!1&&c.sourceSize?c.sourceSize:c.frame,g=new Kt(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);c.rotated?h=new Kt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new Kt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),c.trimmed!==!1&&c.spriteSourceSize&&(d=new Kt(Math.floor(c.spriteSourceSize.x)/this.resolution,Math.floor(c.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new St({source:this.textureSource,frame:h,orig:g,trim:d,rotate:c.rotated?2:0,defaultAnchor:c.anchor,defaultBorders:c.borders,label:o.toString()})}n++}}_processAnimations(){const t=this.data.animations||{};for(const n in t){this.animations[n]=[];for(let s=0;s<t[n].length;s++){const o=t[n][s];this.animations[n].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*sa.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*sa.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};z0.BATCH_SIZE=1e3;let Zg=z0;const nS=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function B0(r,t,n){const s={};if(r.forEach(o=>{s[o]=t}),Object.keys(t.textures).forEach(o=>{s[`${t.cachePrefix}${o}`]=t.textures[o]}),!n){const o=$e.dirname(r[0]);t.linkedSheets.forEach((c,u)=>{const h=B0([`${o}/${t.data.meta.related_multi_packs[u]}`],c,!0);Object.assign(s,h)})}return s}const iS={extension:rt.Asset,cache:{test:r=>r instanceof Zg,getCacheableAssets:(r,t)=>B0(r,t,!1)},resolver:{extension:{type:rt.ResolveParser,name:"resolveSpritesheet"},test:r=>{const n=r.split("?")[0].split("."),s=n.pop(),o=n.pop();return s==="json"&&nS.includes(o)},parse:r=>{const t=r.split(".");return{resolution:parseFloat(Zs.RETINA_PREFIX.exec(r)?.[1]??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:rt.LoadParser,priority:Mi.Normal,name:"spritesheetLoader"},async testParse(r,t){return $e.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,n){const{texture:s,imageFilename:o,textureOptions:c,cachePrefix:u}=t?.data??{};let h=$e.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let d;if(s instanceof St)d=s;else{const y=Bh(h+(o??r.meta.image),t.src);d=(await n.load([{src:y,data:c}]))[y]}const m=new Zg({texture:d.source,data:r,cachePrefix:u});await m.parse();const g=r?.meta?.related_multi_packs;if(Array.isArray(g)){const y=[];for(const b of g){if(typeof b!="string")continue;let S=h+b;t.data?.ignoreMultiPack||(S=Bh(S,t.src),y.push(n.load({src:S,data:{textureOptions:c,ignoreMultiPack:!0}})))}const x=await Promise.all(y);m.linkedSheets=x,x.forEach(b=>{b.linkedSheets=[m].concat(m.linkedSheets.filter(S=>S!==b))})}return m},async unload(r,t,n){await n.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};ye.add(iS);const ch=Object.create(null),Kg=Object.create(null);function rf(r,t){let n=Kg[r];return n===void 0&&(ch[t]===void 0&&(ch[t]=1),Kg[r]=n=ch[t]++),n}let Zo;function U0(){return(!Zo||Zo?.isContextLost())&&(Zo=Yt.get().createCanvas().getContext("webgl",{})),Zo}let Ko;function sS(){if(!Ko){Ko="mediump";const r=U0();r&&r.getShaderPrecisionFormat&&(Ko=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return Ko}function rS(r,t,n){return t?r:n?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function aS(r,t,n){const s=n?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=n?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(s!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function oS(r,t){return t?`#version 300 es
${r}`:r}const lS={},cS={};function uS(r,{name:t="pixi-program"},n=!0){t=t.replace(/\s+/g,"-"),t+=n?"-fragment":"-vertex";const s=n?lS:cS;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${t}`}
${r}`}function hS(r,t){return t?r.replace("#version 300 es",""):r}const uh={stripVersion:hS,ensurePrecision:aS,addProgramDefines:rS,setProgramName:uS,insertVersion:oS},Qr=Object.create(null),P0=class Uh{constructor(t){t={...Uh.defaultOptions,...t};const n=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:sS()},setProgramName:{name:t.name},addProgramDefines:n,insertVersion:n};let o=t.fragment,c=t.vertex;Object.keys(uh).forEach(u=>{const h=s[u];o=uh[u](o,h,!0),c=uh[u](c,h,!1)}),this.fragment=o,this.vertex=c,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=rf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Qr[this._cacheKey]=null}static from(t){const n=`${t.vertex}:${t.fragment}`;return Qr[n]||(Qr[n]=new Uh(t),Qr[n]._cacheKey=n),Qr[n]}};P0.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let L0=P0;const Wg={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function fS(r){return Wg[r]??Wg.float32}const dS={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function pS({source:r,entryPoint:t}){const n={},s=r.indexOf(`fn ${t}`);if(s!==-1){const o=r.indexOf("->",s);if(o!==-1){const c=r.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(c))!==null;){const d=dS[h[3]]??"float32";n[h[2]]={location:parseInt(h[1],10),format:d,stride:fS(d).stride,offset:0,instance:!1,start:0}}}}return n}function hh(r){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,c=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,m=r.match(t)?.map(y=>({group:parseInt(y.match(n)[1],10),binding:parseInt(y.match(s)[1],10),name:y.match(o)[2],isUniform:y.match(o)[1]==="<uniform>",type:y.match(c)[1]}));if(!m)return{groups:[],structs:[]};const g=r.match(u)?.map(y=>{const x=y.match(d)[1],b=y.match(h).reduce((S,A)=>{const[C,M]=A.split(":");return S[C.trim()]=M.trim(),S},{});return b?{name:x,members:b}:null}).filter(({name:y})=>m.some(x=>x.type===y))??[];return{groups:m,structs:g}}var ra=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(ra||{});function mS({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:ra.VERTEX|ra.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:ra.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:ra.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function gS({groups:r}){const t=[];for(let n=0;n<r.length;n++){const s=r[n];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function yS(r,t){const n=new Set,s=new Set,o=[...r.structs,...t.structs].filter(u=>n.has(u.name)?!1:(n.add(u.name),!0)),c=[...r.groups,...t.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:c}}const Zr=Object.create(null);class Ml{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:s,layout:o,gpuLayout:c,name:u}=t;if(this.name=u,this.fragment=n,this.vertex=s,n.source===s.source){const h=hh(n.source);this.structsAndGroups=h}else{const h=hh(s.source),d=hh(n.source);this.structsAndGroups=yS(h,d)}this.layout=o??gS(this.structsAndGroups),this.gpuLayout=c??mS(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:n}=this,s=t.source+n.source+t.entryPoint+n.entryPoint;this._layoutKey=rf(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=pS(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Zr[this._cacheKey]=null}static from(t){const n=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return Zr[n]||(Zr[n]=new Ml(t),Zr[n]._cacheKey=n),Zr[n]}}const N0=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],_S=N0.reduce((r,t)=>(r[t]=!0,r),{});function xS(r,t){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const G0=class j0{constructor(t,n){this._touched=0,this.uid=$t("uniform"),this._resourceType="uniformGroup",this._resourceId=$t("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...j0.defaultOptions,...n},this.uniformStructures=t;const s={};for(const o in t){const c=t[o];if(c.name=o,c.size=c.size??1,!_S[c.type]){const u=c.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,d]=u;throw new Error(`Uniform type ${c.type} is not supported. Use type: '${h}', size: ${d} instead.`)}throw new Error(`Uniform type ${c.type} is not supported. Supported uniform types are: ${N0.join(", ")}`)}c.value??(c.value=xS(c.type,c.size)),s[o]=c.value}this.uniforms=s,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=rf(Object.keys(s).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};G0.defaultOptions={ubo:!1,isStatic:!1};let H0=G0;class al{constructor(t){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const s in t){const o=t[s];this.setResource(o,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let n=0;for(const s in this.resources)t[n++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,n){const s=this.resources[n];t!==s&&(s&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[n]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t,n){const s=this.resources;for(const o in s)s[o]._gcLastUsed=t,s[o]._touched=n}destroy(){const t=this.resources;for(const n in t)t[n]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const n=this.resources;for(const s in n)n[s]===t&&(n[s]=null)}else this._updateKey()}}var Ph=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(Ph||{});class af extends yn{constructor(t){super(),this.uid=$t("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:n,glProgram:s,groups:o,resources:c,compatibleRenderers:u,groupMap:h}=t;this.gpuProgram=n,this.glProgram=s,u===void 0&&(u=0,n&&(u|=Ph.WEBGPU),s&&(u|=Ph.WEBGL)),this.compatibleRenderers=u;const d={};if(!c&&!o&&(c={}),c&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&o&&h)for(const m in h)for(const g in h[m]){const y=h[m][g];d[y]={group:m,binding:g,name:y}}else if(n&&o&&!h){const m=n.structsAndGroups.groups;h={},m.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,d[g.name]=g})}else if(c){o={},h={},n&&n.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,d[y.name]=y});let m=0;for(const g in c)d[g]||(o[99]||(o[99]=new al,this._ownedBindGroups.push(o[99])),d[g]={group:99,binding:m,name:g},h[99]=h[99]||{},h[99][m]=g,m++);for(const g in c){const y=g;let x=c[g];!x.source&&!x._resourceType&&(x=new H0(x));const b=d[y];b&&(o[b.group]||(o[b.group]=new al,this._ownedBindGroups.push(o[b.group])),o[b.group].setResource(x,b.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,d)}addResource(t,n,s){var o,c;(o=this._uniformBindMap)[n]||(o[n]={}),(c=this._uniformBindMap[n])[s]||(c[s]=t),this.groups[n]||(this.groups[n]=new al,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(t,n){const s={};for(const o in n){const c=n[o];Object.defineProperty(s,c.name,{get(){return t[c.group].getResource(c.binding)},set(u){t[c.group].setResource(u,c.binding)}})}return s}destroy(t=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:n,gl:s,...o}=t;let c,u;return n&&(c=Ml.from(n)),s&&(u=L0.from(s)),new af({gpuProgram:c,glProgram:u,...o})}}const Lh=[];ye.handleByNamedList(rt.Environment,Lh);async function bS(r){if(!r)for(let t=0;t<Lh.length;t++){const n=Lh[t];if(n.value.test()){await n.value.load();return}}}let Kr;function vS(){if(typeof Kr=="boolean")return Kr;try{Kr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Kr=!1}return Kr}function Jg(r,t,n=2){const s=t&&t.length,o=s?t[0]*n:r.length;let c=Y0(r,0,o,n,!0);const u=[];if(!c||c.next===c.prev)return u;let h,d,m;if(s&&(c=MS(r,t,c,n)),r.length>80*n){h=r[0],d=r[1];let g=h,y=d;for(let x=n;x<o;x+=n){const b=r[x],S=r[x+1];b<h&&(h=b),S<d&&(d=S),b>g&&(g=b),S>y&&(y=S)}m=Math.max(g-h,y-d),m=m!==0?32767/m:0}return pa(c,u,n,h,d,m,0),u}function Y0(r,t,n,s,o){let c;if(o===LS(r,t,n,s)>0)for(let u=t;u<n;u+=s)c=ty(u/s|0,r[u],r[u+1],c);else for(let u=n-s;u>=t;u-=s)c=ty(u/s|0,r[u],r[u+1],c);return c&&Qs(c,c.next)&&(ga(c),c=c.next),c}function Wi(r,t){if(!r)return r;t||(t=r);let n=r,s;do if(s=!1,!n.steiner&&(Qs(n,n.next)||Vt(n.prev,n,n.next)===0)){if(ga(n),n=t=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==t);return t}function pa(r,t,n,s,o,c,u){if(!r)return;!u&&c&&DS(r,s,o,c);let h=r;for(;r.prev!==r.next;){const d=r.prev,m=r.next;if(c?CS(r,s,o,c):SS(r)){t.push(d.i,r.i,m.i),ga(r),r=m.next,h=m.next;continue}if(r=m,r===h){u?u===1?(r=AS(Wi(r),t),pa(r,t,n,s,o,c,2)):u===2&&TS(r,t,n,s,o,c):pa(Wi(r),t,n,s,o,c,1);break}}}function SS(r){const t=r.prev,n=r,s=r.next;if(Vt(t,n,s)>=0)return!1;const o=t.x,c=n.x,u=s.x,h=t.y,d=n.y,m=s.y,g=Math.min(o,c,u),y=Math.min(h,d,m),x=Math.max(o,c,u),b=Math.max(h,d,m);let S=s.next;for(;S!==t;){if(S.x>=g&&S.x<=x&&S.y>=y&&S.y<=b&&aa(o,h,c,d,u,m,S.x,S.y)&&Vt(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function CS(r,t,n,s){const o=r.prev,c=r,u=r.next;if(Vt(o,c,u)>=0)return!1;const h=o.x,d=c.x,m=u.x,g=o.y,y=c.y,x=u.y,b=Math.min(h,d,m),S=Math.min(g,y,x),A=Math.max(h,d,m),C=Math.max(g,y,x),M=Nh(b,S,t,n,s),w=Nh(A,C,t,n,s);let O=r.prevZ,P=r.nextZ;for(;O&&O.z>=M&&P&&P.z<=w;){if(O.x>=b&&O.x<=A&&O.y>=S&&O.y<=C&&O!==o&&O!==u&&aa(h,g,d,y,m,x,O.x,O.y)&&Vt(O.prev,O,O.next)>=0||(O=O.prevZ,P.x>=b&&P.x<=A&&P.y>=S&&P.y<=C&&P!==o&&P!==u&&aa(h,g,d,y,m,x,P.x,P.y)&&Vt(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;O&&O.z>=M;){if(O.x>=b&&O.x<=A&&O.y>=S&&O.y<=C&&O!==o&&O!==u&&aa(h,g,d,y,m,x,O.x,O.y)&&Vt(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;P&&P.z<=w;){if(P.x>=b&&P.x<=A&&P.y>=S&&P.y<=C&&P!==o&&P!==u&&aa(h,g,d,y,m,x,P.x,P.y)&&Vt(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function AS(r,t){let n=r;do{const s=n.prev,o=n.next.next;!Qs(s,o)&&V0(s,n,n.next,o)&&ma(s,o)&&ma(o,s)&&(t.push(s.i,n.i,o.i),ga(n),ga(n.next),n=r=o),n=n.next}while(n!==r);return Wi(n)}function TS(r,t,n,s,o,c){let u=r;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&BS(u,h)){let d=F0(u,h);u=Wi(u,u.next),d=Wi(d,d.next),pa(u,t,n,s,o,c,0),pa(d,t,n,s,o,c,0);return}h=h.next}u=u.next}while(u!==r)}function MS(r,t,n,s){const o=[];for(let c=0,u=t.length;c<u;c++){const h=t[c]*s,d=c<u-1?t[c+1]*s:r.length,m=Y0(r,h,d,s,!1);m===m.next&&(m.steiner=!0),o.push(zS(m))}o.sort(ES);for(let c=0;c<o.length;c++)n=RS(o[c],n);return n}function ES(r,t){let n=r.x-t.x;if(n===0&&(n=r.y-t.y,n===0)){const s=(r.next.y-r.y)/(r.next.x-r.x),o=(t.next.y-t.y)/(t.next.x-t.x);n=s-o}return n}function RS(r,t){const n=wS(r,t);if(!n)return t;const s=F0(n,r);return Wi(s,s.next),Wi(n,n.next)}function wS(r,t){let n=t;const s=r.x,o=r.y;let c=-1/0,u;if(Qs(r,n))return n;do{if(Qs(r,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const y=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=s&&y>c&&(c=y,u=n.x<n.next.x?n:n.next,y===s))return u}n=n.next}while(n!==t);if(!u)return null;const h=u,d=u.x,m=u.y;let g=1/0;n=u;do{if(s>=n.x&&n.x>=d&&s!==n.x&&I0(o<m?s:c,o,d,m,o<m?c:s,o,n.x,n.y)){const y=Math.abs(o-n.y)/(s-n.x);ma(n,r)&&(y<g||y===g&&(n.x>u.x||n.x===u.x&&kS(u,n)))&&(u=n,g=y)}n=n.next}while(n!==h);return u}function kS(r,t){return Vt(r.prev,r,t.prev)<0&&Vt(t.next,r,r.next)<0}function DS(r,t,n,s){let o=r;do o.z===0&&(o.z=Nh(o.x,o.y,t,n,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,OS(o)}function OS(r){let t,n=1;do{let s=r,o;r=null;let c=null;for(t=0;s;){t++;let u=s,h=0;for(let m=0;m<n&&(h++,u=u.nextZ,!!u);m++);let d=n;for(;h>0||d>0&&u;)h!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,d--),c?c.nextZ=o:r=o,o.prevZ=c,c=o;s=u}c.nextZ=null,n*=2}while(t>1);return r}function Nh(r,t,n,s,o){return r=(r-n)*o|0,t=(t-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function zS(r){let t=r,n=r;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==r);return n}function I0(r,t,n,s,o,c,u,h){return(o-u)*(t-h)>=(r-u)*(c-h)&&(r-u)*(s-h)>=(n-u)*(t-h)&&(n-u)*(c-h)>=(o-u)*(s-h)}function aa(r,t,n,s,o,c,u,h){return!(r===u&&t===h)&&I0(r,t,n,s,o,c,u,h)}function BS(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!US(r,t)&&(ma(r,t)&&ma(t,r)&&PS(r,t)&&(Vt(r.prev,r,t.prev)||Vt(r,t.prev,t))||Qs(r,t)&&Vt(r.prev,r,r.next)>0&&Vt(t.prev,t,t.next)>0)}function Vt(r,t,n){return(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y)}function Qs(r,t){return r.x===t.x&&r.y===t.y}function V0(r,t,n,s){const o=Jo(Vt(r,t,n)),c=Jo(Vt(r,t,s)),u=Jo(Vt(n,s,r)),h=Jo(Vt(n,s,t));return!!(o!==c&&u!==h||o===0&&Wo(r,n,t)||c===0&&Wo(r,s,t)||u===0&&Wo(n,r,s)||h===0&&Wo(n,t,s))}function Wo(r,t,n){return t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)&&t.y<=Math.max(r.y,n.y)&&t.y>=Math.min(r.y,n.y)}function Jo(r){return r>0?1:r<0?-1:0}function US(r,t){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==t.i&&n.next.i!==t.i&&V0(n,n.next,r,t))return!0;n=n.next}while(n!==r);return!1}function ma(r,t){return Vt(r.prev,r,r.next)<0?Vt(r,t,r.next)>=0&&Vt(r,r.prev,t)>=0:Vt(r,t,r.prev)<0||Vt(r,r.next,t)<0}function PS(r,t){let n=r,s=!1;const o=(r.x+t.x)/2,c=(r.y+t.y)/2;do n.y>c!=n.next.y>c&&n.next.y!==n.y&&o<(n.next.x-n.x)*(c-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==r);return s}function F0(r,t){const n=Gh(r.i,r.x,r.y),s=Gh(t.i,t.x,t.y),o=r.next,c=t.prev;return r.next=t,t.prev=r,n.next=o,o.prev=n,s.next=n,n.prev=s,c.next=s,s.prev=c,s}function ty(r,t,n,s){const o=Gh(r,t,n);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function ga(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Gh(r,t,n){return{i:r,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function LS(r,t,n,s){let o=0;for(let c=t,u=n-s;c<n;c+=s)o+=(r[u]-r[c])*(r[c+1]+r[u+1]),u=c;return o}const NS=Jg.default||Jg;var X0=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(X0||{});class GS{constructor(t){this.items=[],this._name=t}emit(t,n,s,o,c,u,h,d){const{name:m,items:g}=this;for(let y=0,x=g.length;y<x;y++)g[y][m](t,n,s,o,c,u,h,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const n=this.items.indexOf(t);return n!==-1&&this.items.splice(n,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const jS=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],q0=class $0 extends yn{constructor(t){super(),this.tick=0,this.uid=$t("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const n=[...jS,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(t={}){const n=t.skipExtensionImports===!0?!0:t.manageImports===!1;await bS(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...$0.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,n){this.tick++;let s=t;if(s instanceof Rn&&(s={container:s},n&&(gt(Ut,"passing a second argument is deprecated, please use render options instead"),s.target=n.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:re.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(t,n,s){const o=this.view.resolution;this.view.resize(t,n,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(t={}){const n=this;t.target||(t.target=n.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=X0.ALL);const{clear:s,clearColor:o,target:c}=t;re.shared.setValue(o??this.background.colorRgba),n.renderTarget.clear(c,s,re.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(n=>{this.runners[n]=new GS(n)})}_addSystems(t){let n;for(n in t){const s=t[n];this._addSystem(s.value,s.name)}}_addSystem(t,n){const s=new t(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=s,this._systemsHash[n]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(t,n){const s=n.reduce((o,c)=>(o[c.name]=c.value,o),{});t.forEach(o=>{const c=o.value,u=o.name,h=s[u];this.renderPipes[u]=new c(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&va.release(),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!vS())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};q0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Q0=q0,tl;function HS(r){return tl!==void 0||(tl=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:r??Q0.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Yt.get().getWebGLRenderingContext())return!1;let s=Yt.get().createCanvas().getContext("webgl",t);const o=!!s?.getContextAttributes()?.stencil;if(s){const c=s.getExtension("WEBGL_lose_context");c&&c.loseContext()}return s=null,o}catch{return!1}})()),tl}let el;async function YS(r={}){return el!==void 0||(el=await(async()=>{const t=Yt.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),el}const ey=["webgl","webgpu","canvas"];async function IS(r){let t=[];r.preference?(t.push(r.preference),ey.forEach(c=>{c!==r.preference&&t.push(c)})):t=ey.slice();let n,s={};for(let c=0;c<t.length;c++){const u=t[c];if(u==="webgpu"&&await YS()){const{WebGPURenderer:h}=await ml(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-B2vxKJ9P.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));n=h,s={...r,...r.webgpu};break}else if(u==="webgl"&&HS(r.failIfMajorPerformanceCaveat??Q0.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await ml(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-Dbb1S_NS.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));n=h,s={...r,...r.webgl};break}else if(u==="canvas")throw s={...r},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!n)throw new Error("No available renderer for the current environment");const o=new n;return await o.init(s),o}const Z0="8.15.0";class K0{static init(){globalThis.__PIXI_APP_INIT__?.(this,Z0)}static destroy(){}}K0.extension=rt.Application;class VS{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,Z0)}destroy(){this._renderer=null}}VS.extension={type:[rt.WebGLSystem,rt.WebGPUSystem],name:"initHook",priority:-10};const W0=class jh{constructor(...t){this.stage=new Rn,t[0]!==void 0&&gt(Ut,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new Rn),this.renderer=await IS(t),jh._plugins.forEach(n=>{n.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return gt(Ut,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){const s=jh._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};W0._plugins=[];let J0=W0;ye.handleByList(rt.Application,J0._plugins);ye.add(K0);class t_ extends yn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return gt(Ut,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return gt(Ut,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return gt(Ut,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return gt(Ut,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return gt(Ut,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)this.chars[n].texture?.destroy();this.chars=null,t&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}class FS{constructor(t=0,n=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=s,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const n=this.items[t];delete this.items[t],this.size--,n.prev!==null&&(n.prev.next=n.next),n.next!==null&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++){const o=t[s];n[s]=[o,this.get(o)]}return n}evict(t=!1){if(t||this.size>0){const n=this.first;delete this.items[n.key],--this.size===0?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(t){let n;return this.has(t)&&(n=this.items[t].expiry),n}get(t){const n=this.items[t];if(n!==void 0){if(this.ttl>0&&n.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(n),n.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=new Array(this.size);let n=this.first,s=0;for(;n!==null;)t[s++]=n.key,n=n.next;return t}setWithEvicted(t,n,s=this.resetTtl){let o=null;if(this.has(t))this.set(t,n,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let c=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n};++this.size===1?this.first=c:this.last.next=c,this.last=c}return o}set(t,n,s=!1,o=this.resetTtl){let c=this.items[t];return s||c!==void 0?(c.value=n,s===!1&&o&&(c.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(c)):(this.max>0&&this.size===this.max&&this.evict(!0),c=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:n},++this.size===1?this.first=c:this.last.next=c,this.last=c),this}values(t=this.keys()){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=this.get(t[s]);return n}}function e_(r=1e3,t=0,n=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof n!="boolean")throw new TypeError("Invalid resetTtl value");return new FS(r,t,n)}const XS=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Hh(r){const t=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let n=r.fontFamily;Array.isArray(r.fontFamily)||(n=r.fontFamily.split(","));for(let s=n.length-1;s>=0;s--){let o=n[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!XS.includes(o)&&(o=`"${o}"`),n[s]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${t} ${n.join(",")}`}const fh={willReadFrequently:!0},xn=class nt{static get experimentalLetterSpacingSupported(){let t=nt._experimentalLetterSpacingSupported;if(t===void 0){const n=Yt.get().getCanvasRenderingContext2D().prototype;t=nt._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(t,n,s,o,c,u,h,d,m){this.text=t,this.style=n,this.width=s,this.height=o,this.lines=c,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=m}static measureText(t=" ",n,s=nt._canvas,o=n.wordWrap){const c=`${t}-${n.styleKey}-wordWrap-${o}`;if(nt._measurementCache.has(c))return nt._measurementCache.get(c);const u=Hh(n),h=nt.measureFont(u);h.fontSize===0&&(h.fontSize=n.fontSize,h.ascent=n.fontSize);const d=nt.__context;d.font=u;const g=(o?nt._wordWrap(t,n,s):t).split(/(?:\r\n|\r|\n)/),y=new Array(g.length);let x=0;for(let w=0;w<g.length;w++){const O=nt._measureText(g[w],n.letterSpacing,d);y[w]=O,x=Math.max(x,O)}const b=n._stroke?.width||0;let S=x+b;n.dropShadow&&(S+=n.dropShadow.distance);const A=n.lineHeight||h.fontSize;let C=Math.max(A,h.fontSize+b)+(g.length-1)*(A+n.leading);n.dropShadow&&(C+=n.dropShadow.distance);const M=new nt(t,n,S,C,g,y,A+n.leading,x,h);return nt._measurementCache.set(c,M),M}static _measureText(t,n,s){let o=!1;nt.experimentalLetterSpacingSupported&&(nt.experimentalLetterSpacing?(s.letterSpacing=`${n}px`,s.textLetterSpacing=`${n}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const c=s.measureText(t);let u=c.width;const h=-c.actualBoundingBoxLeft;let m=c.actualBoundingBoxRight-h;if(u>0)if(o)u-=n,m-=n;else{const g=(nt.graphemeSegmenter(t).length-1)*n;u+=g,m+=g}return Math.max(u,m)}static _wordWrap(t,n,s=nt._canvas){const o=s.getContext("2d",fh);let c=0,u="",h="";const d=Object.create(null),{letterSpacing:m,whiteSpace:g}=n,y=nt._collapseSpaces(g),x=nt._collapseNewlines(g);let b=!y;const S=n.wordWrapWidth+m,A=nt._tokenize(t);for(let C=0;C<A.length;C++){let M=A[C];if(nt._isNewline(M)){if(!x){h+=nt._addLine(u),b=!y,u="",c=0;continue}M=" "}if(y){const O=nt.isBreakingSpace(M),P=nt.isBreakingSpace(u[u.length-1]);if(O&&P)continue}const w=nt._getFromCache(M,m,d,o);if(w>S)if(u!==""&&(h+=nt._addLine(u),u="",c=0),nt.canBreakWords(M,n.breakWords)){const O=nt.wordWrapSplit(M);for(let P=0;P<O.length;P++){let F=O[P],V=F,N=1;for(;O[P+N];){const W=O[P+N];if(!nt.canBreakChars(V,W,M,P,n.breakWords))F+=W;else break;V=W,N++}P+=N-1;const tt=nt._getFromCache(F,m,d,o);tt+c>S&&(h+=nt._addLine(u),b=!1,u="",c=0),u+=F,c+=tt}}else{u.length>0&&(h+=nt._addLine(u),u="",c=0);const O=C===A.length-1;h+=nt._addLine(M,!O),b=!1,u="",c=0}else w+c>S&&(b=!1,h+=nt._addLine(u),u="",c=0),(u.length>0||!nt.isBreakingSpace(M)||b)&&(u+=M,c+=w)}return h+=nt._addLine(u,!1),h}static _addLine(t,n=!0){return t=nt._trimRight(t),t=n?`${t}
`:t,t}static _getFromCache(t,n,s,o){let c=s[t];return typeof c!="number"&&(c=nt._measureText(t,n,o)+n,s[t]=c),c}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let n=t.length-1;n>=0;n--){const s=t[n];if(!nt.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:nt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return typeof t!="string"?!1:nt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const n=[];let s="";if(typeof t!="string")return n;for(let o=0;o<t.length;o++){const c=t[o],u=t[o+1];if(nt.isBreakingSpace(c,u)||nt._isNewline(c)){s!==""&&(n.push(s),s=""),c==="\r"&&u===`
`?(n.push(`\r
`),o++):n.push(c);continue}s+=c}return s!==""&&n.push(s),n}static canBreakWords(t,n){return n}static canBreakChars(t,n,s,o,c){return!0}static wordWrapSplit(t){return nt.graphemeSegmenter(t)}static measureFont(t){if(nt._fonts[t])return nt._fonts[t];const n=nt._context;n.font=t;const s=n.measureText(nt.METRICS_STRING+nt.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return nt._fonts[t]=o,o}static clearMetrics(t=""){t?delete nt._fonts[t]:nt._fonts={}}static get _canvas(){if(!nt.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if(n.getContext("2d",fh)?.measureText)return nt.__canvas=n,n;t=Yt.get().createCanvas()}catch{t=Yt.get().createCanvas()}t.width=t.height=10,nt.__canvas=t}return nt.__canvas}static get _context(){return nt.__context||(nt.__context=nt._canvas.getContext("2d",fh)),nt.__context}};xn.METRICS_STRING="|q";xn.BASELINE_SYMBOL="M";xn.BASELINE_MULTIPLIER=1.4;xn.HEIGHT_MULTIPLIER=2;xn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const r=new Intl.Segmenter;return t=>{const n=r.segment(t),s=[];let o=0;for(const c of n)s[o++]=c.segment;return s}}return r=>[...r]})();xn.experimentalLetterSpacing=!1;xn._fonts={};xn._newlines=[10,13];xn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];xn._measurementCache=e_(1e3);let ol=xn;const ny=[{offset:0,color:"white"},{offset:1,color:"black"}],of=class Yh{constructor(...t){this.uid=$t("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let n=qS(t);n={...n.type==="radial"?Yh.defaultRadialOptions:Yh.defaultLinearOptions,...s0(n)},this._textureSize=n.textureSize,this._wrapMode=n.wrapMode,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(t,n){return this.colorStops.push({offset:t,color:re.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:n}=this.start,{x:s,y:o}=this.end,c=s-t,u=o-n;const h=c<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(c<0){const C=t;t=s,s=C,c*=-1}if(u<0){const C=n;n=o,o=C,u*=-1}}const d=this.colorStops.length?this.colorStops:ny,m=this._textureSize,{canvas:g,context:y}=sy(m,1),x=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);iy(x,d),y.fillStyle=x,y.fillRect(0,0,m,1),this.texture=new St({source:new Ki({resource:g,addressMode:this._wrapMode})});const b=Math.sqrt(c*c+u*u),S=Math.atan2(u,c),A=new bt;A.scale(b/m,1),A.rotate(S),A.translate(t,n),this.textureSpace==="local"&&A.scale(m,m),this.transform=A}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:ny,n=this._textureSize,{canvas:s,context:o}=sy(n,n),{x:c,y:u}=this.center,{x:h,y:d}=this.outerCenter,m=this.innerRadius,g=this.outerRadius,y=h-g,x=d-g,b=n/(g*2),S=(c-y)*b,A=(u-x)*b,C=o.createRadialGradient(S,A,m*b,(h-y)*b,(d-x)*b,g*b);iy(C,t),o.fillStyle=t[t.length-1].color,o.fillRect(0,0,n,n),o.fillStyle=C,o.translate(S,A),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-A),o.fillRect(0,0,n,n),this.texture=new St({source:new Ki({resource:s,addressMode:this._wrapMode})});const M=new bt;M.scale(1/b,1/b),M.translate(y,x),this.textureSpace==="local"&&M.scale(n,n),this.transform=M}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};of.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};of.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Zn=of;function iy(r,t){for(let n=0;n<t.length;n++){const s=t[n];r.addColorStop(s.offset,s.color)}}function sy(r,t){const n=Yt.get().createCanvas(r,t),s=n.getContext("2d");return{canvas:n,context:s}}function qS(r){let t=r[0]??{};return(typeof t=="number"||r[1])&&(gt("8.5.2","use options object instead"),t={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??Zn.defaultLinearOptions.textureSize}),t}const ry={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class El{constructor(t,n){this.uid=$t("fillPattern"),this._tick=0,this.transform=new bt,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),n&&(t.source.style.addressModeU=ry[n].addressModeU,t.source.style.addressModeV=ry[n].addressModeV)}setTransform(t){const n=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var dh,ay;function $S(){if(ay)return dh;ay=1,dh=n;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(c){var u=[];return c.replace(t,function(h,d,m){var g=d.toLowerCase();for(m=o(m),g=="m"&&m.length>2&&(u.push([d].concat(m.splice(0,2))),g="l",d=d=="m"?"l":"L");;){if(m.length==r[g])return m.unshift(d),u.push(m);if(m.length<r[g])throw new Error("malformed path data");u.push([d].concat(m.splice(0,r[g])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(c){var u=c.match(s);return u?u.map(Number):[]}return dh}var QS=$S();const ZS=ba(QS);function KS(r,t){const n=ZS(r),s=[];let o=null,c=0,u=0;for(let h=0;h<n.length;h++){const d=n[h],m=d[0],g=d;switch(m){case"M":c=g[1],u=g[2],t.moveTo(c,u);break;case"m":c+=g[1],u+=g[2],t.moveTo(c,u);break;case"H":c=g[1],t.lineTo(c,u);break;case"h":c+=g[1],t.lineTo(c,u);break;case"V":u=g[1],t.lineTo(c,u);break;case"v":u+=g[1],t.lineTo(c,u);break;case"L":c=g[1],u=g[2],t.lineTo(c,u);break;case"l":c+=g[1],u+=g[2],t.lineTo(c,u);break;case"C":c=g[5],u=g[6],t.bezierCurveTo(g[1],g[2],g[3],g[4],c,u);break;case"c":t.bezierCurveTo(c+g[1],u+g[2],c+g[3],u+g[4],c+g[5],u+g[6]),c+=g[5],u+=g[6];break;case"S":c=g[3],u=g[4],t.bezierCurveToShort(g[1],g[2],c,u);break;case"s":t.bezierCurveToShort(c+g[1],u+g[2],c+g[3],u+g[4]),c+=g[3],u+=g[4];break;case"Q":c=g[3],u=g[4],t.quadraticCurveTo(g[1],g[2],c,u);break;case"q":t.quadraticCurveTo(c+g[1],u+g[2],c+g[3],u+g[4]),c+=g[3],u+=g[4];break;case"T":c=g[1],u=g[2],t.quadraticCurveToShort(c,u);break;case"t":c+=g[1],u+=g[2],t.quadraticCurveToShort(c,u);break;case"A":c=g[6],u=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],c,u);break;case"a":c+=g[6],u+=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],c,u);break;case"Z":case"z":t.closePath(),s.length>0&&(o=s.pop(),o?(c=o.startX,u=o.startY):(c=0,u=0)),o=null;break;default:Ht(`Unknown SVG path command: ${m}`)}m!=="Z"&&m!=="z"&&o===null&&(o={startX:c,startY:u},s.push(o))}return t}class lf{constructor(t=0,n=0,s=0){this.type="circle",this.x=t,this.y=n,this.radius=s}clone(){return new lf(this.x,this.y,this.radius)}contains(t,n){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-t,c=this.y-n;return o*=o,c*=c,o+c<=s}strokeContains(t,n,s,o=.5){if(this.radius===0)return!1;const c=this.x-t,u=this.y-n,h=this.radius,d=(1-o)*s,m=Math.sqrt(c*c+u*u);return m<=h+d&&m>h-(s-d)}getBounds(t){return t||(t=new Kt),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class cf{constructor(t=0,n=0,s=0,o=0){this.type="ellipse",this.x=t,this.y=n,this.halfWidth=s,this.halfHeight=o}clone(){return new cf(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,o=(n-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(t,n,s,o=.5){const{halfWidth:c,halfHeight:u}=this;if(c<=0||u<=0)return!1;const h=s*(1-o),d=s-h,m=c-d,g=u-d,y=c+h,x=u+h,b=t-this.x,S=n-this.y,A=b*b/(m*m)+S*S/(g*g),C=b*b/(y*y)+S*S/(x*x);return A>1&&C<=1}getBounds(t){return t||(t=new Kt),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function WS(r,t,n,s,o,c){const u=r-n,h=t-s,d=o-n,m=c-s,g=u*d+h*m,y=d*d+m*m;let x=-1;y!==0&&(x=g/y);let b,S;x<0?(b=n,S=s):x>1?(b=o,S=c):(b=n+x*d,S=s+x*m);const A=r-b,C=t-S;return A*A+C*C}let JS,tC;class ha{constructor(...t){this.type="polygon";let n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){const s=[];for(let o=0,c=n.length;o<c;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.closePath=!0}isClockwise(){let t=0;const n=this.points,s=n.length;for(let o=0;o<s;o+=2){const c=n[o],u=n[o+1],h=n[(o+2)%s],d=n[(o+3)%s];t+=(h-c)*(d+u)}return t<0}containsPolygon(t){const n=this.getBounds(JS),s=t.getBounds(tC);if(!n.containsRect(s))return!1;const o=t.points;for(let c=0;c<o.length;c+=2){const u=o[c],h=o[c+1];if(!this.contains(u,h))return!1}return!0}clone(){const t=this.points.slice(),n=new ha(t);return n.closePath=this.closePath,n}contains(t,n){let s=!1;const o=this.points.length/2;for(let c=0,u=o-1;c<o;u=c++){const h=this.points[c*2],d=this.points[c*2+1],m=this.points[u*2],g=this.points[u*2+1];d>n!=g>n&&t<(m-h)*((n-d)/(g-d))+h&&(s=!s)}return s}strokeContains(t,n,s,o=.5){const c=s*s,u=c*(1-o),h=c-u,{points:d}=this,m=d.length-(this.closePath?0:2);for(let g=0;g<m;g+=2){const y=d[g],x=d[g+1],b=d[(g+2)%d.length],S=d[(g+3)%d.length],A=WS(t,n,y,x,b,S),C=Math.sign((b-y)*(n-x)-(S-x)*(t-y));if(A<=(C<0?h:u))return!0}return!1}getBounds(t){t||(t=new Kt);const n=this.points;let s=1/0,o=-1/0,c=1/0,u=-1/0;for(let h=0,d=n.length;h<d;h+=2){const m=n[h],g=n[h+1];s=m<s?m:s,o=m>o?m:o,c=g<c?g:c,u=g>u?g:u}return t.x=s,t.width=o-s,t.y=c,t.height=u-c,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,n)=>`${t}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return gt("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return gt("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const nl=(r,t,n,s,o,c,u)=>{const h=r-n,d=t-s,m=Math.sqrt(h*h+d*d);return m>=o-c&&m<=o+u};class uf{constructor(t=0,n=0,s=0,o=0,c=20){this.type="roundedRectangle",this.x=t,this.y=n,this.width=s,this.height=o,this.radius=c}getBounds(t){return t||(t=new Kt),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new uf(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+s&&n<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let o=t-(this.x+s),c=n-(this.y+s);const u=s*s;if(o*o+c*c<=u||(o=t-(this.x+this.width-s),o*o+c*c<=u)||(c=n-(this.y+this.height-s),o*o+c*c<=u)||(o=t-(this.x+s),o*o+c*c<=u))return!0}return!1}strokeContains(t,n,s,o=.5){const{x:c,y:u,width:h,height:d,radius:m}=this,g=s*(1-o),y=s-g,x=c+m,b=u+m,S=h-m*2,A=d-m*2,C=c+h,M=u+d;return(t>=c-g&&t<=c+y||t>=C-y&&t<=C+g)&&n>=b&&n<=b+A||(n>=u-g&&n<=u+y||n>=M-y&&n<=M+g)&&t>=x&&t<=x+S?!0:t<x&&n<b&&nl(t,n,x,b,m,y,g)||t>C-m&&n<b&&nl(t,n,C-m,b,m,y,g)||t>C-m&&n>M-m&&nl(t,n,C-m,M-m,m,y,g)||t<x&&n>M-m&&nl(t,n,x,M-m,m,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const n_={};function eC(r,t,n){let s=2166136261;for(let o=0;o<t;o++)s^=r[o].uid,s=Math.imul(s,16777619),s>>>=0;return n_[s]||nC(r,t,s,n)}function nC(r,t,n,s){const o={};let c=0;for(let h=0;h<s;h++){const d=h<t?r[h]:St.EMPTY.source;o[c++]=d.source,o[c++]=d.style}const u=new al(o);return n_[n]=u,u}class oy{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function ly(r,t){const n=r.byteLength/8|0,s=new Float64Array(r,0,n);new Float64Array(t,0,n).set(s);const c=r.byteLength-n*8;if(c>0){const u=new Uint8Array(r,n*8,c);new Uint8Array(t,n*8,c).set(u)}}const iC={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var sC=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(sC||{});function cy(r,t){return t.alphaMode==="no-premultiply-alpha"&&iC[r]||r}const rC=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function aC(r){let t="";for(let n=0;n<r;++n)n>0&&(t+=`
else `),n<r-1&&(t+=`if(test == ${n}.0){}`);return t}function oC(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=rC.replace(/%forloop%/gi,aC(r));if(t.shaderSource(n,s),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))r=r/2|0;else break}}finally{t.deleteShader(n)}return r}let js=null;function lC(){if(js)return js;const r=U0();return js=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),js=oC(js,r),r.getExtension("WEBGL_lose_context")?.loseContext(),js}class cC{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const n=this.textures[t];this.textures[t]=null,this.ids[n.uid]=null}this.count=0}}class uC{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new cC,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const fa=[];let xl=0;va.register({clear:()=>{if(fa.length>0)for(const r of fa)r&&r.destroy();fa.length=0,xl=0}});function uy(){return xl>0?fa[--xl]:new uC}function hy(r){fa[xl++]=r}let Wr=0;const i_=class s_{constructor(t){this.uid=$t("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...s_.defaultOptions,...t},t.maxTextures||(gt("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=lC());const{maxTextures:n,attributesInitialSize:s,indicesInitialSize:o}=t;this.attributeBuffer=new oy(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)hy(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,n){const s=t._batch.textures.ids[n._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=n,!0)}updateElement(t){this.dirty=!0;const n=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId)}break(t){const n=this._elements;if(!n[this.elementStart])return;let s=uy(),o=s.textures;o.clear();const c=n[this.elementStart];let u=cy(c.blendMode,c.texture._source),h=c.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,m=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,x=this._batchIndexStart,b="startBatch";const S=this.maxTextures;for(let A=this.elementStart;A<this.elementSize;++A){const C=n[A];n[A]=null;const w=C.texture._source,O=cy(C.blendMode,w),P=u!==O||h!==C.topology;if(w._batchTick===Wr&&!P){C._textureId=w._textureBindLocation,y+=C.indexSize,C.packAsQuad?(this.packQuadAttributes(C,d,m,C._attributeStart,C._textureId),this.packQuadIndex(g,C._indexStart,C._attributeStart/this.vertexSize)):(this.packAttributes(C,d,m,C._attributeStart,C._textureId),this.packIndex(C,g,C._indexStart,C._attributeStart/this.vertexSize)),C._batch=s;continue}w._batchTick=Wr,(o.count>=S||P)&&(this._finishBatch(s,x,y-x,o,u,h,t,b),b="renderBatch",x=y,u=O,h=C.topology,s=uy(),o=s.textures,o.clear(),++Wr),C._textureId=w._textureBindLocation=o.count,o.ids[w.uid]=o.count,o.textures[o.count++]=w,C._batch=s,y+=C.indexSize,C.packAsQuad?(this.packQuadAttributes(C,d,m,C._attributeStart,C._textureId),this.packQuadIndex(g,C._indexStart,C._attributeStart/this.vertexSize)):(this.packAttributes(C,d,m,C._attributeStart,C._textureId),this.packIndex(C,g,C._indexStart,C._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,y-x,o,u,h,t,b),x=y,++Wr),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=y}_finishBatch(t,n,s,o,c,u,h,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=o,t.blendMode=c,t.topology=u,t.start=n,t.size=s,++Wr,this.batches[this.batchIndex++]=t,h.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const n=Math.max(t,this.attributeBuffer.size*2),s=new oy(n);ly(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const n=this.indexBuffer;let s=Math.max(t,n.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let c=0;c<n.length;c++)o[c]=n[c];else ly(n.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,n,s){t[n]=s+0,t[n+1]=s+1,t[n+2]=s+2,t[n+3]=s+0,t[n+4]=s+2,t[n+5]=s+3}packIndex(t,n,s,o){const c=t.indices,u=t.indexSize,h=t.indexOffset,d=t.attributeOffset;for(let m=0;m<u;m++)n[s++]=o+c[m+h]-d}destroy(t={}){if(this.batches!==null){for(let n=0;n<this.batchIndex;n++)hy(this.batches[n]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&(this.shader?.destroy(),this.shader=null);for(let n=0;n<this._elements.length;n++)this._elements[n]&&(this._elements[n]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};i_.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let hC=i_;var Ue=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(Ue||{});class ya extends yn{constructor(t){let{data:n,size:s}=t;const{usage:o,label:c,shrinkToFit:u}=t;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=$t("buffer"),this._resourceType="buffer",this._resourceId=$t("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,s??(s=n?.byteLength);const h=!!n;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:c},this.shrinkToFit=u??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Ue.STATIC)}set static(t){t?this.descriptor.usage|=Ue.STATIC:this.descriptor.usage&=~Ue.STATIC}setDataWithSize(t,n,s){if(this._updateID++,this._updateSize=n*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=$t("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function r_(r,t){if(!(r instanceof ya)){let n=t?Ue.INDEX:Ue.VERTEX;r instanceof Array&&(t?(r=new Uint32Array(r),n=Ue.INDEX|Ue.COPY_DST):(r=new Float32Array(r),n=Ue.VERTEX|Ue.COPY_DST)),r=new ya({data:r,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return r}function fC(r,t,n){const s=r.getAttribute(t);if(!s)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const o=s.buffer.data;let c=1/0,u=1/0,h=-1/0,d=-1/0;const m=o.BYTES_PER_ELEMENT,g=(s.offset||0)/m,y=(s.stride||8)/m;for(let x=g;x<o.length;x+=y){const b=o[x],S=o[x+1];b>h&&(h=b),S>d&&(d=S),b<c&&(c=b),S<u&&(u=S)}return n.minX=c,n.minY=u,n.maxX=h,n.maxY=d,n}function dC(r){return(r instanceof ya||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=r_(r.buffer,!1),r}class pC extends yn{constructor(t={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=$t("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new gn,this._boundsDirty=!0;const{attributes:n,indexBuffer:s,topology:o}=t;if(this.buffers=[],this.attributes={},n)for(const c in n)this.addAttribute(c,n[c]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const n=this.attributes[t];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(t,n){const s=dC(n);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=r_(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,fC(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(n=>n.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const mC=new Float32Array(1),gC=new Uint32Array(1);class yC extends pC{constructor(){const n=new ya({data:mC,label:"attribute-batch-buffer",usage:Ue.VERTEX|Ue.COPY_DST,shrinkToFit:!1}),s=new ya({data:gC,label:"index-batch-buffer",usage:Ue.INDEX|Ue.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:o,offset:0},aUV:{buffer:n,format:"float32x2",stride:o,offset:8},aColor:{buffer:n,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function fy(r,t,n){if(r)for(const s in r){const o=s.toLocaleLowerCase(),c=t[o];if(c){let u=r[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&c.push(`//----${n}----//`),c.push(u)}else Ht(`${s} placement hook does not exist in shader`)}}const _C=/\{\{(.*?)\}\}/g;function dy(r){const t={};return(r.match(_C)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{t[s]=[]}),t}function py(r,t){let n;const s=/@in\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function my(r,t,n=!1){const s=[];py(t,s),r.forEach(h=>{h.header&&py(h.header,s)});const o=s;n&&o.sort();const c=o.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let u=t.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${c}
`),u}function gy(r,t){let n;const s=/@out\s+([^;]+);/g;for(;(n=s.exec(r))!==null;)t.push(n[1])}function xC(r){const n=/\b(\w+)\s*:/g.exec(r);return n?n[1]:""}function bC(r){const t=/@.*?\s+/g;return r.replace(t,"")}function vC(r,t){const n=[];gy(t,n),r.forEach(d=>{d.header&&gy(d.header,n)});let s=0;const o=n.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),c=n.sort().map(d=>`       var ${bC(d)};`).join(`
`),u=`return VSOutput(
            ${n.sort().map(d=>` ${xC(d)}`).join(`,
`)});`;let h=t.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${c}
`),h=h.replace("{{return}}",`
${u}
`),h}function yy(r,t){let n=r;for(const s in t){const o=t[s];o.join(`
`).length?n=n.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):n=n.replace(`{{${s}}}`,"")}return n}const Ci=Object.create(null),ph=new Map;let SC=0;function CC({template:r,bits:t}){const n=a_(r,t);if(Ci[n])return Ci[n];const{vertex:s,fragment:o}=TC(r,t);return Ci[n]=o_(s,o,t),Ci[n]}function AC({template:r,bits:t}){const n=a_(r,t);return Ci[n]||(Ci[n]=o_(r.vertex,r.fragment,t)),Ci[n]}function TC(r,t){const n=t.map(u=>u.vertex).filter(u=>!!u),s=t.map(u=>u.fragment).filter(u=>!!u);let o=my(n,r.vertex,!0);o=vC(n,o);const c=my(s,r.fragment,!0);return{vertex:o,fragment:c}}function a_(r,t){return t.map(n=>(ph.has(n)||ph.set(n,SC++),ph.get(n))).sort((n,s)=>n-s).join("-")+r.vertex+r.fragment}function o_(r,t,n){const s=dy(r),o=dy(t);return n.forEach(c=>{fy(c.vertex,s,c.name),fy(c.fragment,o,c.name)}),{vertex:yy(r,s),fragment:yy(t,o)}}const MC=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,EC=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,RC=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,wC=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,kC={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},DC={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function OC({bits:r,name:t}){const n=CC({template:{fragment:EC,vertex:MC},bits:[kC,...r]});return Ml.from({name:t,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function zC({bits:r,name:t}){return new L0({name:t,...AC({template:{vertex:RC,fragment:wC},bits:[DC,...r]})})}const BC={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},UC={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},mh={};function PC(r){const t=[];if(r===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let s=0;s<r;s++)t.push(`@group(1) @binding(${n++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${n++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function LC(r){const t=[];if(r===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let n=0;n<r;n++)n===r-1?t.push("  default:{"):t.push(`  case ${n}:{`),t.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function NC(r){return mh[r]||(mh[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${PC(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${LC(r)}
            `}}),mh[r]}const gh={};function GC(r){const t=[];for(let n=0;n<r;n++)n>0&&t.push("else"),n<r-1&&t.push(`if(vTextureId < ${n}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${n}], vUV);`),t.push("}");return t.join(`
`)}function jC(r){return gh[r]||(gh[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${GC(r)}
            `}}),gh[r]}const HC={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},YC={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},_y={};function IC(r){let t=_y[r];if(t)return t;const n=new Int32Array(r);for(let s=0;s<r;s++)n[s]=s;return t=_y[r]=new H0({uTextures:{value:n,type:"i32",size:r}},{isStatic:!0}),t}class xy extends af{constructor(t){const n=zC({name:"batch",bits:[UC,jC(t),YC]}),s=OC({name:"batch",bits:[BC,NC(t),HC]});super({glProgram:n,gpuProgram:s,resources:{batchSamplers:IC(t)}}),this.maxTextures=t}}let Jr=null;const l_=class c_ extends hC{constructor(t){super(t),this.geometry=new yC,this.name=c_.extension.name,this.vertexSize=6,Jr??(Jr=new xy(t.maxTextures)),this.shader=Jr}packAttributes(t,n,s,o,c){const u=c<<16|t.roundPixels&65535,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,x=h.tx,b=h.ty,{positions:S,uvs:A}=t,C=t.color,M=t.attributeOffset,w=M+t.attributeSize;for(let O=M;O<w;O++){const P=O*2,F=S[P],V=S[P+1];n[o++]=d*F+g*V+x,n[o++]=y*V+m*F+b,n[o++]=A[P],n[o++]=A[P+1],s[o++]=C,s[o++]=u}}packQuadAttributes(t,n,s,o,c){const u=t.texture,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,x=h.tx,b=h.ty,S=t.bounds,A=S.maxX,C=S.minX,M=S.maxY,w=S.minY,O=u.uvs,P=t.color,F=c<<16|t.roundPixels&65535;n[o+0]=d*C+g*w+x,n[o+1]=y*w+m*C+b,n[o+2]=O.x0,n[o+3]=O.y0,s[o+4]=P,s[o+5]=F,n[o+6]=d*A+g*w+x,n[o+7]=y*w+m*A+b,n[o+8]=O.x1,n[o+9]=O.y1,s[o+10]=P,s[o+11]=F,n[o+12]=d*A+g*M+x,n[o+13]=y*M+m*A+b,n[o+14]=O.x2,n[o+15]=O.y2,s[o+16]=P,s[o+17]=F,n[o+18]=d*C+g*M+x,n[o+19]=y*M+m*C+b,n[o+20]=O.x3,n[o+21]=O.y3,s[o+22]=P,s[o+23]=F}_updateMaxTextures(t){this.shader.maxTextures!==t&&(Jr=new xy(t),this.shader=Jr)}destroy(){this.shader=null,super.destroy()}};l_.extension={type:[rt.Batcher],name:"default"};let VC=l_;class FC{constructor(t){this.items=Object.create(null);const{renderer:n,type:s,onUnload:o,priority:c,name:u}=t;this._renderer=n,n.gc.addResourceHash(this,"items",s,c??0),this._onUnload=o,this.name=u}add(t){return this.items[t.uid]?!1:(this.items[t.uid]=t,t.once("unload",this.remove,this),t._gcLastUsed=this._renderer.gc.now,!0)}remove(t,...n){if(!this.items[t.uid])return;const s=t._gpuData[this._renderer.uid];s&&(this._onUnload?.(t,...n),s.destroy(),t._gpuData[this._renderer.uid]=null,this.items[t.uid]=null)}removeAll(...t){Object.values(this.items).forEach(n=>n&&this.remove(n,...t))}destroy(...t){this.removeAll(...t),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function XC(r,t,n,s,o,c,u,h=null){let d=0;n*=t,o*=c;const m=h.a,g=h.b,y=h.c,x=h.d,b=h.tx,S=h.ty;for(;d<u;){const A=r[n],C=r[n+1];s[o]=m*A+y*C+b,s[o+1]=g*A+x*C+S,o+=c,n+=t,d++}}function qC(r,t,n,s){let o=0;for(t*=n;o<s;)r[t]=0,r[t+1]=0,t+=n,o++}function u_(r,t,n,s,o){const c=t.a,u=t.b,h=t.c,d=t.d,m=t.tx,g=t.ty;n||(n=0),s||(s=2),o||(o=r.length/s-n);let y=n*s;for(let x=0;x<o;x++){const b=r[y],S=r[y+1];r[y]=c*b+h*S+m,r[y+1]=u*b+d*S+g,y+=s}}const $C=new bt;class h_{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,n=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?p0(n,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||$C}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const _a={extension:{type:rt.ShapeBuilder,name:"circle"},build(r,t){let n,s,o,c,u,h;if(r.type==="circle"){const P=r;if(u=h=P.radius,u<=0)return!1;n=P.x,s=P.y,o=c=0}else if(r.type==="ellipse"){const P=r;if(u=P.halfWidth,h=P.halfHeight,u<=0||h<=0)return!1;n=P.x,s=P.y,o=c=0}else{const P=r,F=P.width/2,V=P.height/2;n=P.x+F,s=P.y+V,u=h=Math.max(0,Math.min(P.radius,Math.min(F,V))),o=F-u,c=V-h}if(o<0||c<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+h)),m=d*8+(o?4:0)+(c?4:0);if(m===0)return!1;if(d===0)return t[0]=t[6]=n+o,t[1]=t[3]=s+c,t[2]=t[4]=n-o,t[5]=t[7]=s-c,!0;let g=0,y=d*4+(o?2:0)+2,x=y,b=m,S=o+u,A=c,C=n+S,M=n-S,w=s+A;if(t[g++]=C,t[g++]=w,t[--y]=w,t[--y]=M,c){const P=s-A;t[x++]=M,t[x++]=P,t[--b]=P,t[--b]=C}for(let P=1;P<d;P++){const F=Math.PI/2*(P/d),V=o+Math.cos(F)*u,N=c+Math.sin(F)*h,tt=n+V,W=n-V,q=s+N,$=s-N;t[g++]=tt,t[g++]=q,t[--y]=q,t[--y]=W,t[x++]=W,t[x++]=$,t[--b]=$,t[--b]=tt}S=o,A=c+h,C=n+S,M=n-S,w=s+A;const O=s-A;return t[g++]=C,t[g++]=w,t[--b]=O,t[--b]=C,o&&(t[g++]=M,t[g++]=w,t[--b]=O,t[--b]=M),!0},triangulate(r,t,n,s,o,c){if(r.length===0)return;let u=0,h=0;for(let g=0;g<r.length;g+=2)u+=r[g],h+=r[g+1];u/=r.length/2,h/=r.length/2;let d=s;t[d*n]=u,t[d*n+1]=h;const m=d++;for(let g=0;g<r.length;g+=2)t[d*n]=r[g],t[d*n+1]=r[g+1],g>0&&(o[c++]=d,o[c++]=m,o[c++]=d-1),d++;o[c++]=m+1,o[c++]=m,o[c++]=d-1}},QC={..._a,extension:{..._a.extension,name:"ellipse"}},ZC={..._a,extension:{..._a.extension,name:"roundedRectangle"}},f_=1e-4,by=1e-4;function KC(r){const t=r.length;if(t<6)return 1;let n=0;for(let s=0,o=r[t-2],c=r[t-1];s<t;s+=2){const u=r[s],h=r[s+1];n+=(u-o)*(h+c),o=u,c=h}return n<0?-1:1}function vy(r,t,n,s,o,c,u,h){const d=r-n*o,m=t-s*o,g=r+n*c,y=t+s*c;let x,b;u?(x=s,b=-n):(x=-s,b=n);const S=d+x,A=m+b,C=g+x,M=y+b;return h.push(S,A),h.push(C,M),2}function Fi(r,t,n,s,o,c,u,h){const d=n-r,m=s-t;let g=Math.atan2(d,m),y=Math.atan2(o-r,c-t);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let x=g;const b=y-g,S=Math.abs(b),A=Math.sqrt(d*d+m*m),C=(15*S*Math.sqrt(A)/Math.PI>>0)+1,M=b/C;if(x+=M,h){u.push(r,t),u.push(n,s);for(let w=1,O=x;w<C;w++,O+=M)u.push(r,t),u.push(r+Math.sin(O)*A,t+Math.cos(O)*A);u.push(r,t),u.push(o,c)}else{u.push(n,s),u.push(r,t);for(let w=1,O=x;w<C;w++,O+=M)u.push(r+Math.sin(O)*A,t+Math.cos(O)*A),u.push(r,t);u.push(o,c),u.push(r,t)}return C*2}function WC(r,t,n,s,o,c){const u=f_;if(r.length===0)return;const h=t;let d=h.alignment;if(t.alignment!==.5){let et=KC(r);d=(d-.5)*et+.5}const m=new ve(r[0],r[1]),g=new ve(r[r.length-2],r[r.length-1]),y=s,x=Math.abs(m.x-g.x)<u&&Math.abs(m.y-g.y)<u;if(y){r=r.slice(),x&&(r.pop(),r.pop(),g.set(r[r.length-2],r[r.length-1]));const et=(m.x+g.x)*.5,yt=(g.y+m.y)*.5;r.unshift(et,yt),r.push(et,yt)}const b=o,S=r.length/2;let A=r.length;const C=b.length/2,M=h.width/2,w=M*M,O=h.miterLimit*h.miterLimit;let P=r[0],F=r[1],V=r[2],N=r[3],tt=0,W=0,q=-(F-N),$=P-V,dt=0,Et=0,Ct=Math.sqrt(q*q+$*$);q/=Ct,$/=Ct,q*=M,$*=M;const ae=d,k=(1-ae)*2,j=ae*2;y||(h.cap==="round"?A+=Fi(P-q*(k-j)*.5,F-$*(k-j)*.5,P-q*k,F-$*k,P+q*j,F+$*j,b,!0)+2:h.cap==="square"&&(A+=vy(P,F,q,$,k,j,!0,b))),b.push(P-q*k,F-$*k),b.push(P+q*j,F+$*j);for(let et=1;et<S-1;++et){P=r[(et-1)*2],F=r[(et-1)*2+1],V=r[et*2],N=r[et*2+1],tt=r[(et+1)*2],W=r[(et+1)*2+1],q=-(F-N),$=P-V,Ct=Math.sqrt(q*q+$*$),q/=Ct,$/=Ct,q*=M,$*=M,dt=-(N-W),Et=V-tt,Ct=Math.sqrt(dt*dt+Et*Et),dt/=Ct,Et/=Ct,dt*=M,Et*=M;const yt=V-P,R=F-N,Y=V-tt,X=W-N,Q=yt*Y+R*X,lt=R*Y-X*yt,ut=lt<0;if(Math.abs(lt)<.001*Math.abs(Q)){b.push(V-q*k,N-$*k),b.push(V+q*j,N+$*j),Q>=0&&(h.join==="round"?A+=Fi(V,N,V-q*k,N-$*k,V-dt*k,N-Et*k,b,!1)+4:A+=2,b.push(V-dt*j,N-Et*j),b.push(V+dt*k,N+Et*k));continue}const At=(-q+P)*(-$+N)-(-q+V)*(-$+F),oe=(-dt+tt)*(-Et+N)-(-dt+V)*(-Et+W),Lt=(yt*oe-Y*At)/lt,bn=(X*At-R*oe)/lt,Kn=(Lt-V)*(Lt-V)+(bn-N)*(bn-N),cn=V+(Lt-V)*k,vn=N+(bn-N)*k,Ce=V-(Lt-V)*j,un=N-(bn-N)*j,Js=Math.min(yt*yt+R*R,Y*Y+X*X),Sa=ut?k:j,Ca=Js+Sa*Sa*w;Kn<=Ca?h.join==="bevel"||Kn/w>O?(ut?(b.push(cn,vn),b.push(V+q*j,N+$*j),b.push(cn,vn),b.push(V+dt*j,N+Et*j)):(b.push(V-q*k,N-$*k),b.push(Ce,un),b.push(V-dt*k,N-Et*k),b.push(Ce,un)),A+=2):h.join==="round"?ut?(b.push(cn,vn),b.push(V+q*j,N+$*j),A+=Fi(V,N,V+q*j,N+$*j,V+dt*j,N+Et*j,b,!0)+4,b.push(cn,vn),b.push(V+dt*j,N+Et*j)):(b.push(V-q*k,N-$*k),b.push(Ce,un),A+=Fi(V,N,V-q*k,N-$*k,V-dt*k,N-Et*k,b,!1)+4,b.push(V-dt*k,N-Et*k),b.push(Ce,un)):(b.push(cn,vn),b.push(Ce,un)):(b.push(V-q*k,N-$*k),b.push(V+q*j,N+$*j),h.join==="round"?ut?A+=Fi(V,N,V+q*j,N+$*j,V+dt*j,N+Et*j,b,!0)+2:A+=Fi(V,N,V-q*k,N-$*k,V-dt*k,N-Et*k,b,!1)+2:h.join==="miter"&&Kn/w<=O&&(ut?(b.push(Ce,un),b.push(Ce,un)):(b.push(cn,vn),b.push(cn,vn)),A+=2),b.push(V-dt*k,N-Et*k),b.push(V+dt*j,N+Et*j),A+=2)}P=r[(S-2)*2],F=r[(S-2)*2+1],V=r[(S-1)*2],N=r[(S-1)*2+1],q=-(F-N),$=P-V,Ct=Math.sqrt(q*q+$*$),q/=Ct,$/=Ct,q*=M,$*=M,b.push(V-q*k,N-$*k),b.push(V+q*j,N+$*j),y||(h.cap==="round"?A+=Fi(V-q*(k-j)*.5,N-$*(k-j)*.5,V-q*k,N-$*k,V+q*j,N+$*j,b,!1)+2:h.cap==="square"&&(A+=vy(V,N,q,$,k,j,!1,b)));const at=by*by;for(let et=C;et<A+C-2;++et)P=b[et*2],F=b[et*2+1],V=b[(et+1)*2],N=b[(et+1)*2+1],tt=b[(et+2)*2],W=b[(et+2)*2+1],!(Math.abs(P*(N-W)+V*(W-F)+tt*(F-N))<at)&&c.push(et,et+1,et+2)}function JC(r,t,n,s){const o=f_;if(r.length===0)return;const c=r[0],u=r[1],h=r[r.length-2],d=r[r.length-1],m=t||Math.abs(c-h)<o&&Math.abs(u-d)<o,g=n,y=r.length/2,x=g.length/2;for(let b=0;b<y;b++)g.push(r[b*2]),g.push(r[b*2+1]);for(let b=0;b<y-1;b++)s.push(x+b,x+b+1);m&&s.push(x+y-1,x)}function d_(r,t,n,s,o,c,u){const h=NS(r,t,2);if(!h)return;for(let m=0;m<h.length;m+=3)c[u++]=h[m]+o,c[u++]=h[m+1]+o,c[u++]=h[m+2]+o;let d=o*s;for(let m=0;m<r.length;m+=2)n[d]=r[m],n[d+1]=r[m+1],d+=s}const tA=[],eA={extension:{type:rt.ShapeBuilder,name:"polygon"},build(r,t){for(let n=0;n<r.points.length;n++)t[n]=r.points[n];return!0},triangulate(r,t,n,s,o,c){d_(r,tA,t,n,s,o,c)}},nA={extension:{type:rt.ShapeBuilder,name:"rectangle"},build(r,t){const n=r,s=n.x,o=n.y,c=n.width,u=n.height;return c>0&&u>0?(t[0]=s,t[1]=o,t[2]=s+c,t[3]=o,t[4]=s+c,t[5]=o+u,t[6]=s,t[7]=o+u,!0):!1},triangulate(r,t,n,s,o,c){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[6],t[s+u+1]=r[7],u+=n,t[s+u]=r[4],t[s+u+1]=r[5],u+=n;const h=s/n;o[c++]=h,o[c++]=h+1,o[c++]=h+2,o[c++]=h+1,o[c++]=h+3,o[c++]=h+2}},iA={extension:{type:rt.ShapeBuilder,name:"triangle"},build(r,t){return t[0]=r.x,t[1]=r.y,t[2]=r.x2,t[3]=r.y2,t[4]=r.x3,t[5]=r.y3,!0},triangulate(r,t,n,s,o,c){let u=0;s*=n,t[s+u]=r[0],t[s+u+1]=r[1],u+=n,t[s+u]=r[2],t[s+u+1]=r[3],u+=n,t[s+u]=r[4],t[s+u+1]=r[5];const h=s/n;o[c++]=h,o[c++]=h+1,o[c++]=h+2}},sA=new bt,rA=new Kt;function aA(r,t,n,s){const o=t.matrix?r.copyFrom(t.matrix).invert():r.identity();if(t.textureSpace==="local"){const u=n.getBounds(rA);t.width&&u.pad(t.width);const{x:h,y:d}=u,m=1/u.width,g=1/u.height,y=-h*m,x=-d*g,b=o.a,S=o.b,A=o.c,C=o.d;o.a*=m,o.b*=m,o.c*=g,o.d*=g,o.tx=y*b+x*A+o.tx,o.ty=y*S+x*C+o.ty}else o.translate(t.texture.frame.x,t.texture.frame.y),o.scale(1/t.texture.source.width,1/t.texture.source.height);const c=t.texture.source.style;return!(t.fill instanceof Zn)&&c.addressMode==="clamp-to-edge"&&(c.addressMode="repeat",c.update()),s&&o.append(sA.copyFrom(s).invert()),o}const Rl={};ye.handleByMap(rt.ShapeBuilder,Rl);ye.add(nA,eA,iA,_a,QC,ZC);const oA=new Kt,lA=new bt;function cA(r,t){const{geometryData:n,batches:s}=t;s.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let o=0;o<r.instructions.length;o++){const c=r.instructions[o];if(c.action==="texture")uA(c.data,s,n);else if(c.action==="fill"||c.action==="stroke"){const u=c.action==="stroke",h=c.data.path.shapePath,d=c.data.style,m=c.data.hole;u&&m&&Sy(m.shapePath,d,!0,s,n),m&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=m.shapePath.shapePrimitives),Sy(h,d,u,s,n)}}}function uA(r,t,n){const s=[],o=Rl.rectangle,c=oA;c.x=r.dx,c.y=r.dy,c.width=r.dw,c.height=r.dh;const u=r.transform;if(!o.build(c,s))return;const{vertices:h,uvs:d,indices:m}=n,g=m.length,y=h.length/2;u&&u_(s,u),o.triangulate(s,h,2,y,m,g);const x=r.image,b=x.uvs;d.push(b.x0,b.y0,b.x1,b.y1,b.x3,b.y3,b.x2,b.y2);const S=ln.get(h_);S.indexOffset=g,S.indexSize=m.length-g,S.attributeOffset=y,S.attributeSize=h.length/2-y,S.baseColor=r.style,S.alpha=r.alpha,S.texture=x,S.geometryData=n,t.push(S)}function Sy(r,t,n,s,o){const{vertices:c,uvs:u,indices:h}=o;r.shapePrimitives.forEach(({shape:d,transform:m,holes:g})=>{const y=[],x=Rl[d.type];if(!x.build(d,y))return;const b=h.length,S=c.length/2;let A="triangle-list";if(m&&u_(y,m),n){const O=d.closePath??!0,P=t;P.pixelLine?(JC(y,O,c,h),A="line-list"):WC(y,P,!1,O,c,h)}else if(g){const O=[],P=y.slice();hA(g).forEach(V=>{O.push(P.length/2),P.push(...V)}),d_(P,O,c,2,S,h,b)}else x.triangulate(y,c,2,S,h,b);const C=u.length/2,M=t.texture;if(M!==St.WHITE){const O=aA(lA,t,d,m);XC(c,2,S,u,C,2,c.length/2-S,O)}else qC(u,C,2,c.length/2-S);const w=ln.get(h_);w.indexOffset=b,w.indexSize=h.length-b,w.attributeOffset=S,w.attributeSize=c.length/2-S,w.baseColor=t.color,w.alpha=t.alpha,w.texture=M,w.geometryData=o,w.topology=A,s.push(w)})}function hA(r){const t=[];for(let n=0;n<r.length;n++){const s=r[n].shape,o=[];Rl[s.type].build(s,o)&&t.push(o)}return t}class fA{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(t=>{ln.return(t)}),this.graphicsData&&ln.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class dA{constructor(){this.instructions=new _0}init(t){const n=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(n):this.batcher=new VC({maxTextures:n}),this.instructions.reset()}get geometry(){return gt(c1,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const hf=class Ih{constructor(t){this._renderer=t,this._managedContexts=new FC({renderer:t,type:"resource",name:"graphicsContext"})}init(t){Ih.defaultOptions.bezierSmoothness=t?.bezierSmoothness??Ih.defaultOptions.bezierSmoothness}getContextRenderData(t){return t._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(t)}updateGpuContext(t){const n=!!t._gpuData[this._renderer.uid],s=t._gpuData[this._renderer.uid]||this._initContext(t);if(t.dirty||!n){n&&s.reset(),cA(t,s);const o=t.batchMode;t.customShader||o==="no-batch"?s.isBatchable=!1:o==="auto"?s.isBatchable=s.geometryData.vertices.length<400:s.isBatchable=!0,t.dirty=!1}return s}getGpuContext(t){return t._gpuData[this._renderer.uid]||this._initContext(t)}_initContextRenderData(t){const n=ln.get(dA,{maxTextures:this._renderer.limits.maxBatchableTextures}),s=t._gpuData[this._renderer.uid],{batches:o,geometryData:c}=s;s.graphicsData=n;const u=c.vertices.length,h=c.indices.length;for(let y=0;y<o.length;y++)o[y].applyTransform=!1;const d=n.batcher;d.ensureAttributeBuffer(u),d.ensureIndexBuffer(h),d.begin();for(let y=0;y<o.length;y++){const x=o[y];d.add(x)}d.finish(n.instructions);const m=d.geometry;m.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),m.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);const g=d.batches;for(let y=0;y<g.length;y++){const x=g[y];x.bindGroup=eC(x.textures.textures,x.textures.count,this._renderer.limits.maxBatchableTextures)}return n}_initContext(t){const n=new fA;return n.context=t,t._gpuData[this._renderer.uid]=n,this._managedContexts.add(t),n}destroy(){this._managedContexts.destroy(),this._renderer=null}};hf.extension={type:[rt.WebGLSystem,rt.WebGPUSystem,rt.CanvasSystem],name:"graphicsContext"};hf.defaultOptions={bezierSmoothness:.5};let p_=hf;const pA=8,il=11920929e-14,mA=1;function m_(r,t,n,s,o,c,u,h,d,m){const y=Math.min(.99,Math.max(0,m??p_.defaultOptions.bezierSmoothness));let x=(mA-y)/1;return x*=x,gA(t,n,s,o,c,u,h,d,r,x),r}function gA(r,t,n,s,o,c,u,h,d,m){Vh(r,t,n,s,o,c,u,h,d,m,0),d.push(u,h)}function Vh(r,t,n,s,o,c,u,h,d,m,g){if(g>pA)return;const y=(r+n)/2,x=(t+s)/2,b=(n+o)/2,S=(s+c)/2,A=(o+u)/2,C=(c+h)/2,M=(y+b)/2,w=(x+S)/2,O=(b+A)/2,P=(S+C)/2,F=(M+O)/2,V=(w+P)/2;if(g>0){let N=u-r,tt=h-t;const W=Math.abs((n-u)*tt-(s-h)*N),q=Math.abs((o-u)*tt-(c-h)*N);if(W>il&&q>il){if((W+q)*(W+q)<=m*(N*N+tt*tt)){d.push(F,V);return}}else if(W>il){if(W*W<=m*(N*N+tt*tt)){d.push(F,V);return}}else if(q>il){if(q*q<=m*(N*N+tt*tt)){d.push(F,V);return}}else if(N=F-(r+u)/2,tt=V-(t+h)/2,N*N+tt*tt<=m){d.push(F,V);return}}Vh(r,t,y,x,M,w,F,V,d,m,g+1),Vh(F,V,O,P,A,C,u,h,d,m,g+1)}const yA=8,_A=11920929e-14,xA=1;function bA(r,t,n,s,o,c,u,h){const m=Math.min(.99,Math.max(0,h??p_.defaultOptions.bezierSmoothness));let g=(xA-m)/1;return g*=g,vA(t,n,s,o,c,u,r,g),r}function vA(r,t,n,s,o,c,u,h){Fh(u,r,t,n,s,o,c,h,0),u.push(o,c)}function Fh(r,t,n,s,o,c,u,h,d){if(d>yA)return;const m=(t+s)/2,g=(n+o)/2,y=(s+c)/2,x=(o+u)/2,b=(m+y)/2,S=(g+x)/2;let A=c-t,C=u-n;const M=Math.abs((s-c)*C-(o-u)*A);if(M>_A){if(M*M<=h*(A*A+C*C)){r.push(b,S);return}}else if(A=b-(t+c)/2,C=S-(n+u)/2,A*A+C*C<=h){r.push(b,S);return}Fh(r,t,n,m,g,b,S,h,d+1),Fh(r,b,S,y,x,c,u,h,d+1)}function g_(r,t,n,s,o,c,u,h){let d=Math.abs(o-c);(!u&&o>c||u&&c>o)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),h=Math.max(h,3);let m=d/h,g=o;m*=u?-1:1;for(let y=0;y<h+1;y++){const x=Math.cos(g),b=Math.sin(g),S=t+x*s,A=n+b*s;r.push(S,A),g+=m}}function SA(r,t,n,s,o,c){const u=r[r.length-2],d=r[r.length-1]-n,m=u-t,g=o-n,y=s-t,x=Math.abs(d*y-m*g);if(x<1e-8||c===0){(r[r.length-2]!==t||r[r.length-1]!==n)&&r.push(t,n);return}const b=d*d+m*m,S=g*g+y*y,A=d*g+m*y,C=c*Math.sqrt(b)/x,M=c*Math.sqrt(S)/x,w=C*A/b,O=M*A/S,P=C*y+M*m,F=C*g+M*d,V=m*(M+w),N=d*(M+w),tt=y*(C+O),W=g*(C+O),q=Math.atan2(N-F,V-P),$=Math.atan2(W-F,tt-P);g_(r,P+t,F+n,c,q,$,m*g>y*d)}const da=Math.PI*2,yh={centerX:0,centerY:0,ang1:0,ang2:0},_h=({x:r,y:t},n,s,o,c,u,h,d)=>{r*=n,t*=s;const m=o*r-c*t,g=c*r+o*t;return d.x=m+u,d.y=g+h,d};function CA(r,t){const n=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:n,o=Math.cos(r),c=Math.sin(r),u=Math.cos(r+t),h=Math.sin(r+t);return[{x:o-c*s,y:c+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const Cy=(r,t,n,s)=>{const o=r*s-t*n<0?-1:1;let c=r*n+t*s;return c>1&&(c=1),c<-1&&(c=-1),o*Math.acos(c)},AA=(r,t,n,s,o,c,u,h,d,m,g,y,x)=>{const b=Math.pow(o,2),S=Math.pow(c,2),A=Math.pow(g,2),C=Math.pow(y,2);let M=b*S-b*C-S*A;M<0&&(M=0),M/=b*C+S*A,M=Math.sqrt(M)*(u===h?-1:1);const w=M*o/c*y,O=M*-c/o*g,P=m*w-d*O+(r+n)/2,F=d*w+m*O+(t+s)/2,V=(g-w)/o,N=(y-O)/c,tt=(-g-w)/o,W=(-y-O)/c,q=Cy(1,0,V,N);let $=Cy(V,N,tt,W);h===0&&$>0&&($-=da),h===1&&$<0&&($+=da),x.centerX=P,x.centerY=F,x.ang1=q,x.ang2=$};function TA(r,t,n,s,o,c,u,h=0,d=0,m=0){if(c===0||u===0)return;const g=Math.sin(h*da/360),y=Math.cos(h*da/360),x=y*(t-s)/2+g*(n-o)/2,b=-g*(t-s)/2+y*(n-o)/2;if(x===0&&b===0)return;c=Math.abs(c),u=Math.abs(u);const S=Math.pow(x,2)/Math.pow(c,2)+Math.pow(b,2)/Math.pow(u,2);S>1&&(c*=Math.sqrt(S),u*=Math.sqrt(S)),AA(t,n,s,o,c,u,d,m,g,y,x,b,yh);let{ang1:A,ang2:C}=yh;const{centerX:M,centerY:w}=yh;let O=Math.abs(C)/(da/4);Math.abs(1-O)<1e-7&&(O=1);const P=Math.max(Math.ceil(O),1);C/=P;let F=r[r.length-2],V=r[r.length-1];const N={x:0,y:0};for(let tt=0;tt<P;tt++){const W=CA(A,C),{x:q,y:$}=_h(W[0],c,u,y,g,M,w,N),{x:dt,y:Et}=_h(W[1],c,u,y,g,M,w,N),{x:Ct,y:ae}=_h(W[2],c,u,y,g,M,w,N);m_(r,F,V,q,$,dt,Et,Ct,ae),F=Ct,V=ae,A+=C}}function MA(r,t,n){const s=(u,h)=>{const d=h.x-u.x,m=h.y-u.y,g=Math.sqrt(d*d+m*m),y=d/g,x=m/g;return{len:g,nx:y,ny:x}},o=(u,h)=>{u===0?r.moveTo(h.x,h.y):r.lineTo(h.x,h.y)};let c=t[t.length-1];for(let u=0;u<t.length;u++){const h=t[u%t.length],d=h.radius??n;if(d<=0){o(u,h),c=h;continue}const m=t[(u+1)%t.length],g=s(h,c),y=s(h,m);if(g.len<1e-4||y.len<1e-4){o(u,h),c=h;continue}let x=Math.asin(g.nx*y.ny-g.ny*y.nx),b=1,S=!1;g.nx*y.nx-g.ny*-y.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,b=-1,S=!0):x>0&&(b=-1,S=!0);const A=x/2;let C,M=Math.abs(Math.cos(A)*d/Math.sin(A));M>Math.min(g.len/2,y.len/2)?(M=Math.min(g.len/2,y.len/2),C=Math.abs(M*Math.sin(A)/Math.cos(A))):C=d;const w=h.x+y.nx*M+-y.ny*C*b,O=h.y+y.ny*M+y.nx*C*b,P=Math.atan2(g.ny,g.nx)+Math.PI/2*b,F=Math.atan2(y.ny,y.nx)-Math.PI/2*b;u===0&&r.moveTo(w+Math.cos(P)*C,O+Math.sin(P)*C),r.arc(w,O,C,P,F,S),c=h}}function EA(r,t,n,s){const o=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),c=(h,d,m)=>({x:h.x+(d.x-h.x)*m,y:h.y+(d.y-h.y)*m}),u=t.length;for(let h=0;h<u;h++){const d=t[(h+1)%u],m=d.radius??n;if(m<=0){h===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const g=t[h],y=t[(h+2)%u],x=o(g,d);let b;if(x<1e-4)b=d;else{const C=Math.min(x/2,m);b=c(d,g,C/x)}const S=o(y,d);let A;if(S<1e-4)A=d;else{const C=Math.min(S/2,m);A=c(d,y,C/S)}h===0?r.moveTo(b.x,b.y):r.lineTo(b.x,b.y),r.quadraticCurveTo(d.x,d.y,A.x,A.y,s)}}const RA=new Kt;class wA{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new gn,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,n){return this.startPoly(t,n),this}lineTo(t,n){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],c=s[s.length-1];return(o!==t||c!==n)&&s.push(t,n),this}arc(t,n,s,o,c,u){this._ensurePoly(!1);const h=this._currentPoly.points;return g_(h,t,n,s,o,c,u),this}arcTo(t,n,s,o,c){this._ensurePoly();const u=this._currentPoly.points;return SA(u,t,n,s,o,c),this}arcToSvg(t,n,s,o,c,u,h){const d=this._currentPoly.points;return TA(d,this._currentPoly.lastX,this._currentPoly.lastY,u,h,t,n,s,o,c),this}bezierCurveTo(t,n,s,o,c,u,h){this._ensurePoly();const d=this._currentPoly;return m_(this._currentPoly.points,d.lastX,d.lastY,t,n,s,o,c,u,h),this}quadraticCurveTo(t,n,s,o,c){this._ensurePoly();const u=this._currentPoly;return bA(this._currentPoly.points,u.lastX,u.lastY,t,n,s,o,c),this}closePath(){return this.endPoly(!0),this}addPath(t,n){this.endPoly(),n&&!n.isIdentity()&&(t=t.clone(!0),t.transform(n));const s=this.shapePrimitives,o=s.length;for(let c=0;c<t.instructions.length;c++){const u=t.instructions[c];this[u.action](...u.data)}if(t.checkForHoles&&s.length-o>1){let c=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const d=h.shape,m=c?.shape;m&&m.containsPolygon(d)?(c.holes||(c.holes=[]),c.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):c=h}}}return this}finish(t=!1){this.endPoly(t)}rect(t,n,s,o,c){return this.drawShape(new Kt(t,n,s,o),c),this}circle(t,n,s,o){return this.drawShape(new lf(t,n,s),o),this}poly(t,n,s){const o=new ha(t);return o.closePath=n,this.drawShape(o,s),this}regularPoly(t,n,s,o,c=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+c,d=Math.PI*2/o,m=[];for(let g=0;g<o;g++){const y=h-g*d;m.push(t+s*Math.cos(y),n+s*Math.sin(y))}return this.poly(m,!0,u),this}roundPoly(t,n,s,o,c,u=0,h){if(o=Math.max(o|0,3),c<=0)return this.regularPoly(t,n,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;c=Math.min(c,d);const m=-1*Math.PI/2+u,g=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const b=x*g+m,S=t+s*Math.cos(b),A=n+s*Math.sin(b),C=b+Math.PI+y,M=b-Math.PI-y,w=S+c*Math.cos(C),O=A+c*Math.sin(C),P=S+c*Math.cos(M),F=A+c*Math.sin(M);x===0?this.moveTo(w,O):this.lineTo(w,O),this.quadraticCurveTo(S,A,P,F,h)}return this.closePath()}roundShape(t,n,s=!1,o){return t.length<3?this:(s?EA(this,t,n,o):MA(this,t,n),this.closePath())}filletRect(t,n,s,o,c){if(c===0)return this.rect(t,n,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,c)),d=t+s,m=n+o,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(t,n+y).arcTo(t+g,n+g,t+y,n,y).lineTo(d-y,n).arcTo(d-g,n+g,d,n+y,y).lineTo(d,m-y).arcTo(d-g,m-g,t+s-y,m,y).lineTo(t+y,m).arcTo(t+g,m-g,t,m-y,y).closePath()}chamferRect(t,n,s,o,c,u){if(c<=0)return this.rect(t,n,s,o);const h=Math.min(c,Math.min(s,o)/2),d=t+s,m=n+o,g=[t+h,n,d-h,n,d,n+h,d,m-h,d-h,m,t+h,m,t,m-h,t,n+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,u)}ellipse(t,n,s,o,c){return this.drawShape(new cf(t,n,s,o),c),this}roundRect(t,n,s,o,c,u){return this.drawShape(new uf(t,n,s,o,c),u),this}drawShape(t,n){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:n}),this}startPoly(t,n){let s=this._currentPoly;return s&&this.endPoly(),s=new ha,s.points.push(t,n),this._currentPoly=s,this}endPoly(t=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=t,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new ha,t)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let s=n.shape.x,o=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const c=n.transform,u=s;s=c.a*s+c.c*o+c.tx,o=c.b*u+c.d*o+c.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const n=this.shapePrimitives;for(let s=0;s<n.length;s++){const o=n[s],c=o.shape.getBounds(RA);o.transform?t.addRect(c,o.transform):t.addRect(c)}return t}}class Qn{constructor(t,n=!1){this.instructions=[],this.uid=$t("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof t=="string"?KS(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new wA(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,n){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,n]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,n,s,o,c){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(ve.shared);let d=0,m=0;if(!u||u.action!=="bezierCurveTo")d=h.x,m=h.y;else{d=u.data[2],m=u.data[3];const g=h.x,y=h.y;d=g+(g-d),m=y+(y-m)}return this.instructions.push({action:"bezierCurveTo",data:[d,m,t,n,s,o,c]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,n,s){const o=this.instructions[this.instructions.length-1],c=this.getLastPoint(ve.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=c.x,h=c.y;else{u=o.data[0],h=o.data[1];const d=c.x,m=c.y;u=d+(d-u),h=m+(m-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,t,n,s]}),this._dirty=!0,this}rect(t,n,s,o,c){return this.instructions.push({action:"rect",data:[t,n,s,o,c]}),this._dirty=!0,this}circle(t,n,s,o){return this.instructions.push({action:"circle",data:[t,n,s,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,n,s,o,c,u,h){c||(c=o/2);const d=-1*Math.PI/2+u,m=s*2,g=Math.PI*2/m,y=[];for(let x=0;x<m;x++){const b=x%2?c:o,S=x*g+d;y.push(t+b*Math.cos(S),n+b*Math.sin(S))}return this.poly(y,!0,h),this}clone(t=!1){const n=new Qn;if(n.checkForHoles=this.checkForHoles,!t)n.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];n.instructions.push({action:o.action,data:o.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const n=t.a,s=t.b,o=t.c,c=t.d,u=t.tx,h=t.ty;let d=0,m=0,g=0,y=0,x=0,b=0,S=0,A=0;for(let C=0;C<this.instructions.length;C++){const M=this.instructions[C],w=M.data;switch(M.action){case"moveTo":case"lineTo":d=w[0],m=w[1],w[0]=n*d+o*m+u,w[1]=s*d+c*m+h;break;case"bezierCurveTo":g=w[0],y=w[1],x=w[2],b=w[3],d=w[4],m=w[5],w[0]=n*g+o*y+u,w[1]=s*g+c*y+h,w[2]=n*x+o*b+u,w[3]=s*x+c*b+h,w[4]=n*d+o*m+u,w[5]=s*d+c*m+h;break;case"quadraticCurveTo":g=w[0],y=w[1],d=w[2],m=w[3],w[0]=n*g+o*y+u,w[1]=s*g+c*y+h,w[2]=n*d+o*m+u,w[3]=s*d+c*m+h;break;case"arcToSvg":d=w[5],m=w[6],S=w[0],A=w[1],w[0]=n*S+o*A,w[1]=s*S+c*A,w[5]=n*d+o*m+u,w[6]=s*d+c*m+h;break;case"circle":w[4]=ta(w[3],t);break;case"rect":w[4]=ta(w[4],t);break;case"ellipse":w[8]=ta(w[8],t);break;case"roundRect":w[5]=ta(w[5],t);break;case"addPath":w[0].transform(t);break;case"poly":w[2]=ta(w[2],t);break;default:Ht("unknown transform action",M.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let n=this.instructions.length-1,s=this.instructions[n];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(n--,n<0)return t.x=0,t.y=0,t;s=this.instructions[n]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function ta(r,t){return r?r.prepend(t):t.clone()}function qt(r,t,n){const s=r.getAttribute(t);return s?Number(s):n}function kA(r,t){const n=r.querySelectorAll("defs");for(let s=0;s<n.length;s++){const o=n[s];for(let c=0;c<o.children.length;c++){const u=o.children[c];switch(u.nodeName.toLowerCase()){case"lineargradient":t.defs[u.id]=DA(u);break;case"radialgradient":t.defs[u.id]=OA();break}}}}function DA(r){const t=qt(r,"x1",0),n=qt(r,"y1",0),s=qt(r,"x2",1),o=qt(r,"y2",0),c=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new Zn(t,n,s,o,c==="objectBoundingBox"?"local":"global");for(let h=0;h<r.children.length;h++){const d=r.children[h],m=qt(d,"offset",0),g=re.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(m,g)}return u}function OA(r){return Ht("[SVG Parser] Radial gradients are not yet supported"),new Zn(0,0,1,0)}function Ay(r){const t=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Ty={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function y_(r,t){const n=r.getAttribute("style"),s={},o={},c={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in Ty){const h=r.getAttribute(u);h&&My(t,c,u,h.trim())}if(n){const u=n.split(";");for(let h=0;h<u.length;h++){const d=u[h].trim(),[m,g]=d.split(":");Ty[m]&&My(t,c,m,g.trim())}}return{strokeStyle:c.useStroke?s:null,fillStyle:c.useFill?o:null,useFill:c.useFill,useStroke:c.useStroke}}function My(r,t,n,s){switch(n){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=Ay(s);t.strokeStyle.fill=r.defs[o]}else t.strokeStyle.color=re.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=Ay(s);t.fillStyle.fill=r.defs[o]}else t.fillStyle.color=re.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function zA(r){if(r.length<=2)return!0;const t=r.map(h=>h.area).sort((h,d)=>d-h),[n,s]=t,o=t[t.length-1],c=n/s,u=s/o;return!(c>3&&u<2)}function BA(r){return r.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function UA(r){const t=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const n=t.map(Number),s=[],o=[];for(let g=0;g<n.length;g+=2)g+1<n.length&&(s.push(n[g]),o.push(n[g+1]));if(s.length===0||o.length===0)return 0;const c=Math.min(...s),u=Math.max(...s),h=Math.min(...o),d=Math.max(...o);return(u-c)*(d-h)}function Ey(r,t){const n=new Qn(r,!1);for(const s of n.instructions)t.instructions.push(s)}function PA(r,t){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const n={context:t,defs:{},path:new Qn};kA(r,n);const s=r.children,{fillStyle:o,strokeStyle:c}=y_(r,n);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&__(h,n,o,c)}return t}function __(r,t,n,s){const o=r.children,{fillStyle:c,strokeStyle:u}=y_(r,t);c&&n?n={...n,...c}:c&&(n=c),u&&s?s={...s,...u}:u&&(s=u);const h=!n&&!s;h&&(n={color:0});let d,m,g,y,x,b,S,A,C,M,w,O,P,F,V,N,tt;switch(r.nodeName.toLowerCase()){case"path":{F=r.getAttribute("d");const W=r.getAttribute("fill-rule"),q=BA(F),$=W==="evenodd",dt=q.length>1;if($&&dt){const Ct=q.map(k=>({path:k,area:UA(k)}));if(Ct.sort((k,j)=>j.area-k.area),q.length>3||!zA(Ct))for(let k=0;k<Ct.length;k++){const j=Ct[k],at=k===0;t.context.beginPath();const et=new Qn(void 0,!0);Ey(j.path,et),t.context.path(et),at?(n&&t.context.fill(n),s&&t.context.stroke(s)):t.context.cut()}else for(let k=0;k<Ct.length;k++){const j=Ct[k],at=k%2===1;t.context.beginPath();const et=new Qn(void 0,!0);Ey(j.path,et),t.context.path(et),at?t.context.cut():(n&&t.context.fill(n),s&&t.context.stroke(s))}}else{const Ct=W?W==="evenodd":!0;V=new Qn(F,Ct),t.context.path(V),n&&t.context.fill(n),s&&t.context.stroke(s)}break}case"circle":S=qt(r,"cx",0),A=qt(r,"cy",0),C=qt(r,"r",0),t.context.ellipse(S,A,C,C),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"rect":d=qt(r,"x",0),m=qt(r,"y",0),N=qt(r,"width",0),tt=qt(r,"height",0),M=qt(r,"rx",0),w=qt(r,"ry",0),M||w?t.context.roundRect(d,m,N,tt,M||w):t.context.rect(d,m,N,tt),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"ellipse":S=qt(r,"cx",0),A=qt(r,"cy",0),M=qt(r,"rx",0),w=qt(r,"ry",0),t.context.beginPath(),t.context.ellipse(S,A,M,w),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"line":g=qt(r,"x1",0),y=qt(r,"y1",0),x=qt(r,"x2",0),b=qt(r,"y2",0),t.context.beginPath(),t.context.moveTo(g,y),t.context.lineTo(x,b),s&&t.context.stroke(s);break;case"polygon":P=r.getAttribute("points"),O=P.match(/-?\d+/g).map(W=>parseInt(W,10)),t.context.poly(O,!0),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"polyline":P=r.getAttribute("points"),O=P.match(/-?\d+/g).map(W=>parseInt(W,10)),t.context.poly(O,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{Ht(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}h&&(n=null);for(let W=0;W<o.length;W++)__(o[W],t,n,s)}function LA(r){return re.isColorLike(r)}function Ry(r){return r instanceof El}function wy(r){return r instanceof Zn}function NA(r){return r instanceof St}function GA(r,t,n){const s=re.shared.setValue(t??0);return r.color=s.toNumber(),r.alpha=s.alpha===1?n.alpha:s.alpha,r.texture=St.WHITE,{...n,...r}}function jA(r,t,n){return r.texture=t,{...n,...r}}function ky(r,t,n){return r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...n,...r}}function Dy(r,t,n){return t.buildGradient(),r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,r.textureSpace=t.textureSpace,{...n,...r}}function HA(r,t){const n={...t,...r},s=re.shared.setValue(n.color);return n.alpha*=s.alpha,n.color=s.toNumber(),n}function Zi(r,t){if(r==null)return null;const n={},s=r;return LA(r)?GA(n,r,t):NA(r)?jA(n,r,t):Ry(r)?ky(n,r,t):wy(r)?Dy(n,r,t):s.fill&&Ry(s.fill)?ky(s,s.fill,t):s.fill&&wy(s.fill)?Dy(s,s.fill,t):HA(s,t)}function bl(r,t){const{width:n,alignment:s,miterLimit:o,cap:c,join:u,pixelLine:h,...d}=t,m=Zi(r,d);return m?{width:n,alignment:s,miterLimit:o,cap:c,join:u,pixelLine:h,...m}:null}const YA=new ve,Oy=new bt,ff=class En extends yn{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=$t("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new Qn,this._transform=new bt,this._fillStyle={...En.defaultFillStyle},this._strokeStyle={...En.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new gn,this._boundsDirty=!0}clone(){const t=new En;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Zi(t,En.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=bl(t,En.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Zi(t,En.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Zi(t,En.defaultStrokeStyle),this}texture(t,n,s,o,c,u){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:o||0,dw:c||t.frame.width,dh:u||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?re.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Qn,this}fill(t,n){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o?.action==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(t!=null&&(n!==void 0&&typeof t=="number"&&(gt(Ut,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:n}),this._fillStyle=Zi(t,En.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:n}=this._activePath.getLastPoint(ve.shared);this._activePath.clear(),this._activePath.moveTo(t,n)}stroke(t){let n;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?n=s.data.path:n=this._activePath.clone(),n?(t!=null&&(this._strokeStyle=bl(t,En.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const n=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(s);else{n.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,n,s,o,c,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*t+h.c*n+h.tx,h.b*t+h.d*n+h.ty,s,o,c,u),this}arcTo(t,n,s,o,c){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,c),this}arcToSvg(t,n,s,o,c,u,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,n,s,o,c,d.a*u+d.c*h+d.tx,d.b*u+d.d*h+d.ty),this}bezierCurveTo(t,n,s,o,c,u,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*n+d.tx,d.b*t+d.d*n+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*c+d.c*u+d.tx,d.b*c+d.d*u+d.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,n,s,o){return this._tick++,this._activePath.ellipse(t,n,s,o,this._transform.clone()),this}circle(t,n,s){return this._tick++,this._activePath.circle(t,n,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,n){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*n+s.tx,s.b*t+s.d*n+s.ty),this}moveTo(t,n){this._tick++;const s=this._transform,o=this._activePath.instructions,c=s.a*t+s.c*n+s.tx,u=s.b*t+s.d*n+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=c,o[0].data[1]=u,this):(this._activePath.moveTo(c,u),this)}quadraticCurveTo(t,n,s,o,c){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*t+u.c*n+u.tx,u.b*t+u.d*n+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,c),this}rect(t,n,s,o){return this._tick++,this._activePath.rect(t,n,s,o,this._transform.clone()),this}roundRect(t,n,s,o,c){return this._tick++,this._activePath.roundRect(t,n,s,o,c,this._transform.clone()),this}poly(t,n){return this._tick++,this._activePath.poly(t,n,this._transform.clone()),this}regularPoly(t,n,s,o,c=0,u){return this._tick++,this._activePath.regularPoly(t,n,s,o,c,u),this}roundPoly(t,n,s,o,c,u){return this._tick++,this._activePath.roundPoly(t,n,s,o,c,u),this}roundShape(t,n,s,o){return this._tick++,this._activePath.roundShape(t,n,s,o),this}filletRect(t,n,s,o,c){return this._tick++,this._activePath.filletRect(t,n,s,o,c),this}chamferRect(t,n,s,o,c,u){return this._tick++,this._activePath.chamferRect(t,n,s,o,c,u),this}star(t,n,s,o,c=0,u=0){return this._tick++,this._activePath.star(t,n,s,o,c,u,this._transform.clone()),this}svg(t){return this._tick++,PA(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,n=t){return this._transform.scale(t,n),this}setTransform(t,n,s,o,c,u){return t instanceof bt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,n,s,o,c,u),this)}transform(t,n,s,o,c,u){return t instanceof bt?(this._transform.append(t),this):(Oy.set(t,n,s,o,c,u),this._transform.append(Oy),this)}translate(t,n=t){return this._transform.translate(t,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let n=0;n<this.instructions.length;n++){const s=this.instructions[n],o=s.action;if(o==="fill"){const c=s.data;t.addBounds(c.path.bounds)}else if(o==="texture"){const c=s.data;t.addFrame(c.dx,c.dy,c.dx+c.dw,c.dy+c.dh,c.transform)}if(o==="stroke"){const c=s.data,u=c.style.alignment,h=c.style.width*(1-u),d=c.path.bounds;t.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const n=this.instructions;let s=!1;for(let o=0;o<n.length;o++){const c=n[o],u=c.data,h=u.path;if(!c.action||!h)continue;const d=u.style,m=h.shapePath.shapePrimitives;for(let g=0;g<m.length;g++){const y=m[g].shape;if(!d||!y)continue;const x=m[g].transform,b=x?x.applyInverse(t,YA):t;if(c.action==="fill")s=y.contains(b.x,b.y);else{const A=d;s=y.strokeContains(b.x,b.y,A.width,A.alignment)}const S=u.hole;if(S){const A=S.shapePath?.shapePrimitives;if(A)for(let C=0;C<A.length;C++)A[C].shape.contains(b.x,b.y)&&(s=!1)}if(s)return!0}}return s}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};ff.defaultFillStyle={color:16777215,alpha:1,texture:St.WHITE,matrix:null,fill:null,textureSpace:"local"};ff.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:St.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let an=ff;const df=class Hs extends yn{constructor(t={}){super(),this.uid=$t("textStyle"),this._tick=0,IA(t);const n={...Hs.defaultTextStyle,...t};for(const s in n){const o=s;this[o]=n[s]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Hs.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Hs.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...an.defaultFillStyle,...t},()=>{this._fill=Zi({...this._originalFill},an.defaultFillStyle)})),this._fill=Zi(t===0?"black":t,an.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...an.defaultStrokeStyle,...t},()=>{this._stroke=bl({...this._originalStroke},an.defaultStrokeStyle)})),this._stroke=bl(t,an.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=Hs.defaultTextStyle;for(const n in t)this[n]=t[n]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Hs({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let n=0;n<this._filters.length;n++)t+=this._filters[n].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,n){return new Proxy(t,{set:(s,o,c)=>(s[o]===c||(s[o]=c,n?.(o,c),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(re.isColorLike(t)||t instanceof Zn||t instanceof El)}};df.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};df.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let vl=df;function IA(r){const t=r;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const n=vl.defaultDropShadow;r.dropShadow={alpha:t.dropShadowAlpha??n.alpha,angle:t.dropShadowAngle??n.angle,blur:t.dropShadowBlur??n.blur,color:t.dropShadowColor??n.color,distance:t.dropShadowDistance??n.distance}}if(t.strokeThickness!==void 0){gt(Ut,"strokeThickness is now a part of stroke");const n=t.stroke;let s={};if(re.isColorLike(n))s.color=n;else if(n instanceof Zn||n instanceof El)s.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))s=n;else throw new Error("Invalid stroke value.");r.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(gt(Ut,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&Ht("The number of fill colors must match the number of fill gradient stops.");const n=new Zn({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=t.fillGradientStops.slice(),o=t.fill.map(c=>re.shared.setValue(c).toNumber());s.forEach((c,u)=>{n.addColorStop(c,o[u])}),r.fill={fill:n}}}class VA{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,n){const s=Yt.get().createCanvas();s.width=t,s.height=n;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(t,n,s=1){t=Math.ceil(t*s-1e-6),n=Math.ceil(n*s-1e-6),t=gl(t),n=gl(n);const o=(t<<17)+(n<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let c=this._canvasPool[o].pop();return c||(c=this._createCanvasAndContext(t,n)),c}returnCanvasAndContext(t){const n=t.canvas,{width:s,height:o}=n,c=(s<<17)+(o<<1);t.context.resetTransform(),t.context.clearRect(0,0,s,o),this._canvasPool[c].push(t)}clear(){this._canvasPool={}}}const Xh=new VA;va.register(Xh);const zy=1e5;function By(r,t,n,s=0){if(r.texture===St.WHITE&&!r.fill)return re.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof El){const o=r.fill,c=t.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(bt.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),c.setTransform(u),c}else if(r.fill instanceof Zn){const o=r.fill,c=o.type==="linear",u=o.textureSpace==="local";let h=1,d=1;u&&n&&(h=n.width+s,d=n.height+s);let m,g=!1;if(c){const{start:y,end:x}=o;m=t.createLinearGradient(y.x*h,y.y*d,x.x*h,x.y*d),g=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:b,outerRadius:S}=o;m=t.createRadialGradient(y.x*h,y.y*d,x*h,b.x*h,b.y*d,S*h)}if(g&&u&&n){const y=n.lineHeight/d;for(let x=0;x<n.lines.length;x++){const b=(x*n.lineHeight+s/2)/d;o.colorStops.forEach(S=>{const A=b+S.offset*y;m.addColorStop(Math.floor(A*zy)/zy,re.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{m.addColorStop(y.offset,re.shared.setValue(y.color).toHex())});return m}}else{const o=t.createPattern(r.texture.source.resource,"repeat"),c=r.matrix.copyTo(bt.shared);return c.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(c),o}return Ht("FillStyle not recognised",r),"red"}const x_=class b_ extends t_{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...b_.defaultOptions,...t};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const s=n.style.clone();n.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=St.WHITE,s._fill.fill=null),this.applyFillAsTint=n.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const c=Hh(s);n.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,n.textureStyle&&(this._textureStyle=n.textureStyle instanceof yl?n.textureStyle:new yl(n.textureStyle)),this.fontMetrics=ol.measureFont(c),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){const n=ol.graphemeSegmenter(t).filter(C=>!this._currentChars.includes(C)).filter((C,M,w)=>w.indexOf(C)===M);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:c}=s.canvasAndContext,u=s.texture.source;const h=this._style;let d=this._currentX,m=this._currentY,g=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*y;let b=!1;const S=o.width/this.resolution,A=o.height/this.resolution;for(let C=0;C<n.length;C++){const M=n[C],w=ol.measureText(M,h,o,!1);w.lineHeight=w.height;const O=w.width*y,P=Math.ceil((h.fontStyle==="italic"?2:1)*O),F=w.height*y,V=P+x*2,N=F+x*2;if(b=!1,M!==`
`&&M!=="\r"&&M!=="	"&&M!==" "&&(b=!0,g=Math.ceil(Math.max(N,g))),d+V>S&&(m+=g,g=N,d=0,m+g>A)){u.update();const W=this._nextPage();o=W.canvasAndContext.canvas,c=W.canvasAndContext.context,u=W.texture.source,d=0,m=0,g=0}const tt=O/y-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[M]={id:M.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:tt,kerning:{}},b){this._drawGlyph(c,w,d+x,m+x,y,h);const W=u.width*y,q=u.height*y,$=new Kt(d/W*u.width,m/q*u.height,V/W*u.width,N/q*u.height);this.chars[M].texture=new St({source:u,frame:$}),d+=Math.ceil(V)}}u.update(),this._currentX=d,this._currentY=m,this._currentMaxCharHeight=g,this._skipKerning&&this._applyKerning(n,c)}get pageTextures(){return gt(Ut,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,n){const s=this._measureCache;for(let o=0;o<t.length;o++){const c=t[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let d=s[c];d||(d=s[c]=n.measureText(c).width);let m=s[h];m||(m=s[h]=n.measureText(h).width);let g=n.measureText(c+h).width,y=g-(d+m);y&&(this.chars[c].kerning[h]=y),g=n.measureText(c+h).width,y=g-(d+m),y&&(this.chars[h].kerning[c]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,n=Xh.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(n.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new St({source:new Ki({resource:n.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const c={canvasAndContext:n,texture:o};return this.pages[this._currentPageIndex]=c,c}_setupContext(t,n,s){n.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=Hh(n),n.fontSize=this.baseMeasurementFontSize,t.textBaseline=n.textBaseline;const o=n._stroke,c=o?.width??0;if(o&&(t.lineWidth=c,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=By(o,t)),n._fill&&(t.fillStyle=By(n._fill,t)),n.dropShadow){const u=n.dropShadow,h=re.shared.setValue(u.color).toArray(),d=u.blur*s,m=u.distance*s;t.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(u.angle)*m,t.shadowOffsetY=Math.sin(u.angle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,n,s,o,c,u){const h=n.text,d=n.fontProperties,g=(u._stroke?.width??0)*c,y=s+g/2,x=o-g/2,b=d.descent*c,S=n.lineHeight*c;let A=!1;u.stroke&&g&&(A=!0,t.strokeText(h,y,x+S-b));const{shadowBlur:C,shadowOffsetX:M,shadowOffsetY:w}=t;u._fill&&(A&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(h,y,x+S-b)),A&&(t.shadowBlur=C,t.shadowOffsetX=M,t.shadowOffsetY=w)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:n,texture:s}=this.pages[t];Xh.returnCanvasAndContext(n),s.destroy(!0)}this.pages=null}};x_.defaultOptions={textureSize:512,style:new vl,mipmap:!0};let Uy=x_;function FA(r,t,n,s){const o={width:0,height:0,offsetY:0,scale:t.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=n.baseLineOffset;let c=o.lines[0],u=null,h=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},m=n.baseMeasurementFontSize/t.fontSize,g=t.letterSpacing*m,y=t.wordWrapWidth*m,x=t.lineHeight?t.lineHeight*m:n.lineHeight,b=t.wordWrap&&t.breakWords,S=M=>{const w=c.width;for(let O=0;O<d.index;O++){const P=M.positions[O];c.chars.push(M.chars[O]),c.charPositions.push(P+w)}c.width+=M.width,h=!1,d.width=0,d.index=0,d.chars.length=0},A=()=>{let M=c.chars.length-1;if(s){let w=c.chars[M];for(;w===" ";)c.width-=n.chars[w].xAdvance,w=c.chars[--M]}o.width=Math.max(o.width,c.width),c={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(c),o.height+=x},C=M=>M-g>y;for(let M=0;M<r.length+1;M++){let w;const O=M===r.length;O||(w=r[M]);const P=n.chars[w]||n.chars[" "];if(/(?:\s)/.test(w)||w==="\r"||w===`
`||O){if(!h&&t.wordWrap&&C(c.width+d.width)?(A(),S(d),O||c.charPositions.push(0)):(d.start=c.width,S(d),O||c.charPositions.push(0)),w==="\r"||w===`
`)A();else if(!O){const tt=P.xAdvance+(P.kerning[u]||0)+g;c.width+=tt,c.spaceWidth=tt,c.spacesIndex.push(c.charPositions.length),c.chars.push(w)}}else{const N=P.kerning[u]||0,tt=P.xAdvance+N+g;b&&C(c.width+d.width+tt)&&(S(d),A()),d.positions[d.index++]=d.width+N,d.chars.push(w),d.width+=tt}u=w}return A(),t.align==="center"?XA(o):t.align==="right"?qA(o):t.align==="justify"&&$A(o),o}function XA(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width/2-n.width/2;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function qA(r){for(let t=0;t<r.lines.length;t++){const n=r.lines[t],s=r.width-n.width;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function $A(r){const t=r.width;for(let n=0;n<r.lines.length;n++){const s=r.lines[n];let o=0,c=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,m=(t-s.width)/h;for(let g=0;g<s.charPositions.length;g++)g===c&&(c=s.spacesIndex[o++],u+=m),s.charPositions[g]+=u}}function QA(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const t=[];for(let n=0,s=r.length;n<s;n++){const o=r[n];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const c=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<c)throw new Error("[BitmapFont]: Invalid character range.");for(let h=c,d=u;h<=d;h++)t.push(String.fromCharCode(h))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let sl=0;class ZA{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=e_(1e3)}getFont(t,n){let s=`${n.fontFamily}-bitmap`,o=!0;if(n._fill.fill&&!n._stroke?(s+=n._fill.fill.styleKey,o=!1):(n._stroke||n.dropShadow)&&(s=`${n.styleKey}-bitmap`,o=!1),!jt.has(s)){const u=Object.create(n);u.lineHeight=0;const h=new Uy({style:u,overrideFill:o,overrideSize:!0,...this.defaultOptions});sl++,sl>50&&Ht("BitmapText",`You have dynamically created ${sl} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),h.once("destroy",()=>{sl--,jt.remove(s)}),jt.set(s,h)}const c=jt.get(s);return c.ensureCharacters?.(t),c}getLayout(t,n,s=!0){const o=this.getFont(t,n),c=`${t}-${n.styleKey}-${s}`;if(this.measureCache.has(c))return this.measureCache.get(c);const u=ol.graphemeSegmenter(t),h=FA(u,n,o,s);return this.measureCache.set(c,h),h}measureText(t,n,s=!0){return this.getLayout(t,n,s)}install(...t){let n=t[0];typeof n=="string"&&(n={name:n,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},gt(Ut,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=n?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const o=n.style,c=o instanceof vl?o:new vl(o),u=n.dynamicFill??this._canUseTintForStyle(c),h=new Uy({style:c,overrideFill:u,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1,textureStyle:n.textureStyle}),d=QA(n.chars);return h.ensureCharacters(d.join("")),jt.set(`${s}-bitmap`,h),h.once("destroy",()=>jt.remove(`${s}-bitmap`)),h}uninstall(t){const n=`${t}-bitmap`,s=jt.get(n);s&&s.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}}const Py=new ZA;class v_ extends t_{constructor(t,n){super();const{textures:s,data:o}=t;Object.keys(o.pages).forEach(c=>{const u=o.pages[parseInt(c,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(c=>{const u=o.chars[c],{frame:h,source:d,rotate:m}=s[u.page],g=Bt.transformRectCoords(u,h,m,new Kt),y=new St({frame:g,orig:new Kt(0,0,u.width,u.height),source:d,rotate:m});this.chars[c]={id:c.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:n}=this.pages[t];n.destroy(!0)}this.pages=null}static install(t){Py.install(t)}static uninstall(t){Py.uninstall(t)}}const xh={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const t=r.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const x=t[y].match(/^[a-z]+/gm)[0],b=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const A in b){const C=b[A].split("="),M=C[0],w=C[1].replace(/"/gm,""),O=parseFloat(w),P=isNaN(O)?w:O;S[M]=P}n[x].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=n.info,[c]=n.common,[u]=n.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(c.lineHeight,10);const h=n.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(c.base,10);const m=n.char;for(let y=0;y<m.length;y++){const x=m[y],b=parseInt(x.id,10);let S=x.letter??x.char??String.fromCharCode(b);S==="space"&&(S=" "),d[b]=S,s.chars[S]={id:b,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const g=n.kerning||[];for(let y=0;y<g.length;y++){const x=parseInt(g[y].first,10),b=parseInt(g[y].second,10),S=parseInt(g[y].amount,10);s.chars[d[b]].kerning[d[x]]=S}return s}},Ly={test(r){const t=r;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=r.getElementsByTagName("info")[0],s=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const c=r.getElementsByTagName("page"),u=r.getElementsByTagName("char"),h=r.getElementsByTagName("kerning");t.fontSize=parseInt(n.getAttribute("size"),10),t.fontFamily=n.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let m=0;m<c.length;m++)t.pages.push({id:parseInt(c[m].getAttribute("id"),10)||0,file:c[m].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let m=0;m<u.length;m++){const g=u[m],y=parseInt(g.getAttribute("id"),10);let x=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(y);x==="space"&&(x=" "),d[y]=x,t.chars[x]={id:y,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let m=0;m<h.length;m++){const g=parseInt(h[m].getAttribute("first"),10),y=parseInt(h[m].getAttribute("second"),10),x=parseInt(h[m].getAttribute("amount"),10);t.chars[d[y]].kerning[d[g]]=x}return t}},Ny={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?Ly.test(Yt.get().parseXML(r)):!1},parse(r){return Ly.parse(Yt.get().parseXML(r))}},KA=[".xml",".fnt"],WA={extension:{type:rt.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof v_,getCacheableAssets(r,t){const n={};return r.forEach(s=>{n[s]=t,n[`${s}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},JA={extension:{type:rt.LoadParser,priority:Mi.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return KA.includes($e.extname(r).toLowerCase())},async testParse(r){return xh.test(r)||Ny.test(r)},async parse(r,t,n){const s=xh.test(r)?xh.parse(r):Ny.parse(r),{src:o}=t,{pages:c}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<c.length;++y){const x=c[y].file;let b=$e.join($e.dirname(o),x);b=Bh(b,o),u.push({src:b,data:h})}const d=await n.load(u),m=u.map(y=>d[y.src]);return new v_({data:s,textures:m},o)},async load(r,t){return await(await Yt.get().fetch(r)).text()},async unload(r,t,n){await Promise.all(r.pages.map(s=>n.unload(s.texture.source._sourceOrigin))),r.destroy()}};class tT{constructor(t,n=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(t){t.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<n;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const eT={extension:{type:rt.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(t=>t instanceof St),getCacheableAssets:(r,t)=>{const n={};return r.forEach(s=>{t.forEach((o,c)=>{n[s+(c===0?"":c+1)]=o})}),n}};async function S_(r){if("Image"in globalThis)return new Promise(t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const nT={extension:{type:rt.DetectionParser,priority:1},test:async()=>S_("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")},Gy=["png","jpg","jpeg"],iT={extension:{type:rt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...Gy],remove:async r=>r.filter(t=>!Gy.includes(t))},sT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function wl(r){return sT?!1:document.createElement("video").canPlayType(r)!==""}const rT={extension:{type:rt.DetectionParser,priority:0},test:async()=>wl("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")},aT={extension:{type:rt.DetectionParser,priority:0},test:async()=>wl("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")},oT={extension:{type:rt.DetectionParser,priority:0},test:async()=>wl("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")},lT={extension:{type:rt.DetectionParser,priority:0},test:async()=>S_("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")},C_=class ll{constructor(){this.loadOptions={...ll.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,n,s)=>(this._parsersValidated=!1,t[n]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,n){const s={promise:null,parser:null};return s.promise=(async()=>{let o=null,c=null;if((n.parser||n.loadParser)&&(c=this._parserHash[n.parser||n.loadParser],n.loadParser&&Ht(`[Assets] "loadParser" is deprecated, use "parser" instead for ${t}`),c||Ht(`[Assets] specified load parser "${n.parser||n.loadParser}" not found while loading ${t}`)),!c){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&h.test?.(t,n,this)){c=h;break}}if(!c)return Ht(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await c.load(t,n,this),s.parser=c;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await h.testParse?.(o,n,this)&&(o=await h.parse(o,n,this)||o,s.parser=h)}return o})(),s}async load(t,n){this._parsersValidated||this._validateParsers();const s=typeof n=="function"?{...ll.defaultOptions,...this.loadOptions,onProgress:n}:{...ll.defaultOptions,...this.loadOptions,...n||{}},{onProgress:o,onError:c,strategy:u,retryCount:h,retryDelay:d}=s;let m=0;const g={},y=_l(t),x=mn(t,A=>({alias:[A],src:A,data:{}})),b=x.reduce((A,C)=>A+(C.progressSize||1),0),S=x.map(async A=>{const C=$e.toAbsolute(A.src);g[A.src]||(await this._loadAssetWithRetry(C,A,{onProgress:o,onError:c,strategy:u,retryCount:h,retryDelay:d},g),m+=A.progressSize||1,o&&o(m/b))});return await Promise.all(S),y?g[x[0].src]:g}async unload(t){const s=mn(t,o=>({alias:[o],src:o})).map(async o=>{const c=$e.toAbsolute(o.src),u=this.promiseCache[c];if(u){const h=await u.promise;delete this.promiseCache[c],await u.parser?.unload?.(h,o,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name||t.id).reduce((t,n)=>(!n.name&&!n.id?Ht("[Assets] parser should have an id"):(t[n.name]||t[n.id])&&Ht(`[Assets] parser id conflict "${n.id}"`),t[n.name]=n,n.id&&(t[n.id]=n),t),{})}async _loadAssetWithRetry(t,n,s,o){let c=0;const{onError:u,strategy:h,retryCount:d,retryDelay:m}=s,g=y=>new Promise(x=>setTimeout(x,y));for(;;)try{this.promiseCache[t]||(this.promiseCache[t]=this._getLoadPromiseAndParser(t,n)),o[n.src]=await this.promiseCache[t].promise;return}catch(y){delete this.promiseCache[t],delete o[n.src],c++;const x=h!=="retry"||c>d;if(h==="retry"&&!x){u&&u(y,n),await g(m);continue}if(h==="skip"){u&&u(y,n);return}u&&u(y,n);const b=new Error(`[Loader.load] Failed to load ${t}.
${y}`);throw y instanceof Error&&y.stack&&(b.stack=y.stack),b}}};C_.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let cT=C_;function Ks(r,t){if(Array.isArray(t)){for(const n of t)if(r.startsWith(`data:${n}`))return!0;return!1}return r.startsWith(`data:${t}`)}function Ws(r,t){const n=r.split("?")[0],s=$e.extname(n).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const uT=".json",hT="application/json",fT={extension:{type:rt.LoadParser,priority:Mi.Low},name:"loadJson",id:"json",test(r){return Ks(r,hT)||Ws(r,uT)},async load(r){return await(await Yt.get().fetch(r)).json()}},dT=".txt",pT="text/plain",mT={name:"loadTxt",id:"text",extension:{type:rt.LoadParser,priority:Mi.Low,name:"loadTxt"},test(r){return Ks(r,pT)||Ws(r,dT)},async load(r){return await(await Yt.get().fetch(r)).text()}},gT=["normal","bold","100","200","300","400","500","600","700","800","900"],yT=[".ttf",".otf",".woff",".woff2"],_T=["font/ttf","font/otf","font/woff","font/woff2"],xT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function bT(r){const t=$e.extname(r),o=$e.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let c=o.length>0;for(const h of o)if(!h.match(xT)){c=!1;break}let u=o.join(" ");return c||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const vT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function ST(r){return vT.test(r)?r:encodeURI(r)}const CT={extension:{type:rt.LoadParser,priority:Mi.Low},name:"loadWebFont",id:"web-font",test(r){return Ks(r,_T)||Ws(r,yT)},async load(r,t){const n=Yt.get().getFontFaceSet();if(n){const s=[],o=t.data?.family??bT(r),c=t.data?.weights?.filter(h=>gT.includes(h))??["normal"],u=t.data??{};for(let h=0;h<c.length;h++){const d=c[h],m=new FontFace(o,`url(${ST(r)})`,{...u,weight:d});await m.load(),n.add(m),s.push(m)}return jt.has(`${o}-and-url`)?jt.get(`${o}-and-url`).entries.push({url:r,faces:s}):jt.set(`${o}-and-url`,{entries:[{url:r,faces:s}]}),s.length===1?s[0]:s}return Ht("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const t=Array.isArray(r)?r:[r],n=t[0].family,s=jt.get(`${n}-and-url`),o=s.entries.find(c=>c.faces.some(u=>t.indexOf(u)!==-1));o.faces=o.faces.filter(c=>t.indexOf(c)===-1),o.faces.length===0&&(s.entries=s.entries.filter(c=>c!==o)),t.forEach(c=>{Yt.get().getFontFaceSet().delete(c)}),s.entries.length===0&&jt.remove(`${n}-and-url`)}};function pf(r,t=1){const n=Zs.RETINA_PREFIX?.exec(r);return n?parseFloat(n[1]):t}function mf(r,t,n){r.label=n,r._sourceOrigin=n;const s=new St({source:r,label:n}),o=()=>{delete t.promiseCache[n],jt.has(n)&&jt.remove(n)};return s.source.once("destroy",()=>{t.promiseCache[n]&&(Ht("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{r.destroyed||(Ht("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const AT=".svg",TT="image/svg+xml",MT={extension:{type:rt.LoadParser,priority:Mi.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return Ks(r,TT)||Ws(r,AT)},async load(r,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?RT(r):ET(r,t,n,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function ET(r,t,n,s){const o=await Yt.get().fetch(r),c=Yt.get().createImage();c.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,c.crossOrigin=s,await c.decode();const u=t.data?.width??c.width,h=t.data?.height??c.height,d=t.data?.resolution||pf(r),m=Math.ceil(u*d),g=Math.ceil(h*d),y=Yt.get().createCanvas(m,g),x=y.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(c,0,0,u*d,h*d);const{parseAsGraphicsContext:b,...S}=t.data??{},A=new Ki({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...S});return mf(A,n,r)}async function RT(r){const n=await(await Yt.get().fetch(r)).text(),s=new an;return s.svg(n),s}const wT=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Vs=null,qh=class{constructor(){Vs||(Vs=URL.createObjectURL(new Blob([wT],{type:"application/javascript"}))),this.worker=new Worker(Vs)}};qh.revokeObjectURL=function(){Vs&&(URL.revokeObjectURL(Vs),Vs=null)};const kT=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Fs=null;class A_{constructor(){Fs||(Fs=URL.createObjectURL(new Blob([kT],{type:"application/javascript"}))),this.worker=new Worker(Fs)}}A_.revokeObjectURL=function(){Fs&&(URL.revokeObjectURL(Fs),Fs=null)};let jy=0,bh;class DT{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:n}=new qh;n.addEventListener("message",s=>{n.terminate(),qh.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,n){return this._run("loadImageBitmap",[t,n?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){bh===void 0&&(bh=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<bh&&(this._createdWorkers++,t=new A_().worker,t.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){this._resolveHash[t.uuid]&&(t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),delete this._resolveHash[t.uuid])}async _run(t,n){await this._initWorkers();const s=new Promise((o,c)=>{this._queue.push({id:t,arguments:n,resolve:o,reject:c})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const n=this._queue.pop(),s=n.id;this._resolveHash[jy]={resolve:n.resolve,reject:n.reject},t.postMessage({data:n.arguments,uuid:jy++,id:s})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Hy=new DT,OT=[".jpeg",".jpg",".png",".webp",".avif"],zT=["image/jpeg","image/png","image/webp","image/avif"];async function BT(r,t){const n=await Yt.get().fetch(r);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${n.status} ${n.statusText}`);const s=await n.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const T_={name:"loadTextures",id:"texture",extension:{type:rt.LoadParser,priority:Mi.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Ks(r,zT)||Ws(r,OT)},async load(r,t,n){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Hy.isImageBitmapSupported()?s=await Hy.loadImageBitmap(r,t):s=await BT(r,t):s=await new Promise((c,u)=>{s=Yt.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=r,s.complete?c(s):(s.onload=()=>{c(s)},s.onerror=u)});const o=new Ki({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||pf(r),...t.data});return mf(o,n,r)},unload(r){r.destroy(!0)}},UT=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let vh,Sh;function PT(r,t,n){n===void 0&&!t.startsWith("data:")?r.crossOrigin=NT(t):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")}function LT(r){return new Promise((t,n)=>{r.addEventListener("canplaythrough",s),r.addEventListener("error",o),r.load();function s(){c(),t()}function o(u){c(),n(u)}function c(){r.removeEventListener("canplaythrough",s),r.removeEventListener("error",o)}})}function NT(r,t=globalThis.location){if(r.startsWith("data:"))return"";t||(t=globalThis.location);const n=new URL(r,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}function GT(){const r=[],t=[];for(const n of UT){const s=ua.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;wl(s)&&(r.push(n),t.includes(s)||t.push(s))}return{validVideoExtensions:r,validVideoMime:t}}const jT={name:"loadVideo",id:"video",extension:{type:rt.LoadParser,name:"loadVideo"},test(r){if(!vh||!Sh){const{validVideoExtensions:s,validVideoMime:o}=GT();vh=s,Sh=o}const t=Ks(r,Sh),n=Ws(r,vh);return t||n},async load(r,t,n){const s={...ua.defaultOptions,resolution:t.data?.resolution||pf(r),alphaMode:t.data?.alphaMode||await w0(),...t.data},o=document.createElement("video"),c={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(c).forEach(d=>{const m=c[d];m!==void 0&&o.setAttribute(d,m)}),s.muted===!0&&(o.muted=!0),PT(o,r,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(r.startsWith("data:"))h=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const d=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();h=ua.MIME_TYPES[d]||`video/${d}`}return u.src=r,h&&(u.type=h),new Promise(d=>{const m=async()=>{const g=new ua({...s,resource:o});o.removeEventListener("canplay",m),t.data.preload&&await LT(o),d(mf(g,n,r))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",m),o.appendChild(u)})},unload(r){r.destroy(!0)}},M_={extension:{type:rt.ResolveParser,name:"resolveTexture"},test:T_.test,parse:r=>({resolution:parseFloat(Zs.RETINA_PREFIX.exec(r)?.[1]??"1"),format:r.split(".").pop(),src:r})},HT={extension:{type:rt.ResolveParser,priority:-2,name:"resolveJson"},test:r=>Zs.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:M_.parse};class YT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Zs,this.loader=new cT,this.cache=jt,this._backgroundLoader=new tT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){Ht("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let c=t.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const n=t.texturePreference?.resolution??1,s=typeof n=="number"?[n]:n,o=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,n){this._initialized||await this.init();const s=_l(t),o=mn(t).map(h=>{if(typeof h!="string"){const d=this.resolver.getAlias(h);return d.some(m=>!this.resolver.hasKey(m))&&this.add(h),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),c=this.resolver.resolve(o),u=await this._mapLoadToResolve(c,n);return s?u[o[0]]:u}addBundle(t,n){this.resolver.addBundle(t,n)}async loadBundle(t,n){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const o=this.resolver.resolveBundle(t),c={},u=Object.keys(o);let h=0;const d=[],m=()=>{n?.(d.reduce((y,x)=>y+x,0)/h)},g=u.map((y,x)=>{const b=o[y],S=Object.values(b),C=[...new Set(S.flat())].reduce((M,w)=>M+(w.progressSize||1),0);return d.push(0),h+=C,this._mapLoadToResolve(b,M=>{d[x]=M*C,m()}).then(M=>{c[y]=M})});return await Promise.all(g),s?c[t[0]]:c}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolveBundle(t);Object.values(n).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return jt.get(t);const n={};for(let s=0;s<t.length;s++)n[s]=jt.get(t[s]);return n}async _mapLoadToResolve(t,n){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,n);this._backgroundLoader.active=!0;const c={};return s.forEach(u=>{const h=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(m=>{c[m]=h}),jt.set(d,h)}),c}async unload(t){this._initialized||await this.init();const n=mn(t).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(n);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=mn(t);const n=this.resolver.resolveBundle(t),s=Object.keys(n).map(o=>this._unloadFromResolved(n[o]));await Promise.all(s)}async _unloadFromResolved(t){const n=Object.values(t);n.forEach(s=>{jt.remove(s.src)}),await this.loader.unload(n)}async _detectFormats(t){let n=[];t.preferredFormats&&(n=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?n=await s.add(n):t.skipDetections||(n=await s.remove(n));return n=n.filter((s,o)=>n.indexOf(s)===o),n}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(s=>s in t).forEach(s=>{n.config[s]=t[s]})})}}const oa=new YT;ye.handleByList(rt.LoadParser,oa.loader.parsers).handleByList(rt.ResolveParser,oa.resolver.parsers).handleByList(rt.CacheParser,oa.cache.parsers).handleByList(rt.DetectionParser,oa.detections);ye.add(eT,iT,nT,lT,rT,aT,oT,fT,mT,CT,MT,T_,jT,JA,WA,M_,HT);const Yy={loader:rt.LoadParser,resolver:rt.ResolveParser,cache:rt.CacheParser,detection:rt.DetectionParser};ye.handle(rt.Asset,r=>{const t=r.ref;Object.entries(Yy).filter(([n])=>!!t[n]).forEach(([n,s])=>ye.add(Object.assign(t[n],{extension:t[n].extension??s})))},r=>{const t=r.ref;Object.keys(Yy).filter(n=>!!t[n]).forEach(n=>ye.remove(t[n]))});class Sl extends b0{constructor(t){t instanceof an&&(t={context:t});const{context:n,roundPixels:s,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",n?this.context=n:(this.context=this._ownedContext=new an,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=t,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_onTouch(t){this._gcLastUsed=t,this._context._gcLastUsed=t}_callContextMethod(t,n){return this.context[t](...n),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Sl(this._context.clone()):(this._ownedContext=null,new Sl(this._context))}lineStyle(t,n,s){gt(Ut,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),n&&(o.color=n),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(t,n){gt(Ut,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t!==void 0&&(s.color=t),n!==void 0&&(s.alpha=n),this.context.fillStyle=s,this}endFill(){gt(Ut,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==an.defaultStrokeStyle.width||t.color!==an.defaultStrokeStyle.color||t.alpha!==an.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return gt(Ut,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return gt(Ut,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return gt(Ut,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return gt(Ut,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return gt(Ut,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return gt(Ut,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}ye.add(Jv,t1);const Iy=r=>{let t;const n=new Set,s=(m,g)=>{const y=typeof m=="function"?m(t):m;if(!Object.is(y,t)){const x=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(b=>b(t,x))}},o=()=>t,h={setState:s,getState:o,getInitialState:()=>d,subscribe:m=>(n.add(m),()=>n.delete(m))},d=t=r(s,o,h);return h},IT=(r=>r?Iy(r):Iy),VT=r=>r;function FT(r,t=VT){const n=na.useSyncExternalStore(r.subscribe,na.useCallback(()=>t(r.getState()),[r,t]),na.useCallback(()=>t(r.getInitialState()),[r,t]));return na.useDebugValue(n),n}const Vy=r=>{const t=IT(r),n=s=>FT(t,s);return Object.assign(n,t),n},XT=(r=>r?Vy(r):Vy),ge=[];for(let r=0;r<256;++r)ge.push((r+256).toString(16).slice(1));function qT(r,t=0){return(ge[r[t+0]]+ge[r[t+1]]+ge[r[t+2]]+ge[r[t+3]]+"-"+ge[r[t+4]]+ge[r[t+5]]+"-"+ge[r[t+6]]+ge[r[t+7]]+"-"+ge[r[t+8]]+ge[r[t+9]]+"-"+ge[r[t+10]]+ge[r[t+11]]+ge[r[t+12]]+ge[r[t+13]]+ge[r[t+14]]+ge[r[t+15]]).toLowerCase()}let Ch;const $T=new Uint8Array(16);function QT(){if(!Ch){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ch=crypto.getRandomValues.bind(crypto)}return Ch($T)}const ZT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fy={randomUUID:ZT};function KT(r,t,n){r=r||{};const s=r.random??r.rng?.()??QT();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,qT(s)}function E_(r,t,n){return Fy.randomUUID&&!r?Fy.randomUUID():KT(r)}const Pe=XT(r=>({myId:E_(),isHost:!1,username:"Player",tokens:[],map:{url:null,scale:50,offsetX:0,offsetY:0,gridType:"square",fogEnabled:!1},chat:[],turnOrder:[],setIdentity:(t,n)=>r({myId:t,isHost:n}),setUsername:t=>r({username:t}),addToken:t=>r(n=>({tokens:[...n.tokens,t]})),updateToken:(t,n)=>r(s=>({tokens:s.tokens.map(o=>o.id===t?{...o,...n}:o)})),removeToken:t=>r(n=>({tokens:n.tokens.filter(s=>s.id!==t)})),setMapBackground:t=>r(n=>({map:{...n.map,url:t}})),addChatMessage:t=>r(n=>({chat:[...n.chat,t]})),syncState:t=>r(n=>({...n,...t}))}));class WT{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return JT(t).buffer}}function JT(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r){const c=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(c,s),s+=o.byteLength}return n}function R_(r){return new tM(r).unpack()}function w_(r){const t=new eM,n=t.pack(r);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class tM{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let s=0,o="",c,u;for(;s<t;)c=n[s],c<160?(u=c,s++):(c^192)<32?(u=(c&31)<<6|n[s+1]&63,s+=2):(c^224)<16?(u=(c&15)<<12|(n[s+1]&63)<<6|n[s+2]&63,s+=3):(u=(c&7)<<18|(n[s+1]&63)<<12|(n[s+2]&63)<<6|n[s+3]&63,s+=4),o+=String.fromCodePoint(u);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let s=0;s<t;s++)n[s]=this.unpack();return n}unpack_map(t){const n={};for(let s=0;s<t;s++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,s=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(s-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),s=t>>31,o=(t>>20&2047)-1023,u=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(s===0?1:-1)*u}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class eM{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const s=this.pack_array(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const s=t;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const s=this.pack_object(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),s=n.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const s=o=>{if(o<n){const c=this.pack(t[o]);return c instanceof Promise?c.then(()=>s(o+1)):s(o+1)}};return s(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const s=Math.floor(Math.log(t)/Math.LN2),o=t/2**s-1,c=Math.floor(o*2**52),u=2**32,h=n<<31|s+1023<<20|c/u&1048575,d=c%u;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(d)}pack_object(t){const n=Object.keys(t),s=n.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const o=c=>{if(c<n.length){const u=n[c];if(t.hasOwnProperty(u)){this.pack(u);const h=this.pack(t[u]);if(h instanceof Promise)return h.then(()=>o(c+1))}return o(c+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new WT,this._textEncoder=new TextEncoder}}let k_=!0,D_=!0;function la(r,t,n){const s=r.match(t);return s&&s.length>=n&&parseFloat(s[n],10)}function Ji(r,t,n){if(!r.RTCPeerConnection)return;const s=r.RTCPeerConnection.prototype,o=s.addEventListener;s.addEventListener=function(u,h){if(u!==t)return o.apply(this,arguments);const d=m=>{const g=n(m);g&&(h.handleEvent?h.handleEvent(g):h(g))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(h,d),o.apply(this,[u,d])};const c=s.removeEventListener;s.removeEventListener=function(u,h){if(u!==t||!this._eventMap||!this._eventMap[t])return c.apply(this,arguments);if(!this._eventMap[t].has(h))return c.apply(this,arguments);const d=this._eventMap[t].get(h);return this._eventMap[t].delete(h),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,c.apply(this,[u,d])},Object.defineProperty(s,"on"+t,{get(){return this["_on"+t]},set(u){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),u&&this.addEventListener(t,this["_on"+t]=u)},enumerable:!0,configurable:!0})}function nM(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(k_=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function iM(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(D_=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function O_(){if(typeof window=="object"){if(k_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function gf(r,t){D_&&console.warn(r+" is deprecated, please use "+t+" instead.")}function sM(r){const t={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=r;if(n.userAgentData&&n.userAgentData.brands){const s=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(la(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(la(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(la(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,t._safariVersion=la(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Xy(r){return Object.prototype.toString.call(r)==="[object Object]"}function z_(r){return Xy(r)?Object.keys(r).reduce(function(t,n){const s=Xy(r[n]),o=s?z_(r[n]):r[n],c=s&&!Object.keys(o).length;return o===void 0||c?t:Object.assign(t,{[n]:o})},{}):r}function $h(r,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(s=>{s.endsWith("Id")?$h(r,r.get(t[s]),n):s.endsWith("Ids")&&t[s].forEach(o=>{$h(r,r.get(o),n)})}))}function qy(r,t,n){const s=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const c=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===t.id&&c.push(u)}),c.forEach(u=>{r.forEach(h=>{h.type===s&&h.trackId===u.id&&$h(r,h,o)})}),o}const $y=O_;function B_(r,t){const n=r&&r.navigator;if(!n.mediaDevices)return;const s=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const d={};return Object.keys(h).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const g=typeof h[m]=="object"?h[m]:{ideal:h[m]};g.exact!==void 0&&typeof g.exact=="number"&&(g.min=g.max=g.exact);const y=function(x,b){return x?x+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(g.ideal!==void 0){d.optional=d.optional||[];let x={};typeof g.ideal=="number"?(x[y("min",m)]=g.ideal,d.optional.push(x),x={},x[y("max",m)]=g.ideal,d.optional.push(x)):(x[y("",m)]=g.ideal,d.optional.push(x))}g.exact!==void 0&&typeof g.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[y("",m)]=g.exact):["min","max"].forEach(x=>{g[x]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[y(x,m)]=g[x])})}),h.advanced&&(d.optional=(d.optional||[]).concat(h.advanced)),d},o=function(h,d){if(t.version>=61)return d(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const m=function(g,y,x){y in g&&!(x in g)&&(g[x]=g[y],delete g[y])};h=JSON.parse(JSON.stringify(h)),m(h.audio,"autoGainControl","googAutoGainControl"),m(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=s(h.audio)}if(h&&typeof h.video=="object"){let m=h.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const g=t.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!g)){delete h.video.facingMode;let y;if(m.exact==="environment"||m.ideal==="environment"?y=["back","rear"]:(m.exact==="user"||m.ideal==="user")&&(y=["front"]),y)return n.mediaDevices.enumerateDevices().then(x=>{x=x.filter(S=>S.kind==="videoinput");let b=x.find(S=>y.some(A=>S.label.toLowerCase().includes(A)));return!b&&x.length&&y.includes("back")&&(b=x[x.length-1]),b&&(h.video.deviceId=m.exact?{exact:b.deviceId}:{ideal:b.deviceId}),h.video=s(h.video),$y("chrome: "+JSON.stringify(h)),d(h)})}h.video=s(h.video)}return $y("chrome: "+JSON.stringify(h)),d(h)},c=function(h){return t.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,d,m){o(h,g=>{n.webkitGetUserMedia(g,d,y=>{m&&m(c(y))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return o(d,m=>h(m).then(g=>{if(m.audio&&!g.getAudioTracks().length||m.video&&!g.getVideoTracks().length)throw g.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return g},g=>Promise.reject(c(g))))}}}function U_(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function P_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(h=>h.track&&h.track.id===o.track.id):c={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=c,u.transceiver={receiver:c},u.streams=[s.stream],this.dispatchEvent(u)}),s.stream.getTracks().forEach(o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(h=>h.track&&h.track.id===o.id):c={track:o};const u=new Event("track");u.track=o,u.receiver=c,u.transceiver={receiver:c},u.streams=[s.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ji(r,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function L_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const t=function(o,c){return{track:c,get dtmf(){return this._dtmf===void 0&&(c.kind==="audio"?this._dtmf=o.createDTMFSender(c):this._dtmf=null),this._dtmf},_pc:o}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(h,d){let m=o.apply(this,arguments);return m||(m=t(this,h),this._senders.push(m)),m};const c=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(h){c.apply(this,arguments);const d=this._senders.indexOf(h);d!==-1&&this._senders.splice(d,1)}}const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(c){this._senders=this._senders||[],n.apply(this,[c]),c.getTracks().forEach(u=>{this._senders.push(t(this,u))})};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(c){this._senders=this._senders||[],s.apply(this,[c]),c.getTracks().forEach(u=>{const h=this._senders.find(d=>d.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function N_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const n=r.RTCPeerConnection.prototype.getSenders;n&&(r.RTCPeerConnection.prototype.getSenders=function(){const c=n.apply(this,[]);return c.forEach(u=>u._pc=this),c});const s=r.RTCPeerConnection.prototype.addTrack;s&&(r.RTCPeerConnection.prototype.addTrack=function(){const c=s.apply(this,arguments);return c._pc=this,c}),r.RTCRtpSender.prototype.getStats=function(){const c=this;return this._pc.getStats().then(u=>qy(u,c.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const n=r.RTCPeerConnection.prototype.getReceivers;n&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(c=>c._pc=this),o}),Ji(r,"track",s=>(s.receiver._pc=s.srcElement,s)),r.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(c=>qy(c,o.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const s=arguments[0];let o,c,u;return this.getSenders().forEach(h=>{h.track===s&&(o?u=!0:o=h)}),this.getReceivers().forEach(h=>(h.track===s&&(c?u=!0:c=h),h.track===s)),u||o&&c?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():c?c.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function G_(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(d)===-1&&this._shimmedLocalStreams[h.id].push(d):this._shimmedLocalStreams[h.id]=[h,d],d};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(m=>{if(this.getSenders().find(y=>y.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(m=>h.indexOf(m)===-1);this._shimmedLocalStreams[u.id]=[u].concat(d)};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],s.apply(this,arguments)};const o=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const d=this._shimmedLocalStreams[h].indexOf(u);d!==-1&&this._shimmedLocalStreams[h].splice(d,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),o.apply(this,arguments)}}function j_(r,t){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&t.version>=65)return G_(r);const n=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const g=n.apply(this);return this._reverseStreams=this._reverseStreams||{},g.map(y=>this._reverseStreams[y.id])};const s=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(g){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},g.getTracks().forEach(y=>{if(this.getSenders().find(b=>b.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[g.id]){const y=new r.MediaStream(g.getTracks());this._streams[g.id]=y,this._reverseStreams[y.id]=g,g=y}s.apply(this,[g])};const o=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(g){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[g.id]||g]),delete this._reverseStreams[this._streams[g.id]?this._streams[g.id].id:g.id],delete this._streams[g.id]},r.RTCPeerConnection.prototype.addTrack=function(g,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const x=[].slice.call(arguments,1);if(x.length!==1||!x[0].getTracks().find(A=>A===g))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===g))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[y.id];if(S)S.addTrack(g),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new r.MediaStream([g]);this._streams[y.id]=A,this._reverseStreams[A.id]=y,this.addStream(A)}return this.getSenders().find(A=>A.track===g)};function c(m,g){let y=g.sdp;return Object.keys(m._reverseStreams||[]).forEach(x=>{const b=m._reverseStreams[x],S=m._streams[b.id];y=y.replace(new RegExp(S.id,"g"),b.id)}),new RTCSessionDescription({type:g.type,sdp:y})}function u(m,g){let y=g.sdp;return Object.keys(m._reverseStreams||[]).forEach(x=>{const b=m._reverseStreams[x],S=m._streams[b.id];y=y.replace(new RegExp(b.id,"g"),S.id)}),new RTCSessionDescription({type:g.type,sdp:y})}["createOffer","createAnswer"].forEach(function(m){const g=r.RTCPeerConnection.prototype[m],y={[m](){const x=arguments;return arguments.length&&typeof arguments[0]=="function"?g.apply(this,[S=>{const A=c(this,S);x[0].apply(null,[A])},S=>{x[1]&&x[1].apply(null,S)},arguments[2]]):g.apply(this,arguments).then(S=>c(this,S))}};r.RTCPeerConnection.prototype[m]=y[m]});const h=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const m=d.get.apply(this);return m.type===""?m:c(this,m)}}),r.RTCPeerConnection.prototype.removeTrack=function(g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!g._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(g._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let x;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(A=>g.track===A)&&(x=this._streams[b])}),x&&(x.getTracks().length===1?this.removeStream(this._reverseStreams[x.id]):x.removeTrack(g.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Qh(r,t){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=r.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=o[n]})}function H_(r,t){Ji(r,"negotiationneeded",n=>{const s=n.target;if(!((t.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return n})}const Qy=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:H_,shimAddTrackRemoveTrack:j_,shimAddTrackRemoveTrackWithNative:G_,shimGetSendersWithDtmf:L_,shimGetUserMedia:B_,shimMediaStream:U_,shimOnTrack:P_,shimPeerConnection:Qh,shimSenderReceiverGetStats:N_},Symbol.toStringTag,{value:"Module"}));function Y_(r,t){const n=r&&r.navigator,s=r&&r.MediaStreamTrack;if(n.getUserMedia=function(o,c,u){gf("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(c,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(u,h,d){h in u&&!(d in u)&&(u[d]=u[h],delete u[h])},c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),c(u)},s&&s.prototype.getSettings){const u=s.prototype.getSettings;s.prototype.getSettings=function(){const h=u.apply(this,arguments);return o(h,"mozAutoGainControl","autoGainControl"),o(h,"mozNoiseSuppression","noiseSuppression"),h}}if(s&&s.prototype.applyConstraints){const u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),o(h,"autoGainControl","mozAutoGainControl"),o(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function rM(r,t){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return s.video===!0?s.video={mediaSource:t}:s.video.mediaSource=t,r.navigator.mediaDevices.getUserMedia(s)})}function I_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Zh(r,t){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const c=r.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=u[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[c,u,h]=arguments;return s.apply(this,[c||null]).then(d=>{if(t.version<53&&!u)try{d.forEach(m=>{m.type=n[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;d.forEach((g,y)=>{d.set(y,Object.assign({},g,{type:n[g.type]||g.type}))})}return d}).then(u,h)}}function V_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(c=>c._pc=this),o});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function F_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s}),Ji(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function X_(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){gf("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&n.getTracks().includes(s.track)&&this.removeTrack(s)})})}function q_(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function $_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.addTransceiver;t&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const o=s.length>0;o&&s.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const c=t.apply(this,arguments);if(o){const{sender:u}=c,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=s,u.sendEncodings=s,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return c})}function Q_(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const t=r.RTCRtpSender.prototype.getParameters;t&&(r.RTCRtpSender.prototype.getParameters=function(){const s=t.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function Z_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function K_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Zy=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:$_,shimCreateAnswer:K_,shimCreateOffer:Z_,shimGetDisplayMedia:rM,shimGetParameters:Q_,shimGetUserMedia:Y_,shimOnTrack:I_,shimPeerConnection:Zh,shimRTCDataChannel:q_,shimReceiverGetStats:F_,shimRemoveStream:X_,shimSenderGetStats:V_},Symbol.toStringTag,{value:"Module"}));function W_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(o=>t.call(this,o,s)),s.getVideoTracks().forEach(o=>t.call(this,o,s))},r.RTCPeerConnection.prototype.addTrack=function(s,...o){return o&&o.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),t.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(n);if(s===-1)return;this._localStreams.splice(s,1);const o=n.getTracks();this.getSenders().forEach(c=>{o.includes(c.track)&&this.removeTrack(c)})})}}function J_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const c=new Event("addstream");c.stream=o,this.dispatchEvent(c)})})}});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(c=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(c)>=0)return;s._remoteStreams.push(c);const u=new Event("addstream");u.stream=c,s.dispatchEvent(u)})}),t.apply(s,arguments)}}}function tx(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,n=t.createOffer,s=t.createAnswer,o=t.setLocalDescription,c=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(m,g){const y=arguments.length>=2?arguments[2]:arguments[0],x=n.apply(this,[y]);return g?(x.then(m,g),Promise.resolve()):x},t.createAnswer=function(m,g){const y=arguments.length>=2?arguments[2]:arguments[0],x=s.apply(this,[y]);return g?(x.then(m,g),Promise.resolve()):x};let h=function(d,m,g){const y=o.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y};t.setLocalDescription=h,h=function(d,m,g){const y=c.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y},t.setRemoteDescription=h,h=function(d,m,g){const y=u.apply(this,[d]);return g?(y.then(m,g),Promise.resolve()):y},t.addIceCandidate=h}function ex(r){const t=r&&r.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,s=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>s(nx(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(s,o,c){t.mediaDevices.getUserMedia(s).then(o,c)}).bind(t))}function nx(r){return r&&r.video!==void 0?Object.assign({},r,{video:z_(r.video)}):r}function ix(r){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection;r.RTCPeerConnection=function(s,o){if(s&&s.iceServers){const c=[];for(let u=0;u<s.iceServers.length;u++){let h=s.iceServers[u];h.urls===void 0&&h.url?(gf("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,c.push(h)):c.push(s.iceServers[u])}s.iceServers=c}return new t(s,o)},r.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function sx(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function rx(r){const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):s.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const c=this.getTransceivers().find(u=>u.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):s.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ax(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Ky=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ax,shimCallbacksAPI:tx,shimConstraints:nx,shimCreateOfferLegacy:rx,shimGetUserMedia:ex,shimLocalStreamsAPI:W_,shimRTCIceServerUrls:ix,shimRemoteStreamsAPI:J_,shimTrackEventTransceiver:sx},Symbol.toStringTag,{value:"Module"}));var Ah={exports:{}},Wy;function aM(){return Wy||(Wy=1,(function(r){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(s=>s.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,c)=>(c>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const s=t.splitSections(n);return s&&s[0]},t.getMediaSections=function(n){const s=t.splitSections(n);return s.shift(),s},t.matchPrefix=function(n,s){return t.splitLines(n).filter(o=>o.indexOf(s)===0)},t.parseCandidate=function(n){let s;n.indexOf("a=candidate:")===0?s=n.substring(12).split(" "):s=n.substring(10).split(" ");const o={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let c=8;c<s.length;c+=2)switch(s[c]){case"raddr":o.relatedAddress=s[c+1];break;case"rport":o.relatedPort=parseInt(s[c+1],10);break;case"tcptype":o.tcpType=s[c+1];break;case"ufrag":o.ufrag=s[c+1],o.usernameFragment=s[c+1];break;default:o[s[c]]===void 0&&(o[s[c]]=s[c+1]);break}return o},t.writeCandidate=function(n){const s=[];s.push(n.foundation);const o=n.component;o==="rtp"?s.push(1):o==="rtcp"?s.push(2):s.push(o),s.push(n.protocol.toUpperCase()),s.push(n.priority),s.push(n.address||n.ip),s.push(n.port);const c=n.type;return s.push("typ"),s.push(c),c!=="host"&&n.relatedAddress&&n.relatedPort&&(s.push("raddr"),s.push(n.relatedAddress),s.push("rport"),s.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(s.push("ufrag"),s.push(n.usernameFragment||n.ufrag)),"candidate:"+s.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let s=n.substring(9).split(" ");const o={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),o.name=s[0],o.clockRate=parseInt(s[1],10),o.channels=s.length===3?parseInt(s[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let s=n.payloadType;n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+s+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const s=n.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const s={};let o;const c=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<c.length;u++)o=c[u].trim().split("="),s[o[0].trim()]=o[1];return s},t.writeFmtp=function(n){let s="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const c=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?c.push(u+"="+n.parameters[u]):c.push(u)}),s+="a=fmtp:"+o+" "+c.join(";")+`\r
`}return s},t.parseRtcpFb=function(n){const s=n.substring(n.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},t.writeRtcpFb=function(n){let s="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(c=>{s+="a=rtcp-fb:"+o+" "+c.type+(c.parameter&&c.parameter.length?" "+c.parameter:"")+`\r
`}),s},t.parseSsrcMedia=function(n){const s=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,s),10)},c=n.indexOf(":",s);return c>-1?(o.attribute=n.substring(s+1,c),o.value=n.substring(c+1)):o.attribute=n.substring(s+1),o},t.parseSsrcGroup=function(n){const s=n.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(o=>parseInt(o,10))}},t.getMid=function(n){const s=t.matchPrefix(n,"a=mid:")[0];if(s)return s.substring(6)},t.parseFingerprint=function(n){const s=n.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},t.getDtlsParameters=function(n,s){return{role:"auto",fingerprints:t.matchPrefix(n+s,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,s){let o="a=setup:"+s+`\r
`;return n.fingerprints.forEach(c=>{o+="a=fingerprint:"+c.algorithm+" "+c.value+`\r
`}),o},t.parseCryptoLine=function(n){const s=n.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const s=n.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,s){return t.matchPrefix(n+s,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,s){const o=t.matchPrefix(n+s,"a=ice-ufrag:")[0],c=t.matchPrefix(n+s,"a=ice-pwd:")[0];return o&&c?{usernameFragment:o.substring(12),password:c.substring(10)}:null},t.writeIceParameters=function(n){let s="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(s+=`a=ice-lite\r
`),s},t.parseRtpParameters=function(n){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=t.splitLines(n)[0].split(" ");s.profile=c[2];for(let h=3;h<c.length;h++){const d=c[h],m=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(m){const g=t.parseRtpMap(m),y=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(g.parameters=y.length?t.parseFmtp(y[0]):{},g.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),s.codecs.push(g),g.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(g.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(h=>{s.headerExtensions.push(t.parseExtmap(h))});const u=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return s.codecs.forEach(h=>{u.forEach(d=>{h.rtcpFeedback.find(g=>g.type===d.type&&g.parameter===d.parameter)||h.rtcpFeedback.push(d)})}),s},t.writeRtpDescription=function(n,s){let o="";o+="m="+n+" ",o+=s.codecs.length>0?"9":"0",o+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=s.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(u=>{o+=t.writeRtpMap(u),o+=t.writeFmtp(u),o+=t.writeRtcpFb(u)});let c=0;return s.codecs.forEach(u=>{u.maxptime>c&&(c=u.maxptime)}),c>0&&(o+="a=maxptime:"+c+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(u=>{o+=t.writeExtmap(u)}),o},t.parseRtpEncodingParameters=function(n){const s=[],o=t.parseRtpParameters(n),c=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,h=t.matchPrefix(n,"a=ssrc:").map(x=>t.parseSsrcMedia(x)).filter(x=>x.attribute==="cname"),d=h.length>0&&h[0].ssrc;let m;const g=t.matchPrefix(n,"a=ssrc-group:FID").map(x=>x.substring(17).split(" ").map(S=>parseInt(S,10)));g.length>0&&g[0].length>1&&g[0][0]===d&&(m=g[0][1]),o.codecs.forEach(x=>{if(x.name.toUpperCase()==="RTX"&&x.parameters.apt){let b={ssrc:d,codecPayloadType:parseInt(x.parameters.apt,10)};d&&m&&(b.rtx={ssrc:m}),s.push(b),c&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:d,mechanism:u?"red+ulpfec":"red"},s.push(b))}}),s.length===0&&d&&s.push({ssrc:d});let y=t.matchPrefix(n,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substring(5),10)*1e3*.95-2e3*8:y=void 0,s.forEach(x=>{x.maxBitrate=y})),s},t.parseRtcpParameters=function(n){const s={},o=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];o&&(s.cname=o.value,s.ssrc=o.ssrc);const c=t.matchPrefix(n,"a=rtcp-rsize");s.reducedSize=c.length>0,s.compound=c.length===0;const u=t.matchPrefix(n,"a=rtcp-mux");return s.mux=u.length>0,s},t.writeRtcpParameters=function(n){let s="";return n.reducedSize&&(s+=`a=rtcp-rsize\r
`),n.mux&&(s+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(s+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),s},t.parseMsid=function(n){let s;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return s=o[0].substring(7).split(" "),{stream:s[0],track:s[1]};const c=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(c.length>0)return s=c[0].value.split(" "),{stream:s[0],track:s[1]}},t.parseSctpDescription=function(n){const s=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let c;o.length>0&&(c=parseInt(o[0].substring(19),10)),isNaN(c)&&(c=65536);const u=t.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:s.fmt,maxMessageSize:c};const h=t.matchPrefix(n,"a=sctpmap:");if(h.length>0){const d=h[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:c}}},t.writeSctpDescription=function(n,s){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&o.push("a=max-message-size:"+s.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,s,o){let c;const u=s!==void 0?s:2;return n?c=n:c=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+c+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,s){const o=t.splitLines(n);for(let c=0;c<o.length;c++)switch(o[c]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[c].substring(2)}return s?t.getDirection(s):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const s=t.splitLines(n);for(let o=0;o<s.length;o++)if(s[o].length<2||s[o].charAt(1)!=="=")return!1;return!0},r.exports=t})(Ah)),Ah.exports}var ox=aM();const Xs=ba(ox),oM=Gv({__proto__:null,default:Xs},[ox]);function cl(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const t=r.RTCIceCandidate;r.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const o=new t(s),c=Xs.parseCandidate(s.candidate);for(const u in c)u in o||Object.defineProperty(o,u,{value:c[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(s)},r.RTCIceCandidate.prototype=t.prototype,Ji(r,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new r.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Kh(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||Ji(r,"icecandidate",t=>{if(t.candidate){const n=Xs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function ul(r,t){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const d=Xs.splitSections(h.sdp);return d.shift(),d.some(m=>{const g=Xs.parseMLine(m);return g&&g.kind==="application"&&g.protocol.indexOf("SCTP")!==-1})},s=function(h){const d=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const m=parseInt(d[1],10);return m!==m?-1:m},o=function(h){let d=65536;return t.browser==="firefox"&&(t.version<57?h===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},c=function(h,d){let m=65536;t.browser==="firefox"&&t.version===57&&(m=65535);const g=Xs.matchPrefix(h.sdp,"a=max-message-size:");return g.length>0?m=parseInt(g[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(m=2147483637),m},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=s(arguments[0]),m=o(d),g=c(arguments[0],d);let y;m===0&&g===0?y=Number.POSITIVE_INFINITY:m===0||g===0?y=Math.max(m,g):y=Math.min(m,g);const x={};Object.defineProperty(x,"maxMessageSize",{get(){return y}}),this._sctp=x}return u.apply(this,arguments)}}function hl(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function t(s,o){const c=s.send;s.send=function(){const h=arguments[0],d=h.length||h.size||h.byteLength;if(s.readyState==="open"&&o.sctp&&d>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return c.apply(s,arguments)}}const n=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},Ji(r,"datachannel",s=>(t(s.channel,s.target),s))}function Wh(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const t=r.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const s=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const c=o.target;if(c._lastConnectionState!==c.connectionState){c._lastConnectionState=c.connectionState;const u=new Event("connectionstatechange",o);c.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Jh(r,t){if(!r.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const c=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&o instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:o.type,sdp:c}):o.sdp=c}return n.apply(this,arguments)}}function fl(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function dl(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const lM=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Jh,shimAddIceCandidateNullOrEmpty:fl,shimConnectionState:Wh,shimMaxMessageSize:ul,shimParameterlessSetLocalDescription:dl,shimRTCIceCandidate:cl,shimRTCIceCandidateRelayProtocol:Kh,shimSendThrowTypeError:hl},Symbol.toStringTag,{value:"Module"}));function cM({window:r}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=O_,s=sM(r),o={browserDetails:s,commonShim:lM,extractVersion:la,disableLog:nM,disableWarnings:iM,sdp:oM};switch(s.browser){case"chrome":if(!Qy||!Qh||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(s.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=Qy,fl(r,s),dl(r),B_(r,s),U_(r),Qh(r,s),P_(r),j_(r,s),L_(r),N_(r),H_(r,s),cl(r),Kh(r),Wh(r),ul(r,s),hl(r),Jh(r,s);break;case"firefox":if(!Zy||!Zh||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=Zy,fl(r,s),dl(r),Y_(r,s),Zh(r,s),I_(r),X_(r),V_(r),F_(r),q_(r),$_(r),Q_(r),Z_(r),K_(r),cl(r),Wh(r),ul(r,s),hl(r);break;case"safari":if(!Ky||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=Ky,fl(r,s),dl(r),ix(r),rx(r),tx(r),W_(r),J_(r),sx(r),ex(r),ax(r),cl(r),Kh(r),ul(r,s),hl(r),Jh(r,s);break;default:n("Unsupported browser!");break}return o}const Jy=cM({window:typeof window>"u"?void 0:window});function ts(r,t,n,s){Object.defineProperty(r,t,{get:n,set:s,enumerable:!0,configurable:!0})}class lx{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],s=t.byteLength,o=Math.ceil(s/this.chunkedMTU);let c=0,u=0;for(;u<s;){const h=Math.min(s,u+this.chunkedMTU),d=t.slice(u,h),m={__peerData:this._dataCount,n:c,data:d,total:o};n.push(m),u=h,c++}return this._dataCount++,n}}}function uM(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let s=0;for(const o of r)n.set(o,s),s+=o.byteLength;return n}const Th=Jy.default||Jy,ea=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Th.browserDetails.browser}getVersion(){return Th.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),t=Th.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,s=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),s=!0}catch{}finally{n&&n.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},hM=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),cx=()=>Math.random().toString(36).slice(2),t0={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class fM extends lx{noop(){}blobToArrayBuffer(t,n){const s=new FileReader;return s.onload=function(o){o.target&&n(o.target.result)},s.readAsArrayBuffer(t),s}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=t0,this.browser=ea.getBrowser(),this.browserVersion=ea.getVersion(),this.pack=w_,this.unpack=R_,this.supports=(function(){const n={browser:ea.isBrowserSupported(),webRTC:ea.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let s;try{s=new RTCPeerConnection(t0),n.audioVideo=!0;let o;try{o=s.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!ea.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{s&&s.close()}return n})(),this.validateId=hM,this.randomToken=cx}}const Be=new fM,dM="PeerJS: ";class pM{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const s=[dM,...n];for(const o in s)s[o]instanceof Error&&(s[o]="("+s[o].name+") "+s[o].message);t>=3?console.log(...s):t>=2?console.warn("WARNING",...s):t>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var K=new pM,yf={},mM=Object.prototype.hasOwnProperty,Me="~";function xa(){}Object.create&&(xa.prototype=Object.create(null),new xa().__proto__||(Me=!1));function gM(r,t,n){this.fn=r,this.context=t,this.once=n||!1}function ux(r,t,n,s,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var c=new gM(n,s||r,o),u=Me?Me+t:t;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],c]:r._events[u].push(c):(r._events[u]=c,r._eventsCount++),r}function pl(r,t){--r._eventsCount===0?r._events=new xa:delete r._events[t]}function Se(){this._events=new xa,this._eventsCount=0}Se.prototype.eventNames=function(){var t=[],n,s;if(this._eventsCount===0)return t;for(s in n=this._events)mM.call(n,s)&&t.push(Me?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Se.prototype.listeners=function(t){var n=Me?Me+t:t,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var o=0,c=s.length,u=new Array(c);o<c;o++)u[o]=s[o].fn;return u};Se.prototype.listenerCount=function(t){var n=Me?Me+t:t,s=this._events[n];return s?s.fn?1:s.length:0};Se.prototype.emit=function(t,n,s,o,c,u){var h=Me?Me+t:t;if(!this._events[h])return!1;var d=this._events[h],m=arguments.length,g,y;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),m){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,s),!0;case 4:return d.fn.call(d.context,n,s,o),!0;case 5:return d.fn.call(d.context,n,s,o,c),!0;case 6:return d.fn.call(d.context,n,s,o,c,u),!0}for(y=1,g=new Array(m-1);y<m;y++)g[y-1]=arguments[y];d.fn.apply(d.context,g)}else{var x=d.length,b;for(y=0;y<x;y++)switch(d[y].once&&this.removeListener(t,d[y].fn,void 0,!0),m){case 1:d[y].fn.call(d[y].context);break;case 2:d[y].fn.call(d[y].context,n);break;case 3:d[y].fn.call(d[y].context,n,s);break;case 4:d[y].fn.call(d[y].context,n,s,o);break;default:if(!g)for(b=1,g=new Array(m-1);b<m;b++)g[b-1]=arguments[b];d[y].fn.apply(d[y].context,g)}}return!0};Se.prototype.on=function(t,n,s){return ux(this,t,n,s,!1)};Se.prototype.once=function(t,n,s){return ux(this,t,n,s,!0)};Se.prototype.removeListener=function(t,n,s,o){var c=Me?Me+t:t;if(!this._events[c])return this;if(!n)return pl(this,c),this;var u=this._events[c];if(u.fn)u.fn===n&&(!o||u.once)&&(!s||u.context===s)&&pl(this,c);else{for(var h=0,d=[],m=u.length;h<m;h++)(u[h].fn!==n||o&&!u[h].once||s&&u[h].context!==s)&&d.push(u[h]);d.length?this._events[c]=d.length===1?d[0]:d:pl(this,c)}return this};Se.prototype.removeAllListeners=function(t){var n;return t?(n=Me?Me+t:t,this._events[n]&&pl(this,n)):(this._events=new xa,this._eventsCount=0),this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.addListener=Se.prototype.on;Se.prefixed=Me;Se.EventEmitter=Se;yf=Se;var es={};ts(es,"ConnectionType",()=>Ti);ts(es,"PeerErrorType",()=>ne);ts(es,"BaseConnectionErrorType",()=>tf);ts(es,"DataConnectionErrorType",()=>_f);ts(es,"SerializationType",()=>kl);ts(es,"SocketEventType",()=>Ai);ts(es,"ServerMessageType",()=>be);var Ti=(function(r){return r.Data="data",r.Media="media",r})({}),ne=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),tf=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),_f=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),kl=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),Ai=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),be=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const hx="1.5.5";class yM extends yf.EventEmitter{constructor(t,n,s,o,c,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const h=t?"wss://":"ws://";this._baseUrl=h+n+":"+s+o+"peerjs?key="+c}start(t,n){this._id=t;const s=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+hx),this._disconnected=!1,this._socket.onmessage=o=>{let c;try{c=JSON.parse(o.data),K.log("Server message received:",c)}catch{K.log("Invalid server message",o.data);return}this.emit(Ai.Message,c)},this._socket.onclose=o=>{this._disconnected||(K.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Ai.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),K.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){K.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:be.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ai.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class fx{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ti.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const s=this.connection,o={ordered:!!t.reliable},c=n.createDataChannel(s.label,o);s._initializeDataChannel(c),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){K.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,s=this.connection.connectionId,o=this.connection.type,c=this.connection.provider;K.log("Listening for ICE candidates."),t.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(K.log(`Received ICE candidates for ${n}:`,u.candidate),c.socket.send({type:be.Candidate,payload:{candidate:u.candidate,type:o,connectionId:s},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":K.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(tf.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":K.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(tf.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":K.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},K.log("Listening for data channel"),t.ondatachannel=u=>{K.log("Received data channel");const h=u.channel;c.getConnection(n,s)._initializeDataChannel(h)},K.log("Listening for remote stream"),t.ontrack=u=>{K.log("Received remote stream");const h=u.streams[0],d=c.getConnection(n,s);if(d.type===Ti.Media){const m=d;this._addStreamToMediaConnection(h,m)}}}cleanup(){K.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let s=!1;const o=this.connection.dataChannel;o&&(s=!!o.readyState&&o.readyState!=="closed"),(n||s)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createOffer(this.connection.options.constraints);K.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),K.log("Set localDescription:",s,`for:${this.connection.peer}`);let o={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ti.Data){const c=this.connection;o={...o,label:c.label,reliable:c.reliable,serialization:c.serialization}}n.socket.send({type:be.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(ne.WebRTC,o),K.log("Failed to setLocalDescription, ",o))}}catch(s){n.emitError(ne.WebRTC,s),K.log("Failed to createOffer, ",s)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createAnswer();K.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),K.log("Set localDescription:",s,`for:${this.connection.peer}`),n.socket.send({type:be.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(ne.WebRTC,o),K.log("Failed to setLocalDescription, ",o)}}catch(s){n.emitError(ne.WebRTC,s),K.log("Failed to create answer, ",s)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const s=this.connection.peerConnection,o=this.connection.provider;K.log("Setting remote description",n);const c=this;try{await s.setRemoteDescription(n),K.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await c._makeAnswer()}catch(u){o.emitError(ne.WebRTC,u),K.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(t){K.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),K.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(ne.WebRTC,n),K.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(K.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return K.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(s=>{n.addTrack(s,t)})}_addStreamToMediaConnection(t,n){K.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class dx extends yf.EventEmitter{emitError(t,n){K.error("Error:",n),this.emit("error",new _M(`${t}`,n))}}class _M extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class px extends dx{get open(){return this._open}constructor(t,n,s){super(),this.peer=t,this.provider=n,this.options=s,this._open=!1,this.metadata=s.metadata}}class Cl extends px{static#t=this.ID_PREFIX="mc_";get type(){return Ti.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,s){super(t,n,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Cl.ID_PREFIX+Be.randomToken(),this._negotiator=new fx(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{K.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{K.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){K.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,s=t.payload;switch(t.type){case be.Answer:this._negotiator.handleSDP(n,s.sdp),this._open=!0;break;case be.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:K.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){K.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const s=this.provider._getMessages(this.connectionId);for(const o of s)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class xM{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:s,port:o,path:c,key:u}=this._options,h=new URL(`${n}://${s}:${o}${c}${u}/${t}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",hx),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){K.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Be.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Be.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw K.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Al extends px{static#t=this.ID_PREFIX="dc_";static#e=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ti.Data}constructor(t,n,s){super(t,n,s),this.connectionId=this.options.connectionId||Al.ID_PREFIX+cx(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new fx(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{K.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{K.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{K.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(_f.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case be.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case be.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:K.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class xf extends Al{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Al.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return K.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Mh extends xf{close(t){super.close(t),this._chunkedData={}}constructor(t,n,s){super(t,n,s),this.chunker=new lx,this.serialization=kl.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=R_(t),s=n.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,s=this._chunkedData[n]||{data:[],count:0,total:t.total};if(s.data[t.n]=new Uint8Array(t.data),s.count++,this._chunkedData[n]=s,s.total===s.count){delete this._chunkedData[n];const o=uM(s.data);this._handleDataMessage({data:o})}}_send(t,n){const s=w_(t);if(s instanceof Promise)return this._send_blob(s);if(!n&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);K.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const s of n)this.send(s,!0)}}class bM extends xf{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=kl.None}}class vM extends xf{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),s=n.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const s=this.encoder.encode(this.stringify(t));if(s.byteLength>=Be.chunkedMTU){this.emitError(_f.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...t){super(...t),this.serialization=kl.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class bf extends dx{static#t=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,s]of this._connections)t[n]=s;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:bM,json:vM,binary:Mh,"binary-utf8":Mh,default:Mh},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(t&&t.constructor==Object?n=t:t&&(s=t.toString()),n={debug:0,host:Be.CLOUD_HOST,port:Be.CLOUD_PORT,path:"/",key:bf.DEFAULT_KEY,token:Be.randomToken(),config:Be.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Be.CLOUD_HOST?this._options.secure=Be.isSecure():this._options.host==Be.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&K.setLogFunction(this._options.logFunction),K.logLevel=this._options.debug||0,this._api=new xM(n),this._socket=this._createServerConnection(),!Be.supports.audioVideo&&!Be.supports.data){this._delayedAbort(ne.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!Be.validateId(s)){this._delayedAbort(ne.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(ne.ServerError,o))}_createServerConnection(){const t=new yM(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ai.Message,n=>{this._handleMessage(n)}),t.on(Ai.Error,n=>{this._abort(ne.SocketError,n)}),t.on(Ai.Disconnected,()=>{this.disconnected||(this.emitError(ne.Network,"Lost connection to server."),this.disconnect())}),t.on(Ai.Close,()=>{this.disconnected||this._abort(ne.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,s=t.payload,o=t.src;switch(n){case be.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case be.Error:this._abort(ne.ServerError,s.msg);break;case be.IdTaken:this._abort(ne.UnavailableID,`ID "${this.id}" is taken`);break;case be.InvalidKey:this._abort(ne.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case be.Leave:K.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case be.Expire:this.emitError(ne.PeerUnavailable,`Could not connect to peer ${o}`);break;case be.Offer:{const c=s.connectionId;let u=this.getConnection(o,c);if(u&&(u.close(),K.warn(`Offer received for existing Connection ID:${c}`)),s.type===Ti.Media){const d=new Cl(o,this,{connectionId:c,_payload:s,metadata:s.metadata});u=d,this._addConnection(o,u),this.emit("call",d)}else if(s.type===Ti.Data){const d=new this._serializers[s.serialization](o,this,{connectionId:c,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});u=d,this._addConnection(o,u),this.emit("connection",d)}else{K.warn(`Received malformed connection type:${s.type}`);return}const h=this._getMessages(c);for(const d of h)u.handleMessage(d);break}default:{if(!s){K.warn(`You received a malformed message from ${o} of type ${n}`);return}const c=s.connectionId,u=this.getConnection(o,c);u&&u.peerConnection?u.handleMessage(t):c?this._storeMessage(c,t):K.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){K.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ne.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,s),s}call(t,n,s={}){if(this.disconnected){K.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ne.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){K.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Cl(t,this,{...s,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){K.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const s=this._connections.get(t);if(!s)return null;for(const o of s)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){K.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(K.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const s of n)s.close()}disconnect(){if(this.disconnected)return;const t=this.id;K.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)K.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)K.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(ne.ServerError,n))}}class SM{peer=null;connections=[];hostConnection=null;constructor(){}initialize(t){return new Promise((n,s)=>{this.peer=new bf(t),this.peer.on("open",o=>{console.log("My Peer ID is: "+o),n(o)}),this.peer.on("connection",o=>{this.handleConnection(o)}),this.peer.on("error",o=>{console.error(o),s(o)})})}connectToHost(t){if(!this.peer)return;const n=this.peer.connect(t);this.hostConnection=n,n.on("open",()=>{console.log("Connected to host"),n.send({type:"REQUEST_STATE"})}),n.on("data",s=>{this.handleData(s,n)})}handleConnection(t){this.connections.push(t),t.on("data",n=>{this.handleData(n,t)}),t.on("close",()=>{this.connections=this.connections.filter(n=>n!==t)})}handleData(t,n){const s=Pe.getState();switch(console.log("Received data:",t),t.type){case"SYNC_STATE":s.syncState(t.payload);break;case"REQUEST_STATE":s.isHost&&n.send({type:"SYNC_STATE",payload:{tokens:s.tokens,map:s.map,chat:s.chat}});break;case"ACTION":this.applyAction(t.action,t.payload),s.isHost&&this.broadcast({type:"ACTION",action:t.action,payload:t.payload},n.peer);break}}applyAction(t,n){const s=Pe.getState();switch(t){case"ADD_TOKEN":s.addToken(n);break;case"UPDATE_TOKEN":s.updateToken(n.id,n.data);break;case"ADD_CHAT":s.addChatMessage(n);break}}broadcast(t,n){this.connections.forEach(s=>{s.peer!==n&&s.send(t)})}sendAction(t,n){this.applyAction(t,n);const s={type:"ACTION",action:t,payload:n};this.hostConnection?this.hostConnection.send(s):this.broadcast(s)}}const Is=new SM,CM=()=>{const r=ie.useRef(null),t=ie.useRef(null),n=Pe(m=>m.map),s=Pe(m=>m.tokens),o=Pe(m=>m.myId),c=Pe(m=>m.isHost),u=ie.useRef(new Rn),h=ie.useRef(new Rn),d=ie.useRef(null);return ie.useEffect(()=>r.current?((async()=>{const g=new J0;await g.init({resizeTo:r.current,backgroundColor:1710618,antialias:!0}),r.current.appendChild(g.canvas),t.current=g,g.stage.addChild(u.current),u.current.addChild(h.current);let y=!1,x={x:0,y:0};g.canvas.addEventListener("mousedown",b=>{(b.button===1||b.button===0&&b.altKey)&&(y=!0,x={x:b.clientX,y:b.clientY})}),window.addEventListener("mouseup",()=>y=!1),window.addEventListener("mousemove",b=>{if(y){const S=b.clientX-x.x,A=b.clientY-x.y;u.current.position.x+=S,u.current.position.y+=A,x={x:b.clientX,y:b.clientY}}}),g.canvas.addEventListener("wheel",b=>{b.preventDefault();const S=1.1,A=b.deltaY<0?u.current.scale.x*S:u.current.scale.x/S;A>.1&&A<5&&u.current.scale.set(A)})})(),()=>{t.current?.destroy({removeView:!0})}):void 0,[]),ie.useEffect(()=>{(async()=>{if(!(!n.url||!t.current))try{const g=await oa.load(n.url);d.current&&u.current.removeChild(d.current);const y=new $s(g);d.current=y,u.current.addChildAt(y,0)}catch(g){console.error("Failed to load map bg",g)}})()},[n.url]),ie.useEffect(()=>{h.current.removeChildren(),s.forEach(m=>{const g=new Sl;g.circle(0,0,n.scale/2-2),g.fill(16711680),g.stroke({width:2,color:16777215}),g.position.set(m.x*n.scale+n.scale/2,m.y*n.scale+n.scale/2),g.eventMode="static",g.cursor="pointer";let y=null,x={x:0,y:0};(c||m.ownerId===o)&&(g.on("pointerdown",b=>{y=b,g.alpha=.5,x={x:g.x,y:g.y},b.stopPropagation()}),g.on("pointermove",b=>{if(y){const S=b.getLocalPosition(g.parent);g.position.set(S.x,S.y)}}),g.on("pointerup",()=>{if(y){y=null,g.alpha=1;const b=Math.floor(g.x/n.scale),S=Math.floor(g.y/n.scale);Is.sendAction("UPDATE_TOKEN",{id:m.id,data:{x:b,y:S}})}}),g.on("pointerupoutside",()=>{y=null,g.alpha=1,g.position.set(x.x,x.y)})),h.current.addChild(g)})},[s,n.scale,c,o,n.url]),it.jsx("div",{ref:r,className:"w-full h-full"})};const mx=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();const AM=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const TM=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase());const e0=r=>{const t=TM(r);return t.charAt(0).toUpperCase()+t.slice(1)};var MM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EM=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const RM=ie.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:u,...h},d)=>ie.createElement("svg",{ref:d,...MM,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:mx("lucide",o),...!c&&!EM(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,g])=>ie.createElement(m,g)),...Array.isArray(c)?c:[c]]));const gx=(r,t)=>{const n=ie.forwardRef(({className:s,...o},c)=>ie.createElement(RM,{ref:c,iconNode:t,className:mx(`lucide-${AM(e0(r))}`,`lucide-${r}`,s),...o}));return n.displayName=e0(r),n};const wM=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],kM=gx("scroll",wM);const DM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],OM=gx("send",DM),zM=r=>{const t=r.match(/(\d+)d(\d+)([+-]\d+)?/);if(!t)return null;const n=parseInt(t[1]),s=parseInt(t[2]),o=t[3]?parseInt(t[3]):0;let c=0;const u=[];for(let h=0;h<n;h++){const d=Math.floor(Math.random()*s)+1;u.push(d),c+=d}return c+=o,{total:c,rolls:u,mod:o}},BM=()=>{const[r,t]=ie.useState(""),n=Pe(m=>m.chat),s=Pe(m=>m.username),o=Pe(m=>m.myId),c=ie.useRef(null),u=()=>{c.current?.scrollIntoView({behavior:"smooth"})};ie.useEffect(u,[n]);const h=()=>{if(!r.trim())return;let m={id:E_(),senderId:o,senderName:s,timestamp:Date.now(),content:r,type:"text"};if(r.startsWith("/roll ")){const g=r.replace("/roll ","").trim(),y=zM(g);y?(m.type="roll",m.rollData={formula:g,result:y.total,details:`[${y.rolls.join(", ")}] ${y.mod?y.mod>0?"+"+y.mod:y.mod:""}`},m.content=`rolled ${g} = ${y.total}`):(m.type="system",m.content="Invalid dice formula. Use format like 1d20+5")}Is.sendAction("ADD_CHAT",m),t("")},d=m=>{m.key==="Enter"&&h()};return it.jsxs("div",{className:"flex flex-col h-full bg-gray-900 border-l border-gray-700 w-80",children:[it.jsxs("div",{className:"p-3 border-b border-gray-700 bg-gray-800 font-bold text-gray-200 flex items-center gap-2",children:[it.jsx(kM,{size:18})," Chat & Logs"]}),it.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[n.map(m=>it.jsxs("div",{className:`text-sm ${m.type==="system"?"text-yellow-400 italic":""}`,children:[it.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[it.jsx("span",{className:"font-bold text-blue-400",children:m.senderName}),it.jsx("span",{children:new Date(m.timestamp).toLocaleTimeString()})]}),m.type==="roll"?it.jsxs("div",{className:"bg-gray-800 p-2 rounded border border-gray-700",children:[it.jsx("div",{className:"font-mono text-lg font-bold text-green-400",children:m.rollData?.result}),it.jsxs("div",{className:"text-xs text-gray-400",children:[m.rollData?.formula," (",m.rollData?.details,")"]})]}):it.jsx("div",{className:"text-gray-300 break-words",children:m.content})]},m.id)),it.jsx("div",{ref:c})]}),it.jsxs("div",{className:"p-3 bg-gray-800 border-t border-gray-700 flex gap-2",children:[it.jsx("input",{className:"flex-1 bg-gray-900 border border-gray-600 rounded px-2 py-1 text-sm text-white focus:border-blue-500 outline-none",value:r,onChange:m=>t(m.target.value),onKeyDown:d,placeholder:"/roll 1d20 or message..."}),it.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-500 rounded px-3 py-1 flex items-center justify-center text-white",children:it.jsx(OM,{size:16})})]}),it.jsx("div",{className:"grid grid-cols-4 gap-1 p-2 bg-gray-800 border-t border-gray-700",children:["d4","d6","d8","d10","d12","d20","d100"].map(m=>it.jsx("button",{onClick:()=>{t(`/roll 1${m}`),h()},className:"bg-gray-700 hover:bg-gray-600 text-xs py-1 rounded text-gray-300",children:m},m))})]})},UM=()=>{const r=Pe(h=>h.tokens),t=Pe(h=>h.turnOrder),n=Pe(h=>h.isHost),[s,o]=ie.useState(0),c=t.map(h=>r.find(d=>d.id===h)).filter(Boolean),u=()=>{o(h=>(h+1)%c.length)};return c.length===0?null:it.jsxs("div",{className:"absolute top-4 left-4 bg-gray-900/90 border border-gray-700 rounded-lg p-3 text-white w-64 shadow-2xl backdrop-blur-sm z-50",children:[it.jsxs("h3",{className:"text-sm font-bold border-b border-gray-700 pb-2 mb-2 flex justify-between",children:["Initiative",n&&it.jsx("button",{onClick:u,className:"text-xs bg-blue-600 px-2 rounded hover:bg-blue-500",children:"Next"})]}),it.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:c.map((h,d)=>it.jsxs("div",{className:`flex items-center gap-2 p-2 rounded text-sm ${d===s?"bg-blue-900/50 border border-blue-500":"bg-gray-800"}`,children:[it.jsx("span",{className:"font-mono text-gray-500 text-xs",children:d+1+"."}),it.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500 border border-white flex-shrink-0"}),it.jsx("span",{className:"flex-1 truncate",children:h?.label||"Unknown"}),it.jsxs("div",{className:"text-xs font-bold text-yellow-500",children:["HP: ",h?.stats?.hp]})]},h?.id))})]})};function PM(){const[r,t]=ie.useState(""),n=Pe(u=>u.myId),s=Pe(u=>u.setIdentity);ie.useEffect(()=>{Is.initialize().then(u=>{s(u,!0)}).catch(console.error)},[]);const o=()=>{r&&(s(n,!1),Is.connectToHost(r))},c=()=>{const u={id:Date.now().toString(),x:3,y:3,size:1,image:"",label:"Hero",stats:{hp:20,maxHp:20,ac:14}};Is.sendAction("ADD_TOKEN",u)};return it.jsxs("div",{className:"flex h-screen w-screen bg-gray-900 text-white overflow-hidden font-sans",children:[it.jsxs("div",{className:"w-64 bg-gray-800 flex flex-col border-r border-gray-700 z-10 shadow-xl",children:[it.jsxs("div",{className:"p-4 border-b border-gray-700",children:[it.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent mb-4",children:"VTT RPG"}),it.jsxs("div",{className:"p-3 bg-gray-700 rounded-lg text-sm",children:[it.jsxs("div",{className:"mb-2",children:[it.jsx("span",{className:"text-gray-400",children:"My ID:"}),it.jsx("code",{className:"block mt-1 p-1 bg-black rounded select-all text-xs break-all cursor-pointer hover:bg-gray-900",title:"Click to Copy",onClick:()=>navigator.clipboard.writeText(n),children:n})]}),it.jsxs("div",{className:"flex gap-2",children:[it.jsx("input",{type:"text",placeholder:"Host ID to join...",className:"flex-1 px-2 py-1 bg-gray-900 rounded border border-gray-600 text-xs text-white",value:r,onChange:u=>t(u.target.value)}),it.jsx("button",{onClick:o,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-xs font-bold",children:"Join"})]})]})]}),it.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[it.jsx("h2",{className:"text-xs font-bold uppercase text-gray-500 mb-2",children:"Tools"}),it.jsxs("div",{className:"flex flex-col gap-2",children:[it.jsx("button",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors",children:"Upload Map"}),it.jsx("button",{className:"text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors",onClick:c,children:"Add Test Token"}),it.jsxs("div",{className:"mt-4 p-2 bg-yellow-900/30 border border-yellow-700/50 rounded text-xs text-yellow-200",children:[it.jsx("p",{children:"Debug Info:"}),it.jsxs("p",{children:["Connected: ",Is.hostConnection?"Yes":"No"]})]})]})]})]}),it.jsx("div",{className:"flex-1 relative bg-black overflow-hidden flex flex-col",children:it.jsxs("div",{className:"flex-1 relative",children:[it.jsx(CM,{}),it.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:it.jsx("div",{className:"pointer-events-auto p-4",children:it.jsx(UM,{})})})]})}),it.jsx(BM,{})]})}Zv.createRoot(document.getElementById("root")).render(it.jsx(na.StrictMode,{children:it.jsx(PM,{})}));export{re as $,Q0 as A,Ue as B,Rn as C,Yt as D,rt as E,f0 as F,Ml as G,gn as H,x0 as I,Fg as J,$s as K,fS as L,bt as M,vS as N,va as O,ve as P,Kt as Q,Ph as R,af as S,Qo as T,Oh as U,GS as V,qg as W,ah as X,$g as Y,F1 as Z,yl as _,L0 as a,I1 as a0,m0 as a1,Z0 as a2,gt as a3,Ut as a4,VS as a5,pC as a6,oC as a7,zC as a8,UC as a9,YC as aa,jC as ab,IC as ac,gl as ad,ol as ae,Hh as af,By as ag,h_ as ah,cy as ai,oy as aj,Py as ak,FA as al,jt as am,Sl as an,f1 as ao,vl as ap,p_ as aq,yn as b,FC as c,sC as d,ye as e,ly as f,eC as g,ya as h,al as i,rf as j,X0 as k,E0 as l,_n as m,H0 as n,Xh as o,OC as p,BC as q,M1 as r,HC as s,NC as t,$t as u,St as v,Ht as w,h1 as x,VC as y,ln as z};
